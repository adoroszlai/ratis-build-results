SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/home/runner/.m2/repository/org/slf4j/slf4j-log4j12/1.7.29/slf4j-log4j12-1.7.29.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/runner/.m2/repository/org/slf4j/slf4j-simple/1.7.29/slf4j-simple-1.7.29.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
2022-11-12 05:49:17,688 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2022-11-12 05:49:17,691 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2022-11-12 05:49:17,695 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2022-11-12 05:49:17,709 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2022-11-12 05:49:17,755 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-DA71E2CFFE55:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]
2022-11-12 05:49:17,755 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2022-11-12 05:49:17,756 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2022-11-12 05:49:17,756 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2022-11-12 05:49:17,756 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2022-11-12 05:49:17,756 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2022-11-12 05:49:17,756 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2022-11-12 05:49:17,759 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-DA71E2CFFE55:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:17,760 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0
2022-11-12 05:49:17,761 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0 does not exist.
2022-11-12 05:49:17,761 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0
2022-11-12 05:49:17,789 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:17,862 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:17,864 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 43529 (custom)
2022-11-12 05:49:17,864 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:17,865 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 40417 (custom)
2022-11-12 05:49:17,865 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:17,865 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 45219 (custom)
2022-11-12 05:49:17,866 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:17,868 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:17,869 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:17,870 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:17,888 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:17,895 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:17,897 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:18,082 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:18,084 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:18,085 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:18,086 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:18,087 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:18,090 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0] (custom)
2022-11-12 05:49:18,099 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-DA71E2CFFE55:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER] returns group-DA71E2CFFE55:java.util.concurrent.CompletableFuture@6ad31d04[Not completed]
2022-11-12 05:49:18,099 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-DA71E2CFFE55:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:18,099 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1
2022-11-12 05:49:18,099 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1 does not exist.
2022-11-12 05:49:18,099 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1
2022-11-12 05:49:18,100 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:18,100 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:18,100 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 41703 (custom)
2022-11-12 05:49:18,100 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:18,100 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 46499 (custom)
2022-11-12 05:49:18,101 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:18,101 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 42087 (custom)
2022-11-12 05:49:18,101 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:18,101 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:18,101 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:18,101 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:18,102 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:18,102 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:18,102 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:18,104 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:18,104 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:18,104 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:18,104 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:18,105 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:18,105 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1] (custom)
2022-11-12 05:49:18,105 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-DA71E2CFFE55:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER] returns group-DA71E2CFFE55:java.util.concurrent.CompletableFuture@6cb3a240[Not completed]
2022-11-12 05:49:18,106 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-DA71E2CFFE55:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:18,106 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2
2022-11-12 05:49:18,106 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2 does not exist.
2022-11-12 05:49:18,106 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2
2022-11-12 05:49:18,106 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:18,107 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:18,107 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 39593 (custom)
2022-11-12 05:49:18,107 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:18,107 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37245 (custom)
2022-11-12 05:49:18,107 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:18,107 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37771 (custom)
2022-11-12 05:49:18,107 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:18,108 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:18,108 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:18,108 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:18,108 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:18,113 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:18,113 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:18,114 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:18,114 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:18,115 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:18,115 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:18,115 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:18,115 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2] (custom)
2022-11-12 05:49:18,134 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-DA71E2CFFE55:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER] returns group-DA71E2CFFE55:java.util.concurrent.CompletableFuture@4d29a283[Not completed]
2022-11-12 05:49:18,138 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:18,138 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:18,140 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:18,140 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:18,140 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:18,142 [pool-2-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-DA71E2CFFE55:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:18,138 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:18,140 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:18,143 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:18,143 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:18,143 [pool-1-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-DA71E2CFFE55:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:18,143 [pool-3-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-DA71E2CFFE55:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:18,144 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:18,144 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:18,144 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:18,144 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:18,145 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:18,145 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:18,145 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:18,146 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:18,146 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:18,146 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:18,146 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:18,146 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:18,147 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:18,147 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:18,147 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:18,148 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:18,148 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:18,148 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:18,163 [pool-3-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-DA71E2CFFE55: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:18,173 [pool-1-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-DA71E2CFFE55: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:18,174 [pool-2-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-DA71E2CFFE55: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:18,180 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:18,181 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:18,180 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:18,184 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:18,184 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:18,185 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:18,187 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:18,187 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:18,188 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:18,189 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:18,188 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:18,190 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:18,217 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:18,218 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:18,217 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:18,227 [pool-3-thread-1] INFO  metrics.MetricRegistries (MetricRegistriesLoader.java:load(64)) - Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2022-11-12 05:49:18,340 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:18,341 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:18,341 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:18,341 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:18,342 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:18,342 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:18,342 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:18,344 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:18,344 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:18,345 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:18,345 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0] (custom)
2022-11-12 05:49:18,344 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:18,353 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:18,354 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0/6fcdd702-f6a2-462a-867f-da71e2cffe55 does not exist. Creating ...
2022-11-12 05:49:18,355 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:18,355 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:18,355 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:18,356 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:18,356 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:18,355 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0/6fcdd702-f6a2-462a-867f-da71e2cffe55
2022-11-12 05:49:18,365 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0/6fcdd702-f6a2-462a-867f-da71e2cffe55/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:18,365 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0/6fcdd702-f6a2-462a-867f-da71e2cffe55/current
2022-11-12 05:49:18,366 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0/6fcdd702-f6a2-462a-867f-da71e2cffe55/sm
2022-11-12 05:49:18,378 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0/6fcdd702-f6a2-462a-867f-da71e2cffe55 has been successfully formatted.
2022-11-12 05:49:18,378 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:18,382 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:18,383 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:18,388 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:18,388 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:18,390 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:18,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:18,408 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:18,419 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:18,420 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:18,423 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-DA71E2CFFE55-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0/6fcdd702-f6a2-462a-867f-da71e2cffe55
2022-11-12 05:49:18,423 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:18,423 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:18,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:18,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:18,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:18,432 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:18,432 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:18,432 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:18,434 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:18,435 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:18,435 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:18,435 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:18,436 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:18,440 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-DA71E2CFFE55-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:18,440 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-DA71E2CFFE55-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:18,446 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-DA71E2CFFE55: start as a follower, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:18,446 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-DA71E2CFFE55: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:18,448 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:18,452 [s0@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:18,452 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-DA71E2CFFE55,id=s0
2022-11-12 05:49:18,453 [s0@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:18,454 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:18,461 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:18,461 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:18,464 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2022-11-12 05:49:18,502 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 40417
2022-11-12 05:49:18,503 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 45219
2022-11-12 05:49:18,504 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 43529
2022-11-12 05:49:18,509 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:18,509 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:18,509 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1] (custom)
2022-11-12 05:49:18,509 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2022-11-12 05:49:18,509 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1/6fcdd702-f6a2-462a-867f-da71e2cffe55 does not exist. Creating ...
2022-11-12 05:49:18,511 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1/6fcdd702-f6a2-462a-867f-da71e2cffe55
2022-11-12 05:49:18,513 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1/6fcdd702-f6a2-462a-867f-da71e2cffe55/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:18,513 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1/6fcdd702-f6a2-462a-867f-da71e2cffe55/current
2022-11-12 05:49:18,513 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1/6fcdd702-f6a2-462a-867f-da71e2cffe55/sm
2022-11-12 05:49:18,514 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1/6fcdd702-f6a2-462a-867f-da71e2cffe55 has been successfully formatted.
2022-11-12 05:49:18,515 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:18,515 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:18,515 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:18,516 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:18,516 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:18,516 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:18,516 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:18,517 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:18,518 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:18,518 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:18,518 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-DA71E2CFFE55-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1/6fcdd702-f6a2-462a-867f-da71e2cffe55
2022-11-12 05:49:18,521 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:18,521 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:18,521 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:18,521 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:18,521 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:18,521 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:18,521 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:18,521 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:18,522 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:18,522 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:18,522 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:18,522 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:18,522 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:18,522 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-DA71E2CFFE55-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:18,522 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-DA71E2CFFE55-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:18,524 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-DA71E2CFFE55: start as a follower, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:18,524 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-DA71E2CFFE55: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:18,524 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:18,525 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-DA71E2CFFE55,id=s1
2022-11-12 05:49:18,525 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:18,525 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:18,525 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:18,529 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2022-11-12 05:49:18,529 [s1@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:18,530 [s1@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:18,530 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 46499
2022-11-12 05:49:18,531 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 42087
2022-11-12 05:49:18,532 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 41703
2022-11-12 05:49:18,532 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:18,532 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:18,532 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2022-11-12 05:49:18,533 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2] (custom)
2022-11-12 05:49:18,533 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2/6fcdd702-f6a2-462a-867f-da71e2cffe55 does not exist. Creating ...
2022-11-12 05:49:18,533 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2/6fcdd702-f6a2-462a-867f-da71e2cffe55
2022-11-12 05:49:18,534 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2/6fcdd702-f6a2-462a-867f-da71e2cffe55/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:18,534 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2/6fcdd702-f6a2-462a-867f-da71e2cffe55/current
2022-11-12 05:49:18,535 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2/6fcdd702-f6a2-462a-867f-da71e2cffe55/sm
2022-11-12 05:49:18,542 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2/6fcdd702-f6a2-462a-867f-da71e2cffe55 has been successfully formatted.
2022-11-12 05:49:18,542 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:18,542 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:18,543 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:18,543 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:18,543 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:18,543 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:18,543 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:18,544 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-DA71E2CFFE55-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2/6fcdd702-f6a2-462a-867f-da71e2cffe55
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:18,545 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:18,546 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:18,546 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:18,546 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:18,546 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:18,546 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:18,546 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-DA71E2CFFE55-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:18,546 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-DA71E2CFFE55-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:18,549 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-DA71E2CFFE55: start as a follower, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:18,549 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-DA71E2CFFE55: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:18,549 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:18,549 [s2@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:18,550 [s2@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:18,550 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-DA71E2CFFE55,id=s2
2022-11-12 05:49:18,550 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:18,550 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:18,550 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:18,557 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2022-11-12 05:49:18,558 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 37245
2022-11-12 05:49:18,559 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 37771
2022-11-12 05:49:18,560 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 39593
2022-11-12 05:49:18,560 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2022-11-12 05:49:18,567 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:18,569 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:18,573 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:304)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:215)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:18,733 [s2@group-DA71E2CFFE55-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-DA71E2CFFE55-FollowerState: change to CANDIDATE, lastRpcElapsedTime:183685829ns, electionTimeout:182ms
2022-11-12 05:49:18,733 [s2@group-DA71E2CFFE55-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:18,733 [s2@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-DA71E2CFFE55: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:18,735 [s1@group-DA71E2CFFE55-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-DA71E2CFFE55-FollowerState: change to CANDIDATE, lastRpcElapsedTime:210806851ns, electionTimeout:204ms
2022-11-12 05:49:18,735 [s1@group-DA71E2CFFE55-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:18,736 [s1@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-DA71E2CFFE55: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:18,737 [s1@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:18,737 [s1@group-DA71E2CFFE55-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-DA71E2CFFE55-LeaderElection1
2022-11-12 05:49:18,743 [s2@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:18,743 [s2@group-DA71E2CFFE55-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-DA71E2CFFE55-LeaderElection2
2022-11-12 05:49:18,750 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-DA71E2CFFE55-LeaderElection1 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:18,750 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-DA71E2CFFE55-LeaderElection2 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:18,750 [s0@group-DA71E2CFFE55-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-DA71E2CFFE55-FollowerState: change to CANDIDATE, lastRpcElapsedTime:303893739ns, electionTimeout:290ms
2022-11-12 05:49:18,751 [s0@group-DA71E2CFFE55-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:18,751 [s0@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-DA71E2CFFE55: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:18,751 [s0@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:18,751 [s0@group-DA71E2CFFE55-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-DA71E2CFFE55-LeaderElection3
2022-11-12 05:49:18,761 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-DA71E2CFFE55-LeaderElection3 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:18,773 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:18,773 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:18,781 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:18,784 [s0@group-DA71E2CFFE55-LeaderElection3-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2022-11-12 05:49:18,785 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:18,785 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:18,784 [s0@group-DA71E2CFFE55-LeaderElection3-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2022-11-12 05:49:18,784 [s1@group-DA71E2CFFE55-LeaderElection1-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2022-11-12 05:49:18,784 [s1@group-DA71E2CFFE55-LeaderElection1-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2022-11-12 05:49:18,789 [s2@group-DA71E2CFFE55-LeaderElection2-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2022-11-12 05:49:18,789 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:18,785 [s2@group-DA71E2CFFE55-LeaderElection2-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2022-11-12 05:49:18,976 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-DA71E2CFFE55-LeaderElection2: PRE_VOTE TIMEOUT received 0 response(s) and 0 exception(s):
2022-11-12 05:49:18,977 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-DA71E2CFFE55-LeaderElection2 PRE_VOTE round 0: result TIMEOUT
2022-11-12 05:49:18,977 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-DA71E2CFFE55-LeaderElection2 PRE_VOTE round 1: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:18,998 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:18,998 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,004 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-DA71E2CFFE55-LeaderElection1: PRE_VOTE TIMEOUT received 0 response(s) and 0 exception(s):
2022-11-12 05:49:19,004 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-DA71E2CFFE55-LeaderElection1 PRE_VOTE round 0: result TIMEOUT
2022-11-12 05:49:19,004 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-DA71E2CFFE55-LeaderElection1 PRE_VOTE round 1: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,013 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,013 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,028 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #2/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:304)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:215)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:19,057 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-DA71E2CFFE55-LeaderElection3: PRE_VOTE TIMEOUT received 0 response(s) and 0 exception(s):
2022-11-12 05:49:19,057 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-DA71E2CFFE55-LeaderElection3 PRE_VOTE round 0: result TIMEOUT
2022-11-12 05:49:19,057 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-DA71E2CFFE55-LeaderElection3 PRE_VOTE round 1: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,061 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,061 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,112 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s1, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,114 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,115 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s0, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,116 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s2, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,116 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s2, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,116 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s2, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,116 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,116 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s0, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,118 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,119 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s2, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,119 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,120 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,120 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,122 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s2<-s1#0:OK-t0. Peer's state: s1@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,124 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,128 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s1, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,129 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s0, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,130 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s0, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,130 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,131 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,131 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,131 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,130 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s2<-s1#0:OK-t0. Peer's state: s1@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,136 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s2<-s0#0:OK-t0. Peer's state: s0@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,140 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,141 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s2<-s0#0:OK-t0. Peer's state: s0@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,141 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,142 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,142 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,142 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-DA71E2CFFE55:t0, leader=null, voted=, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,146 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-DA71E2CFFE55-LeaderElection3: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:19,147 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s2#0:OK-t0
2022-11-12 05:49:19,147 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-DA71E2CFFE55-LeaderElection3 PRE_VOTE round 1: result PASSED
2022-11-12 05:49:19,147 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-DA71E2CFFE55-LeaderElection2: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:19,147 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s1#0:OK-t0
2022-11-12 05:49:19,148 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-DA71E2CFFE55-LeaderElection2 PRE_VOTE round 1: result PASSED
2022-11-12 05:49:19,149 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-DA71E2CFFE55-LeaderElection3 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,153 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,157 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,156 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-DA71E2CFFE55-LeaderElection2 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,160 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,161 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,166 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-DA71E2CFFE55: receive requestVote(ELECTION, s0, group-DA71E2CFFE55, 1, (t:0, i:0))
2022-11-12 05:49:19,166 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-DA71E2CFFE55-CANDIDATE: reject ELECTION from s0: already has voted for s2 at current term 1
2022-11-12 05:49:19,166 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-DA71E2CFFE55 replies to ELECTION vote request: s0<-s2#0:FAIL-t1. Peer's state: s2@group-DA71E2CFFE55:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,168 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s1, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,168 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,168 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-DA71E2CFFE55:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,169 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-DA71E2CFFE55: receive requestVote(PRE_VOTE, s1, group-DA71E2CFFE55, 0, (t:0, i:0))
2022-11-12 05:49:19,169 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-DA71E2CFFE55-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,170 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-DA71E2CFFE55 replies to PRE_VOTE vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-DA71E2CFFE55:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,178 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-DA71E2CFFE55: receive requestVote(ELECTION, s2, group-DA71E2CFFE55, 1, (t:0, i:0))
2022-11-12 05:49:19,178 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-DA71E2CFFE55-CANDIDATE: reject ELECTION from s2: already has voted for s0 at current term 1
2022-11-12 05:49:19,178 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-DA71E2CFFE55 replies to ELECTION vote request: s2<-s0#0:FAIL-t1. Peer's state: s0@group-DA71E2CFFE55:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,179 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-DA71E2CFFE55-LeaderElection1: PRE_VOTE DISCOVERED_A_NEW_TERM (term=1) received 1 response(s) and 0 exception(s):
2022-11-12 05:49:19,180 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s2#0:OK-t1
2022-11-12 05:49:19,180 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-DA71E2CFFE55-LeaderElection1 PRE_VOTE round 1: result DISCOVERED_A_NEW_TERM (term=1)
2022-11-12 05:49:19,181 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-DA71E2CFFE55: changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM (term=1)
2022-11-12 05:49:19,181 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-DA71E2CFFE55-LeaderElection1
2022-11-12 05:49:19,182 [s1@group-DA71E2CFFE55-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:19,183 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-DA71E2CFFE55: receive requestVote(ELECTION, s2, group-DA71E2CFFE55, 1, (t:0, i:0))
2022-11-12 05:49:19,185 [s1@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,188 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-DA71E2CFFE55-FOLLOWER: accept ELECTION from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,188 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-DA71E2CFFE55: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s2
2022-11-12 05:49:19,188 [grpc-default-executor-5] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:19,188 [grpc-default-executor-5] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:19,188 [s1@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,189 [s1@group-DA71E2CFFE55-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-DA71E2CFFE55-FollowerState was interrupted
2022-11-12 05:49:19,190 [s1@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,190 [s1@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,194 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-DA71E2CFFE55 replies to ELECTION vote request: s2<-s1#0:OK-t1. Peer's state: s1@group-DA71E2CFFE55:t1, leader=null, voted=s2, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,195 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-DA71E2CFFE55-LeaderElection2: ELECTION PASSED received 2 response(s) and 0 exception(s):
2022-11-12 05:49:19,195 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s0#0:FAIL-t1
2022-11-12 05:49:19,195 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s2<-s1#0:OK-t1
2022-11-12 05:49:19,196 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-DA71E2CFFE55-LeaderElection2 ELECTION round 0: result PASSED
2022-11-12 05:49:19,196 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-DA71E2CFFE55-LeaderElection2
2022-11-12 05:49:19,196 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-DA71E2CFFE55: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2022-11-12 05:49:19,196 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-DA71E2CFFE55: change Leader from null to s2 at term 1 for becomeLeader, leader elected after 1016ms
2022-11-12 05:49:19,200 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-DA71E2CFFE55: receive requestVote(ELECTION, s0, group-DA71E2CFFE55, 1, (t:0, i:0))
2022-11-12 05:49:19,200 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-DA71E2CFFE55-FOLLOWER: reject ELECTION from s0: already has voted for s2 at current term 1
2022-11-12 05:49:19,200 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-DA71E2CFFE55 replies to ELECTION vote request: s0<-s1#0:FAIL-t1. Peer's state: s1@group-DA71E2CFFE55:t1, leader=null, voted=s2, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,201 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:19,202 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-DA71E2CFFE55-LeaderElection3: ELECTION REJECTED received 2 response(s) and 0 exception(s):
2022-11-12 05:49:19,202 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:FAIL-t1
2022-11-12 05:49:19,202 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s0<-s2#0:FAIL-t1
2022-11-12 05:49:19,202 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-DA71E2CFFE55-LeaderElection3 ELECTION round 0: result REJECTED
2022-11-12 05:49:19,206 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-DA71E2CFFE55: changes role from CANDIDATE to FOLLOWER at term 1 for REJECTED
2022-11-12 05:49:19,206 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-DA71E2CFFE55-LeaderElection3
2022-11-12 05:49:19,206 [s0@group-DA71E2CFFE55-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:19,208 [s0@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,208 [s0@group-DA71E2CFFE55-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,210 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:19,211 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:19,213 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:19,213 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:19,214 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:19,218 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:19,219 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:19,227 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:19,227 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,227 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:19,229 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:19,235 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:19,235 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:19,235 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:19,235 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:19,237 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:19,237 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,237 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:19,237 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:19,237 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:19,237 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:19,237 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:19,237 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:19,239 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-DA71E2CFFE55-LeaderStateImpl
2022-11-12 05:49:19,253 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-DA71E2CFFE55-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:19,283 [s2@group-DA71E2CFFE55-LeaderElection2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s2@group-DA71E2CFFE55: set configuration 0: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,322 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-DA71E2CFFE55: change Leader from null to s2 at term 1 for appendEntries, leader elected after 1142ms
2022-11-12 05:49:19,325 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-DA71E2CFFE55: change Leader from null to s2 at term 1 for appendEntries, leader elected after 1145ms
2022-11-12 05:49:19,370 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s1@group-DA71E2CFFE55: set configuration 0: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,371 [s1-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-DA71E2CFFE55-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:19,372 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-DA71E2CFFE55: set configuration 0: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,372 [s0-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-DA71E2CFFE55-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:19,415 [s2@group-DA71E2CFFE55-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-DA71E2CFFE55-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s2/6fcdd702-f6a2-462a-867f-da71e2cffe55/current/log_inprogress_0
2022-11-12 05:49:19,415 [s1@group-DA71E2CFFE55-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-DA71E2CFFE55-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s1/6fcdd702-f6a2-462a-867f-da71e2cffe55/current/log_inprogress_0
2022-11-12 05:49:19,415 [s0@group-DA71E2CFFE55-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-DA71E2CFFE55-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpca966a5db/s0/6fcdd702-f6a2-462a-867f-da71e2cffe55/current/log_inprogress_0
2022-11-12 05:49:19,481 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-DA71E2CFFE55:t1, leader=s2, voted=s0, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=0: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-DA71E2CFFE55:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c-1, conf=0: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-DA71E2CFFE55:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:19,519 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:19,519 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:19,587 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-01A844ABB57B->s0: receive RaftClientReply:client-01A844ABB57B->s0@group-DA71E2CFFE55, cid=0, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-DA71E2CFFE55 is not the leader s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s0:c0, s1:c-1, s2:c0]
2022-11-12 05:49:19,609 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:19,610 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:19,628 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-01A844ABB57B->s2: receive RaftClientReply:client-01A844ABB57B->s2@group-DA71E2CFFE55, cid=0, SUCCESS, logIndex=0, commits[s2:c0, s0:c0, s1:c0]
2022-11-12 05:49:19,651 [s2@group-DA71E2CFFE55-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 1@client-01A844ABB57B
2022-11-12 05:49:19,656 [s0@group-DA71E2CFFE55-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 1@client-01A844ABB57B
2022-11-12 05:49:19,657 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-01A844ABB57B->s2: receive RaftClientReply:client-01A844ABB57B->s2@group-DA71E2CFFE55, cid=1, SUCCESS, logIndex=1, commits[s2:c1, s0:c0, s1:c0]
2022-11-12 05:49:19,659 [s1@group-DA71E2CFFE55-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 1@client-01A844ABB57B
2022-11-12 05:49:19,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2022-11-12 05:49:19,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2022-11-12 05:49:19,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2022-11-12 05:49:19,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2022-11-12 05:49:19,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2022-11-12 05:49:19,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-DA71E2CFFE55:t1, leader=s2, voted=s0, raftlog=Memoized:s0@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-DA71E2CFFE55:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-DA71E2CFFE55:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-DA71E2CFFE55-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:45219|admin:localhost:43529|client:localhost:40417|dataStream:localhost:40843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42087|admin:localhost:41703|client:localhost:46499|dataStream:localhost:38341|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:37771|admin:localhost:39593|client:localhost:37245|dataStream:localhost:39517|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:19,669 [MiniRaftCluster-2] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2022-11-12 05:49:19,669 [MiniRaftCluster-1] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2022-11-12 05:49:19,674 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-DA71E2CFFE55: shutdown
2022-11-12 05:49:19,674 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:19,674 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-DA71E2CFFE55,id=s0
2022-11-12 05:49:19,674 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:19,674 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-DA71E2CFFE55-StateMachineUpdater: set stopIndex = 1
2022-11-12 05:49:19,674 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-DA71E2CFFE55: shutdown
2022-11-12 05:49:19,674 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-DA71E2CFFE55,id=s1
2022-11-12 05:49:19,674 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-DA71E2CFFE55-FollowerState
2022-11-12 05:49:19,675 [MiniRaftCluster-3] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2022-11-12 05:49:19,675 [s0@group-DA71E2CFFE55-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-DA71E2CFFE55-FollowerState was interrupted
2022-11-12 05:49:19,675 [s1@group-DA71E2CFFE55-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-DA71E2CFFE55-FollowerState was interrupted
2022-11-12 05:49:19,676 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s0@group-DA71E2CFFE55: applyIndex: 1
2022-11-12 05:49:19,677 [s0@group-DA71E2CFFE55-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s0@group-DA71E2CFFE55-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:19,675 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:19,675 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-DA71E2CFFE55-StateMachineUpdater: set stopIndex = 1
2022-11-12 05:49:19,680 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s1@group-DA71E2CFFE55: applyIndex: 1
2022-11-12 05:49:19,680 [s1@group-DA71E2CFFE55-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s1@group-DA71E2CFFE55-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:19,681 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-DA71E2CFFE55: shutdown
2022-11-12 05:49:19,681 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-DA71E2CFFE55,id=s2
2022-11-12 05:49:19,681 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s2: shutdown s2@group-DA71E2CFFE55-LeaderStateImpl
2022-11-12 05:49:19,681 [s2@group-DA71E2CFFE55->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s2@group-DA71E2CFFE55->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:19,681 [s2-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s2@group-DA71E2CFFE55-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:19,682 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:19,683 [grpc-default-executor-5] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: s2->s0#14-t1,previous=(t:1, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:1, i:2), METADATAENTRY(c:1)
2022-11-12 05:49:19,685 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s1@group-DA71E2CFFE55-SegmentedRaftLogWorker close()
2022-11-12 05:49:19,684 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s2@group-DA71E2CFFE55->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:19,687 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s2@group-DA71E2CFFE55->s0: nextIndex: updateUnconditionally 3 -> 2
2022-11-12 05:49:19,688 [MiniRaftCluster-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s0 Close channels
2022-11-12 05:49:19,687 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s0@group-DA71E2CFFE55-SegmentedRaftLogWorker close()
2022-11-12 05:49:19,681 [s2@group-DA71E2CFFE55->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s2@group-DA71E2CFFE55->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:19,688 [MiniRaftCluster-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s1 Close channels
2022-11-12 05:49:19,690 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s2->s1#14-t1,previous=(t:1, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:1, i:2), METADATAENTRY(c:1)
2022-11-12 05:49:19,691 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s0 Close channels
2022-11-12 05:49:19,693 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s2@group-DA71E2CFFE55->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:19,693 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s2@group-DA71E2CFFE55->s1: nextIndex: updateUnconditionally 3 -> 2
2022-11-12 05:49:19,694 [MiniRaftCluster-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s2 Close channels
2022-11-12 05:49:19,695 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-DA71E2CFFE55-StateMachineUpdater: set stopIndex = 2
2022-11-12 05:49:19,696 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s1 Close channels
2022-11-12 05:49:19,696 [MiniRaftCluster-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s2 Close channels
2022-11-12 05:49:19,696 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s2@group-DA71E2CFFE55: applyIndex: 2
2022-11-12 05:49:19,696 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:19,696 [s2@group-DA71E2CFFE55-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s2@group-DA71E2CFFE55-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:19,696 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:19,700 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:19,701 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:19,701 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:19,701 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s2@group-DA71E2CFFE55-SegmentedRaftLogWorker close()
2022-11-12 05:49:19,701 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:19,702 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:19,702 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:19,702 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:19,702 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:19,703 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2022-11-12 05:49:19,703 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:19,703 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:19,704 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:19,704 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:19,705 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2022-11-12 05:49:19,705 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:19,706 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2022-11-12 05:49:19,706 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2022-11-12 05:49:19,715 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2022-11-12 05:49:19,716 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2022-11-12 05:49:19,716 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2022-11-12 05:49:19,724 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2022-11-12 05:49:19,725 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-2B46451096BD:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]
2022-11-12 05:49:19,725 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2022-11-12 05:49:19,725 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2022-11-12 05:49:19,726 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2022-11-12 05:49:19,726 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2022-11-12 05:49:19,726 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2022-11-12 05:49:19,726 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2022-11-12 05:49:19,726 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-2B46451096BD:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:19,726 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0
2022-11-12 05:49:19,726 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0 does not exist.
2022-11-12 05:49:19,726 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0
2022-11-12 05:49:19,726 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:19,726 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:19,727 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 36263 (custom)
2022-11-12 05:49:19,727 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:19,727 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 45431 (custom)
2022-11-12 05:49:19,727 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:19,727 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35341 (custom)
2022-11-12 05:49:19,727 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:19,727 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,727 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:19,727 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:19,727 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:19,727 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:19,727 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:19,729 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:19,729 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:19,729 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:19,729 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:19,729 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:19,729 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0] (custom)
2022-11-12 05:49:19,733 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-2B46451096BD:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER] returns group-2B46451096BD:java.util.concurrent.CompletableFuture@3e30e937[Not completed]
2022-11-12 05:49:19,733 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-2B46451096BD:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:19,733 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1
2022-11-12 05:49:19,733 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1 does not exist.
2022-11-12 05:49:19,733 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1
2022-11-12 05:49:19,734 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:19,734 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:19,734 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:19,734 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:19,734 [pool-6-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-2B46451096BD:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:19,734 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:19,734 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:19,734 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46593 (custom)
2022-11-12 05:49:19,734 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:19,734 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34573 (custom)
2022-11-12 05:49:19,734 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:19,734 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 42403 (custom)
2022-11-12 05:49:19,735 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:19,735 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,735 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:19,734 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:19,735 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:19,735 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:19,735 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:19,735 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:19,735 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:19,735 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:19,735 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:19,735 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:19,736 [pool-6-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-2B46451096BD: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:19,736 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:19,736 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:19,736 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:19,736 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:19,736 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:19,736 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:19,736 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:19,737 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:19,737 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:19,737 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:19,737 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1] (custom)
2022-11-12 05:49:19,739 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:19,739 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:19,739 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:19,739 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:19,739 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:19,744 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-2B46451096BD:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER] returns group-2B46451096BD:java.util.concurrent.CompletableFuture@3be9bbf[Not completed]
2022-11-12 05:49:19,745 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-2B46451096BD:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:19,745 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2
2022-11-12 05:49:19,745 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:19,745 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:19,745 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:19,745 [pool-7-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-2B46451096BD:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:19,745 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:19,745 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:19,745 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:19,745 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:19,746 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:19,746 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:19,746 [pool-7-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-2B46451096BD: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:19,746 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:19,746 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:19,746 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:19,746 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:19,746 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:19,748 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:19,748 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:19,748 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:19,748 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:19,748 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:19,745 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2 does not exist.
2022-11-12 05:49:19,750 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2
2022-11-12 05:49:19,750 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:19,750 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:19,750 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 42531 (custom)
2022-11-12 05:49:19,750 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:19,750 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 40689 (custom)
2022-11-12 05:49:19,751 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:19,751 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 33587 (custom)
2022-11-12 05:49:19,751 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:19,751 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,751 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:19,751 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:19,751 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:19,751 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:19,751 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:19,752 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:19,752 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:19,752 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:19,752 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:19,753 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:19,753 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2] (custom)
2022-11-12 05:49:19,758 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-2B46451096BD:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER] returns group-2B46451096BD:java.util.concurrent.CompletableFuture@5f5e3010[Not completed]
2022-11-12 05:49:19,758 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:19,758 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:19,758 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0] (custom)
2022-11-12 05:49:19,758 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0/0c958225-d8c1-482c-99e3-2b46451096bd does not exist. Creating ...
2022-11-12 05:49:19,759 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0/0c958225-d8c1-482c-99e3-2b46451096bd
2022-11-12 05:49:19,760 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0/0c958225-d8c1-482c-99e3-2b46451096bd/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:19,760 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0/0c958225-d8c1-482c-99e3-2b46451096bd/current
2022-11-12 05:49:19,760 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0/0c958225-d8c1-482c-99e3-2b46451096bd/sm
2022-11-12 05:49:19,761 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:19,761 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:19,761 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:19,762 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0/0c958225-d8c1-482c-99e3-2b46451096bd has been successfully formatted.
2022-11-12 05:49:19,762 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:19,762 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:19,762 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:19,762 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:19,762 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,762 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:19,762 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:19,763 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:19,763 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-2B46451096BD-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0/0c958225-d8c1-482c-99e3-2b46451096bd
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:19,764 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:19,765 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-2B46451096BD-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:19,765 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-2B46451096BD-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-2B46451096BD:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-2B46451096BD: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:19,766 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:19,772 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:19,772 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:19,772 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:19,772 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:19,772 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:19,772 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-2B46451096BD: start as a follower, conf=-1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,772 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-2B46451096BD: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:19,772 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-2B46451096BD-FollowerState
2022-11-12 05:49:19,775 [s0@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,775 [s0@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,775 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2B46451096BD,id=s0
2022-11-12 05:49:19,775 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:19,776 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:19,776 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:19,781 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2022-11-12 05:49:19,782 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 45431
2022-11-12 05:49:19,783 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 35341
2022-11-12 05:49:19,783 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 36263
2022-11-12 05:49:19,784 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2022-11-12 05:49:19,784 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:19,784 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:19,784 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1] (custom)
2022-11-12 05:49:19,785 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1/0c958225-d8c1-482c-99e3-2b46451096bd does not exist. Creating ...
2022-11-12 05:49:19,785 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1/0c958225-d8c1-482c-99e3-2b46451096bd
2022-11-12 05:49:19,787 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1/0c958225-d8c1-482c-99e3-2b46451096bd/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:19,787 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1/0c958225-d8c1-482c-99e3-2b46451096bd/current
2022-11-12 05:49:19,787 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1/0c958225-d8c1-482c-99e3-2b46451096bd/sm
2022-11-12 05:49:19,788 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1/0c958225-d8c1-482c-99e3-2b46451096bd has been successfully formatted.
2022-11-12 05:49:19,788 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:19,788 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:19,788 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:19,789 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:19,789 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,789 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:19,789 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:19,789 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-2B46451096BD-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1/0c958225-d8c1-482c-99e3-2b46451096bd
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:19,791 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:19,791 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:19,791 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-2B46451096BD-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:19,791 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-2B46451096BD-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:19,791 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-2B46451096BD: start as a follower, conf=-1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,791 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-2B46451096BD: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:19,791 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-2B46451096BD-FollowerState
2022-11-12 05:49:19,793 [s1@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,793 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2B46451096BD,id=s1
2022-11-12 05:49:19,793 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:19,793 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:19,793 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:19,793 [s1@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,801 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2022-11-12 05:49:19,802 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 34573
2022-11-12 05:49:19,802 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 42403
2022-11-12 05:49:19,803 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 46593
2022-11-12 05:49:19,806 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2022-11-12 05:49:19,806 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:19,806 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:19,806 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2] (custom)
2022-11-12 05:49:19,807 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2/0c958225-d8c1-482c-99e3-2b46451096bd does not exist. Creating ...
2022-11-12 05:49:19,807 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2/0c958225-d8c1-482c-99e3-2b46451096bd
2022-11-12 05:49:19,808 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2/0c958225-d8c1-482c-99e3-2b46451096bd/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:19,808 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2/0c958225-d8c1-482c-99e3-2b46451096bd/current
2022-11-12 05:49:19,808 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2/0c958225-d8c1-482c-99e3-2b46451096bd/sm
2022-11-12 05:49:19,809 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2/0c958225-d8c1-482c-99e3-2b46451096bd has been successfully formatted.
2022-11-12 05:49:19,810 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:19,810 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:19,810 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:19,810 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:19,810 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,810 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:19,810 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-2B46451096BD-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2/0c958225-d8c1-482c-99e3-2b46451096bd
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:19,811 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:19,812 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:19,812 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,812 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:19,812 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:19,812 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:19,812 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-2B46451096BD-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:19,812 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-2B46451096BD-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:19,815 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-2B46451096BD: start as a follower, conf=-1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,815 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-2B46451096BD: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:19,815 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-2B46451096BD-FollowerState
2022-11-12 05:49:19,815 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2B46451096BD,id=s2
2022-11-12 05:49:19,815 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:19,816 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:19,816 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:19,816 [s2@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,816 [s2@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,819 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2022-11-12 05:49:19,820 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 40689
2022-11-12 05:49:19,821 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 33587
2022-11-12 05:49:19,823 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 42531
2022-11-12 05:49:19,823 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2022-11-12 05:49:19,824 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:19,824 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:19,834 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-71102D7AD91F->s0: receive RaftClientReply:client-71102D7AD91F->s0@group-2B46451096BD, cid=2, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-2B46451096BD is not the leader, logIndex=0, commits[s0:c-1]
2022-11-12 05:49:19,939 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:19,939 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:19,950 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-71102D7AD91F->s1: receive RaftClientReply:client-71102D7AD91F->s1@group-2B46451096BD, cid=2, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s1@group-2B46451096BD is not the leader, logIndex=0, commits[s1:c-1]
2022-11-12 05:49:19,964 [s1@group-2B46451096BD-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-2B46451096BD-FollowerState: change to CANDIDATE, lastRpcElapsedTime:172495814ns, electionTimeout:163ms
2022-11-12 05:49:19,964 [s1@group-2B46451096BD-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-2B46451096BD-FollowerState
2022-11-12 05:49:19,964 [s1@group-2B46451096BD-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-2B46451096BD: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:19,964 [s1@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:19,964 [s1@group-2B46451096BD-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-2B46451096BD-LeaderElection4
2022-11-12 05:49:19,965 [s1@group-2B46451096BD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-2B46451096BD-LeaderElection4 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,966 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,966 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,966 [s1@group-2B46451096BD-LeaderElection4-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2022-11-12 05:49:19,966 [s1@group-2B46451096BD-LeaderElection4-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2022-11-12 05:49:19,976 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-2B46451096BD: receive requestVote(PRE_VOTE, s1, group-2B46451096BD, 0, (t:0, i:0))
2022-11-12 05:49:19,976 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-2B46451096BD-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,976 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-2B46451096BD replies to PRE_VOTE vote request: s1<-s2#0:OK-t0. Peer's state: s2@group-2B46451096BD:t0, leader=null, voted=, raftlog=Memoized:s2@group-2B46451096BD-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,977 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-2B46451096BD: receive requestVote(PRE_VOTE, s1, group-2B46451096BD, 0, (t:0, i:0))
2022-11-12 05:49:19,977 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-2B46451096BD-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,977 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-2B46451096BD replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-2B46451096BD:t0, leader=null, voted=, raftlog=Memoized:s0@group-2B46451096BD-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,980 [s1@group-2B46451096BD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-2B46451096BD-LeaderElection4: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:19,980 [s1@group-2B46451096BD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s2#0:OK-t0
2022-11-12 05:49:19,980 [s1@group-2B46451096BD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-2B46451096BD-LeaderElection4 PRE_VOTE round 0: result PASSED
2022-11-12 05:49:19,981 [s1@group-2B46451096BD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-2B46451096BD-LeaderElection4 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,984 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,984 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,985 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-2B46451096BD: receive requestVote(ELECTION, s1, group-2B46451096BD, 1, (t:0, i:0))
2022-11-12 05:49:19,985 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-2B46451096BD-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:19,985 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-2B46451096BD: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s1
2022-11-12 05:49:19,985 [grpc-default-executor-5] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-2B46451096BD-FollowerState
2022-11-12 05:49:19,985 [s0@group-2B46451096BD-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-2B46451096BD-FollowerState was interrupted
2022-11-12 05:49:19,985 [grpc-default-executor-5] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-2B46451096BD-FollowerState
2022-11-12 05:49:19,989 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-2B46451096BD replies to ELECTION vote request: s1<-s0#0:OK-t1. Peer's state: s0@group-2B46451096BD:t1, leader=null, voted=s1, raftlog=Memoized:s0@group-2B46451096BD-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:19,990 [s0@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:19,990 [s0@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:19,992 [s1@group-2B46451096BD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-2B46451096BD-LeaderElection4: ELECTION PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:19,992 [s1@group-2B46451096BD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:OK-t1
2022-11-12 05:49:19,992 [s1@group-2B46451096BD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-2B46451096BD-LeaderElection4 ELECTION round 0: result PASSED
2022-11-12 05:49:19,992 [s1@group-2B46451096BD-LeaderElection4] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-2B46451096BD-LeaderElection4
2022-11-12 05:49:19,992 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-2B46451096BD: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2022-11-12 05:49:19,992 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-2B46451096BD: change Leader from null to s1 at term 1 for becomeLeader, leader elected after 246ms
2022-11-12 05:49:19,992 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:19,992 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2022-11-12 05:49:19,992 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 1MB (=1048576) (custom)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:19,993 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:19,994 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:19,994 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:19,994 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:19,994 [s1@group-2B46451096BD-LeaderElection4] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:19,994 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:19,994 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:19,994 [s1@group-2B46451096BD-LeaderElection4] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:19,994 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:19,994 [s1@group-2B46451096BD-LeaderElection4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-2B46451096BD-LeaderStateImpl
2022-11-12 05:49:19,995 [s1@group-2B46451096BD-LeaderElection4] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-2B46451096BD-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:20,001 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-2B46451096BD: receive requestVote(ELECTION, s1, group-2B46451096BD, 1, (t:0, i:0))
2022-11-12 05:49:20,001 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-2B46451096BD-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:20,001 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-2B46451096BD: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s1
2022-11-12 05:49:20,001 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-2B46451096BD-FollowerState
2022-11-12 05:49:20,002 [s2@group-2B46451096BD-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-2B46451096BD-FollowerState was interrupted
2022-11-12 05:49:20,006 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-2B46451096BD-FollowerState
2022-11-12 05:49:20,007 [s2@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:20,007 [s2@group-2B46451096BD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:20,008 [s1@group-2B46451096BD-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-2B46451096BD-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s1/0c958225-d8c1-482c-99e3-2b46451096bd/current/log_inprogress_0
2022-11-12 05:49:20,009 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-2B46451096BD replies to ELECTION vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-2B46451096BD:t1, leader=null, voted=s1, raftlog=Memoized:s2@group-2B46451096BD-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:20,012 [s1@group-2B46451096BD-LeaderElection4] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s1@group-2B46451096BD: set configuration 0: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:20,021 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-2B46451096BD: change Leader from null to s1 at term 1 for appendEntries, leader elected after 284ms
2022-11-12 05:49:20,021 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-2B46451096BD: change Leader from null to s1 at term 1 for appendEntries, leader elected after 254ms
2022-11-12 05:49:20,025 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s2@group-2B46451096BD: set configuration 0: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:20,025 [s2-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-2B46451096BD-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:20,029 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-2B46451096BD: set configuration 0: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:20,029 [s0-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-2B46451096BD-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:20,041 [s2@group-2B46451096BD-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-2B46451096BD-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s2/0c958225-d8c1-482c-99e3-2b46451096bd/current/log_inprogress_0
2022-11-12 05:49:20,043 [s0@group-2B46451096BD-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-2B46451096BD-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc249ba4e4/s0/0c958225-d8c1-482c-99e3-2b46451096bd/current/log_inprogress_0
2022-11-12 05:49:20,054 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,054 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,070 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-71102D7AD91F->s0: receive RaftClientReply:client-71102D7AD91F->s0@group-2B46451096BD, cid=2, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-2B46451096BD is not the leader s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s0:c0, s1:c0, s2:c-1]
2022-11-12 05:49:20,073 [timer7] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,073 [timer7] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,081 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-71102D7AD91F->s1: receive RaftClientReply:client-71102D7AD91F->s1@group-2B46451096BD, cid=2, SUCCESS, logIndex=0, commits[s1:c0, s0:c0, s2:c0]
2022-11-12 05:49:20,087 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 3@client-71102D7AD91F
2022-11-12 05:49:20,090 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-71102D7AD91F->s1: receive RaftClientReply:client-71102D7AD91F->s1@group-2B46451096BD, cid=3, SUCCESS, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2022-11-12 05:49:20,093 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 3@client-71102D7AD91F
2022-11-12 05:49:20,093 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 3@client-71102D7AD91F
2022-11-12 05:49:20,096 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block FLUSH_STATE_MACHINE_DATA
2022-11-12 05:49:20,096 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,096 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,098 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,100 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,102 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,110 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,116 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,116 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,117 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-97200BA78707->s1: receive RaftClientReply:client-97200BA78707->s1@group-2B46451096BD, cid=4, SUCCESS, logIndex=2, commits[s1:c2, s0:c1, s2:c1]
2022-11-12 05:49:20,126 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,126 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,129 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-38BB70D5F493->s1: receive RaftClientReply:client-38BB70D5F493->s1@group-2B46451096BD, cid=6, SUCCESS, logIndex=2, commits[s1:c2, s0:c1, s2:c1]
2022-11-12 05:49:20,130 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,130 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,140 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,140 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,143 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-A4DBC5CE52A3->s1: receive RaftClientReply:client-A4DBC5CE52A3->s1@group-2B46451096BD, cid=8, SUCCESS, logIndex=2, commits[s1:c2, s0:c1, s2:c1]
2022-11-12 05:49:20,147 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,147 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,153 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,156 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,156 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-78FDC83D998E->s1: receive RaftClientReply:client-78FDC83D998E->s1@group-2B46451096BD, cid=16, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c1]
2022-11-12 05:49:20,163 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,163 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,170 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,170 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,170 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-7BA4563BFDDC->s1: receive RaftClientReply:client-7BA4563BFDDC->s1@group-2B46451096BD, cid=10, SUCCESS, logIndex=2, commits[s1:c2, s0:c1, s2:c1]
2022-11-12 05:49:20,178 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-2B71373898B7->s1: receive RaftClientReply:client-2B71373898B7->s1@group-2B46451096BD, cid=12, SUCCESS, logIndex=2, commits[s1:c2, s0:c1, s2:c1]
2022-11-12 05:49:20,202 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-4B69B2BB9E14->s1: receive RaftClientReply:client-4B69B2BB9E14->s1@group-2B46451096BD, cid=20, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2022-11-12 05:49:20,212 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-B6F83C7FB669->s1: receive RaftClientReply:client-B6F83C7FB669->s1@group-2B46451096BD, cid=18, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2022-11-12 05:49:20,221 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-4FBF6F6EA0FD->s1: receive RaftClientReply:client-4FBF6F6EA0FD->s1@group-2B46451096BD, cid=14, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2022-11-12 05:49:20,224 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-46F80499D2A0->s1: receive RaftClientReply:client-46F80499D2A0->s1@group-2B46451096BD, cid=22, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2022-11-12 05:49:20,227 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-38370832538A->s1: receive RaftClientReply:client-38370832538A->s1@group-2B46451096BD, cid=24, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2022-11-12 05:49:20,281 [grpc-default-executor-2] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=message 9
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s1@group-2B46451096BD: Failed to acquire a pending write request for RaftClientRequest:client-38370832538A->s1@group-2B46451096BD, cid=25, seq=2, RW, Message:6d6573736167652039
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:404)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:310)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:341)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s1@group-2B46451096BD: Failed to acquire a pending write request for RaftClientRequest:client-38370832538A->s1@group-2B46451096BD, cid=25, seq=2, RW, Message:6d6573736167652039
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:770)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:881)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:819)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:819)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:889)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:888)
		... 7 more
2022-11-12 05:49:20,476 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock FLUSH_STATE_MACHINE_DATA
2022-11-12 05:49:20,479 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 5@client-97200BA78707
2022-11-12 05:49:20,480 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 7@client-38BB70D5F493
2022-11-12 05:49:20,481 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 5, message 5 -> (t:1, i:5), STATEMACHINELOGENTRY, 17@client-78FDC83D998E
2022-11-12 05:49:20,481 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 6, message 1 -> (t:1, i:6), STATEMACHINELOGENTRY, 9@client-A4DBC5CE52A3
2022-11-12 05:49:20,481 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 7, message 2 -> (t:1, i:7), STATEMACHINELOGENTRY, 11@client-7BA4563BFDDC
2022-11-12 05:49:20,481 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 13@client-2B71373898B7
2022-11-12 05:49:20,482 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 9, message 7 -> (t:1, i:9), STATEMACHINELOGENTRY, 21@client-4B69B2BB9E14
2022-11-12 05:49:20,482 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 19@client-B6F83C7FB669
2022-11-12 05:49:20,482 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 11, message 4 -> (t:1, i:11), STATEMACHINELOGENTRY, 15@client-4FBF6F6EA0FD
2022-11-12 05:49:20,483 [s1@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 23@client-46F80499D2A0
2022-11-12 05:49:20,486 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-7BA4563BFDDC->s1: receive RaftClientReply:client-7BA4563BFDDC->s1@group-2B46451096BD, cid=11, SUCCESS, logIndex=7, commits[s1:c12, s0:c2, s2:c2]
2022-11-12 05:49:20,486 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-38BB70D5F493->s1: receive RaftClientReply:client-38BB70D5F493->s1@group-2B46451096BD, cid=7, SUCCESS, logIndex=4, commits[s1:c12, s0:c2, s2:c2]
2022-11-12 05:49:20,486 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-4B69B2BB9E14->s1: receive RaftClientReply:client-4B69B2BB9E14->s1@group-2B46451096BD, cid=21, SUCCESS, logIndex=9, commits[s1:c12, s0:c2, s2:c2]
2022-11-12 05:49:20,486 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-A4DBC5CE52A3->s1: receive RaftClientReply:client-A4DBC5CE52A3->s1@group-2B46451096BD, cid=9, SUCCESS, logIndex=6, commits[s1:c12, s0:c2, s2:c2]
2022-11-12 05:49:20,485 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-97200BA78707->s1: receive RaftClientReply:client-97200BA78707->s1@group-2B46451096BD, cid=5, SUCCESS, logIndex=3, commits[s1:c3, s0:c2, s2:c2]
2022-11-12 05:49:20,485 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-78FDC83D998E->s1: receive RaftClientReply:client-78FDC83D998E->s1@group-2B46451096BD, cid=17, SUCCESS, logIndex=5, commits[s1:c12, s0:c2, s2:c2]
2022-11-12 05:49:20,484 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-2B71373898B7->s1: receive RaftClientReply:client-2B71373898B7->s1@group-2B46451096BD, cid=13, SUCCESS, logIndex=8, commits[s1:c12, s0:c2, s2:c2]
2022-11-12 05:49:20,484 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 5@client-97200BA78707
2022-11-12 05:49:20,484 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-4FBF6F6EA0FD->s1: receive RaftClientReply:client-4FBF6F6EA0FD->s1@group-2B46451096BD, cid=15, SUCCESS, logIndex=11, commits[s1:c12, s0:c2, s2:c2]
2022-11-12 05:49:20,499 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 7@client-38BB70D5F493
2022-11-12 05:49:20,499 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 5, message 5 -> (t:1, i:5), STATEMACHINELOGENTRY, 17@client-78FDC83D998E
2022-11-12 05:49:20,499 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 6, message 1 -> (t:1, i:6), STATEMACHINELOGENTRY, 9@client-A4DBC5CE52A3
2022-11-12 05:49:20,500 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 7, message 2 -> (t:1, i:7), STATEMACHINELOGENTRY, 11@client-7BA4563BFDDC
2022-11-12 05:49:20,500 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 13@client-2B71373898B7
2022-11-12 05:49:20,500 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 9, message 7 -> (t:1, i:9), STATEMACHINELOGENTRY, 21@client-4B69B2BB9E14
2022-11-12 05:49:20,500 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 19@client-B6F83C7FB669
2022-11-12 05:49:20,501 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 11, message 4 -> (t:1, i:11), STATEMACHINELOGENTRY, 15@client-4FBF6F6EA0FD
2022-11-12 05:49:20,502 [s2@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 23@client-46F80499D2A0
2022-11-12 05:49:20,502 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-B6F83C7FB669->s1: receive RaftClientReply:client-B6F83C7FB669->s1@group-2B46451096BD, cid=19, SUCCESS, logIndex=10, commits[s1:c12, s0:c2, s2:c2]
2022-11-12 05:49:20,503 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-46F80499D2A0->s1: receive RaftClientReply:client-46F80499D2A0->s1@group-2B46451096BD, cid=23, SUCCESS, logIndex=12, commits[s1:c12, s0:c2, s2:c2]
2022-11-12 05:49:20,504 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 5@client-97200BA78707
2022-11-12 05:49:20,505 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 7@client-38BB70D5F493
2022-11-12 05:49:20,505 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, message 5 -> (t:1, i:5), STATEMACHINELOGENTRY, 17@client-78FDC83D998E
2022-11-12 05:49:20,505 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 6, message 1 -> (t:1, i:6), STATEMACHINELOGENTRY, 9@client-A4DBC5CE52A3
2022-11-12 05:49:20,506 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, message 2 -> (t:1, i:7), STATEMACHINELOGENTRY, 11@client-7BA4563BFDDC
2022-11-12 05:49:20,506 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 13@client-2B71373898B7
2022-11-12 05:49:20,506 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, message 7 -> (t:1, i:9), STATEMACHINELOGENTRY, 21@client-4B69B2BB9E14
2022-11-12 05:49:20,506 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 19@client-B6F83C7FB669
2022-11-12 05:49:20,506 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, message 4 -> (t:1, i:11), STATEMACHINELOGENTRY, 15@client-4FBF6F6EA0FD
2022-11-12 05:49:20,507 [s0@group-2B46451096BD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 23@client-46F80499D2A0
2022-11-12 05:49:20,512 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,512 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,519 [grpc-default-executor-9] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-723C9633AC10->s1: receive RaftClientReply:client-723C9633AC10->s1@group-2B46451096BD, cid=26, SUCCESS, logIndex=14, commits[s1:c14, s0:c12, s2:c12]
2022-11-12 05:49:20,537 [grpc-default-executor-9] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=1025kb (=1049600)-message
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s1@group-2B46451096BD: Failed to acquire a pending write request for RaftClientRequest:client-723C9633AC10->s1@group-2B46451096BD, cid=27, seq=2, RW, Message:86df3834628cbf93f00b...(size=1049600)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:404)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:310)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:341)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s1@group-2B46451096BD: Failed to acquire a pending write request for RaftClientRequest:client-723C9633AC10->s1@group-2B46451096BD, cid=27, seq=2, RW, Message:86df3834628cbf93f00b...(size=1049600)
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:770)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:881)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:819)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:819)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:889)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:888)
		... 7 more
2022-11-12 05:49:20,848 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2022-11-12 05:49:20,848 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2022-11-12 05:49:20,848 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2022-11-12 05:49:20,848 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2022-11-12 05:49:20,848 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2022-11-12 05:49:20,848 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-2B46451096BD:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-2B46451096BD-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-2B46451096BD:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-2B46451096BD-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-2B46451096BD:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-2B46451096BD-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:35341|admin:localhost:36263|client:localhost:45431|dataStream:localhost:36127|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42403|admin:localhost:46593|client:localhost:34573|dataStream:localhost:35107|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33587|admin:localhost:42531|client:localhost:40689|dataStream:localhost:41435|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:20,849 [MiniRaftCluster-4] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2022-11-12 05:49:20,850 [MiniRaftCluster-5] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2022-11-12 05:49:20,853 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:20,853 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-2B46451096BD: shutdown
2022-11-12 05:49:20,854 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2B46451096BD,id=s0
2022-11-12 05:49:20,854 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-2B46451096BD-FollowerState
2022-11-12 05:49:20,854 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-2B46451096BD-StateMachineUpdater: set stopIndex = 14
2022-11-12 05:49:20,854 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:20,854 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:20,854 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:20,856 [s0@group-2B46451096BD-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-2B46451096BD-FollowerState was interrupted
2022-11-12 05:49:20,856 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s0@group-2B46451096BD: applyIndex: 14
2022-11-12 05:49:20,856 [s0@group-2B46451096BD-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s0@group-2B46451096BD-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:20,857 [grpc-default-executor-8] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - s0: installSnapshot onError, lastRequest: s1->s0#25-t1,previous=(t:1, i:12),leaderCommit=12,initializing? true,entries: size=2, first=(t:1, i:13), METADATAENTRY(c:3): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2022-11-12 05:49:20,857 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-2B46451096BD: shutdown
2022-11-12 05:49:20,857 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2B46451096BD,id=s1
2022-11-12 05:49:20,857 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s1: shutdown s1@group-2B46451096BD-LeaderStateImpl
2022-11-12 05:49:20,857 [s1@group-2B46451096BD->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s1@group-2B46451096BD->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:20,857 [s1@group-2B46451096BD->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s1@group-2B46451096BD->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:20,858 [MiniRaftCluster-6] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2022-11-12 05:49:20,858 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:20,858 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:20,858 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s1->s2#28-t1,previous=(t:1, i:13),leaderCommit=12,initializing? true,entries: size=1, first=(t:1, i:14), METADATAENTRY(c:12)
2022-11-12 05:49:20,858 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:20,859 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-2B46451096BD->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:20,860 [grpc-default-executor-6] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(402)) - s1@group-2B46451096BD->s0-GrpcLogAppender is already stopped
2022-11-12 05:49:20,857 [s1-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s1@group-2B46451096BD-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:20,859 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-2B46451096BD->s2: nextIndex: updateUnconditionally 15 -> 14
2022-11-12 05:49:20,861 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-2B46451096BD: shutdown
2022-11-12 05:49:20,861 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-2B46451096BD-StateMachineUpdater: set stopIndex = 14
2022-11-12 05:49:20,862 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s1@group-2B46451096BD: applyIndex: 14
2022-11-12 05:49:20,862 [s1@group-2B46451096BD-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s1@group-2B46451096BD-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:20,861 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s0@group-2B46451096BD-SegmentedRaftLogWorker close()
2022-11-12 05:49:20,861 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s0 Close channels
2022-11-12 05:49:20,862 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:20,862 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2B46451096BD,id=s2
2022-11-12 05:49:20,863 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-2B46451096BD-FollowerState
2022-11-12 05:49:20,863 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-2B46451096BD-StateMachineUpdater: set stopIndex = 14
2022-11-12 05:49:20,863 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2022-11-12 05:49:20,863 [s2@group-2B46451096BD-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-2B46451096BD-FollowerState was interrupted
2022-11-12 05:49:20,863 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s2@group-2B46451096BD: applyIndex: 14
2022-11-12 05:49:20,863 [s2@group-2B46451096BD-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s2@group-2B46451096BD-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:20,864 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s2 Close channels
2022-11-12 05:49:20,866 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:20,866 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:20,866 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s1@group-2B46451096BD-SegmentedRaftLogWorker close()
2022-11-12 05:49:20,866 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s2@group-2B46451096BD-SegmentedRaftLogWorker close()
2022-11-12 05:49:20,867 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:20,867 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:20,867 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:20,867 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:20,868 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:20,868 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:20,868 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:20,868 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2022-11-12 05:49:20,869 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:20,872 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2022-11-12 05:49:20,873 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2022-11-12 05:49:20,873 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2022-11-12 05:49:20,873 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2022-11-12 05:49:20,873 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2022-11-12 05:49:20,877 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2022-11-12 05:49:20,877 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-472CBA4A6D9D:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]
2022-11-12 05:49:20,877 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2022-11-12 05:49:20,877 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2022-11-12 05:49:20,877 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2022-11-12 05:49:20,877 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2022-11-12 05:49:20,877 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2022-11-12 05:49:20,877 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2022-11-12 05:49:20,877 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-472CBA4A6D9D:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:20,877 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0
2022-11-12 05:49:20,878 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0 does not exist.
2022-11-12 05:49:20,878 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0
2022-11-12 05:49:20,878 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:20,878 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:20,878 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 42781 (custom)
2022-11-12 05:49:20,878 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:20,878 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34753 (custom)
2022-11-12 05:49:20,878 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:20,878 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37427 (custom)
2022-11-12 05:49:20,878 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:20,878 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:20,878 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:20,879 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:20,879 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:20,879 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:20,879 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:20,880 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:20,880 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:20,880 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:20,880 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:20,880 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:20,880 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0] (custom)
2022-11-12 05:49:20,881 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-472CBA4A6D9D:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER] returns group-472CBA4A6D9D:java.util.concurrent.CompletableFuture@60095656[Not completed]
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-472CBA4A6D9D:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-472CBA4A6D9D: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:20,881 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:20,882 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:20,882 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:20,882 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:20,882 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:20,883 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:20,883 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:20,883 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:20,883 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:20,883 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:20,883 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:20,883 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:20,883 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0] (custom)
2022-11-12 05:49:20,884 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0/f2a1e4c2-10c1-44ad-aaa0-472cba4a6d9d does not exist. Creating ...
2022-11-12 05:49:20,884 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0/f2a1e4c2-10c1-44ad-aaa0-472cba4a6d9d
2022-11-12 05:49:20,885 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0/f2a1e4c2-10c1-44ad-aaa0-472cba4a6d9d/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:20,886 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0/f2a1e4c2-10c1-44ad-aaa0-472cba4a6d9d/current
2022-11-12 05:49:20,886 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0/f2a1e4c2-10c1-44ad-aaa0-472cba4a6d9d/sm
2022-11-12 05:49:20,887 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0/f2a1e4c2-10c1-44ad-aaa0-472cba4a6d9d has been successfully formatted.
2022-11-12 05:49:20,887 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:20,887 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:20,887 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:20,887 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:20,887 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:20,887 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:20,887 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-472CBA4A6D9D-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0/f2a1e4c2-10c1-44ad-aaa0-472cba4a6d9d
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:20,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:20,889 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:20,889 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:20,889 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:20,889 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:20,889 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:20,889 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-472CBA4A6D9D-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:20,889 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-472CBA4A6D9D-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:20,889 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-472CBA4A6D9D: start as a follower, conf=-1: peers:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:20,889 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-472CBA4A6D9D: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:20,889 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-472CBA4A6D9D-FollowerState
2022-11-12 05:49:20,893 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-472CBA4A6D9D,id=s0
2022-11-12 05:49:20,893 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:20,893 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:20,893 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:20,893 [s0@group-472CBA4A6D9D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:20,893 [s0@group-472CBA4A6D9D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:20,893 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2022-11-12 05:49:20,897 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 34753
2022-11-12 05:49:20,899 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 37427
2022-11-12 05:49:20,899 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 42781
2022-11-12 05:49:20,905 [JvmPauseMonitor6] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2022-11-12 05:49:20,906 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:20,906 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-472CBA4A6D9D:t0, leader=null, voted=, raftlog=Memoized:s0@group-472CBA4A6D9D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:20,907 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-472CBA4A6D9D:t0, leader=null, voted=, raftlog=Memoized:s0@group-472CBA4A6D9D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-472CBA4A6D9D:t0, leader=null, voted=, raftlog=Memoized:s0@group-472CBA4A6D9D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:147)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:21,066 [s0@group-472CBA4A6D9D-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-472CBA4A6D9D-FollowerState: change to CANDIDATE, lastRpcElapsedTime:176039982ns, electionTimeout:172ms
2022-11-12 05:49:21,066 [s0@group-472CBA4A6D9D-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-472CBA4A6D9D-FollowerState
2022-11-12 05:49:21,066 [s0@group-472CBA4A6D9D-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-472CBA4A6D9D: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:21,066 [s0@group-472CBA4A6D9D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:21,066 [s0@group-472CBA4A6D9D-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-472CBA4A6D9D-LeaderElection5
2022-11-12 05:49:21,067 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-472CBA4A6D9D-LeaderElection5 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:21,067 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-472CBA4A6D9D-LeaderElection5 PRE_VOTE round 0: result PASSED (term=0)
2022-11-12 05:49:21,068 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-472CBA4A6D9D-LeaderElection5 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-472CBA4A6D9D-LeaderElection5 ELECTION round 0: result PASSED (term=1)
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-472CBA4A6D9D-LeaderElection5
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-472CBA4A6D9D: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-472CBA4A6D9D: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 187ms
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:21,069 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:21,070 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:21,070 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-472CBA4A6D9D-LeaderStateImpl
2022-11-12 05:49:21,070 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-472CBA4A6D9D-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:21,074 [s0@group-472CBA4A6D9D-LeaderElection5] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-472CBA4A6D9D: set configuration 0: peers:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:21,084 [s0@group-472CBA4A6D9D-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-472CBA4A6D9D-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc11755a7d/s0/f2a1e4c2-10c1-44ad-aaa0-472cba4a6d9d/current/log_inprogress_0
2022-11-12 05:49:21,357 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-472CBA4A6D9D:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-472CBA4A6D9D-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:21,358 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:21,358 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 42781 (custom)
2022-11-12 05:49:21,358 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:21,358 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34753 (custom)
2022-11-12 05:49:21,358 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:21,358 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37427 (custom)
2022-11-12 05:49:21,358 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:21,358 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:21,358 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:21,358 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:21,358 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:21,358 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:21,358 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:21,360 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'appendEntries'
2022-11-12 05:49:21,360 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "appendEntries" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking appendEntries call is not supported
	at org.apache.ratis.grpc.server.GrpcService.appendEntries(GrpcService.java:363)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$1(TestRaftServerWithGrpc.java:155)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:154)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:147)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:21,361 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'installSnapshot'
2022-11-12 05:49:21,361 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "installSnapshot" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking installSnapshot call is not supported
	at org.apache.ratis.grpc.server.GrpcService.installSnapshot(GrpcService.java:369)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$2(TestRaftServerWithGrpc.java:159)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:158)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:147)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:21,361 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2022-11-12 05:49:21,361 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2022-11-12 05:49:21,361 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2022-11-12 05:49:21,361 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2022-11-12 05:49:21,361 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2022-11-12 05:49:21,361 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-472CBA4A6D9D:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-472CBA4A6D9D-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37427|admin:localhost:42781|client:localhost:34753|dataStream:localhost:32821|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:21,362 [MiniRaftCluster-7] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2022-11-12 05:49:21,362 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:21,362 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-472CBA4A6D9D: shutdown
2022-11-12 05:49:21,363 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-472CBA4A6D9D,id=s0
2022-11-12 05:49:21,363 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-472CBA4A6D9D-LeaderStateImpl
2022-11-12 05:49:21,363 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-472CBA4A6D9D-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:21,363 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-472CBA4A6D9D-StateMachineUpdater: set stopIndex = 0
2022-11-12 05:49:21,364 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s0@group-472CBA4A6D9D: applyIndex: 0
2022-11-12 05:49:21,364 [s0@group-472CBA4A6D9D-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s0@group-472CBA4A6D9D-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:21,364 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:21,364 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:21,365 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s0@group-472CBA4A6D9D-SegmentedRaftLogWorker close()
2022-11-12 05:49:21,365 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:21,365 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:21,366 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:21,367 [JvmPauseMonitor6] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2022-11-12 05:49:21,367 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2022-11-12 05:49:21,367 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2022-11-12 05:49:21,367 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2022-11-12 05:49:21,368 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2022-11-12 05:49:21,368 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2022-11-12 05:49:21,369 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-FA24D7203F79:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]
2022-11-12 05:49:21,369 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2022-11-12 05:49:21,369 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2022-11-12 05:49:21,369 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2022-11-12 05:49:21,369 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2022-11-12 05:49:21,369 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2022-11-12 05:49:21,369 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2022-11-12 05:49:21,369 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-FA24D7203F79:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:21,369 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0
2022-11-12 05:49:21,369 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0 does not exist.
2022-11-12 05:49:21,370 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0
2022-11-12 05:49:21,370 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:21,370 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:21,370 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 34869 (custom)
2022-11-12 05:49:21,370 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:21,370 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 38587 (custom)
2022-11-12 05:49:21,370 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:21,370 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37231 (custom)
2022-11-12 05:49:21,370 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:21,371 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:21,371 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:21,371 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:21,371 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:21,371 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:21,371 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:21,372 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:21,372 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:21,372 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:21,372 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:21,372 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:21,372 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0] (custom)
2022-11-12 05:49:21,373 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:21,373 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:21,373 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:21,373 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-FA24D7203F79:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER] returns group-FA24D7203F79:java.util.concurrent.CompletableFuture@742deba0[Not completed]
2022-11-12 05:49:21,373 [pool-10-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-FA24D7203F79:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:21,373 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:21,373 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:21,374 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:21,374 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:21,374 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:21,374 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:21,374 [pool-10-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-FA24D7203F79: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:21,374 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:21,374 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:21,374 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:21,374 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:21,374 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:21,375 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:21,375 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:21,375 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:21,375 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:21,375 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:21,375 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:21,375 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:21,375 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0] (custom)
2022-11-12 05:49:21,376 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79 does not exist. Creating ...
2022-11-12 05:49:21,376 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79
2022-11-12 05:49:21,377 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:21,377 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79/current
2022-11-12 05:49:21,377 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79/sm
2022-11-12 05:49:21,378 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79 has been successfully formatted.
2022-11-12 05:49:21,379 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:21,379 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:21,379 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:21,379 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:21,379 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:21,379 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:21,379 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-FA24D7203F79-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:21,380 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:21,381 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-FA24D7203F79-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:21,381 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-FA24D7203F79-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:21,381 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-FA24D7203F79: start as a follower, conf=-1: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:21,381 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-FA24D7203F79: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:21,381 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-FA24D7203F79-FollowerState
2022-11-12 05:49:21,382 [s0@group-FA24D7203F79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:21,382 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-FA24D7203F79,id=s0
2022-11-12 05:49:21,382 [s0@group-FA24D7203F79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:21,382 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:21,382 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:21,382 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:21,382 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2022-11-12 05:49:21,383 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 38587
2022-11-12 05:49:21,384 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 37231
2022-11-12 05:49:21,384 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 34869
2022-11-12 05:49:21,384 [JvmPauseMonitor7] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2022-11-12 05:49:21,384 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:21,385 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-FA24D7203F79:t0, leader=null, voted=, raftlog=Memoized:s0@group-FA24D7203F79-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:21,385 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-FA24D7203F79:t0, leader=null, voted=, raftlog=Memoized:s0@group-FA24D7203F79-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-FA24D7203F79:t0, leader=null, voted=, raftlog=Memoized:s0@group-FA24D7203F79-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestServerRestartOnException(TestRaftServerWithGrpc.java:117)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testServerRestartOnException(TestRaftServerWithGrpc.java:100)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:21,577 [s0@group-FA24D7203F79-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-FA24D7203F79-FollowerState: change to CANDIDATE, lastRpcElapsedTime:195734961ns, electionTimeout:195ms
2022-11-12 05:49:21,577 [s0@group-FA24D7203F79-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-FA24D7203F79-FollowerState
2022-11-12 05:49:21,577 [s0@group-FA24D7203F79-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-FA24D7203F79: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:21,578 [s0@group-FA24D7203F79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:21,578 [s0@group-FA24D7203F79-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-FA24D7203F79-LeaderElection6
2022-11-12 05:49:21,582 [s0@group-FA24D7203F79-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-FA24D7203F79-LeaderElection6 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:21,582 [s0@group-FA24D7203F79-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-FA24D7203F79-LeaderElection6 PRE_VOTE round 0: result PASSED (term=0)
2022-11-12 05:49:21,583 [s0@group-FA24D7203F79-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-FA24D7203F79-LeaderElection6 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:21,583 [s0@group-FA24D7203F79-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-FA24D7203F79-LeaderElection6 ELECTION round 0: result PASSED (term=1)
2022-11-12 05:49:21,583 [s0@group-FA24D7203F79-LeaderElection6] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-FA24D7203F79-LeaderElection6
2022-11-12 05:49:21,583 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-FA24D7203F79: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2022-11-12 05:49:21,583 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-FA24D7203F79: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 209ms
2022-11-12 05:49:21,583 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:21,584 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:21,584 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2022-11-12 05:49:21,584 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:21,584 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:21,584 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:21,584 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:21,584 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:21,584 [s0@group-FA24D7203F79-LeaderElection6] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-FA24D7203F79-LeaderStateImpl
2022-11-12 05:49:21,585 [s0@group-FA24D7203F79-LeaderElection6] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-FA24D7203F79-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:21,589 [s0@group-FA24D7203F79-LeaderElection6] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-FA24D7203F79: set configuration 0: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:21,595 [s0@group-FA24D7203F79-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-FA24D7203F79-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79/current/log_inprogress_0
2022-11-12 05:49:21,835 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-FA24D7203F79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-FA24D7203F79-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:21,838 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:21,838 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:21,838 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 34869 (custom)
2022-11-12 05:49:21,838 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:21,839 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 38587 (custom)
2022-11-12 05:49:21,839 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:21,839 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37231 (custom)
2022-11-12 05:49:21,839 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:21,839 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:21,839 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:21,839 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:21,839 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:21,839 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:21,839 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:21,840 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:21,840 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:21,840 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:21,840 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:21,840 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:21,841 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0] (custom)
2022-11-12 05:49:21,841 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(254)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79
2022-11-12 05:49:21,841 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-FA24D7203F79:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER] returns group-FA24D7203F79:java.util.concurrent.CompletableFuture@146d3752[Not completed]
2022-11-12 05:49:21,841 [pool-11-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-FA24D7203F79:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-FA24D7203F79
2022-11-12 05:49:21,842 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-FA24D7203F79: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:21,842 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:21,842 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:21,843 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:21,843 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:21,843 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:21,842 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:21,843 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'Starting a new server with the same address should fail'
2022-11-12 05:49:21,843 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:21,843 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:21,844 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:21,844 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:21,844 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:21,844 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:21,844 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:21,844 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 34869 (custom)
2022-11-12 05:49:21,844 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:21,844 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 38587 (custom)
2022-11-12 05:49:21,844 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:21,844 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37231 (custom)
2022-11-12 05:49:21,844 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:21,844 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:21,844 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:21,844 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:21,844 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:21,844 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:21,844 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:21,845 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:21,845 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:21,845 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:21,846 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:21,846 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:21,846 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0] (custom)
2022-11-12 05:49:21,846 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(254)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79
2022-11-12 05:49:21,847 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-FA24D7203F79:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER] returns group-FA24D7203F79:java.util.concurrent.CompletableFuture@2fe65f13[Not completed]
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-FA24D7203F79:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-FA24D7203F79
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-FA24D7203F79: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:21,848 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:21,849 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:21,849 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:21,849 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:21,849 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:21,849 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:21,849 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:21,849 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:21,849 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0] (custom)
2022-11-12 05:49:21,850 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:21,850 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79/in_use.lock", attempt #1/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2022-11-12 05:49:22,851 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:22,851 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79/in_use.lock", attempt #2/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2022-11-12 05:49:23,852 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:23,852 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79/in_use.lock", attempt #3/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2022-11-12 05:49:24,853 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:24,854 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79/in_use.lock", attempt #4/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2022-11-12 05:49:25,854 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:25,855 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "Starting a new server with the same address should fail" throws CompletionException
java.util.concurrent.CompletionException: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79. The directory is already locked
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$BiRelay.tryFire(CompletableFuture.java:1423)
	at java.base/java.util.concurrent.CompletableFuture$CoCompletion.tryFire(CompletableFuture.java:1144)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:176)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcdb9f0be6/s0/4c325dd7-3001-48fb-9e67-fa24d7203f79. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	... 4 more
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2022-11-12 05:49:25,857 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:25,857 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 34869 (custom)
2022-11-12 05:49:25,857 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:25,857 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 38587 (custom)
2022-11-12 05:49:25,857 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:25,857 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37231 (custom)
2022-11-12 05:49:25,857 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:25,857 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:25,857 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:25,857 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:25,857 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:25,857 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:25,857 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:25,858 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2022-11-12 05:49:25,858 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2022-11-12 05:49:25,859 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2022-11-12 05:49:25,859 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2022-11-12 05:49:25,859 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2022-11-12 05:49:25,859 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-FA24D7203F79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-FA24D7203F79-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37231|admin:localhost:34869|client:localhost:38587|dataStream:localhost:34793|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:25,860 [MiniRaftCluster-8] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2022-11-12 05:49:25,860 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-FA24D7203F79: shutdown
2022-11-12 05:49:25,860 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-FA24D7203F79,id=s0
2022-11-12 05:49:25,861 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-FA24D7203F79-LeaderStateImpl
2022-11-12 05:49:25,861 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-FA24D7203F79-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:25,861 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-FA24D7203F79-StateMachineUpdater: set stopIndex = 0
2022-11-12 05:49:25,861 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s0@group-FA24D7203F79: applyIndex: 0
2022-11-12 05:49:25,861 [s0@group-FA24D7203F79-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s0@group-FA24D7203F79-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:25,862 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s0@group-FA24D7203F79-SegmentedRaftLogWorker close()
2022-11-12 05:49:25,863 [JvmPauseMonitor7] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2022-11-12 05:49:25,863 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2022-11-12 05:49:25,864 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2022-11-12 05:49:25,864 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2022-11-12 05:49:25,864 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2022-11-12 05:49:25,866 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2022-11-12 05:49:25,867 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-BCD75D5E8BFA:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]
2022-11-12 05:49:25,867 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2022-11-12 05:49:25,867 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2022-11-12 05:49:25,868 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2022-11-12 05:49:25,868 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2022-11-12 05:49:25,868 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2022-11-12 05:49:25,868 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2022-11-12 05:49:25,868 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-BCD75D5E8BFA:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:25,868 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0
2022-11-12 05:49:25,868 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0 does not exist.
2022-11-12 05:49:25,868 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0
2022-11-12 05:49:25,868 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:25,869 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:25,869 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44949 (custom)
2022-11-12 05:49:25,869 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:25,869 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 41233 (custom)
2022-11-12 05:49:25,869 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:25,869 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35207 (custom)
2022-11-12 05:49:25,869 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:25,869 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:25,869 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:25,869 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:25,869 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:25,869 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:25,869 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:25,870 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:25,870 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:25,870 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:25,870 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:25,870 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:25,871 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0] (custom)
2022-11-12 05:49:25,871 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-BCD75D5E8BFA:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER] returns group-BCD75D5E8BFA:java.util.concurrent.CompletableFuture@69907fad[Not completed]
2022-11-12 05:49:25,871 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:25,871 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-BCD75D5E8BFA:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:25,871 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:25,871 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1
2022-11-12 05:49:25,871 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:25,872 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1 does not exist.
2022-11-12 05:49:25,872 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1
2022-11-12 05:49:25,872 [pool-13-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-BCD75D5E8BFA:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:25,872 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:25,872 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:25,872 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:25,872 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:25,872 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:25,872 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 43381 (custom)
2022-11-12 05:49:25,872 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:25,872 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 42823 (custom)
2022-11-12 05:49:25,872 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:25,872 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:25,872 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:25,872 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 44773 (custom)
2022-11-12 05:49:25,872 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:25,872 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:25,872 [pool-13-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-BCD75D5E8BFA: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:25,873 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:25,873 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:25,873 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:25,873 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:25,873 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:25,873 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:25,873 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:25,873 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:25,873 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:25,873 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:25,873 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:25,874 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:25,874 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:25,874 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:25,874 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:25,874 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:25,874 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:25,876 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:25,874 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:25,876 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:25,876 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:25,877 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1] (custom)
2022-11-12 05:49:25,877 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-BCD75D5E8BFA:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER] returns group-BCD75D5E8BFA:java.util.concurrent.CompletableFuture@63b8f62f[Not completed]
2022-11-12 05:49:25,877 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:25,880 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:25,877 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-BCD75D5E8BFA:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:25,880 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2
2022-11-12 05:49:25,880 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2 does not exist.
2022-11-12 05:49:25,880 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2
2022-11-12 05:49:25,880 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:25,880 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:25,880 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:25,881 [pool-14-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-BCD75D5E8BFA:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:25,881 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 35921 (custom)
2022-11-12 05:49:25,881 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:25,881 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 33669 (custom)
2022-11-12 05:49:25,881 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:25,881 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 46405 (custom)
2022-11-12 05:49:25,881 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:25,881 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:25,881 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:25,882 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:25,882 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:25,882 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:25,882 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-BCD75D5E8BFA: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:25,885 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:25,886 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:25,886 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:25,886 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:25,886 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:25,886 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:25,886 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2] (custom)
2022-11-12 05:49:25,886 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:25,887 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:25,888 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:25,888 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:25,888 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:25,888 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:25,888 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-BCD75D5E8BFA:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER] returns group-BCD75D5E8BFA:java.util.concurrent.CompletableFuture@5c1146aa[Not completed]
2022-11-12 05:49:25,888 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:25,889 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:25,889 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0] (custom)
2022-11-12 05:49:25,889 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa does not exist. Creating ...
2022-11-12 05:49:25,889 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa
2022-11-12 05:49:25,889 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-BCD75D5E8BFA:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-BCD75D5E8BFA: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:25,890 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:25,890 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:25,891 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:25,891 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current
2022-11-12 05:49:25,891 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/sm
2022-11-12 05:49:25,891 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:25,891 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:25,892 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:25,892 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:25,892 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:25,893 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa has been successfully formatted.
2022-11-12 05:49:25,893 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:25,893 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:25,893 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:25,893 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:25,893 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:25,893 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:25,893 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:25,894 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:25,895 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:25,895 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:25,895 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:25,895 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:25,895 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:25,895 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:25,895 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-BCD75D5E8BFA: start as a follower, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:25,895 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-BCD75D5E8BFA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:25,895 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:25,896 [s0@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:25,896 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BCD75D5E8BFA,id=s0
2022-11-12 05:49:25,896 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:25,896 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:25,896 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:25,896 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2022-11-12 05:49:25,896 [s0@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:25,897 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 41233
2022-11-12 05:49:25,898 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 35207
2022-11-12 05:49:25,899 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 44949
2022-11-12 05:49:25,899 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:25,899 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:25,900 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1] (custom)
2022-11-12 05:49:25,900 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa does not exist. Creating ...
2022-11-12 05:49:25,900 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa
2022-11-12 05:49:25,900 [JvmPauseMonitor8] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2022-11-12 05:49:25,901 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:25,901 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current
2022-11-12 05:49:25,901 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/sm
2022-11-12 05:49:25,902 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa has been successfully formatted.
2022-11-12 05:49:25,902 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:25,902 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:25,902 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:25,902 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:25,902 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:25,902 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:25,902 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:25,903 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:25,903 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:25,903 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:25,903 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa
2022-11-12 05:49:25,903 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:25,903 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:25,903 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:25,903 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:25,903 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:25,903 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:25,904 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:25,904 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:25,904 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:25,904 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:25,904 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:25,904 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:25,904 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:25,904 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:25,904 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:25,909 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-BCD75D5E8BFA: start as a follower, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:25,909 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-BCD75D5E8BFA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:25,909 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:25,909 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BCD75D5E8BFA,id=s1
2022-11-12 05:49:25,909 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:25,909 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:25,909 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:25,910 [s1@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:25,910 [s1@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:25,910 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2022-11-12 05:49:25,912 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 42823
2022-11-12 05:49:25,912 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 44773
2022-11-12 05:49:25,912 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 43381
2022-11-12 05:49:25,917 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:25,917 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:25,917 [JvmPauseMonitor9] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2022-11-12 05:49:25,917 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2] (custom)
2022-11-12 05:49:25,917 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa does not exist. Creating ...
2022-11-12 05:49:25,917 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa
2022-11-12 05:49:25,918 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:25,919 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current
2022-11-12 05:49:25,919 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/sm
2022-11-12 05:49:25,920 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa has been successfully formatted.
2022-11-12 05:49:25,920 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:25,920 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:25,920 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:25,920 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:25,920 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:25,920 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:25,920 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:25,920 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:25,921 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:25,922 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-BCD75D5E8BFA: start as a follower, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:25,922 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-BCD75D5E8BFA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:25,922 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:25,922 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BCD75D5E8BFA,id=s2
2022-11-12 05:49:25,922 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:25,922 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:25,922 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:25,923 [s2@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:25,923 [s2@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:25,925 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2022-11-12 05:49:25,928 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 33669
2022-11-12 05:49:25,929 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 46405
2022-11-12 05:49:25,929 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 35921
2022-11-12 05:49:25,933 [JvmPauseMonitor10] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2022-11-12 05:49:25,933 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:25,933 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:25,933 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:169)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:26,049 [s0@group-BCD75D5E8BFA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-BCD75D5E8BFA-FollowerState: change to CANDIDATE, lastRpcElapsedTime:153356087ns, electionTimeout:152ms
2022-11-12 05:49:26,049 [s0@group-BCD75D5E8BFA-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,049 [s0@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-BCD75D5E8BFA: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:26,049 [s0@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:26,050 [s0@group-BCD75D5E8BFA-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-BCD75D5E8BFA-LeaderElection7
2022-11-12 05:49:26,050 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-BCD75D5E8BFA-LeaderElection7 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,051 [s0@group-BCD75D5E8BFA-LeaderElection7-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2022-11-12 05:49:26,052 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:26,052 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:26,054 [s0@group-BCD75D5E8BFA-LeaderElection7-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2022-11-12 05:49:26,058 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-BCD75D5E8BFA: receive requestVote(PRE_VOTE, s0, group-BCD75D5E8BFA, 0, (t:0, i:0))
2022-11-12 05:49:26,058 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-BCD75D5E8BFA-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:26,061 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-BCD75D5E8BFA replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,062 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-BCD75D5E8BFA-LeaderElection7: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:26,062 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t0
2022-11-12 05:49:26,062 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-BCD75D5E8BFA-LeaderElection7 PRE_VOTE round 0: result PASSED
2022-11-12 05:49:26,063 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-BCD75D5E8BFA-LeaderElection7 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,064 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-BCD75D5E8BFA: receive requestVote(PRE_VOTE, s0, group-BCD75D5E8BFA, 0, (t:0, i:0))
2022-11-12 05:49:26,065 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:26,065 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:26,066 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-BCD75D5E8BFA: receive requestVote(ELECTION, s0, group-BCD75D5E8BFA, 1, (t:0, i:0))
2022-11-12 05:49:26,067 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-BCD75D5E8BFA-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:26,067 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-BCD75D5E8BFA-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:26,067 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-BCD75D5E8BFA replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-BCD75D5E8BFA:t0, leader=null, voted=, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,067 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-BCD75D5E8BFA: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2022-11-12 05:49:26,067 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,067 [s1@group-BCD75D5E8BFA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-BCD75D5E8BFA-FollowerState was interrupted
2022-11-12 05:49:26,073 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,073 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-BCD75D5E8BFA: receive requestVote(ELECTION, s0, group-BCD75D5E8BFA, 1, (t:0, i:0))
2022-11-12 05:49:26,074 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-BCD75D5E8BFA-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:26,074 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-BCD75D5E8BFA: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2022-11-12 05:49:26,074 [grpc-default-executor-1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,074 [s2@group-BCD75D5E8BFA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-BCD75D5E8BFA-FollowerState was interrupted
2022-11-12 05:49:26,077 [grpc-default-executor-1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,078 [s1@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:26,078 [s1@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:26,079 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-BCD75D5E8BFA replies to ELECTION vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-BCD75D5E8BFA:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,079 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-BCD75D5E8BFA replies to ELECTION vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-BCD75D5E8BFA:t1, leader=null, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,079 [s2@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:26,079 [s2@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:26,081 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-BCD75D5E8BFA-LeaderElection7: ELECTION PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:26,081 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s2#0:OK-t1
2022-11-12 05:49:26,081 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-BCD75D5E8BFA-LeaderElection7 ELECTION round 0: result PASSED
2022-11-12 05:49:26,081 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-BCD75D5E8BFA-LeaderElection7
2022-11-12 05:49:26,081 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-BCD75D5E8BFA: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2022-11-12 05:49:26,081 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-BCD75D5E8BFA: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 208ms
2022-11-12 05:49:26,081 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:26,081 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:26,081 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2022-11-12 05:49:26,081 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:26,083 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:26,083 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:26,083 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:26,083 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:26,084 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:26,085 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:26,085 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:26,085 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:26,085 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:26,085 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:26,085 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-BCD75D5E8BFA-LeaderStateImpl
2022-11-12 05:49:26,085 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:26,089 [s0@group-BCD75D5E8BFA-LeaderElection7] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-BCD75D5E8BFA: set configuration 0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,092 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-BCD75D5E8BFA: change Leader from null to s0 at term 1 for appendEntries, leader elected after 206ms
2022-11-12 05:49:26,105 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-BCD75D5E8BFA: change Leader from null to s0 at term 1 for appendEntries, leader elected after 214ms
2022-11-12 05:49:26,105 [s1-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s1@group-BCD75D5E8BFA: set configuration 0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,105 [s1-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:26,107 [s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_0
2022-11-12 05:49:26,112 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s2@group-BCD75D5E8BFA: set configuration 0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,112 [s2-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:26,121 [s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_0
2022-11-12 05:49:26,124 [s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_0
2022-11-12 05:49:26,384 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:26,385 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:26,385 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:26,394 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-C645A898D75C->s0: receive RaftClientReply:client-C645A898D75C->s0@group-BCD75D5E8BFA, cid=28, SUCCESS, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2022-11-12 05:49:26,401 [s0@group-BCD75D5E8BFA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 29@client-C645A898D75C
2022-11-12 05:49:26,402 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-C645A898D75C->s0: receive RaftClientReply:client-C645A898D75C->s0@group-BCD75D5E8BFA, cid=29, SUCCESS, logIndex=1, commits[s0:c1, s1:c0, s2:c0]
2022-11-12 05:49:26,404 [s1@group-BCD75D5E8BFA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 29@client-C645A898D75C
2022-11-12 05:49:26,405 [s2@group-BCD75D5E8BFA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 29@client-C645A898D75C
2022-11-12 05:49:26,408 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:26,408 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:26,417 [s0@group-BCD75D5E8BFA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-7217E4CD8F81
2022-11-12 05:49:26,420 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-7217E4CD8F81->s0: receive RaftClientReply:client-7217E4CD8F81->s0@group-BCD75D5E8BFA, cid=1, SUCCESS, logIndex=3, commits[s0:c3, s1:c1, s2:c2]
2022-11-12 05:49:26,420 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block START_TRANSACTION
2022-11-12 05:49:26,421 [s1@group-BCD75D5E8BFA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-7217E4CD8F81
2022-11-12 05:49:26,422 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:blockRequestor(49)) - Block requestor s0
2022-11-12 05:49:26,422 [s2-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s2: Block request from s0
2022-11-12 05:49:26,423 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:26,425 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:26,425 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:26,426 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #1/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:195)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:26,502 [s1-server-thread1] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s1: Block request from s0
2022-11-12 05:49:26,527 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:26,527 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:26,527 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:26,527 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #2/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:195)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:26,628 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:26,628 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:26,628 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:26,629 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #3/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:195)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:26,726 [s2@group-BCD75D5E8BFA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-BCD75D5E8BFA-FollowerState: change to CANDIDATE, lastRpcElapsedTime:309632048ns, electionTimeout:165ms
2022-11-12 05:49:26,726 [s2@group-BCD75D5E8BFA-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,726 [s2@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-BCD75D5E8BFA: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2022-11-12 05:49:26,726 [s2@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:26,726 [s2@group-BCD75D5E8BFA-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-BCD75D5E8BFA-LeaderElection8
2022-11-12 05:49:26,727 [s2@group-BCD75D5E8BFA-LeaderElection8] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-BCD75D5E8BFA: change Leader from s0 to null at term 1 for PRE_VOTE
2022-11-12 05:49:26,727 [s2@group-BCD75D5E8BFA-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-BCD75D5E8BFA-LeaderElection8 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,727 [s2@group-BCD75D5E8BFA-LeaderElection8-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2022-11-12 05:49:26,727 [s2@group-BCD75D5E8BFA-LeaderElection8-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2022-11-12 05:49:26,729 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:26,730 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-BCD75D5E8BFA:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:26,730 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-BCD75D5E8BFA:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:26,730 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #4/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:195)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:26,738 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-BCD75D5E8BFA: receive requestVote(PRE_VOTE, s2, group-BCD75D5E8BFA, 1, (t:1, i:3))
2022-11-12 05:49:26,739 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-BCD75D5E8BFA-FOLLOWER: reject PRE_VOTE from s2: our last entry (t:1, i:4) > candidate's last entry (t:1, i:3)
2022-11-12 05:49:26,739 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-BCD75D5E8BFA replies to PRE_VOTE vote request: s2<-s1#0:FAIL-t1. Peer's state: s1@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,740 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-BCD75D5E8BFA: receive requestVote(PRE_VOTE, s2, group-BCD75D5E8BFA, 1, (t:1, i:3))
2022-11-12 05:49:26,746 [grpc-default-executor-4] WARN  server.RaftServer$Division (LeaderStateImpl.java:checkLeadership(1063)) - s0@group-BCD75D5E8BFA-LeaderStateImpl: Lost leadership on term: 1. Election timeout: 300ms. In charge for: 664ms. Conf: 0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,746 [grpc-default-executor-4] WARN  server.RaftServer$Division (LeaderStateImpl.java:lambda$checkLeadership$17(1067)) - Follower s0@group-BCD75D5E8BFA->s1(c3,m4,n5, attendVote=true, lastRpcSendTime=15, lastRpcResponseTime=322)
2022-11-12 05:49:26,746 [grpc-default-executor-4] WARN  server.RaftServer$Division (LeaderStateImpl.java:lambda$checkLeadership$17(1067)) - Follower s0@group-BCD75D5E8BFA->s2(c2,m3,n5, attendVote=true, lastRpcSendTime=25, lastRpcResponseTime=329)
2022-11-12 05:49:26,746 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-BCD75D5E8BFA: changes role from    LEADER to FOLLOWER at term 1 for StepDownReason:LOST_MAJORITY_HEARTBEATS
2022-11-12 05:49:26,746 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-BCD75D5E8BFA-LeaderStateImpl
2022-11-12 05:49:26,747 [s0@group-BCD75D5E8BFA->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-BCD75D5E8BFA->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:26,747 [s0@group-BCD75D5E8BFA->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-BCD75D5E8BFA->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:26,747 [grpc-default-executor-4] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-BCD75D5E8BFA-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:26,749 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,754 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-BCD75D5E8BFA-FOLLOWER: reject PRE_VOTE from s2: this server is a follower and still has a valid leader s0
2022-11-12 05:49:26,754 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-BCD75D5E8BFA replies to PRE_VOTE vote request: s2<-s0#0:FAIL-t1. Peer's state: s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,756 [s2@group-BCD75D5E8BFA-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-BCD75D5E8BFA-LeaderElection8: PRE_VOTE REJECTED received 2 response(s) and 0 exception(s):
2022-11-12 05:49:26,756 [s2@group-BCD75D5E8BFA-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s0#0:FAIL-t1
2022-11-12 05:49:26,756 [s2@group-BCD75D5E8BFA-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s2<-s1#0:FAIL-t1
2022-11-12 05:49:26,756 [s2@group-BCD75D5E8BFA-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-BCD75D5E8BFA-LeaderElection8 PRE_VOTE round 0: result REJECTED
2022-11-12 05:49:26,756 [s2@group-BCD75D5E8BFA-LeaderElection8] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-BCD75D5E8BFA: changes role from CANDIDATE to FOLLOWER at term 1 for REJECTED
2022-11-12 05:49:26,756 [s2@group-BCD75D5E8BFA-LeaderElection8] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-BCD75D5E8BFA-LeaderElection8
2022-11-12 05:49:26,756 [s2@group-BCD75D5E8BFA-LeaderElection8] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,807 [s1@group-BCD75D5E8BFA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-BCD75D5E8BFA-FollowerState: change to CANDIDATE, lastRpcElapsedTime:385840935ns, electionTimeout:264ms
2022-11-12 05:49:26,807 [s1@group-BCD75D5E8BFA-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,807 [s1@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-BCD75D5E8BFA: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2022-11-12 05:49:26,807 [s1@group-BCD75D5E8BFA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:26,807 [s1@group-BCD75D5E8BFA-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-BCD75D5E8BFA-LeaderElection9
2022-11-12 05:49:26,808 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-BCD75D5E8BFA: change Leader from s0 to null at term 1 for PRE_VOTE
2022-11-12 05:49:26,808 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-BCD75D5E8BFA-LeaderElection9 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,808 [s1@group-BCD75D5E8BFA-LeaderElection9-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2022-11-12 05:49:26,808 [s1@group-BCD75D5E8BFA-LeaderElection9-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2022-11-12 05:49:26,818 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-BCD75D5E8BFA: receive requestVote(PRE_VOTE, s1, group-BCD75D5E8BFA, 1, (t:1, i:4))
2022-11-12 05:49:26,818 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-BCD75D5E8BFA-FOLLOWER: accept PRE_VOTE from s1: our last entry (t:1, i:3) < candidate's last entry (t:1, i:4)
2022-11-12 05:49:26,818 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-BCD75D5E8BFA replies to PRE_VOTE vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-BCD75D5E8BFA:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,820 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-BCD75D5E8BFA-LeaderElection9: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:26,821 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s2#0:OK-t1
2022-11-12 05:49:26,821 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-BCD75D5E8BFA-LeaderElection9 PRE_VOTE round 0: result PASSED
2022-11-12 05:49:26,820 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-BCD75D5E8BFA: receive requestVote(PRE_VOTE, s1, group-BCD75D5E8BFA, 1, (t:1, i:4))
2022-11-12 05:49:26,828 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-BCD75D5E8BFA-FOLLOWER: reject PRE_VOTE from s1: this server is a follower and still has a valid leader s0
2022-11-12 05:49:26,828 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-BCD75D5E8BFA replies to PRE_VOTE vote request: s1<-s0#0:FAIL-t1. Peer's state: s0@group-BCD75D5E8BFA:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,828 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-BCD75D5E8BFA-LeaderElection9 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,830 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-BCD75D5E8BFA: receive requestVote(ELECTION, s1, group-BCD75D5E8BFA, 2, (t:1, i:4))
2022-11-12 05:49:26,830 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-BCD75D5E8BFA-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:26,830 [grpc-default-executor-4] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-BCD75D5E8BFA: change Leader from s0 to null at term 2 for updateCurrentTerm
2022-11-12 05:49:26,830 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-BCD75D5E8BFA: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s1
2022-11-12 05:49:26,830 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,830 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,830 [s0@group-BCD75D5E8BFA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-BCD75D5E8BFA-FollowerState was interrupted
2022-11-12 05:49:26,830 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:26,831 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BCD75D5E8BFA:t2, leader=null, voted=null, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-BCD75D5E8BFA:t2, leader=null, voted=s1, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:26,831 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BCD75D5E8BFA:t2, leader=null, voted=null, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-BCD75D5E8BFA:t2, leader=null, voted=s1, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BCD75D5E8BFA:t2, leader=null, voted=null, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-BCD75D5E8BFA:t2, leader=null, voted=s1, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:431)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:195)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:26,838 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-BCD75D5E8BFA replies to ELECTION vote request: s1<-s0#0:OK-t2. Peer's state: s0@group-BCD75D5E8BFA:t2, leader=null, voted=s1, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,839 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-BCD75D5E8BFA-LeaderElection9: ELECTION PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:26,839 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:OK-t2
2022-11-12 05:49:26,839 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-BCD75D5E8BFA-LeaderElection9 ELECTION round 0: result PASSED
2022-11-12 05:49:26,839 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-BCD75D5E8BFA-LeaderElection9
2022-11-12 05:49:26,839 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-BCD75D5E8BFA: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2022-11-12 05:49:26,839 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-BCD75D5E8BFA: change Leader from null to s1 at term 2 for becomeLeader, leader elected after 31ms
2022-11-12 05:49:26,839 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:26,839 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:26,840 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2022-11-12 05:49:26,840 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:26,840 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:26,840 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:26,840 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:26,840 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:26,840 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-BCD75D5E8BFA: receive requestVote(ELECTION, s1, group-BCD75D5E8BFA, 2, (t:1, i:4))
2022-11-12 05:49:26,840 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-BCD75D5E8BFA-FOLLOWER: accept ELECTION from s1: our last entry (t:1, i:3) < candidate's last entry (t:1, i:4)
2022-11-12 05:49:26,841 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-BCD75D5E8BFA: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s1
2022-11-12 05:49:26,841 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,841 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:26,841 [s2@group-BCD75D5E8BFA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-BCD75D5E8BFA-FollowerState was interrupted
2022-11-12 05:49:26,841 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:26,841 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:26,841 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:26,841 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:26,841 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:26,841 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:26,841 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:26,841 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:26,842 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:26,842 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:26,842 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:26,842 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:26,842 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:26,842 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:26,842 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2022-11-12 05:49:26,842 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:26,842 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-BCD75D5E8BFA-LeaderStateImpl
2022-11-12 05:49:26,843 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2022-11-12 05:49:26,845 [s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_0-4
2022-11-12 05:49:26,845 [s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_0-4
2022-11-12 05:49:26,851 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-BCD75D5E8BFA replies to ELECTION vote request: s1<-s2#0:OK-t2. Peer's state: s2@group-BCD75D5E8BFA:t2, leader=null, voted=s1, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,856 [s1@group-BCD75D5E8BFA-LeaderElection9] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s1@group-BCD75D5E8BFA: set configuration 5: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,864 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-BCD75D5E8BFA: change Leader from null to s1 at term 2 for appendEntries, leader elected after 137ms
2022-11-12 05:49:26,864 [s2-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1602)) - s2@group-BCD75D5E8BFA: Failed appendEntries as previous log entry ((t:1, i:4)) is not found
2022-11-12 05:49:26,864 [s2-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1572)) - s2@group-BCD75D5E8BFA: inconsistency entries. Reply:s1<-s2#0:FAIL-t2,INCONSISTENCY,nextIndex=4,followerCommit=2,matchIndex=-1
2022-11-12 05:49:26,866 [s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s1/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_5
2022-11-12 05:49:26,866 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-BCD75D5E8BFA->s2: nextIndex: updateUnconditionally 5 -> 4
2022-11-12 05:49:26,868 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s2@group-BCD75D5E8BFA: set configuration 5: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,868 [s2-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2022-11-12 05:49:26,869 [s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_0-4
2022-11-12 05:49:26,869 [s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_0-4
2022-11-12 05:49:26,873 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-BCD75D5E8BFA: change Leader from null to s1 at term 2 for appendEntries, leader elected after 43ms
2022-11-12 05:49:26,874 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-BCD75D5E8BFA: set configuration 5: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:26,874 [s0-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2022-11-12 05:49:26,875 [s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_0-4
2022-11-12 05:49:26,875 [s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_0-4
2022-11-12 05:49:26,885 [s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s2/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_5
2022-11-12 05:49:26,886 [s2@group-BCD75D5E8BFA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-7217E4CD8F81
2022-11-12 05:49:26,888 [s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc68035e93/s0/941c8a6e-e083-4f38-81c6-bcd75d5e8bfa/current/log_inprogress_5
2022-11-12 05:49:27,282 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BCD75D5E8BFA:t2, leader=s1, voted=s1, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-BCD75D5E8BFA:t2, leader=s1, voted=s1, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t2, leader=s1, voted=s1, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:27,282 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:lambda$changeLeader$6(435)) - Changed leader from s0 to s1
2022-11-12 05:49:27,282 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:unblockRequestor(54)) - UnBlock requestor s0
2022-11-12 05:49:27,282 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should fail'
2022-11-12 05:49:27,283 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should fail" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-7217E4CD8F81->s0: Stream completed: no reply for async request cid=2
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-7217E4CD8F81->s0: Stream completed: no reply for async request cid=2
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:406)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:310)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onCompleted(GrpcClientProtocolClient.java:346)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 more
2022-11-12 05:49:27,283 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock START_TRANSACTION
2022-11-12 05:49:27,287 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:27,287 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:27,289 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should timeout'
2022-11-12 05:49:27,324 [s2-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s2: unBlock request from s0
2022-11-12 05:49:27,327 [grpc-default-executor-0] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#20-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2022-11-12 05:49:27,329 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-BCD75D5E8BFA->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:27,329 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-BCD75D5E8BFA->s2: nextIndex: updateUnconditionally 5 -> 4
2022-11-12 05:49:27,402 [s1-server-thread1] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s1: unBlock request from s0
2022-11-12 05:49:27,406 [grpc-default-executor-0] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#19-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2022-11-12 05:49:27,407 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-BCD75D5E8BFA->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:27,407 [grpc-default-executor-1] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-BCD75D5E8BFA->s1: nextIndex: updateUnconditionally 5 -> 4
2022-11-12 05:49:28,289 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should timeout" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-7217E4CD8F81->s0 request #3 timeout 1s
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:207)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-7217E4CD8F81->s0 request #3 timeout 1s
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$timeoutCheck$5(GrpcClientProtocolClient.java:384)
	at java.base/java.util.Optional.ifPresent(Optional.java:183)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.handleReplyFuture(GrpcClientProtocolClient.java:388)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.timeoutCheck(GrpcClientProtocolClient.java:383)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$onNext$3(GrpcClientProtocolClient.java:376)
	at org.apache.ratis.util.TimeoutTimer.lambda$onTimeout$2(TimeoutTimer.java:101)
	at org.apache.ratis.util.LogUtils.runAndLog(LogUtils.java:38)
	at org.apache.ratis.util.LogUtils$1.run(LogUtils.java:79)
	at org.apache.ratis.util.TimeoutTimer$Task.run(TimeoutTimer.java:55)
	at java.base/java.util.TimerThread.mainLoop(Timer.java:556)
	at java.base/java.util.TimerThread.run(Timer.java:506)
2022-11-12 05:49:28,299 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-7217E4CD8F81->s0: receive RaftClientReply:client-7217E4CD8F81->s0@group-BCD75D5E8BFA, cid=3, FAILED org.apache.ratis.protocol.exceptions.AlreadyClosedException: SlidingWindow$Server:2-OrderedRequestStreamObserver2 is closing: seq = 3 > nextToProcess = -1 will NEVER be processed; request = 3:null, logIndex=0, commits[]
2022-11-12 05:49:31,291 [Time-limited test] WARN  grpc.GrpcUtil (GrpcUtil.java:shutdownManagedChannel(216)) - Timed out gracefully shutting down connection: ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=334, target=localhost:41233}}. 
2022-11-12 05:49:31,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2022-11-12 05:49:31,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2022-11-12 05:49:31,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2022-11-12 05:49:31,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2022-11-12 05:49:31,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2022-11-12 05:49:31,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BCD75D5E8BFA:t2, leader=s1, voted=s1, raftlog=Memoized:s0@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-BCD75D5E8BFA:t2, leader=s1, voted=s1, raftlog=Memoized:s1@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BCD75D5E8BFA:t2, leader=s1, voted=s1, raftlog=Memoized:s2@group-BCD75D5E8BFA-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:35207|admin:localhost:44949|client:localhost:41233|dataStream:localhost:36641|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44773|admin:localhost:43381|client:localhost:42823|dataStream:localhost:46539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46405|admin:localhost:35921|client:localhost:33669|dataStream:localhost:46721|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:31,296 [MiniRaftCluster-9] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2022-11-12 05:49:31,296 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:31,297 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-BCD75D5E8BFA: shutdown
2022-11-12 05:49:31,297 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BCD75D5E8BFA,id=s0
2022-11-12 05:49:31,297 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:31,297 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-BCD75D5E8BFA-StateMachineUpdater: set stopIndex = 6
2022-11-12 05:49:31,297 [s0@group-BCD75D5E8BFA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-BCD75D5E8BFA-FollowerState was interrupted
2022-11-12 05:49:31,297 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s0@group-BCD75D5E8BFA: applyIndex: 6
2022-11-12 05:49:31,297 [MiniRaftCluster-10] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2022-11-12 05:49:31,297 [s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:31,298 [MiniRaftCluster-11] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2022-11-12 05:49:31,300 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-BCD75D5E8BFA: shutdown
2022-11-12 05:49:31,300 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BCD75D5E8BFA,id=s2
2022-11-12 05:49:31,300 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-BCD75D5E8BFA-FollowerState
2022-11-12 05:49:31,300 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-BCD75D5E8BFA-StateMachineUpdater: set stopIndex = 6
2022-11-12 05:49:31,300 [s2@group-BCD75D5E8BFA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-BCD75D5E8BFA-FollowerState was interrupted
2022-11-12 05:49:31,301 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s2@group-BCD75D5E8BFA: applyIndex: 6
2022-11-12 05:49:31,301 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s0@group-BCD75D5E8BFA-SegmentedRaftLogWorker close()
2022-11-12 05:49:31,301 [s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:31,301 [MiniRaftCluster-11] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:31,305 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s2@group-BCD75D5E8BFA-SegmentedRaftLogWorker close()
2022-11-12 05:49:31,305 [MiniRaftCluster-9] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s1 Close channels
2022-11-12 05:49:31,302 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:31,302 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-BCD75D5E8BFA: shutdown
2022-11-12 05:49:31,307 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BCD75D5E8BFA,id=s1
2022-11-12 05:49:31,307 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s1: shutdown s1@group-BCD75D5E8BFA-LeaderStateImpl
2022-11-12 05:49:31,307 [s1-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s1@group-BCD75D5E8BFA-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:31,307 [s1@group-BCD75D5E8BFA->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s1@group-BCD75D5E8BFA->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:31,307 [s1@group-BCD75D5E8BFA->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s1@group-BCD75D5E8BFA->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:31,308 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s1->s2#3-t2,previous=(t:2, i:5),leaderCommit=5,initializing? true,entries: size=1, first=(t:2, i:6), METADATAENTRY(c:5)
2022-11-12 05:49:31,308 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: s1->s0#2-t2,previous=(t:2, i:5),leaderCommit=5,initializing? true,entries: size=1, first=(t:2, i:6), METADATAENTRY(c:5)
2022-11-12 05:49:31,308 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-BCD75D5E8BFA->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:31,309 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-BCD75D5E8BFA->s2: nextIndex: updateUnconditionally 7 -> 6
2022-11-12 05:49:31,312 [MiniRaftCluster-11] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s0 Close channels
2022-11-12 05:49:31,312 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-BCD75D5E8BFA->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:31,312 [MiniRaftCluster-9] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s2 Close channels
2022-11-12 05:49:31,313 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-BCD75D5E8BFA-StateMachineUpdater: set stopIndex = 6
2022-11-12 05:49:31,313 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s1@group-BCD75D5E8BFA: applyIndex: 6
2022-11-12 05:49:31,313 [grpc-default-executor-1] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-BCD75D5E8BFA->s0: nextIndex: updateUnconditionally 7 -> 6
2022-11-12 05:49:31,314 [s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:31,314 [MiniRaftCluster-11] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s1 Close channels
2022-11-12 05:49:31,315 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s1@group-BCD75D5E8BFA-SegmentedRaftLogWorker close()
2022-11-12 05:49:31,317 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:31,317 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:31,317 [MiniRaftCluster-11] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:31,317 [MiniRaftCluster-11] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:31,318 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:31,318 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:31,318 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:31,320 [JvmPauseMonitor8] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2022-11-12 05:49:31,320 [MiniRaftCluster-10] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s0 Close channels
2022-11-12 05:49:31,320 [MiniRaftCluster-11] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:31,321 [MiniRaftCluster-11] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:31,325 [MiniRaftCluster-10] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s2 Close channels
2022-11-12 05:49:31,325 [MiniRaftCluster-11] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:31,326 [JvmPauseMonitor10] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2022-11-12 05:49:31,326 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:31,326 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:31,326 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:31,326 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:31,326 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:31,326 [JvmPauseMonitor9] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2022-11-12 05:49:31,327 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2022-11-12 05:49:31,328 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2022-11-12 05:49:31,328 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2022-11-12 05:49:31,328 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2022-11-12 05:49:31,328 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2022-11-12 05:49:31,329 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-BA2D8BFAE64A:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]
2022-11-12 05:49:31,329 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2022-11-12 05:49:31,329 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2022-11-12 05:49:31,329 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2022-11-12 05:49:31,329 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2022-11-12 05:49:31,329 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2022-11-12 05:49:31,329 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2022-11-12 05:49:31,329 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-BA2D8BFAE64A:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:31,330 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0
2022-11-12 05:49:31,330 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0 does not exist.
2022-11-12 05:49:31,330 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0
2022-11-12 05:49:31,330 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:31,330 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:31,330 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 45675 (custom)
2022-11-12 05:49:31,331 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:31,331 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 46295 (custom)
2022-11-12 05:49:31,331 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:31,331 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37815 (custom)
2022-11-12 05:49:31,331 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:31,331 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,331 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:31,331 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:31,331 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:31,331 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:31,331 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:31,332 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:31,333 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:31,333 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:31,333 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:31,333 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:31,333 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0] (custom)
2022-11-12 05:49:31,333 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-BA2D8BFAE64A:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER] returns group-BA2D8BFAE64A:java.util.concurrent.CompletableFuture@57780a57[Not completed]
2022-11-12 05:49:31,334 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-BA2D8BFAE64A:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:31,334 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1
2022-11-12 05:49:31,334 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1 does not exist.
2022-11-12 05:49:31,334 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1
2022-11-12 05:49:31,334 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:31,334 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:31,334 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 40891 (custom)
2022-11-12 05:49:31,334 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:31,334 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 44655 (custom)
2022-11-12 05:49:31,334 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:31,334 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 42013 (custom)
2022-11-12 05:49:31,334 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:31,334 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,334 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:31,334 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:31,335 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:31,335 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:31,335 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:31,335 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:31,336 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:31,336 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:31,336 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:31,336 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:31,336 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1] (custom)
2022-11-12 05:49:31,336 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:31,336 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:31,336 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-BA2D8BFAE64A:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-BA2D8BFAE64A: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:31,337 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:31,338 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:31,338 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:31,338 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:31,339 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:31,339 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:31,342 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-BA2D8BFAE64A:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER] returns group-BA2D8BFAE64A:java.util.concurrent.CompletableFuture@23a20933[Not completed]
2022-11-12 05:49:31,343 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:31,343 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-BA2D8BFAE64A:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:31,343 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2
2022-11-12 05:49:31,343 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2 does not exist.
2022-11-12 05:49:31,343 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2
2022-11-12 05:49:31,343 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:31,343 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:31,343 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 36165 (custom)
2022-11-12 05:49:31,343 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:31,343 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34251 (custom)
2022-11-12 05:49:31,343 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:31,343 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 32875 (custom)
2022-11-12 05:49:31,344 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:31,344 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,344 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:31,344 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:31,344 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:31,344 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:31,344 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:31,345 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:31,345 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:31,345 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:31,349 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:31,349 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:31,349 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:31,349 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:31,349 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2] (custom)
2022-11-12 05:49:31,345 [pool-18-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-BA2D8BFAE64A:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-BA2D8BFAE64A: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:31,350 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:31,351 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:31,352 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:31,352 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:31,352 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:31,352 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:31,352 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-BA2D8BFAE64A:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER] returns group-BA2D8BFAE64A:java.util.concurrent.CompletableFuture@2f9bdafe[Not completed]
2022-11-12 05:49:31,352 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:31,352 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:31,353 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0] (custom)
2022-11-12 05:49:31,353 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0/e44b01be-b6c7-49d7-9904-ba2d8bfae64a does not exist. Creating ...
2022-11-12 05:49:31,353 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0/e44b01be-b6c7-49d7-9904-ba2d8bfae64a
2022-11-12 05:49:31,354 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:31,354 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:31,354 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:31,354 [pool-19-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-BA2D8BFAE64A:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:31,354 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:31,354 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:31,354 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:31,354 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:31,354 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:31,354 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:31,355 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/current
2022-11-12 05:49:31,355 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/sm
2022-11-12 05:49:31,355 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:31,355 [pool-19-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-BA2D8BFAE64A: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:31,355 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:31,355 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:31,355 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:31,355 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:31,355 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:31,356 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:31,356 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:31,356 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:31,356 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:31,356 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:31,357 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0/e44b01be-b6c7-49d7-9904-ba2d8bfae64a has been successfully formatted.
2022-11-12 05:49:31,357 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:31,357 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:31,357 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:31,357 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:31,357 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-BA2D8BFAE64A-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0/e44b01be-b6c7-49d7-9904-ba2d8bfae64a
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:31,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:31,359 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:31,359 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,359 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:31,359 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:31,359 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:31,359 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-BA2D8BFAE64A-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:31,359 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-BA2D8BFAE64A-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:31,359 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-BA2D8BFAE64A: start as a follower, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,360 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-BA2D8BFAE64A: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:31,360 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-BA2D8BFAE64A-FollowerState
2022-11-12 05:49:31,361 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA2D8BFAE64A,id=s0
2022-11-12 05:49:31,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:31,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:31,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:31,361 [s0@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:31,362 [s0@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:31,362 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2022-11-12 05:49:31,363 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 46295
2022-11-12 05:49:31,365 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 37815
2022-11-12 05:49:31,365 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 45675
2022-11-12 05:49:31,367 [JvmPauseMonitor11] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2022-11-12 05:49:31,367 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:31,367 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:31,367 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1] (custom)
2022-11-12 05:49:31,367 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1/e44b01be-b6c7-49d7-9904-ba2d8bfae64a does not exist. Creating ...
2022-11-12 05:49:31,368 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1/e44b01be-b6c7-49d7-9904-ba2d8bfae64a
2022-11-12 05:49:31,369 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:31,369 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/current
2022-11-12 05:49:31,370 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/sm
2022-11-12 05:49:31,370 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1/e44b01be-b6c7-49d7-9904-ba2d8bfae64a has been successfully formatted.
2022-11-12 05:49:31,371 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:31,371 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:31,371 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:31,371 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:31,371 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,371 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:31,371 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-BA2D8BFAE64A-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1/e44b01be-b6c7-49d7-9904-ba2d8bfae64a
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:31,372 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:31,373 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-BA2D8BFAE64A-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:31,373 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-BA2D8BFAE64A-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:31,373 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-BA2D8BFAE64A: start as a follower, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,373 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-BA2D8BFAE64A: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:31,373 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-BA2D8BFAE64A-FollowerState
2022-11-12 05:49:31,373 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA2D8BFAE64A,id=s1
2022-11-12 05:49:31,373 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:31,373 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:31,373 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:31,374 [s1@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:31,374 [s1@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:31,374 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2022-11-12 05:49:31,374 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 44655
2022-11-12 05:49:31,375 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 42013
2022-11-12 05:49:31,376 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 40891
2022-11-12 05:49:31,376 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:31,376 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:31,376 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2] (custom)
2022-11-12 05:49:31,376 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2/e44b01be-b6c7-49d7-9904-ba2d8bfae64a does not exist. Creating ...
2022-11-12 05:49:31,377 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2/e44b01be-b6c7-49d7-9904-ba2d8bfae64a
2022-11-12 05:49:31,377 [JvmPauseMonitor12] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2022-11-12 05:49:31,378 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:31,378 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/current
2022-11-12 05:49:31,378 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/sm
2022-11-12 05:49:31,379 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2/e44b01be-b6c7-49d7-9904-ba2d8bfae64a has been successfully formatted.
2022-11-12 05:49:31,379 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:31,379 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:31,379 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:31,379 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:31,379 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,379 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:31,379 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-BA2D8BFAE64A-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2/e44b01be-b6c7-49d7-9904-ba2d8bfae64a
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:31,380 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:31,381 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-BA2D8BFAE64A-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:31,381 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-BA2D8BFAE64A-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:31,381 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-BA2D8BFAE64A: start as a follower, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,381 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-BA2D8BFAE64A: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:31,381 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-BA2D8BFAE64A-FollowerState
2022-11-12 05:49:31,381 [s2@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:31,382 [s2@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:31,382 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA2D8BFAE64A,id=s2
2022-11-12 05:49:31,382 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:31,382 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:31,382 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:31,382 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2022-11-12 05:49:31,383 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 34251
2022-11-12 05:49:31,385 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 32875
2022-11-12 05:49:31,385 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 36165
2022-11-12 05:49:31,386 [JvmPauseMonitor13] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2022-11-12 05:49:31,386 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:31,386 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BA2D8BFAE64A:t0, leader=null, voted=, raftlog=Memoized:s0@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BA2D8BFAE64A:t0, leader=null, voted=, raftlog=Memoized:s1@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BA2D8BFAE64A:t0, leader=null, voted=, raftlog=Memoized:s2@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:31,387 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BA2D8BFAE64A:t0, leader=null, voted=, raftlog=Memoized:s0@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BA2D8BFAE64A:t0, leader=null, voted=, raftlog=Memoized:s1@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BA2D8BFAE64A:t0, leader=null, voted=, raftlog=Memoized:s2@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BA2D8BFAE64A:t0, leader=null, voted=, raftlog=Memoized:s0@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BA2D8BFAE64A:t0, leader=null, voted=, raftlog=Memoized:s1@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BA2D8BFAE64A:t0, leader=null, voted=, raftlog=Memoized:s2@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:304)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:215)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:31,558 [s0@group-BA2D8BFAE64A-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-BA2D8BFAE64A-FollowerState: change to CANDIDATE, lastRpcElapsedTime:197345554ns, electionTimeout:196ms
2022-11-12 05:49:31,558 [s0@group-BA2D8BFAE64A-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-BA2D8BFAE64A-FollowerState
2022-11-12 05:49:31,558 [s0@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-BA2D8BFAE64A: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:31,558 [s0@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:31,558 [s0@group-BA2D8BFAE64A-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-BA2D8BFAE64A-LeaderElection10
2022-11-12 05:49:31,559 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-BA2D8BFAE64A-LeaderElection10 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,559 [s0@group-BA2D8BFAE64A-LeaderElection10-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2022-11-12 05:49:31,559 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:31,560 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:31,560 [s0@group-BA2D8BFAE64A-LeaderElection10-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2022-11-12 05:49:31,567 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-BA2D8BFAE64A: receive requestVote(PRE_VOTE, s0, group-BA2D8BFAE64A, 0, (t:0, i:0))
2022-11-12 05:49:31,568 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-BA2D8BFAE64A-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:31,568 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-BA2D8BFAE64A replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-BA2D8BFAE64A:t0, leader=null, voted=, raftlog=Memoized:s2@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,569 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-BA2D8BFAE64A-LeaderElection10: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:31,569 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s2#0:OK-t0
2022-11-12 05:49:31,569 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-BA2D8BFAE64A-LeaderElection10 PRE_VOTE round 0: result PASSED
2022-11-12 05:49:31,570 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-BA2D8BFAE64A-LeaderElection10 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,571 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:31,571 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:31,572 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-BA2D8BFAE64A: receive requestVote(ELECTION, s0, group-BA2D8BFAE64A, 1, (t:0, i:0))
2022-11-12 05:49:31,572 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-BA2D8BFAE64A-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:31,572 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-BA2D8BFAE64A: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2022-11-12 05:49:31,572 [grpc-default-executor-1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-BA2D8BFAE64A-FollowerState
2022-11-12 05:49:31,573 [grpc-default-executor-1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-BA2D8BFAE64A-FollowerState
2022-11-12 05:49:31,574 [s2@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:31,581 [s2@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:31,574 [s2@group-BA2D8BFAE64A-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-BA2D8BFAE64A-FollowerState was interrupted
2022-11-12 05:49:31,574 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-BA2D8BFAE64A replies to ELECTION vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-BA2D8BFAE64A:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-BA2D8BFAE64A-LeaderElection10: ELECTION PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s2#0:OK-t1
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-BA2D8BFAE64A-LeaderElection10 ELECTION round 0: result PASSED
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-BA2D8BFAE64A-LeaderElection10
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-BA2D8BFAE64A: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-BA2D8BFAE64A: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 251ms
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:31,589 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:31,590 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:31,590 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:31,590 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,590 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:31,590 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:31,590 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:31,590 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:31,590 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:31,590 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:31,590 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:31,591 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:31,591 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:31,591 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:31,591 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:31,591 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:31,591 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:31,591 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:31,591 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-BA2D8BFAE64A-LeaderStateImpl
2022-11-12 05:49:31,591 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-BA2D8BFAE64A-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:31,592 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-BA2D8BFAE64A: receive requestVote(ELECTION, s0, group-BA2D8BFAE64A, 1, (t:0, i:0))
2022-11-12 05:49:31,592 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-BA2D8BFAE64A-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:31,592 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-BA2D8BFAE64A: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2022-11-12 05:49:31,592 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-BA2D8BFAE64A-FollowerState
2022-11-12 05:49:31,595 [s1@group-BA2D8BFAE64A-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-BA2D8BFAE64A-FollowerState was interrupted
2022-11-12 05:49:31,595 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-BA2D8BFAE64A: receive requestVote(PRE_VOTE, s0, group-BA2D8BFAE64A, 0, (t:0, i:0))
2022-11-12 05:49:31,603 [s0@group-BA2D8BFAE64A-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-BA2D8BFAE64A-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s0/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/current/log_inprogress_0
2022-11-12 05:49:31,603 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-BA2D8BFAE64A-FollowerState
2022-11-12 05:49:31,604 [s0@group-BA2D8BFAE64A-LeaderElection10] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-BA2D8BFAE64A: set configuration 0: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,605 [s1@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:31,605 [s1@group-BA2D8BFAE64A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:31,618 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-BA2D8BFAE64A replies to ELECTION vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-BA2D8BFAE64A:t1, leader=null, voted=s0, raftlog=Memoized:s1@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,619 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-BA2D8BFAE64A: change Leader from null to s0 at term 1 for appendEntries, leader elected after 269ms
2022-11-12 05:49:31,620 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-BA2D8BFAE64A-FOLLOWER: reject PRE_VOTE from s0: this server is a follower and still has a valid leader s0
2022-11-12 05:49:31,620 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-BA2D8BFAE64A replies to PRE_VOTE vote request: s0<-s1#0:FAIL-t1. Peer's state: s1@group-BA2D8BFAE64A:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,633 [s1-server-thread3] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s1@group-BA2D8BFAE64A: set configuration 0: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,634 [s1-server-thread3] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-BA2D8BFAE64A-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:31,655 [s2-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-BA2D8BFAE64A: change Leader from null to s0 at term 1 for appendEntries, leader elected after 299ms
2022-11-12 05:49:31,658 [s1@group-BA2D8BFAE64A-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-BA2D8BFAE64A-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s1/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/current/log_inprogress_0
2022-11-12 05:49:31,659 [s2-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s2@group-BA2D8BFAE64A: set configuration 0: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:31,660 [s2-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-BA2D8BFAE64A-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:31,673 [s2@group-BA2D8BFAE64A-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-BA2D8BFAE64A-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc70b38ed5/s2/e44b01be-b6c7-49d7-9904-ba2d8bfae64a/current/log_inprogress_0
2022-11-12 05:49:31,838 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BA2D8BFAE64A:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BA2D8BFAE64A:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BA2D8BFAE64A:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:31,838 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:31,838 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:31,846 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-39572903AA58->s0: receive RaftClientReply:client-39572903AA58->s0@group-BA2D8BFAE64A, cid=30, SUCCESS, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2022-11-12 05:49:31,854 [s0@group-BA2D8BFAE64A-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 31@client-39572903AA58
2022-11-12 05:49:31,857 [s1@group-BA2D8BFAE64A-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 31@client-39572903AA58
2022-11-12 05:49:31,857 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-39572903AA58->s0: receive RaftClientReply:client-39572903AA58->s0@group-BA2D8BFAE64A, cid=31, SUCCESS, logIndex=1, commits[s0:c1, s1:c0, s2:c0]
2022-11-12 05:49:31,859 [s0-client-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:query(328)) - query testing
2022-11-12 05:49:31,860 [s2@group-BA2D8BFAE64A-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 31@client-39572903AA58
2022-11-12 05:49:31,861 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-39572903AA58->s0: receive RaftClientReply:client-39572903AA58->s0@group-BA2D8BFAE64A, cid=32, SUCCESS, logIndex=0, commits[s0:c2, s1:c1, s2:c1]
2022-11-12 05:49:35,866 [timer2] WARN  grpc.GrpcUtil (GrpcUtil.java:shutdownManagedChannel(216)) - Timed out gracefully shutting down connection: ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=388, target=localhost:46295}}. 
2022-11-12 05:49:35,970 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:35,970 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:35,975 [s0-client-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:query(328)) - query testing
2022-11-12 05:49:35,977 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-39572903AA58->s0: receive RaftClientReply:client-39572903AA58->s0@group-BA2D8BFAE64A, cid=33, SUCCESS, logIndex=0, commits[s0:c2, s1:c2, s2:c2]
2022-11-12 05:49:35,979 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:35,979 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:35,986 [null-request--thread1] INFO  server.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(284)) - Failed RaftClientRequest:client-39572903AA58->s2@group-BA2D8BFAE64A, cid=34, seq=0, Watch-ALL(0), Message:<EMPTY>, reply=RaftClientReply:client-39572903AA58->s2@group-BA2D8BFAE64A, cid=34, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s2@group-BA2D8BFAE64A is not the leader s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s2:c2, s0:c2, s1:c2]
2022-11-12 05:49:35,987 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-39572903AA58->s2: receive RaftClientReply:client-39572903AA58->s2@group-BA2D8BFAE64A, cid=34, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s2@group-BA2D8BFAE64A is not the leader s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s2:c2, s0:c2, s1:c2]
2022-11-12 05:49:35,992 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-39572903AA58->s0: receive RaftClientReply:client-39572903AA58->s0@group-BA2D8BFAE64A, cid=34, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2022-11-12 05:49:35,995 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-39572903AA58->s0: receive RaftClientReply:client-39572903AA58->s0@group-BA2D8BFAE64A, cid=35, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2022-11-12 05:49:35,999 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2022-11-12 05:49:35,999 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2022-11-12 05:49:35,999 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2022-11-12 05:49:35,999 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2022-11-12 05:49:35,999 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2022-11-12 05:49:35,999 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BA2D8BFAE64A:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-BA2D8BFAE64A:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-BA2D8BFAE64A:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-BA2D8BFAE64A-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:37815|admin:localhost:45675|client:localhost:46295|dataStream:localhost:39855|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42013|admin:localhost:40891|client:localhost:44655|dataStream:localhost:35481|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:32875|admin:localhost:36165|client:localhost:34251|dataStream:localhost:33825|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:35,999 [MiniRaftCluster-12] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2022-11-12 05:49:36,001 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:36,001 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-BA2D8BFAE64A: shutdown
2022-11-12 05:49:36,001 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA2D8BFAE64A,id=s0
2022-11-12 05:49:36,001 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-BA2D8BFAE64A-LeaderStateImpl
2022-11-12 05:49:36,001 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-BA2D8BFAE64A-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:36,001 [s0@group-BA2D8BFAE64A->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-BA2D8BFAE64A->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:36,001 [s0@group-BA2D8BFAE64A->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-BA2D8BFAE64A->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:36,002 [grpc-default-executor-0] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#11-t1,previous=(t:1, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:1, i:2), METADATAENTRY(c:1)
2022-11-12 05:49:36,002 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#9-t1,previous=(t:1, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:1, i:2), METADATAENTRY(c:1)
2022-11-12 05:49:36,002 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: null
2022-11-12 05:49:36,002 [grpc-default-executor-5] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: null
2022-11-12 05:49:36,003 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-BA2D8BFAE64A->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:36,003 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-BA2D8BFAE64A->s2: nextIndex: updateUnconditionally 3 -> 2
2022-11-12 05:49:36,003 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-BA2D8BFAE64A->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:36,003 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-BA2D8BFAE64A->s1: nextIndex: updateUnconditionally 3 -> 2
2022-11-12 05:49:36,003 [MiniRaftCluster-13] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2022-11-12 05:49:36,008 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-BA2D8BFAE64A-StateMachineUpdater: set stopIndex = 2
2022-11-12 05:49:36,008 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s0@group-BA2D8BFAE64A: applyIndex: 2
2022-11-12 05:49:36,008 [s0@group-BA2D8BFAE64A-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s0@group-BA2D8BFAE64A-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:36,004 [grpc-default-executor-6] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-BA2D8BFAE64A->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:36,003 [MiniRaftCluster-12] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s1 Close channels
2022-11-12 05:49:36,009 [MiniRaftCluster-14] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2022-11-12 05:49:36,009 [grpc-default-executor-6] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-BA2D8BFAE64A->s2: nextIndex: updateUnconditionally 2 -> 1
2022-11-12 05:49:36,009 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:36,010 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:36,010 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-BA2D8BFAE64A: shutdown
2022-11-12 05:49:36,010 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:36,010 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA2D8BFAE64A,id=s2
2022-11-12 05:49:36,015 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-BA2D8BFAE64A-FollowerState
2022-11-12 05:49:36,015 [grpc-default-executor-7] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-BA2D8BFAE64A->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:36,014 [MiniRaftCluster-12] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s2 Close channels
2022-11-12 05:49:36,011 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:36,011 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-BA2D8BFAE64A: shutdown
2022-11-12 05:49:36,011 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:36,016 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA2D8BFAE64A,id=s1
2022-11-12 05:49:36,016 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-BA2D8BFAE64A-FollowerState
2022-11-12 05:49:36,016 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-BA2D8BFAE64A-StateMachineUpdater: set stopIndex = 2
2022-11-12 05:49:36,016 [s1@group-BA2D8BFAE64A-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-BA2D8BFAE64A-FollowerState was interrupted
2022-11-12 05:49:36,011 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s0@group-BA2D8BFAE64A-SegmentedRaftLogWorker close()
2022-11-12 05:49:36,016 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:36,017 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s1@group-BA2D8BFAE64A: applyIndex: 2
2022-11-12 05:49:36,017 [s1@group-BA2D8BFAE64A-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s1@group-BA2D8BFAE64A-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:36,016 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:36,018 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:36,015 [s2@group-BA2D8BFAE64A-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-BA2D8BFAE64A-FollowerState was interrupted
2022-11-12 05:49:36,015 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-BA2D8BFAE64A-StateMachineUpdater: set stopIndex = 2
2022-11-12 05:49:36,019 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s2@group-BA2D8BFAE64A: applyIndex: 2
2022-11-12 05:49:36,018 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:36,019 [s2@group-BA2D8BFAE64A-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s2@group-BA2D8BFAE64A-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:36,018 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:36,019 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:36,019 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:36,020 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:36,020 [grpc-default-executor-7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(136)) - s0@group-BA2D8BFAE64A->s1-GrpcLogAppender: Failed to getClient for s1
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:120)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:57)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:414)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:36,024 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s2@group-BA2D8BFAE64A-SegmentedRaftLogWorker close()
2022-11-12 05:49:36,022 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:36,024 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s1@group-BA2D8BFAE64A-SegmentedRaftLogWorker close()
2022-11-12 05:49:36,025 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:36,025 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:36,025 [JvmPauseMonitor11] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2022-11-12 05:49:36,025 [JvmPauseMonitor13] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2022-11-12 05:49:36,026 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:36,026 [JvmPauseMonitor12] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2022-11-12 05:49:36,026 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2022-11-12 05:49:36,027 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2022-11-12 05:49:36,027 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2022-11-12 05:49:36,027 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2022-11-12 05:49:36,031 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2022-11-12 05:49:36,031 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-3F034D1816FA:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]
2022-11-12 05:49:36,031 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2022-11-12 05:49:36,031 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2022-11-12 05:49:36,031 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2022-11-12 05:49:36,031 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2022-11-12 05:49:36,032 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2022-11-12 05:49:36,032 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2022-11-12 05:49:36,032 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-3F034D1816FA:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:36,032 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0
2022-11-12 05:49:36,032 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0 does not exist.
2022-11-12 05:49:36,032 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0
2022-11-12 05:49:36,032 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:36,032 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:36,032 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 35415 (custom)
2022-11-12 05:49:36,033 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:36,033 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 44719 (custom)
2022-11-12 05:49:36,033 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:36,033 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35931 (custom)
2022-11-12 05:49:36,033 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,033 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,033 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,033 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:36,033 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:36,033 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:36,033 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:36,034 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:36,034 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:36,034 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:36,034 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:36,034 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:36,035 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0] (custom)
2022-11-12 05:49:36,036 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-3F034D1816FA:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER] returns group-3F034D1816FA:java.util.concurrent.CompletableFuture@24f04dc2[Not completed]
2022-11-12 05:49:36,036 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-3F034D1816FA:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:36,036 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1
2022-11-12 05:49:36,036 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1 does not exist.
2022-11-12 05:49:36,036 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1
2022-11-12 05:49:36,036 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:36,036 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:36,037 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:36,037 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:36,037 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:36,037 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46211 (custom)
2022-11-12 05:49:36,037 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:36,037 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 35893 (custom)
2022-11-12 05:49:36,037 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:36,037 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 44299 (custom)
2022-11-12 05:49:36,037 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,037 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,037 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,037 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:36,037 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:36,037 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:36,037 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:36,038 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:36,038 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:36,038 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:36,038 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:36,038 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:36,039 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1] (custom)
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-3F034D1816FA:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-3F034D1816FA: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:36,041 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:36,042 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:36,043 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:36,043 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:36,043 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:36,043 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:36,043 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:36,045 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-3F034D1816FA:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER] returns group-3F034D1816FA:java.util.concurrent.CompletableFuture@50d92310[Not completed]
2022-11-12 05:49:36,045 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-3F034D1816FA:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:36,045 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2
2022-11-12 05:49:36,045 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2 does not exist.
2022-11-12 05:49:36,045 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2
2022-11-12 05:49:36,045 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:36,045 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:36,045 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 36765 (custom)
2022-11-12 05:49:36,045 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:36,045 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 33727 (custom)
2022-11-12 05:49:36,045 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:36,045 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 43361 (custom)
2022-11-12 05:49:36,045 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,046 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,046 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,046 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:36,046 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:36,046 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:36,046 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:36,047 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:36,047 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:36,047 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:36,047 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:36,047 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:36,047 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2] (custom)
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-3F034D1816FA:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-3F034D1816FA: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:36,048 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:36,049 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:36,049 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:36,049 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:36,049 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:36,050 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:36,050 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:36,050 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:36,050 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:36,050 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:36,053 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-3F034D1816FA:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER] returns group-3F034D1816FA:java.util.concurrent.CompletableFuture@d71581e[Not completed]
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:36,054 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-3F034D1816FA:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:36,054 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:36,054 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0] (custom)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-3F034D1816FA: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:36,054 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0/9f79bbb8-0720-4f6c-b34b-3f034d1816fa does not exist. Creating ...
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:36,054 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:36,055 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:36,055 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:36,055 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0/9f79bbb8-0720-4f6c-b34b-3f034d1816fa
2022-11-12 05:49:36,056 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:36,056 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:36,056 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:36,057 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:36,057 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:36,057 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:36,057 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/current
2022-11-12 05:49:36,057 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/sm
2022-11-12 05:49:36,058 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0/9f79bbb8-0720-4f6c-b34b-3f034d1816fa has been successfully formatted.
2022-11-12 05:49:36,058 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:36,058 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-3F034D1816FA-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0/9f79bbb8-0720-4f6c-b34b-3f034d1816fa
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:36,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-3F034D1816FA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-3F034D1816FA-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:36,060 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-3F034D1816FA: start as a follower, conf=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,061 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-3F034D1816FA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:36,061 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-3F034D1816FA-FollowerState
2022-11-12 05:49:36,061 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F034D1816FA,id=s0
2022-11-12 05:49:36,061 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:36,061 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:36,061 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:36,061 [s0@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:36,061 [s0@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:36,062 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2022-11-12 05:49:36,062 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 44719
2022-11-12 05:49:36,063 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 35931
2022-11-12 05:49:36,064 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 35415
2022-11-12 05:49:36,071 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:36,072 [JvmPauseMonitor14] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2022-11-12 05:49:36,072 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:36,072 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1] (custom)
2022-11-12 05:49:36,072 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1/9f79bbb8-0720-4f6c-b34b-3f034d1816fa does not exist. Creating ...
2022-11-12 05:49:36,072 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1/9f79bbb8-0720-4f6c-b34b-3f034d1816fa
2022-11-12 05:49:36,073 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:36,073 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/current
2022-11-12 05:49:36,073 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/sm
2022-11-12 05:49:36,074 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1/9f79bbb8-0720-4f6c-b34b-3f034d1816fa has been successfully formatted.
2022-11-12 05:49:36,074 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:36,074 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:36,074 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-3F034D1816FA-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1/9f79bbb8-0720-4f6c-b34b-3f034d1816fa
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:36,075 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-3F034D1816FA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-3F034D1816FA-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-3F034D1816FA: start as a follower, conf=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-3F034D1816FA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:36,076 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-3F034D1816FA-FollowerState
2022-11-12 05:49:36,077 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F034D1816FA,id=s1
2022-11-12 05:49:36,077 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:36,077 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:36,077 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:36,078 [s1@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:36,078 [s1@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:36,081 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2022-11-12 05:49:36,081 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 35893
2022-11-12 05:49:36,081 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 44299
2022-11-12 05:49:36,082 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 46211
2022-11-12 05:49:36,083 [JvmPauseMonitor15] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2022-11-12 05:49:36,083 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:36,083 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:36,083 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2] (custom)
2022-11-12 05:49:36,083 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2/9f79bbb8-0720-4f6c-b34b-3f034d1816fa does not exist. Creating ...
2022-11-12 05:49:36,083 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2/9f79bbb8-0720-4f6c-b34b-3f034d1816fa
2022-11-12 05:49:36,084 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:36,085 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/current
2022-11-12 05:49:36,085 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/sm
2022-11-12 05:49:36,085 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2/9f79bbb8-0720-4f6c-b34b-3f034d1816fa has been successfully formatted.
2022-11-12 05:49:36,086 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:36,086 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:36,086 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:36,086 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:36,086 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,086 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:36,086 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:36,086 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:36,086 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-3F034D1816FA-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2/9f79bbb8-0720-4f6c-b34b-3f034d1816fa
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-3F034D1816FA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:36,087 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-3F034D1816FA-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:36,091 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-3F034D1816FA: start as a follower, conf=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,091 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-3F034D1816FA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:36,091 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-3F034D1816FA-FollowerState
2022-11-12 05:49:36,092 [s2@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:36,092 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F034D1816FA,id=s2
2022-11-12 05:49:36,092 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:36,092 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:36,092 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:36,092 [s2@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:36,093 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2022-11-12 05:49:36,093 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 33727
2022-11-12 05:49:36,093 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 43361
2022-11-12 05:49:36,094 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 36765
2022-11-12 05:49:36,094 [JvmPauseMonitor16] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2022-11-12 05:49:36,094 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,095 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,104 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-B1DC86D36600->s0: receive RaftClientReply:client-B1DC86D36600->s0@group-3F034D1816FA, cid=36, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-3F034D1816FA is not the leader, logIndex=0, commits[s0:c-1]
2022-11-12 05:49:36,206 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,206 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,214 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-B1DC86D36600->s2: receive RaftClientReply:client-B1DC86D36600->s2@group-3F034D1816FA, cid=36, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s2@group-3F034D1816FA is not the leader, logIndex=0, commits[s2:c-1]
2022-11-12 05:49:36,269 [s2@group-3F034D1816FA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-3F034D1816FA-FollowerState: change to CANDIDATE, lastRpcElapsedTime:177141528ns, electionTimeout:176ms
2022-11-12 05:49:36,269 [s2@group-3F034D1816FA-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-3F034D1816FA-FollowerState
2022-11-12 05:49:36,269 [s2@group-3F034D1816FA-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-3F034D1816FA: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:36,269 [s2@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:36,270 [s2@group-3F034D1816FA-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-3F034D1816FA-LeaderElection11
2022-11-12 05:49:36,273 [s2@group-3F034D1816FA-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-3F034D1816FA-LeaderElection11 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,274 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:36,274 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:36,274 [s2@group-3F034D1816FA-LeaderElection11-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2022-11-12 05:49:36,274 [s2@group-3F034D1816FA-LeaderElection11-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2022-11-12 05:49:36,280 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-3F034D1816FA: receive requestVote(PRE_VOTE, s2, group-3F034D1816FA, 0, (t:0, i:0))
2022-11-12 05:49:36,280 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-3F034D1816FA-FOLLOWER: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:36,280 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-3F034D1816FA replies to PRE_VOTE vote request: s2<-s1#0:OK-t0. Peer's state: s1@group-3F034D1816FA:t0, leader=null, voted=, raftlog=Memoized:s1@group-3F034D1816FA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,285 [s0@group-3F034D1816FA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-3F034D1816FA-FollowerState: change to CANDIDATE, lastRpcElapsedTime:224311541ns, electionTimeout:223ms
2022-11-12 05:49:36,285 [s0@group-3F034D1816FA-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-3F034D1816FA-FollowerState
2022-11-12 05:49:36,285 [s0@group-3F034D1816FA-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-3F034D1816FA: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:36,285 [s0@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:36,285 [s0@group-3F034D1816FA-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-3F034D1816FA-LeaderElection12
2022-11-12 05:49:36,285 [s2@group-3F034D1816FA-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-3F034D1816FA-LeaderElection11: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:36,285 [s2@group-3F034D1816FA-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s1#0:OK-t0
2022-11-12 05:49:36,285 [s2@group-3F034D1816FA-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-3F034D1816FA-LeaderElection11 PRE_VOTE round 0: result PASSED
2022-11-12 05:49:36,286 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-3F034D1816FA: receive requestVote(PRE_VOTE, s2, group-3F034D1816FA, 0, (t:0, i:0))
2022-11-12 05:49:36,287 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-3F034D1816FA-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:36,287 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-3F034D1816FA replies to PRE_VOTE vote request: s2<-s0#0:OK-t0. Peer's state: s0@group-3F034D1816FA:t0, leader=null, voted=, raftlog=Memoized:s0@group-3F034D1816FA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,287 [s2@group-3F034D1816FA-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-3F034D1816FA-LeaderElection11 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,289 [s0@group-3F034D1816FA-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-3F034D1816FA-LeaderElection12 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,289 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-3F034D1816FA: receive requestVote(ELECTION, s2, group-3F034D1816FA, 1, (t:0, i:0))
2022-11-12 05:49:36,289 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-3F034D1816FA-CANDIDATE: accept ELECTION from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:36,289 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-3F034D1816FA: changes role from CANDIDATE to FOLLOWER at term 1 for candidate:s2
2022-11-12 05:49:36,289 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-3F034D1816FA-LeaderElection12
2022-11-12 05:49:36,293 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-3F034D1816FA-FollowerState
2022-11-12 05:49:36,293 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:36,293 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:36,293 [s0@group-3F034D1816FA-LeaderElection12-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2022-11-12 05:49:36,294 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-3F034D1816FA: receive requestVote(ELECTION, s2, group-3F034D1816FA, 1, (t:0, i:0))
2022-11-12 05:49:36,294 [s0@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:36,294 [s0@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:36,295 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-3F034D1816FA replies to ELECTION vote request: s2<-s0#0:OK-t1. Peer's state: s0@group-3F034D1816FA:t1, leader=null, voted=s2, raftlog=Memoized:s0@group-3F034D1816FA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,295 [s2@group-3F034D1816FA-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-3F034D1816FA-LeaderElection11: ELECTION PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:36,295 [s2@group-3F034D1816FA-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s0#0:OK-t1
2022-11-12 05:49:36,295 [s2@group-3F034D1816FA-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-3F034D1816FA-LeaderElection11 ELECTION round 0: result PASSED
2022-11-12 05:49:36,295 [s2@group-3F034D1816FA-LeaderElection11] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-3F034D1816FA-LeaderElection11
2022-11-12 05:49:36,295 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-3F034D1816FA: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2022-11-12 05:49:36,295 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-3F034D1816FA: change Leader from null to s2 at term 1 for becomeLeader, leader elected after 241ms
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 1MB (=1048576) (custom)
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,296 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:36,297 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:36,298 [s2@group-3F034D1816FA-LeaderElection11] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-3F034D1816FA-LeaderStateImpl
2022-11-12 05:49:36,298 [s2@group-3F034D1816FA-LeaderElection11] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-3F034D1816FA-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:36,299 [s0@group-3F034D1816FA-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:36,299 [s0@group-3F034D1816FA-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:36,299 [s0@group-3F034D1816FA-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-3F034D1816FA-LeaderElection12: PRE_VOTE REJECTED received 0 response(s) and 0 exception(s):
2022-11-12 05:49:36,299 [s0@group-3F034D1816FA-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-3F034D1816FA-LeaderElection12 PRE_VOTE round 0: result REJECTED
2022-11-12 05:49:36,299 [s0@group-3F034D1816FA-LeaderElection12-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2022-11-12 05:49:36,308 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-3F034D1816FA: receive requestVote(PRE_VOTE, s0, group-3F034D1816FA, 0, (t:0, i:0))
2022-11-12 05:49:36,308 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-3F034D1816FA-FOLLOWER: accept ELECTION from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:36,308 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-3F034D1816FA: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s2
2022-11-12 05:49:36,308 [grpc-default-executor-6] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-3F034D1816FA-FollowerState
2022-11-12 05:49:36,308 [grpc-default-executor-6] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-3F034D1816FA-FollowerState
2022-11-12 05:49:36,308 [s1@group-3F034D1816FA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-3F034D1816FA-FollowerState was interrupted
2022-11-12 05:49:36,310 [s1@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:36,310 [s2@group-3F034D1816FA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-3F034D1816FA-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s2/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/current/log_inprogress_0
2022-11-12 05:49:36,311 [s1@group-3F034D1816FA-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:36,311 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-3F034D1816FA replies to ELECTION vote request: s2<-s1#0:OK-t1. Peer's state: s1@group-3F034D1816FA:t1, leader=null, voted=s2, raftlog=Memoized:s1@group-3F034D1816FA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,312 [grpc-default-executor-7] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-3F034D1816FA-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2022-11-12 05:49:36,312 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-3F034D1816FA replies to PRE_VOTE vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-3F034D1816FA:t1, leader=null, voted=s2, raftlog=Memoized:s1@group-3F034D1816FA-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,322 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,322 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,330 [s2@group-3F034D1816FA-LeaderElection11] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s2@group-3F034D1816FA: set configuration 0: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,334 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-3F034D1816FA: receive requestVote(PRE_VOTE, s0, group-3F034D1816FA, 0, (t:0, i:0))
2022-11-12 05:49:36,334 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-3F034D1816FA-LEADER: reject PRE_VOTE from s0: this server is the leader and still has leadership
2022-11-12 05:49:36,334 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-3F034D1816FA replies to PRE_VOTE vote request: s0<-s2#0:FAIL-t1. Peer's state: s2@group-3F034D1816FA:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-3F034D1816FA-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,340 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-3F034D1816FA: change Leader from null to s2 at term 1 for appendEntries, leader elected after 298ms
2022-11-12 05:49:36,340 [s1-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-3F034D1816FA: change Leader from null to s2 at term 1 for appendEntries, leader elected after 291ms
2022-11-12 05:49:36,341 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-3F034D1816FA: set configuration 0: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,341 [s0-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-3F034D1816FA-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:36,342 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-B1DC86D36600->s0: receive RaftClientReply:client-B1DC86D36600->s0@group-3F034D1816FA, cid=36, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-3F034D1816FA is not the leader, logIndex=0, commits[s0:c-1]
2022-11-12 05:49:36,350 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s1@group-3F034D1816FA: set configuration 0: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:36,351 [s1-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-3F034D1816FA-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:36,369 [s1@group-3F034D1816FA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-3F034D1816FA-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s1/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/current/log_inprogress_0
2022-11-12 05:49:36,370 [s0@group-3F034D1816FA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-3F034D1816FA-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc264d9c95/s0/9f79bbb8-0720-4f6c-b34b-3f034d1816fa/current/log_inprogress_0
2022-11-12 05:49:36,444 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,445 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,455 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-B1DC86D36600->s1: receive RaftClientReply:client-B1DC86D36600->s1@group-3F034D1816FA, cid=36, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s1@group-3F034D1816FA is not the leader s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s1:c0, s0:c-1, s2:c0]
2022-11-12 05:49:36,458 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,458 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,463 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-B1DC86D36600->s2: receive RaftClientReply:client-B1DC86D36600->s2@group-3F034D1816FA, cid=36, SUCCESS, logIndex=0, commits[s2:c0, s0:c0, s1:c0]
2022-11-12 05:49:36,467 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 37@client-B1DC86D36600
2022-11-12 05:49:36,468 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-B1DC86D36600->s2: receive RaftClientReply:client-B1DC86D36600->s2@group-3F034D1816FA, cid=37, SUCCESS, logIndex=1, commits[s2:c1, s0:c0, s1:c0]
2022-11-12 05:49:36,470 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 37@client-B1DC86D36600
2022-11-12 05:49:36,471 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 37@client-B1DC86D36600
2022-11-12 05:49:36,472 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block FLUSH_STATE_MACHINE_DATA
2022-11-12 05:49:36,472 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,473 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,474 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,474 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,476 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,476 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,486 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-8B05F9A67668->s2: receive RaftClientReply:client-8B05F9A67668->s2@group-3F034D1816FA, cid=38, SUCCESS, logIndex=2, commits[s2:c2, s0:c1, s1:c1]
2022-11-12 05:49:36,488 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-9376B82C5D2B->s2: receive RaftClientReply:client-9376B82C5D2B->s2@group-3F034D1816FA, cid=40, SUCCESS, logIndex=2, commits[s2:c2, s0:c1, s1:c1]
2022-11-12 05:49:36,490 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,490 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,499 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,500 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-92408F0D14B6->s2: receive RaftClientReply:client-92408F0D14B6->s2@group-3F034D1816FA, cid=42, SUCCESS, logIndex=2, commits[s2:c2, s0:c1, s1:c1]
2022-11-12 05:49:36,503 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,501 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-F7EA55A26E33->s2: receive RaftClientReply:client-F7EA55A26E33->s2@group-3F034D1816FA, cid=44, SUCCESS, logIndex=2, commits[s2:c2, s0:c2, s1:c2]
2022-11-12 05:49:36,511 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,512 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,514 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,515 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,516 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,516 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,521 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-C1F5C1E10741->s2: receive RaftClientReply:client-C1F5C1E10741->s2@group-3F034D1816FA, cid=48, SUCCESS, logIndex=2, commits[s2:c2, s0:c2, s1:c2]
2022-11-12 05:49:36,524 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,524 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,525 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-CF1DAA10C3BE->s2: receive RaftClientReply:client-CF1DAA10C3BE->s2@group-3F034D1816FA, cid=46, SUCCESS, logIndex=2, commits[s2:c2, s0:c2, s1:c2]
2022-11-12 05:49:36,525 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-7E13257A75B0->s2: receive RaftClientReply:client-7E13257A75B0->s2@group-3F034D1816FA, cid=50, SUCCESS, logIndex=2, commits[s2:c2, s0:c2, s1:c2]
2022-11-12 05:49:36,527 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,528 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,537 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-0C36598DD183->s2: receive RaftClientReply:client-0C36598DD183->s2@group-3F034D1816FA, cid=54, SUCCESS, logIndex=2, commits[s2:c2, s0:c2, s1:c2]
2022-11-12 05:49:36,538 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-A0F680D1DD3C->s2: receive RaftClientReply:client-A0F680D1DD3C->s2@group-3F034D1816FA, cid=52, SUCCESS, logIndex=2, commits[s2:c2, s0:c2, s1:c2]
2022-11-12 05:49:36,544 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,544 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,556 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-3C515A836CCF->s2: receive RaftClientReply:client-3C515A836CCF->s2@group-3F034D1816FA, cid=58, SUCCESS, logIndex=2, commits[s2:c2, s0:c2, s1:c2]
2022-11-12 05:49:36,557 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-C7D1020925F9->s2: receive RaftClientReply:client-C7D1020925F9->s2@group-3F034D1816FA, cid=56, SUCCESS, logIndex=2, commits[s2:c2, s0:c2, s1:c2]
2022-11-12 05:49:36,564 [grpc-default-executor-4] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=message 8
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s2@group-3F034D1816FA: Failed to acquire a pending write request for RaftClientRequest:client-C7D1020925F9->s2@group-3F034D1816FA, cid=57, seq=2, RW, Message:6d6573736167652038
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:404)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:310)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:341)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s2@group-3F034D1816FA: Failed to acquire a pending write request for RaftClientRequest:client-C7D1020925F9->s2@group-3F034D1816FA, cid=57, seq=2, RW, Message:6d6573736167652038
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:770)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:881)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:819)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:819)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:889)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:888)
		... 7 more
2022-11-12 05:49:36,855 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock FLUSH_STATE_MACHINE_DATA
2022-11-12 05:49:36,867 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:36,867 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:36,873 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, message 0 -> (t:1, i:3), STATEMACHINELOGENTRY, 41@client-9376B82C5D2B
2022-11-12 05:49:36,873 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 4, 2nd Messag... -> (t:1, i:4), STATEMACHINELOGENTRY, 39@client-8B05F9A67668
2022-11-12 05:49:36,873 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 5, message 1 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-92408F0D14B6
2022-11-12 05:49:36,873 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 6, message 2 -> (t:1, i:6), STATEMACHINELOGENTRY, 45@client-F7EA55A26E33
2022-11-12 05:49:36,873 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 7, message 4 -> (t:1, i:7), STATEMACHINELOGENTRY, 49@client-C1F5C1E10741
2022-11-12 05:49:36,874 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 47@client-CF1DAA10C3BE
2022-11-12 05:49:36,874 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 51@client-7E13257A75B0
2022-11-12 05:49:36,874 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 10, message 7 -> (t:1, i:10), STATEMACHINELOGENTRY, 55@client-0C36598DD183
2022-11-12 05:49:36,874 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 11, message 6 -> (t:1, i:11), STATEMACHINELOGENTRY, 53@client-A0F680D1DD3C
2022-11-12 05:49:36,874 [s2@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 12, message 9 -> (t:1, i:12), STATEMACHINELOGENTRY, 59@client-3C515A836CCF
2022-11-12 05:49:36,876 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-3C515A836CCF->s2: receive RaftClientReply:client-3C515A836CCF->s2@group-3F034D1816FA, cid=59, SUCCESS, logIndex=12, commits[s2:c12, s0:c2, s1:c2]
2022-11-12 05:49:36,876 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, message 0 -> (t:1, i:3), STATEMACHINELOGENTRY, 41@client-9376B82C5D2B
2022-11-12 05:49:36,876 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 4, 2nd Messag... -> (t:1, i:4), STATEMACHINELOGENTRY, 39@client-8B05F9A67668
2022-11-12 05:49:36,876 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, message 0 -> (t:1, i:3), STATEMACHINELOGENTRY, 41@client-9376B82C5D2B
2022-11-12 05:49:36,876 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, message 1 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-92408F0D14B6
2022-11-12 05:49:36,877 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 4, 2nd Messag... -> (t:1, i:4), STATEMACHINELOGENTRY, 39@client-8B05F9A67668
2022-11-12 05:49:36,877 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 6, message 2 -> (t:1, i:6), STATEMACHINELOGENTRY, 45@client-F7EA55A26E33
2022-11-12 05:49:36,877 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 5, message 1 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-92408F0D14B6
2022-11-12 05:49:36,877 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, message 4 -> (t:1, i:7), STATEMACHINELOGENTRY, 49@client-C1F5C1E10741
2022-11-12 05:49:36,877 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 6, message 2 -> (t:1, i:6), STATEMACHINELOGENTRY, 45@client-F7EA55A26E33
2022-11-12 05:49:36,877 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 47@client-CF1DAA10C3BE
2022-11-12 05:49:36,877 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 7, message 4 -> (t:1, i:7), STATEMACHINELOGENTRY, 49@client-C1F5C1E10741
2022-11-12 05:49:36,877 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 51@client-7E13257A75B0
2022-11-12 05:49:36,877 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 47@client-CF1DAA10C3BE
2022-11-12 05:49:36,877 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 10, message 7 -> (t:1, i:10), STATEMACHINELOGENTRY, 55@client-0C36598DD183
2022-11-12 05:49:36,878 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 51@client-7E13257A75B0
2022-11-12 05:49:36,878 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, message 6 -> (t:1, i:11), STATEMACHINELOGENTRY, 53@client-A0F680D1DD3C
2022-11-12 05:49:36,878 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 10, message 7 -> (t:1, i:10), STATEMACHINELOGENTRY, 55@client-0C36598DD183
2022-11-12 05:49:36,878 [s0@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 12, message 9 -> (t:1, i:12), STATEMACHINELOGENTRY, 59@client-3C515A836CCF
2022-11-12 05:49:36,878 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 11, message 6 -> (t:1, i:11), STATEMACHINELOGENTRY, 53@client-A0F680D1DD3C
2022-11-12 05:49:36,878 [s1@group-3F034D1816FA-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 12, message 9 -> (t:1, i:12), STATEMACHINELOGENTRY, 59@client-3C515A836CCF
2022-11-12 05:49:36,879 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-F7EA55A26E33->s2: receive RaftClientReply:client-F7EA55A26E33->s2@group-3F034D1816FA, cid=45, SUCCESS, logIndex=6, commits[s2:c12, s0:c2, s1:c2]
2022-11-12 05:49:36,879 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-A0F680D1DD3C->s2: receive RaftClientReply:client-A0F680D1DD3C->s2@group-3F034D1816FA, cid=53, SUCCESS, logIndex=11, commits[s2:c12, s0:c2, s1:c2]
2022-11-12 05:49:36,879 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-C1F5C1E10741->s2: receive RaftClientReply:client-C1F5C1E10741->s2@group-3F034D1816FA, cid=49, SUCCESS, logIndex=7, commits[s2:c12, s0:c2, s1:c2]
2022-11-12 05:49:36,879 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-8B05F9A67668->s2: receive RaftClientReply:client-8B05F9A67668->s2@group-3F034D1816FA, cid=39, SUCCESS, logIndex=4, commits[s2:c12, s0:c2, s1:c2]
2022-11-12 05:49:36,880 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-0C36598DD183->s2: receive RaftClientReply:client-0C36598DD183->s2@group-3F034D1816FA, cid=55, SUCCESS, logIndex=10, commits[s2:c12, s0:c2, s1:c2]
2022-11-12 05:49:36,881 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-7E13257A75B0->s2: receive RaftClientReply:client-7E13257A75B0->s2@group-3F034D1816FA, cid=51, SUCCESS, logIndex=9, commits[s2:c12, s0:c2, s1:c2]
2022-11-12 05:49:36,881 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-CF1DAA10C3BE->s2: receive RaftClientReply:client-CF1DAA10C3BE->s2@group-3F034D1816FA, cid=47, SUCCESS, logIndex=8, commits[s2:c12, s0:c2, s1:c2]
2022-11-12 05:49:36,881 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-92408F0D14B6->s2: receive RaftClientReply:client-92408F0D14B6->s2@group-3F034D1816FA, cid=43, SUCCESS, logIndex=5, commits[s2:c12, s0:c2, s1:c2]
2022-11-12 05:49:36,884 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-9376B82C5D2B->s2: receive RaftClientReply:client-9376B82C5D2B->s2@group-3F034D1816FA, cid=41, SUCCESS, logIndex=3, commits[s2:c12, s0:c2, s1:c2]
2022-11-12 05:49:36,889 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-08C87E380F66->s2: receive RaftClientReply:client-08C87E380F66->s2@group-3F034D1816FA, cid=60, SUCCESS, logIndex=13, commits[s2:c13, s0:c12, s1:c12]
2022-11-12 05:49:36,904 [grpc-default-executor-8] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=1025kb (=1049600)-message
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s2@group-3F034D1816FA: Failed to acquire a pending write request for RaftClientRequest:client-08C87E380F66->s2@group-3F034D1816FA, cid=61, seq=2, RW, Message:1b7fa8e92bb664643369...(size=1049600)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:404)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:310)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:341)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s2@group-3F034D1816FA: Failed to acquire a pending write request for RaftClientRequest:client-08C87E380F66->s2@group-3F034D1816FA, cid=61, seq=2, RW, Message:1b7fa8e92bb664643369...(size=1049600)
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:770)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:881)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:819)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:819)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:889)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:888)
		... 7 more
2022-11-12 05:49:37,185 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2022-11-12 05:49:37,185 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2022-11-12 05:49:37,185 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2022-11-12 05:49:37,185 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2022-11-12 05:49:37,185 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2022-11-12 05:49:37,185 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-3F034D1816FA:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-3F034D1816FA-SegmentedRaftLog:OPENED:c13, conf=0: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-3F034D1816FA:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-3F034D1816FA-SegmentedRaftLog:OPENED:c13, conf=0: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-3F034D1816FA:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-3F034D1816FA-SegmentedRaftLog:OPENED:c13, conf=0: peers:[s0|rpc:localhost:35931|admin:localhost:35415|client:localhost:44719|dataStream:localhost:40505|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44299|admin:localhost:46211|client:localhost:35893|dataStream:localhost:34399|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43361|admin:localhost:36765|client:localhost:33727|dataStream:localhost:33455|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:37,186 [MiniRaftCluster-15] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2022-11-12 05:49:37,189 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-3F034D1816FA: shutdown
2022-11-12 05:49:37,189 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F034D1816FA,id=s0
2022-11-12 05:49:37,189 [MiniRaftCluster-17] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2022-11-12 05:49:37,190 [MiniRaftCluster-16] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2022-11-12 05:49:37,190 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:37,189 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-3F034D1816FA-FollowerState
2022-11-12 05:49:37,192 [MiniRaftCluster-15] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s1 Close channels
2022-11-12 05:49:37,191 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-3F034D1816FA: shutdown
2022-11-12 05:49:37,192 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F034D1816FA,id=s1
2022-11-12 05:49:37,192 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-3F034D1816FA-FollowerState
2022-11-12 05:49:37,192 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-3F034D1816FA-StateMachineUpdater: set stopIndex = 13
2022-11-12 05:49:37,192 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s1@group-3F034D1816FA: applyIndex: 13
2022-11-12 05:49:37,193 [s1@group-3F034D1816FA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s1@group-3F034D1816FA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:37,191 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:37,191 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-3F034D1816FA: shutdown
2022-11-12 05:49:37,194 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3F034D1816FA,id=s2
2022-11-12 05:49:37,194 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s2: shutdown s2@group-3F034D1816FA-LeaderStateImpl
2022-11-12 05:49:37,191 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:37,194 [s2-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s2@group-3F034D1816FA-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:37,195 [s2@group-3F034D1816FA->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s2@group-3F034D1816FA->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:37,195 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:37,195 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:37,194 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s1@group-3F034D1816FA-SegmentedRaftLogWorker close()
2022-11-12 05:49:37,192 [s1@group-3F034D1816FA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-3F034D1816FA-FollowerState was interrupted
2022-11-12 05:49:37,199 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(402)) - s2@group-3F034D1816FA->s1-GrpcLogAppender is already stopped
2022-11-12 05:49:37,192 [s0@group-3F034D1816FA-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-3F034D1816FA-FollowerState was interrupted
2022-11-12 05:49:37,192 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-3F034D1816FA-StateMachineUpdater: set stopIndex = 13
2022-11-12 05:49:37,200 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s0@group-3F034D1816FA: applyIndex: 13
2022-11-12 05:49:37,199 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(402)) - s2@group-3F034D1816FA->s1-GrpcLogAppender is already stopped
2022-11-12 05:49:37,199 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:37,200 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:37,199 [grpc-default-executor-7] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - s1: installSnapshot onError, lastRequest: null: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2022-11-12 05:49:37,198 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s2->s1#25-t1,previous=(t:1, i:12),leaderCommit=13,initializing? true,entries: size=1, first=(t:1, i:13), METADATAENTRY(c:12)
2022-11-12 05:49:37,200 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:37,197 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-3F034D1816FA-StateMachineUpdater: set stopIndex = 13
2022-11-12 05:49:37,200 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s2@group-3F034D1816FA: applyIndex: 13
2022-11-12 05:49:37,200 [s2@group-3F034D1816FA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s2@group-3F034D1816FA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:37,195 [s2@group-3F034D1816FA->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s2@group-3F034D1816FA->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:37,200 [s0@group-3F034D1816FA-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s0@group-3F034D1816FA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:37,201 [MiniRaftCluster-15] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s2 Close channels
2022-11-12 05:49:37,201 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s0 Close channels
2022-11-12 05:49:37,201 [JvmPauseMonitor15] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2022-11-12 05:49:37,201 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: null
2022-11-12 05:49:37,202 [grpc-default-executor-7] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s2@group-3F034D1816FA->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:37,202 [grpc-default-executor-7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(136)) - s2@group-3F034D1816FA->s0-GrpcLogAppender: Failed to getClient for s0
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s2 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:120)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:57)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:414)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:37,202 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:37,205 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:37,202 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: s2->s0#33-t1,previous=(t:1, i:12),leaderCommit=12,initializing? true,entries: size=1, first=(t:1, i:13), METADATAENTRY(c:12)
2022-11-12 05:49:37,204 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s2@group-3F034D1816FA-SegmentedRaftLogWorker close()
2022-11-12 05:49:37,205 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s2@group-3F034D1816FA->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:37,204 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s0@group-3F034D1816FA-SegmentedRaftLogWorker close()
2022-11-12 05:49:37,205 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(136)) - s2@group-3F034D1816FA->s0-GrpcLogAppender: Failed to getClient for s0
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s2 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:120)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:57)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:414)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:37,206 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:37,207 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:37,213 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s1 Close channels
2022-11-12 05:49:37,213 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:37,213 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:37,213 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:37,213 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:37,214 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:37,214 [JvmPauseMonitor14] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2022-11-12 05:49:37,215 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:37,215 [JvmPauseMonitor16] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2022-11-12 05:49:37,215 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2022-11-12 05:49:37,216 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2022-11-12 05:49:37,216 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2022-11-12 05:49:37,216 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2022-11-12 05:49:37,218 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2022-11-12 05:49:37,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-9E905E734AF9:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]
2022-11-12 05:49:37,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2022-11-12 05:49:37,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2022-11-12 05:49:37,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2022-11-12 05:49:37,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2022-11-12 05:49:37,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2022-11-12 05:49:37,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2022-11-12 05:49:37,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-9E905E734AF9:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:37,219 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0
2022-11-12 05:49:37,219 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0 does not exist.
2022-11-12 05:49:37,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0
2022-11-12 05:49:37,220 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:37,220 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:37,223 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 42281 (custom)
2022-11-12 05:49:37,223 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:37,223 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34123 (custom)
2022-11-12 05:49:37,223 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:37,223 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35123 (custom)
2022-11-12 05:49:37,223 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:37,223 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:37,223 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:37,223 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:37,223 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:37,224 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:37,224 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:37,226 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:37,226 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:37,226 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:37,226 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:37,226 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:37,226 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0] (custom)
2022-11-12 05:49:37,227 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-9E905E734AF9:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER] returns group-9E905E734AF9:java.util.concurrent.CompletableFuture@52dccea1[Not completed]
2022-11-12 05:49:37,227 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:37,228 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:37,228 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-9E905E734AF9:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-9E905E734AF9: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:37,229 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:37,230 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:37,230 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:37,230 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:37,231 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:37,231 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:37,231 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:37,231 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:37,231 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:37,231 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0] (custom)
2022-11-12 05:49:37,231 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0/6da85a2c-1026-4be4-9109-9e905e734af9 does not exist. Creating ...
2022-11-12 05:49:37,232 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0/6da85a2c-1026-4be4-9109-9e905e734af9
2022-11-12 05:49:37,233 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0/6da85a2c-1026-4be4-9109-9e905e734af9/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:37,233 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0/6da85a2c-1026-4be4-9109-9e905e734af9/current
2022-11-12 05:49:37,233 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0/6da85a2c-1026-4be4-9109-9e905e734af9/sm
2022-11-12 05:49:37,234 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0/6da85a2c-1026-4be4-9109-9e905e734af9 has been successfully formatted.
2022-11-12 05:49:37,235 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:37,235 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:37,235 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:37,235 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:37,235 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:37,235 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:37,235 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-9E905E734AF9-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0/6da85a2c-1026-4be4-9109-9e905e734af9
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:37,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:37,237 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:37,237 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:37,237 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:37,237 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:37,237 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-9E905E734AF9-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:37,237 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-9E905E734AF9-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:37,241 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-9E905E734AF9: start as a follower, conf=-1: peers:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:37,241 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-9E905E734AF9: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:37,241 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-9E905E734AF9-FollowerState
2022-11-12 05:49:37,241 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-9E905E734AF9,id=s0
2022-11-12 05:49:37,241 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:37,241 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:37,241 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:37,242 [s0@group-9E905E734AF9-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:37,242 [s0@group-9E905E734AF9-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:37,242 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2022-11-12 05:49:37,243 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 34123
2022-11-12 05:49:37,243 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 35123
2022-11-12 05:49:37,244 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 42281
2022-11-12 05:49:37,244 [JvmPauseMonitor17] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2022-11-12 05:49:37,244 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:37,244 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-9E905E734AF9:t0, leader=null, voted=, raftlog=Memoized:s0@group-9E905E734AF9-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:37,245 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-9E905E734AF9:t0, leader=null, voted=, raftlog=Memoized:s0@group-9E905E734AF9-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-9E905E734AF9:t0, leader=null, voted=, raftlog=Memoized:s0@group-9E905E734AF9-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:147)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:37,535 [s0@group-9E905E734AF9-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-9E905E734AF9-FollowerState: change to CANDIDATE, lastRpcElapsedTime:294198694ns, electionTimeout:293ms
2022-11-12 05:49:37,535 [s0@group-9E905E734AF9-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-9E905E734AF9-FollowerState
2022-11-12 05:49:37,535 [s0@group-9E905E734AF9-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-9E905E734AF9: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:37,536 [s0@group-9E905E734AF9-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:37,536 [s0@group-9E905E734AF9-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-9E905E734AF9-LeaderElection13
2022-11-12 05:49:37,539 [s0@group-9E905E734AF9-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-9E905E734AF9-LeaderElection13 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:37,540 [s0@group-9E905E734AF9-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-9E905E734AF9-LeaderElection13 PRE_VOTE round 0: result PASSED (term=0)
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-9E905E734AF9-LeaderElection13 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-9E905E734AF9-LeaderElection13 ELECTION round 0: result PASSED (term=1)
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-9E905E734AF9-LeaderElection13
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-9E905E734AF9: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-9E905E734AF9: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 312ms
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:37,542 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:37,543 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:37,543 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:37,543 [s0@group-9E905E734AF9-LeaderElection13] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-9E905E734AF9-LeaderStateImpl
2022-11-12 05:49:37,543 [s0@group-9E905E734AF9-LeaderElection13] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-9E905E734AF9-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:37,545 [s0@group-9E905E734AF9-LeaderElection13] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-9E905E734AF9: set configuration 0: peers:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:37,553 [s0@group-9E905E734AF9-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-9E905E734AF9-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpcb8f0ad67/s0/6da85a2c-1026-4be4-9109-9e905e734af9/current/log_inprogress_0
2022-11-12 05:49:37,695 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-9E905E734AF9:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-9E905E734AF9-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:37,696 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:37,696 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 42281 (custom)
2022-11-12 05:49:37,696 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:37,696 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34123 (custom)
2022-11-12 05:49:37,696 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:37,696 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35123 (custom)
2022-11-12 05:49:37,696 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:37,696 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:37,696 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:37,696 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:37,696 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:37,696 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:37,696 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:37,697 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'appendEntries'
2022-11-12 05:49:37,698 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "appendEntries" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking appendEntries call is not supported
	at org.apache.ratis.grpc.server.GrpcService.appendEntries(GrpcService.java:363)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$1(TestRaftServerWithGrpc.java:155)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:154)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:147)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:37,698 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'installSnapshot'
2022-11-12 05:49:37,698 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "installSnapshot" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking installSnapshot call is not supported
	at org.apache.ratis.grpc.server.GrpcService.installSnapshot(GrpcService.java:369)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$2(TestRaftServerWithGrpc.java:159)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:158)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:147)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:37,699 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2022-11-12 05:49:37,700 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2022-11-12 05:49:37,700 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2022-11-12 05:49:37,700 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2022-11-12 05:49:37,700 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2022-11-12 05:49:37,700 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-9E905E734AF9:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-9E905E734AF9-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35123|admin:localhost:42281|client:localhost:34123|dataStream:localhost:41475|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:37,702 [MiniRaftCluster-18] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2022-11-12 05:49:37,702 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:37,702 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-9E905E734AF9: shutdown
2022-11-12 05:49:37,702 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-9E905E734AF9,id=s0
2022-11-12 05:49:37,702 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-9E905E734AF9-LeaderStateImpl
2022-11-12 05:49:37,702 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-9E905E734AF9-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:37,702 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-9E905E734AF9-StateMachineUpdater: set stopIndex = 0
2022-11-12 05:49:37,703 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:37,703 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:37,703 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:37,703 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:37,703 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s0@group-9E905E734AF9: applyIndex: 0
2022-11-12 05:49:37,703 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:37,704 [s0@group-9E905E734AF9-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s0@group-9E905E734AF9-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:37,704 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s0@group-9E905E734AF9-SegmentedRaftLogWorker close()
2022-11-12 05:49:37,705 [JvmPauseMonitor17] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2022-11-12 05:49:37,705 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2022-11-12 05:49:37,706 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2022-11-12 05:49:37,706 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2022-11-12 05:49:37,706 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2022-11-12 05:49:37,706 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2022-11-12 05:49:37,706 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-4F031CF0D4E1:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]
2022-11-12 05:49:37,707 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2022-11-12 05:49:37,707 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2022-11-12 05:49:37,707 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2022-11-12 05:49:37,707 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2022-11-12 05:49:37,707 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2022-11-12 05:49:37,707 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2022-11-12 05:49:37,707 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-4F031CF0D4E1:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:37,707 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0
2022-11-12 05:49:37,707 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0 does not exist.
2022-11-12 05:49:37,707 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0
2022-11-12 05:49:37,707 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:37,707 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:37,707 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33953 (custom)
2022-11-12 05:49:37,708 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:37,708 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 35503 (custom)
2022-11-12 05:49:37,708 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:37,708 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 38411 (custom)
2022-11-12 05:49:37,708 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:37,708 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:37,708 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:37,708 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:37,708 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:37,708 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:37,708 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:37,709 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:37,709 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:37,709 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:37,709 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:37,709 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:37,709 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0] (custom)
2022-11-12 05:49:37,710 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-4F031CF0D4E1:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER] returns group-4F031CF0D4E1:java.util.concurrent.CompletableFuture@63d566e6[Not completed]
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-4F031CF0D4E1:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-4F031CF0D4E1: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:37,711 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:37,712 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:37,712 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:37,712 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:37,712 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:37,712 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:37,713 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:37,713 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:37,713 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0] (custom)
2022-11-12 05:49:37,713 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1 does not exist. Creating ...
2022-11-12 05:49:37,713 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1
2022-11-12 05:49:37,714 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:37,714 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1/current
2022-11-12 05:49:37,714 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1/sm
2022-11-12 05:49:37,715 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1 has been successfully formatted.
2022-11-12 05:49:37,716 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:37,716 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:37,716 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:37,716 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:37,716 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:37,716 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:37,716 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:37,716 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:37,716 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-4F031CF0D4E1-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-4F031CF0D4E1-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-4F031CF0D4E1-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:37,717 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-4F031CF0D4E1: start as a follower, conf=-1: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:37,718 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-4F031CF0D4E1: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:37,718 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-4F031CF0D4E1-FollowerState
2022-11-12 05:49:37,718 [s0@group-4F031CF0D4E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:37,718 [s0@group-4F031CF0D4E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:37,718 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-4F031CF0D4E1,id=s0
2022-11-12 05:49:37,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:37,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:37,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:37,718 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2022-11-12 05:49:37,719 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 35503
2022-11-12 05:49:37,719 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 38411
2022-11-12 05:49:37,719 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 33953
2022-11-12 05:49:37,720 [JvmPauseMonitor18] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2022-11-12 05:49:37,721 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:37,721 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-4F031CF0D4E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-4F031CF0D4E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:37,721 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-4F031CF0D4E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-4F031CF0D4E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-4F031CF0D4E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-4F031CF0D4E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestServerRestartOnException(TestRaftServerWithGrpc.java:117)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testServerRestartOnException(TestRaftServerWithGrpc.java:100)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:37,988 [s0@group-4F031CF0D4E1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-4F031CF0D4E1-FollowerState: change to CANDIDATE, lastRpcElapsedTime:270820242ns, electionTimeout:270ms
2022-11-12 05:49:37,989 [s0@group-4F031CF0D4E1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-4F031CF0D4E1-FollowerState
2022-11-12 05:49:37,989 [s0@group-4F031CF0D4E1-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-4F031CF0D4E1: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:37,989 [s0@group-4F031CF0D4E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:37,989 [s0@group-4F031CF0D4E1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-4F031CF0D4E1-LeaderElection14
2022-11-12 05:49:37,993 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-4F031CF0D4E1-LeaderElection14 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:37,993 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-4F031CF0D4E1-LeaderElection14 PRE_VOTE round 0: result PASSED (term=0)
2022-11-12 05:49:37,994 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-4F031CF0D4E1-LeaderElection14 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:37,994 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-4F031CF0D4E1-LeaderElection14 ELECTION round 0: result PASSED (term=1)
2022-11-12 05:49:37,994 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-4F031CF0D4E1-LeaderElection14
2022-11-12 05:49:37,994 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-4F031CF0D4E1: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2022-11-12 05:49:37,994 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-4F031CF0D4E1: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 283ms
2022-11-12 05:49:37,994 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:37,995 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:37,995 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2022-11-12 05:49:37,995 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:37,995 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:37,995 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:37,995 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:37,995 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:37,995 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-4F031CF0D4E1-LeaderStateImpl
2022-11-12 05:49:37,996 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-4F031CF0D4E1-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:37,997 [s0@group-4F031CF0D4E1-LeaderElection14] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-4F031CF0D4E1: set configuration 0: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:38,006 [s0@group-4F031CF0D4E1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-4F031CF0D4E1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1/current/log_inprogress_0
2022-11-12 05:49:38,172 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-4F031CF0D4E1:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-4F031CF0D4E1-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:38,172 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:38,172 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:38,172 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33953 (custom)
2022-11-12 05:49:38,173 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:38,173 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 35503 (custom)
2022-11-12 05:49:38,173 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:38,173 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 38411 (custom)
2022-11-12 05:49:38,173 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:38,173 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:38,173 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:38,173 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:38,173 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:38,173 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:38,173 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:38,174 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:38,174 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:38,174 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:38,174 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:38,174 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:38,175 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0] (custom)
2022-11-12 05:49:38,175 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(254)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1
2022-11-12 05:49:38,175 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-4F031CF0D4E1:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER] returns group-4F031CF0D4E1:java.util.concurrent.CompletableFuture@5f91c499[Not completed]
2022-11-12 05:49:38,176 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:38,176 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:38,176 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:38,176 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:38,176 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:38,176 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:38,177 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'Starting a new server with the same address should fail'
2022-11-12 05:49:38,177 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:38,177 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:38,177 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33953 (custom)
2022-11-12 05:49:38,177 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:38,177 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 35503 (custom)
2022-11-12 05:49:38,177 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:38,177 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 38411 (custom)
2022-11-12 05:49:38,177 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:38,177 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:38,177 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:38,177 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:38,177 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:38,177 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:38,177 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:38,178 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:38,179 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:38,179 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:38,179 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:38,179 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:38,179 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0] (custom)
2022-11-12 05:49:38,179 [pool-25-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-4F031CF0D4E1:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-4F031CF0D4E1
2022-11-12 05:49:38,179 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:38,179 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:38,179 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:38,179 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:38,179 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:38,179 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-4F031CF0D4E1: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:38,180 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:38,179 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(254)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1
2022-11-12 05:49:38,180 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-4F031CF0D4E1:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER] returns group-4F031CF0D4E1:java.util.concurrent.CompletableFuture@15f1845b[Not completed]
2022-11-12 05:49:38,180 [pool-26-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-4F031CF0D4E1:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-4F031CF0D4E1
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-4F031CF0D4E1: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:38,181 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:38,182 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:38,182 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:38,182 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0] (custom)
2022-11-12 05:49:38,182 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:38,182 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1/in_use.lock", attempt #1/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2022-11-12 05:49:39,183 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:39,183 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1/in_use.lock", attempt #2/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2022-11-12 05:49:40,184 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:40,184 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1/in_use.lock", attempt #3/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2022-11-12 05:49:41,185 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:41,185 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1/in_use.lock", attempt #4/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2022-11-12 05:49:42,186 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:42,187 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "Starting a new server with the same address should fail" throws CompletionException
java.util.concurrent.CompletionException: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1. The directory is already locked
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$BiRelay.tryFire(CompletableFuture.java:1423)
	at java.base/java.util.concurrent.CompletableFuture$CoCompletion.tryFire(CompletableFuture.java:1144)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:176)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpccb7659f9/s0/b04185e6-6ef5-4aeb-885e-4f031cf0d4e1. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:140)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	... 4 more
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2022-11-12 05:49:42,187 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:42,187 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33953 (custom)
2022-11-12 05:49:42,187 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:42,187 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 35503 (custom)
2022-11-12 05:49:42,187 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:42,187 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 38411 (custom)
2022-11-12 05:49:42,187 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:42,188 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,188 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:42,188 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:42,188 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:42,188 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:42,188 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:42,189 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2022-11-12 05:49:42,189 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2022-11-12 05:49:42,189 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2022-11-12 05:49:42,189 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2022-11-12 05:49:42,189 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2022-11-12 05:49:42,189 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-4F031CF0D4E1:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-4F031CF0D4E1-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:38411|admin:localhost:33953|client:localhost:35503|dataStream:localhost:46865|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:42,190 [MiniRaftCluster-19] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2022-11-12 05:49:42,190 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-4F031CF0D4E1: shutdown
2022-11-12 05:49:42,190 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-4F031CF0D4E1,id=s0
2022-11-12 05:49:42,190 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-4F031CF0D4E1-LeaderStateImpl
2022-11-12 05:49:42,190 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-4F031CF0D4E1-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:42,191 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-4F031CF0D4E1-StateMachineUpdater: set stopIndex = 0
2022-11-12 05:49:42,191 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s0@group-4F031CF0D4E1: applyIndex: 0
2022-11-12 05:49:42,191 [s0@group-4F031CF0D4E1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s0@group-4F031CF0D4E1-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:42,192 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s0@group-4F031CF0D4E1-SegmentedRaftLogWorker close()
2022-11-12 05:49:42,196 [JvmPauseMonitor18] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2022-11-12 05:49:42,196 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2022-11-12 05:49:42,197 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2022-11-12 05:49:42,197 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2022-11-12 05:49:42,197 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(33)) - Set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2022-11-12 05:49:42,198 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2022-11-12 05:49:42,198 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-8A47E716E9A1:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]
2022-11-12 05:49:42,198 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2022-11-12 05:49:42,198 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2022-11-12 05:49:42,198 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2022-11-12 05:49:42,198 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2022-11-12 05:49:42,198 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2022-11-12 05:49:42,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2022-11-12 05:49:42,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-8A47E716E9A1:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:42,199 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0
2022-11-12 05:49:42,199 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0 does not exist.
2022-11-12 05:49:42,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0
2022-11-12 05:49:42,199 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:42,199 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:42,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44981 (custom)
2022-11-12 05:49:42,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:42,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 39449 (custom)
2022-11-12 05:49:42,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:42,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37547 (custom)
2022-11-12 05:49:42,200 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:42,200 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,200 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:42,200 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:42,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:42,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:42,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:42,201 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:42,201 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:42,202 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:42,202 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:42,202 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:42,202 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0] (custom)
2022-11-12 05:49:42,202 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-8A47E716E9A1:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER] returns group-8A47E716E9A1:java.util.concurrent.CompletableFuture@f4a78e2[Not completed]
2022-11-12 05:49:42,202 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-8A47E716E9A1:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:42,203 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1
2022-11-12 05:49:42,202 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:42,203 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1 does not exist.
2022-11-12 05:49:42,203 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1
2022-11-12 05:49:42,203 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:42,203 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:42,203 [pool-27-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-8A47E716E9A1:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:42,203 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:42,203 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:42,203 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:42,203 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:42,203 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:42,203 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:42,203 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33467 (custom)
2022-11-12 05:49:42,203 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:42,203 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 33133 (custom)
2022-11-12 05:49:42,203 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:42,203 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 44383 (custom)
2022-11-12 05:49:42,203 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:42,203 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,203 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:42,203 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:42,203 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:42,204 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:42,204 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:42,204 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:42,204 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:42,205 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:42,205 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:42,205 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:42,205 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1] (custom)
2022-11-12 05:49:42,206 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:42,213 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:42,213 [pool-27-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-8A47E716E9A1: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:42,213 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:42,213 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:42,206 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:42,206 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-8A47E716E9A1:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER] returns group-8A47E716E9A1:java.util.concurrent.CompletableFuture@7bc80ad0[Not completed]
2022-11-12 05:49:42,213 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-8A47E716E9A1:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER], format? true
2022-11-12 05:49:42,213 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(170)) - deleteFully target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2
2022-11-12 05:49:42,213 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(186)) - deleteFully: target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2 does not exist.
2022-11-12 05:49:42,214 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2
2022-11-12 05:49:42,214 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2022-11-12 05:49:42,214 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:42,214 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 41147 (custom)
2022-11-12 05:49:42,214 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2022-11-12 05:49:42,214 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 39891 (custom)
2022-11-12 05:49:42,214 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2022-11-12 05:49:42,214 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 45485 (custom)
2022-11-12 05:49:42,214 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:42,214 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,214 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:42,214 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:42,214 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:42,214 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2022-11-12 05:49:42,215 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2022-11-12 05:49:42,215 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:42,216 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:42,216 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:42,216 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2022-11-12 05:49:42,217 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2022-11-12 05:49:42,217 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2022-11-12 05:49:42,217 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:42,217 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:42,217 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2] (custom)
2022-11-12 05:49:42,216 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:42,218 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:42,218 [pool-28-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-8A47E716E9A1:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:42,218 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:42,218 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:42,218 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:42,218 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:42,219 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:42,219 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:42,219 [pool-28-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-8A47E716E9A1: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:42,219 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:42,219 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:42,219 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:42,219 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:42,219 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:42,220 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:42,220 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:42,220 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:42,220 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:42,221 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:42,220 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:42,221 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:42,221 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:42,221 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:42,221 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:42,222 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-8A47E716E9A1:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER] returns group-8A47E716E9A1:java.util.concurrent.CompletableFuture@6fc89cb0[Not completed]
2022-11-12 05:49:42,222 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:42,222 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:42,222 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:42,222 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0] (custom)
2022-11-12 05:49:42,222 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:42,222 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:42,222 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1 does not exist. Creating ...
2022-11-12 05:49:42,223 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1
2022-11-12 05:49:42,223 [pool-29-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-8A47E716E9A1:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:42,223 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2022-11-12 05:49:42,223 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:42,223 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2022-11-12 05:49:42,223 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2022-11-12 05:49:42,223 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2022-11-12 05:49:42,223 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2022-11-12 05:49:42,224 [pool-29-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-8A47E716E9A1: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2022-11-12 05:49:42,224 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:42,224 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current
2022-11-12 05:49:42,224 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/sm
2022-11-12 05:49:42,224 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2022-11-12 05:49:42,225 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2022-11-12 05:49:42,225 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2022-11-12 05:49:42,225 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2022-11-12 05:49:42,225 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1 has been successfully formatted.
2022-11-12 05:49:42,225 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:42,225 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:42,225 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:42,225 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:42,225 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-8A47E716E9A1-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:42,226 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:42,227 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,227 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:42,227 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:42,227 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:42,228 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-8A47E716E9A1-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:42,228 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-8A47E716E9A1-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:42,228 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2022-11-12 05:49:42,229 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:42,229 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2022-11-12 05:49:42,229 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2022-11-12 05:49:42,229 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2022-11-12 05:49:42,229 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2022-11-12 05:49:42,229 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-8A47E716E9A1: start as a follower, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,229 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-8A47E716E9A1: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:42,229 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:42,236 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-8A47E716E9A1,id=s0
2022-11-12 05:49:42,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:42,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:42,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:42,237 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2022-11-12 05:49:42,237 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 39449
2022-11-12 05:49:42,238 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 37547
2022-11-12 05:49:42,238 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s0: GrpcService started, listening on 44981
2022-11-12 05:49:42,239 [s0@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:42,239 [s0@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:42,245 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:42,245 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:42,245 [JvmPauseMonitor19] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2022-11-12 05:49:42,245 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1] (custom)
2022-11-12 05:49:42,245 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1 does not exist. Creating ...
2022-11-12 05:49:42,245 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1
2022-11-12 05:49:42,246 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:42,246 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current
2022-11-12 05:49:42,246 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/sm
2022-11-12 05:49:42,247 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1 has been successfully formatted.
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:42,248 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-8A47E716E9A1-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-8A47E716E9A1-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-8A47E716E9A1-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-8A47E716E9A1: start as a follower, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,249 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-8A47E716E9A1: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:42,250 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:42,253 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-8A47E716E9A1,id=s1
2022-11-12 05:49:42,253 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:42,253 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:42,253 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:42,253 [s1@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:42,253 [s1@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:42,253 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2022-11-12 05:49:42,254 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 33133
2022-11-12 05:49:42,254 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 44383
2022-11-12 05:49:42,255 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s1: GrpcService started, listening on 33467
2022-11-12 05:49:42,255 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2022-11-12 05:49:42,255 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2022-11-12 05:49:42,255 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2] (custom)
2022-11-12 05:49:42,255 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1 does not exist. Creating ...
2022-11-12 05:49:42,255 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1
2022-11-12 05:49:42,256 [JvmPauseMonitor20] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2022-11-12 05:49:42,256 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/in_use.lock acquired by nodename 5938@fv-az137-986
2022-11-12 05:49:42,257 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current
2022-11-12 05:49:42,257 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/sm
2022-11-12 05:49:42,258 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1 has been successfully formatted.
2022-11-12 05:49:42,258 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2022-11-12 05:49:42,258 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2022-11-12 05:49:42,258 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2022-11-12 05:49:42,258 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2022-11-12 05:49:42,258 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,258 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2022-11-12 05:49:42,258 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2022-11-12 05:49:42,258 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-8A47E716E9A1-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-8A47E716E9A1-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:42,259 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-8A47E716E9A1-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2022-11-12 05:49:42,261 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-8A47E716E9A1: start as a follower, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,261 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-8A47E716E9A1: changes role from      null to FOLLOWER at term 0 for startAsFollower
2022-11-12 05:49:42,261 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:42,264 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-8A47E716E9A1,id=s2
2022-11-12 05:49:42,264 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2022-11-12 05:49:42,264 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2022-11-12 05:49:42,264 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2022-11-12 05:49:42,266 [s2@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:42,266 [s2@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:42,266 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2022-11-12 05:49:42,266 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 39891
2022-11-12 05:49:42,267 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 45485
2022-11-12 05:49:42,267 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(310)) - s2: GrpcService started, listening on 41147
2022-11-12 05:49:42,268 [JvmPauseMonitor21] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2022-11-12 05:49:42,268 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:42,268 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:42,268 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:169)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:42,407 [s1@group-8A47E716E9A1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-8A47E716E9A1-FollowerState: change to CANDIDATE, lastRpcElapsedTime:157844302ns, electionTimeout:154ms
2022-11-12 05:49:42,408 [s1@group-8A47E716E9A1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:42,408 [s1@group-8A47E716E9A1-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-8A47E716E9A1: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2022-11-12 05:49:42,408 [s1@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:42,408 [s1@group-8A47E716E9A1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-8A47E716E9A1-LeaderElection15
2022-11-12 05:49:42,409 [s1@group-8A47E716E9A1-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-8A47E716E9A1-LeaderElection15 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,410 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:42,410 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:42,410 [s1@group-8A47E716E9A1-LeaderElection15-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2022-11-12 05:49:42,410 [s1@group-8A47E716E9A1-LeaderElection15-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2022-11-12 05:49:42,422 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-8A47E716E9A1: receive requestVote(PRE_VOTE, s1, group-8A47E716E9A1, 0, (t:0, i:0))
2022-11-12 05:49:42,422 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-8A47E716E9A1-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:42,422 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-8A47E716E9A1 replies to PRE_VOTE vote request: s1<-s2#0:OK-t0. Peer's state: s2@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,423 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-8A47E716E9A1: receive requestVote(PRE_VOTE, s1, group-8A47E716E9A1, 0, (t:0, i:0))
2022-11-12 05:49:42,424 [s1@group-8A47E716E9A1-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-8A47E716E9A1-LeaderElection15: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:42,424 [s1@group-8A47E716E9A1-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s2#0:OK-t0
2022-11-12 05:49:42,424 [s1@group-8A47E716E9A1-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-8A47E716E9A1-LeaderElection15 PRE_VOTE round 0: result PASSED
2022-11-12 05:49:42,424 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-8A47E716E9A1-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:42,425 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-8A47E716E9A1 replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-8A47E716E9A1:t0, leader=null, voted=, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,425 [s1@group-8A47E716E9A1-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-8A47E716E9A1-LeaderElection15 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,426 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:42,426 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:42,427 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-8A47E716E9A1: receive requestVote(ELECTION, s1, group-8A47E716E9A1, 1, (t:0, i:0))
2022-11-12 05:49:42,427 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-8A47E716E9A1-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:42,427 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-8A47E716E9A1: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s1
2022-11-12 05:49:42,427 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:42,428 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:42,428 [s0@group-8A47E716E9A1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-8A47E716E9A1-FollowerState was interrupted
2022-11-12 05:49:42,432 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-8A47E716E9A1 replies to ELECTION vote request: s1<-s0#0:OK-t1. Peer's state: s0@group-8A47E716E9A1:t1, leader=null, voted=s1, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,432 [s0@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:42,432 [s0@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:42,432 [s1@group-8A47E716E9A1-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-8A47E716E9A1-LeaderElection15: ELECTION PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:42,432 [s1@group-8A47E716E9A1-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:OK-t1
2022-11-12 05:49:42,432 [s1@group-8A47E716E9A1-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-8A47E716E9A1-LeaderElection15 ELECTION round 0: result PASSED
2022-11-12 05:49:42,432 [s1@group-8A47E716E9A1-LeaderElection15] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-8A47E716E9A1-LeaderElection15
2022-11-12 05:49:42,432 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-8A47E716E9A1: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2022-11-12 05:49:42,432 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-8A47E716E9A1: change Leader from null to s1 at term 1 for becomeLeader, leader elected after 213ms
2022-11-12 05:49:42,432 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:42,433 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-8A47E716E9A1-LeaderStateImpl
2022-11-12 05:49:42,434 [s1@group-8A47E716E9A1-LeaderElection15] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-8A47E716E9A1-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:42,439 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s2@group-8A47E716E9A1: receive requestVote(ELECTION, s1, group-8A47E716E9A1, 1, (t:0, i:0))
2022-11-12 05:49:42,441 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-8A47E716E9A1-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2022-11-12 05:49:42,441 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-8A47E716E9A1: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s1
2022-11-12 05:49:42,441 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:42,441 [s2@group-8A47E716E9A1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-8A47E716E9A1-FollowerState was interrupted
2022-11-12 05:49:42,445 [s1@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-8A47E716E9A1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_0
2022-11-12 05:49:42,455 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:42,465 [s2@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2022-11-12 05:49:42,465 [s2@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2022-11-12 05:49:42,466 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s2@group-8A47E716E9A1 replies to ELECTION vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-8A47E716E9A1:t1, leader=null, voted=s1, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,469 [s1@group-8A47E716E9A1-LeaderElection15] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s1@group-8A47E716E9A1: set configuration 0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,472 [s0-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-8A47E716E9A1: change Leader from null to s1 at term 1 for appendEntries, leader elected after 258ms
2022-11-12 05:49:42,472 [s0-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-8A47E716E9A1: set configuration 0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,472 [s0-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-8A47E716E9A1-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:42,480 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-8A47E716E9A1: change Leader from null to s1 at term 1 for appendEntries, leader elected after 256ms
2022-11-12 05:49:42,481 [s2-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s2@group-8A47E716E9A1: set configuration 0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:42,481 [s2-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-8A47E716E9A1-SegmentedRaftLogWorker: Starting segment from index:0
2022-11-12 05:49:42,489 [s0@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-8A47E716E9A1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_0
2022-11-12 05:49:42,507 [s2@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-8A47E716E9A1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_0
2022-11-12 05:49:42,719 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:42,720 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:42,720 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:42,733 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-48438206736F->s0: receive RaftClientReply:client-48438206736F->s0@group-8A47E716E9A1, cid=62, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-8A47E716E9A1 is not the leader s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2022-11-12 05:49:42,735 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:42,736 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:42,744 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-48438206736F->s1: receive RaftClientReply:client-48438206736F->s1@group-8A47E716E9A1, cid=62, SUCCESS, logIndex=0, commits[s1:c0, s0:c0, s2:c0]
2022-11-12 05:49:42,749 [s1@group-8A47E716E9A1-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 63@client-48438206736F
2022-11-12 05:49:42,751 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-48438206736F->s1: receive RaftClientReply:client-48438206736F->s1@group-8A47E716E9A1, cid=63, SUCCESS, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2022-11-12 05:49:42,751 [s2@group-8A47E716E9A1-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 63@client-48438206736F
2022-11-12 05:49:42,752 [s0@group-8A47E716E9A1-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 63@client-48438206736F
2022-11-12 05:49:42,753 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:42,753 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:42,759 [s1@group-8A47E716E9A1-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-124BDB83A3F7
2022-11-12 05:49:42,761 [s2@group-8A47E716E9A1-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-124BDB83A3F7
2022-11-12 05:49:42,761 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-124BDB83A3F7->s1: receive RaftClientReply:client-124BDB83A3F7->s1@group-8A47E716E9A1, cid=1, SUCCESS, logIndex=3, commits[s1:c3, s0:c2, s2:c2]
2022-11-12 05:49:42,761 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block START_TRANSACTION
2022-11-12 05:49:42,761 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:blockRequestor(49)) - Block requestor s1
2022-11-12 05:49:42,762 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:42,762 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:42,762 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:42,762 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #1/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:195)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:42,768 [s0@group-8A47E716E9A1-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-124BDB83A3F7
2022-11-12 05:49:42,838 [s0-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s0: Block request from s1
2022-11-12 05:49:42,838 [s2-server-thread3] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s2: Block request from s1
2022-11-12 05:49:42,862 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:42,863 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:42,863 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:42,863 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #2/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:195)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:42,963 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:42,964 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:42,964 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:42,964 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #3/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:195)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:43,044 [s2@group-8A47E716E9A1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-8A47E716E9A1-FollowerState: change to CANDIDATE, lastRpcElapsedTime:283000665ns, electionTimeout:224ms
2022-11-12 05:49:43,044 [s2@group-8A47E716E9A1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:43,044 [s2@group-8A47E716E9A1-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-8A47E716E9A1: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2022-11-12 05:49:43,044 [s2@group-8A47E716E9A1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2022-11-12 05:49:43,044 [s2@group-8A47E716E9A1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-8A47E716E9A1-LeaderElection16
2022-11-12 05:49:43,045 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-8A47E716E9A1: change Leader from s1 to null at term 1 for PRE_VOTE
2022-11-12 05:49:43,045 [s2@group-8A47E716E9A1-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-8A47E716E9A1-LeaderElection16 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:43,045 [s2@group-8A47E716E9A1-LeaderElection16-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2022-11-12 05:49:43,045 [s2@group-8A47E716E9A1-LeaderElection16-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2022-11-12 05:49:43,051 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-8A47E716E9A1: receive requestVote(PRE_VOTE, s2, group-8A47E716E9A1, 1, (t:1, i:4))
2022-11-12 05:49:43,051 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-8A47E716E9A1-FOLLOWER: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:43,052 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-8A47E716E9A1 replies to PRE_VOTE vote request: s2<-s0#0:OK-t1. Peer's state: s0@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:43,052 [s2@group-8A47E716E9A1-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-8A47E716E9A1-LeaderElection16: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:43,052 [s2@group-8A47E716E9A1-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s0#0:OK-t1
2022-11-12 05:49:43,052 [s2@group-8A47E716E9A1-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-8A47E716E9A1-LeaderElection16 PRE_VOTE round 0: result PASSED
2022-11-12 05:49:43,053 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-8A47E716E9A1: receive requestVote(PRE_VOTE, s2, group-8A47E716E9A1, 1, (t:1, i:4))
2022-11-12 05:49:43,053 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-8A47E716E9A1-LEADER: reject PRE_VOTE from s2: this server is the leader and still has leadership
2022-11-12 05:49:43,053 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-8A47E716E9A1 replies to PRE_VOTE vote request: s2<-s1#0:FAIL-t1. Peer's state: s1@group-8A47E716E9A1:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:43,054 [s2@group-8A47E716E9A1-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-8A47E716E9A1-LeaderElection16 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:43,055 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s0@group-8A47E716E9A1: receive requestVote(ELECTION, s2, group-8A47E716E9A1, 2, (t:1, i:4))
2022-11-12 05:49:43,055 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-8A47E716E9A1-FOLLOWER: accept ELECTION from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:43,055 [grpc-default-executor-4] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-8A47E716E9A1: change Leader from s1 to null at term 2 for updateCurrentTerm
2022-11-12 05:49:43,055 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-8A47E716E9A1: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s2
2022-11-12 05:49:43,055 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:43,056 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:43,057 [s0@group-8A47E716E9A1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-8A47E716E9A1-FollowerState was interrupted
2022-11-12 05:49:43,061 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1294)) - s1@group-8A47E716E9A1: receive requestVote(ELECTION, s2, group-8A47E716E9A1, 2, (t:1, i:4))
2022-11-12 05:49:43,062 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-8A47E716E9A1-LEADER: accept ELECTION from s2: our priority 0 <= candidate's priority 0
2022-11-12 05:49:43,062 [grpc-default-executor-1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-8A47E716E9A1: change Leader from s1 to null at term 2 for updateCurrentTerm
2022-11-12 05:49:43,062 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-8A47E716E9A1: changes role from    LEADER to FOLLOWER at term 2 for candidate:s2
2022-11-12 05:49:43,062 [grpc-default-executor-1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s1: shutdown s1@group-8A47E716E9A1-LeaderStateImpl
2022-11-12 05:49:43,062 [s1@group-8A47E716E9A1->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s1@group-8A47E716E9A1->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:43,062 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s0@group-8A47E716E9A1 replies to ELECTION vote request: s2<-s0#0:OK-t2. Peer's state: s0@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:43,062 [s1@group-8A47E716E9A1->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s1@group-8A47E716E9A1->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:43,062 [grpc-default-executor-1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s1@group-8A47E716E9A1-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:43,063 [grpc-default-executor-1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:43,064 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2022-11-12 05:49:43,065 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:43,065 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:431)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:195)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2022-11-12 05:49:43,066 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1327)) - s1@group-8A47E716E9A1 replies to ELECTION vote request: s2<-s1#0:OK-t2. Peer's state: s1@group-8A47E716E9A1:t2, leader=null, voted=s2, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:43,070 [grpc-default-executor-5] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s1->s2#11-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2022-11-12 05:49:43,071 [s2@group-8A47E716E9A1-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-8A47E716E9A1-LeaderElection16: ELECTION PASSED received 1 response(s) and 0 exception(s):
2022-11-12 05:49:43,071 [s2@group-8A47E716E9A1-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s1#0:OK-t2
2022-11-12 05:49:43,071 [s2@group-8A47E716E9A1-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-8A47E716E9A1-LeaderElection16 ELECTION round 0: result PASSED
2022-11-12 05:49:43,071 [s2@group-8A47E716E9A1-LeaderElection16] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-8A47E716E9A1-LeaderElection16
2022-11-12 05:49:43,071 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-8A47E716E9A1: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2022-11-12 05:49:43,071 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-8A47E716E9A1: change Leader from null to s2 at term 2 for becomeLeader, leader elected after 26ms
2022-11-12 05:49:43,071 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2022-11-12 05:49:43,071 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:43,071 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-8A47E716E9A1->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:43,072 [grpc-default-executor-1] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-8A47E716E9A1->s2: nextIndex: updateUnconditionally 5 -> 4
2022-11-12 05:49:43,071 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2022-11-12 05:49:43,072 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2022-11-12 05:49:43,072 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2022-11-12 05:49:43,072 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2022-11-12 05:49:43,072 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2022-11-12 05:49:43,072 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2022-11-12 05:49:43,072 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:43,072 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:43,072 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:43,073 [s2@group-8A47E716E9A1-LeaderElection16] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:43,073 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:43,073 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:43,073 [s2@group-8A47E716E9A1-LeaderElection16] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:43,073 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:43,073 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2022-11-12 05:49:43,073 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2022-11-12 05:49:43,079 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2022-11-12 05:49:43,079 [s2@group-8A47E716E9A1-LeaderElection16] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2022-11-12 05:49:43,079 [grpc-default-executor-6] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: s1->s0#20-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2022-11-12 05:49:43,079 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2022-11-12 05:49:43,079 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2022-11-12 05:49:43,079 [s2@group-8A47E716E9A1-LeaderElection16] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2022-11-12 05:49:43,079 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2022-11-12 05:49:43,079 [s2@group-8A47E716E9A1-LeaderElection16] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-8A47E716E9A1-LeaderStateImpl
2022-11-12 05:49:43,080 [s2@group-8A47E716E9A1-LeaderElection16] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s2@group-8A47E716E9A1-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2022-11-12 05:49:43,081 [s2@group-8A47E716E9A1-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_0-4
2022-11-12 05:49:43,081 [s2@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s2@group-8A47E716E9A1-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_0-4
2022-11-12 05:49:43,087 [grpc-default-executor-5] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-8A47E716E9A1->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:43,088 [grpc-default-executor-5] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-8A47E716E9A1->s0: nextIndex: updateUnconditionally 5 -> 4
2022-11-12 05:49:43,093 [s2@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-8A47E716E9A1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s2/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_5
2022-11-12 05:49:43,103 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-8A47E716E9A1: change Leader from null to s2 at term 2 for appendEntries, leader elected after 47ms
2022-11-12 05:49:43,103 [s2@group-8A47E716E9A1-LeaderElection16] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s2@group-8A47E716E9A1: set configuration 5: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:43,110 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-8A47E716E9A1: change Leader from null to s2 at term 2 for appendEntries, leader elected after 48ms
2022-11-12 05:49:43,111 [s0-server-thread3] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s0@group-8A47E716E9A1: set configuration 5: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:43,112 [s0-server-thread3] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s0@group-8A47E716E9A1-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2022-11-12 05:49:43,116 [s0@group-8A47E716E9A1-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_0-4
2022-11-12 05:49:43,116 [s0@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s0@group-8A47E716E9A1-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_0-4
2022-11-12 05:49:43,121 [s1-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(377)) - s1@group-8A47E716E9A1: set configuration 5: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2022-11-12 05:49:43,121 [s1-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s1@group-8A47E716E9A1-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2022-11-12 05:49:43,122 [s1@group-8A47E716E9A1-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_0-4
2022-11-12 05:49:43,122 [s1@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s1@group-8A47E716E9A1-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_0-4
2022-11-12 05:49:43,133 [s0@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-8A47E716E9A1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s0/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_5
2022-11-12 05:49:43,133 [s1@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-8A47E716E9A1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/976b176f/MiniRaftClusterWithGrpc6617979e/s1/a8eaff2e-97d3-480c-a28c-8a47e716e9a1/current/log_inprogress_5
2022-11-12 05:49:43,516 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t2, leader=s2, voted=s2, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-8A47E716E9A1:t2, leader=s2, voted=s2, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-8A47E716E9A1:t2, leader=s2, voted=s2, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:43,516 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:lambda$changeLeader$6(435)) - Changed leader from s1 to s2
2022-11-12 05:49:43,516 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:unblockRequestor(54)) - UnBlock requestor s1
2022-11-12 05:49:43,516 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should fail'
2022-11-12 05:49:43,516 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should fail" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-124BDB83A3F7->s1: Stream completed: no reply for async request cid=2
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-124BDB83A3F7->s1: Stream completed: no reply for async request cid=2
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:406)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:310)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onCompleted(GrpcClientProtocolClient.java:346)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 more
2022-11-12 05:49:43,517 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock START_TRANSACTION
2022-11-12 05:49:43,518 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2022-11-12 05:49:43,518 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2022-11-12 05:49:43,521 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should timeout'
2022-11-12 05:49:43,739 [s0-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s0: unBlock request from s1
2022-11-12 05:49:43,739 [s2-server-thread3] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s2: unBlock request from s1
2022-11-12 05:49:43,741 [grpc-default-executor-5] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: null
2022-11-12 05:49:43,743 [grpc-default-executor-5] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-8A47E716E9A1->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:43,743 [grpc-default-executor-5] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-8A47E716E9A1->s0: nextIndex: updateUnconditionally 4 -> 3
2022-11-12 05:49:43,744 [grpc-default-executor-5] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: null
2022-11-12 05:49:43,744 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-8A47E716E9A1->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:43,744 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-8A47E716E9A1->s2: nextIndex: updateUnconditionally 4 -> 3
2022-11-12 05:49:44,521 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should timeout" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-124BDB83A3F7->s1 request #3 timeout 1s
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:207)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:165)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-124BDB83A3F7->s1 request #3 timeout 1s
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$timeoutCheck$5(GrpcClientProtocolClient.java:384)
	at java.base/java.util.Optional.ifPresent(Optional.java:183)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.handleReplyFuture(GrpcClientProtocolClient.java:388)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.timeoutCheck(GrpcClientProtocolClient.java:383)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$onNext$3(GrpcClientProtocolClient.java:376)
	at org.apache.ratis.util.TimeoutTimer.lambda$onTimeout$2(TimeoutTimer.java:101)
	at org.apache.ratis.util.LogUtils.runAndLog(LogUtils.java:38)
	at org.apache.ratis.util.LogUtils$1.run(LogUtils.java:79)
	at org.apache.ratis.util.TimeoutTimer$Task.run(TimeoutTimer.java:55)
	at java.base/java.util.TimerThread.mainLoop(Timer.java:556)
	at java.base/java.util.TimerThread.run(Timer.java:506)
2022-11-12 05:49:44,526 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(321)) - client-124BDB83A3F7->s1: receive RaftClientReply:client-124BDB83A3F7->s1@group-8A47E716E9A1, cid=3, FAILED org.apache.ratis.protocol.exceptions.AlreadyClosedException: SlidingWindow$Server:2-OrderedRequestStreamObserver2 is closing: seq = 3 > nextToProcess = -1 will NEVER be processed; request = 3:null, logIndex=0, commits[]
2022-11-12 05:49:47,522 [Time-limited test] WARN  grpc.GrpcUtil (GrpcUtil.java:shutdownManagedChannel(216)) - Timed out gracefully shutting down connection: ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=719, target=localhost:33133}}. 
2022-11-12 05:49:47,524 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2022-11-12 05:49:47,524 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2022-11-12 05:49:47,524 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2022-11-12 05:49:47,524 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2022-11-12 05:49:47,524 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2022-11-12 05:49:47,524 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-8A47E716E9A1:t2, leader=s2, voted=s2, raftlog=Memoized:s0@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-8A47E716E9A1:t2, leader=s2, voted=s2, raftlog=Memoized:s1@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-8A47E716E9A1:t2, leader=s2, voted=s2, raftlog=Memoized:s2@group-8A47E716E9A1-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:37547|admin:localhost:44981|client:localhost:39449|dataStream:localhost:33569|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:44383|admin:localhost:33467|client:localhost:33133|dataStream:localhost:33019|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45485|admin:localhost:41147|client:localhost:39891|dataStream:localhost:46563|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2022-11-12 05:49:47,525 [MiniRaftCluster-20] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2022-11-12 05:49:47,529 [MiniRaftCluster-21] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2022-11-12 05:49:47,532 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-8A47E716E9A1: shutdown
2022-11-12 05:49:47,533 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-8A47E716E9A1,id=s0
2022-11-12 05:49:47,533 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:47,533 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-8A47E716E9A1-StateMachineUpdater: set stopIndex = 6
2022-11-12 05:49:47,533 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s0@group-8A47E716E9A1: applyIndex: 6
2022-11-12 05:49:47,533 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:47,533 [s0@group-8A47E716E9A1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-8A47E716E9A1-FollowerState was interrupted
2022-11-12 05:49:47,533 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:47,541 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-8A47E716E9A1: shutdown
2022-11-12 05:49:47,541 [MiniRaftCluster-22] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2022-11-12 05:49:47,541 [s0@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s0@group-8A47E716E9A1-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:47,541 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2022-11-12 05:49:47,541 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s0 Close channels
2022-11-12 05:49:47,541 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-8A47E716E9A1: shutdown
2022-11-12 05:49:47,542 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-8A47E716E9A1,id=s2
2022-11-12 05:49:47,542 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s2: shutdown s2@group-8A47E716E9A1-LeaderStateImpl
2022-11-12 05:49:47,541 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-8A47E716E9A1,id=s1
2022-11-12 05:49:47,542 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-8A47E716E9A1-FollowerState
2022-11-12 05:49:47,542 [s2-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s2@group-8A47E716E9A1-PendingRequests: sendNotLeaderResponses
2022-11-12 05:49:47,542 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-8A47E716E9A1-StateMachineUpdater: set stopIndex = 6
2022-11-12 05:49:47,542 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s1@group-8A47E716E9A1: applyIndex: 6
2022-11-12 05:49:47,542 [s1@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s1@group-8A47E716E9A1-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:47,542 [s2@group-8A47E716E9A1->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s2@group-8A47E716E9A1->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:47,542 [s2@group-8A47E716E9A1->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s2@group-8A47E716E9A1->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2022-11-12 05:49:47,543 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: s2->s0#2-t2,previous=(t:2, i:5),leaderCommit=5,initializing? true,entries: size=1, first=(t:2, i:6), METADATAENTRY(c:5)
2022-11-12 05:49:47,543 [s1@group-8A47E716E9A1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-8A47E716E9A1-FollowerState was interrupted
2022-11-12 05:49:47,543 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s2 Close channels
2022-11-12 05:49:47,544 [grpc-default-executor-5] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: null
2022-11-12 05:49:47,544 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s2->s1#2-t2,previous=(t:2, i:5),leaderCommit=5,initializing? true,entries: size=1, first=(t:2, i:6), METADATAENTRY(c:5)
2022-11-12 05:49:47,545 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s2@group-8A47E716E9A1->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:47,545 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s2@group-8A47E716E9A1->s0: nextIndex: updateUnconditionally 7 -> 6
2022-11-12 05:49:47,545 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: null
2022-11-12 05:49:47,546 [grpc-default-executor-5] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s2@group-8A47E716E9A1->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:47,546 [grpc-default-executor-5] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s2@group-8A47E716E9A1->s1: nextIndex: updateUnconditionally 7 -> 6
2022-11-12 05:49:47,546 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s2@group-8A47E716E9A1->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:47,546 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s2@group-8A47E716E9A1->s1: nextIndex: updateUnconditionally 6 -> 5
2022-11-12 05:49:47,546 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s2@group-8A47E716E9A1->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2022-11-12 05:49:47,546 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s2@group-8A47E716E9A1->s0: nextIndex: updateUnconditionally 6 -> 5
2022-11-12 05:49:47,546 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:47,547 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:47,550 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:47,550 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:47,550 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s0@group-8A47E716E9A1-SegmentedRaftLogWorker close()
2022-11-12 05:49:47,551 [MiniRaftCluster-22] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s0 Close channels
2022-11-12 05:49:47,551 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s1@group-8A47E716E9A1-SegmentedRaftLogWorker close()
2022-11-12 05:49:47,552 [MiniRaftCluster-22] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(111)) - s1 Close channels
2022-11-12 05:49:47,553 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2022-11-12 05:49:47,553 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server GrpcServerProtocolService now
2022-11-12 05:49:47,553 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-8A47E716E9A1-StateMachineUpdater: set stopIndex = 6
2022-11-12 05:49:47,553 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:47,553 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:47,554 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(413)) - s2@group-8A47E716E9A1: applyIndex: 6
2022-11-12 05:49:47,554 [s2@group-8A47E716E9A1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(333)) - s2@group-8A47E716E9A1-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2022-11-12 05:49:47,554 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(246)) - s2@group-8A47E716E9A1-SegmentedRaftLogWorker close()
2022-11-12 05:49:47,555 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:47,555 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server GrpcServerProtocolService successfully
2022-11-12 05:49:47,555 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:47,555 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:47,556 [JvmPauseMonitor20] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2022-11-12 05:49:47,556 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(319)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2022-11-12 05:49:47,556 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:47,556 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(328)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2022-11-12 05:49:47,557 [JvmPauseMonitor19] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2022-11-12 05:49:47,557 [JvmPauseMonitor21] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2022-11-12 05:49:47,557 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
