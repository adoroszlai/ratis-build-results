2024-01-22 22:31:53,583 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2024-01-22 22:31:53,589 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2024-01-22 22:31:53,593 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.RaftServer$Division log level to DEBUG
2024-01-22 22:31:53,593 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.raftlog.RaftLog log level to DEBUG
2024-01-22 22:31:53,594 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.client.RaftClient log level to DEBUG
2024-01-22 22:31:53,775 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(305)) - new MiniRaftClusterWithGrpc with group-BBE07AC09D79:[s0|localhost:15000]
2024-01-22 22:31:53,775 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(338)) - .............................................................. 
2024-01-22 22:31:53,775 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - ... 
2024-01-22 22:31:53,775 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ...     Starting MiniRaftClusterWithGrpc
2024-01-22 22:31:53,776 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ... 
2024-01-22 22:31:53,776 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - .............................................................. 
2024-01-22 22:31:53,776 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(317)) - servers = {}
2024-01-22 22:31:53,787 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(381)) - newRaftServer: s0, group-BBE07AC09D79:[s0|localhost:15000], format? true
2024-01-22 22:31:53,789 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0
2024-01-22 22:31:53,791 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0 does not exist.
2024-01-22 22:31:53,791 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(386)) - Formatted directory target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0
2024-01-22 22:31:53,822 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:31:53,957 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:31:53,959 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 15001 (custom)
2024-01-22 22:31:53,959 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:31:53,960 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 15002 (custom)
2024-01-22 22:31:53,960 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2024-01-22 22:31:53,961 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 15000 (custom)
2024-01-22 22:31:53,961 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2024-01-22 22:31:53,964 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:53,965 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2024-01-22 22:31:53,969 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:53,994 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:31:54,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2024-01-22 22:31:54,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2024-01-22 22:31:54,008 [Time-limited test] INFO  metrics.MetricRegistries (MetricRegistriesLoader.java:load(64)) - Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2024-01-22 22:31:54,430 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2024-01-22 22:31:54,433 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:31:54,433 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2024-01-22 22:31:54,434 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:31:54,440 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0] (custom)
2024-01-22 22:31:54,442 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2024-01-22 22:31:54,442 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2024-01-22 22:31:54,483 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(101)) - s0: addNew group-BBE07AC09D79:[s0|localhost:15000] returns group-BBE07AC09D79:java.util.concurrent.CompletableFuture@5a04bbec[Not completed]
2024-01-22 22:31:54,497 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:31:54,498 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:31:54,498 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:31:54,503 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(211)) - s0: new RaftServerImpl for group-BBE07AC09D79:[s0|localhost:15000] with SimpleStateMachine4Testing:uninitialized
2024-01-22 22:31:54,505 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:31:54,506 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:31:54,506 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2024-01-22 22:31:54,506 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2024-01-22 22:31:54,506 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:31:54,507 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.member.majority-add = false (default)
2024-01-22 22:31:54,507 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:31:54,515 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-BBE07AC09D79: ConfigurationManager, init=-1: peers:[s0|localhost:15000]|listeners:[], old=null, confs=<EMPTY_MAP>
2024-01-22 22:31:54,523 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2024-01-22 22:31:54,528 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2024-01-22 22:31:54,532 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2024-01-22 22:31:54,533 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2024-01-22 22:31:54,538 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2024-01-22 22:31:54,539 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2024-01-22 22:31:54,567 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:54,570 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:31:54,570 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2024-01-22 22:31:54,571 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2024-01-22 22:31:54,571 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2024-01-22 22:31:54,572 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2024-01-22 22:31:54,574 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2024-01-22 22:31:54,574 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2024-01-22 22:31:54,574 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0] (custom)
2024-01-22 22:31:54,579 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79 does not exist. Creating ...
2024-01-22 22:31:54,581 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79
2024-01-22 22:31:54,583 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(228)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/in_use.lock acquired by nodename 3663@fv-az531-398
2024-01-22 22:31:54,584 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current
2024-01-22 22:31:54,584 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm
2024-01-22 22:31:54,589 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@a788304
2024-01-22 22:31:54,594 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:31:54,595 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(99)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79 has been successfully formatted.
2024-01-22 22:31:54,596 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(61)) - Failed to Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf with options []
java.nio.file.NoSuchFileException: /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.newByteChannel(Files.java:407)
	at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)
	at java.nio.file.Files.newInputStream(Files.java:152)
	at org.apache.ratis.util.FileUtils.lambda$newInputStream$2(FileUtils.java:73)
	at org.apache.ratis.util.LogUtils.supplyAndLog(LogUtils.java:58)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:72)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:68)
	at org.apache.ratis.server.storage.RaftStorageImpl.readRaftConfiguration(RaftStorageImpl.java:156)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:141)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:342)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:203)
	at org.apache.ratis.util.ConcurrentUtils.lambda$null$4(ConcurrentUtils.java:182)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:54,598 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2024-01-22 22:31:54,601 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2024-01-22 22:31:54,602 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2024-01-22 22:31:54,613 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2024-01-22 22:31:54,614 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:54,615 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2024-01-22 22:31:54,616 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2024-01-22 22:31:54,619 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:31:54,627 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2024-01-22 22:31:54,627 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2024-01-22 22:31:54,627 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:54,629 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-BBE07AC09D79-cacheEviction-AwaitToRun,5,main] started
2024-01-22 22:31:54,635 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(182)) - new s0@group-BBE07AC09D79-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79
2024-01-22 22:31:54,635 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:31:54,636 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2024-01-22 22:31:54,638 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:31:54,638 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:31:54,639 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2024-01-22 22:31:54,639 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2024-01-22 22:31:54,640 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2024-01-22 22:31:54,640 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2024-01-22 22:31:54,642 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:31:54,644 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:54,644 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2024-01-22 22:31:54,645 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2024-01-22 22:31:54,645 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2024-01-22 22:31:54,652 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-BBE07AC09D79-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2024-01-22 22:31:54,653 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-BBE07AC09D79-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2024-01-22 22:31:54,655 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(346)) - s0@group-BBE07AC09D79: start as a follower, conf=-1: peers:[s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:54,655 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-BBE07AC09D79: changes role from      null to FOLLOWER at term 0 for startAsFollower
2024-01-22 22:31:54,656 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-BBE07AC09D79-FollowerState
2024-01-22 22:31:54,657 [s0@group-BBE07AC09D79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:31:54,658 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BBE07AC09D79,id=s0
2024-01-22 22:31:54,658 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:register(58)) - register mxBean class org.apache.ratis.server.impl.RaftServerJmxAdapter as Ratis:service=RaftServer,group=group-BBE07AC09D79,id=s0
2024-01-22 22:31:54,660 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2024-01-22 22:31:54,660 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2024-01-22 22:31:54,661 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2024-01-22 22:31:54,661 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2024-01-22 22:31:54,662 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2024-01-22 22:31:54,663 [s0@group-BBE07AC09D79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:31:54,666 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(407)) - s0: start RPC server
2024-01-22 22:31:54,728 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15002
2024-01-22 22:31:54,729 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15000
2024-01-22 22:31:54,729 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15001
2024-01-22 22:31:54,731 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2024-01-22 22:31:54,736 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:31:54,737 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:31:54,739 [Time-limited test] WARN  ratis.RaftTestUtil (RaftTestUtil.java:lambda$waitForLeader$3(120)) - Attempt #1 failed: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:31:54,923 [s0@group-BBE07AC09D79-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-BBE07AC09D79-FollowerState: change to CANDIDATE, lastRpcElapsedTime:267030990ns, electionTimeout:259ms
2024-01-22 22:31:54,923 [s0@group-BBE07AC09D79-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s0: shutdown s0@group-BBE07AC09D79-FollowerState
2024-01-22 22:31:54,924 [s0@group-BBE07AC09D79-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-BBE07AC09D79: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2024-01-22 22:31:54,927 [s0@group-BBE07AC09D79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2024-01-22 22:31:54,927 [s0@group-BBE07AC09D79-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-BBE07AC09D79-LeaderElection1
2024-01-22 22:31:54,930 [s0@group-BBE07AC09D79-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s0@group-BBE07AC09D79-LeaderElection1 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:54,931 [s0@group-BBE07AC09D79-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-BBE07AC09D79-LeaderElection1 PRE_VOTE round 0: result PASSED (term=0)
2024-01-22 22:31:54,932 [s0@group-BBE07AC09D79-LeaderElection1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@7bb14769
2024-01-22 22:31:54,934 [s0@group-BBE07AC09D79-LeaderElection1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:31:54,934 [s0@group-BBE07AC09D79-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s0@group-BBE07AC09D79-LeaderElection1 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:54,934 [s0@group-BBE07AC09D79-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-BBE07AC09D79-LeaderElection1 ELECTION round 0: result PASSED (term=1)
2024-01-22 22:31:54,937 [s0@group-BBE07AC09D79-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(131)) - s0: shutdown s0@group-BBE07AC09D79-LeaderElection1
2024-01-22 22:31:54,937 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-BBE07AC09D79: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2024-01-22 22:31:54,945 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2024-01-22 22:31:54,950 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:31:54,951 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:31:54,955 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2024-01-22 22:31:54,955 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2024-01-22 22:31:54,956 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2024-01-22 22:31:54,964 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2024-01-22 22:31:54,966 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2024-01-22 22:31:54,966 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:31:54,967 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:31:54,967 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2024-01-22 22:31:54,968 [s0@group-BBE07AC09D79-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-BBE07AC09D79-LeaderStateImpl
2024-01-22 22:31:54,969 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(505)) - s0@group-BBE07AC09D79: set firstElectionSinceStartup to false for becomeLeader
2024-01-22 22:31:54,969 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s0@group-BBE07AC09D79: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 446ms
2024-01-22 22:31:55,004 [s0@group-BBE07AC09D79-LeaderElection1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(430)) - s0@group-BBE07AC09D79-SegmentedRaftLogWorker: Starting segment from index:0
2024-01-22 22:31:55,029 [s0@group-BBE07AC09D79-LeaderElection1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-BBE07AC09D79: set configuration 0: peers:[s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:55,035 [s0@group-BBE07AC09D79-SegmentedRaftLogWorker] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_0 at position 0
2024-01-22 22:31:55,044 [s0@group-BBE07AC09D79-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(634)) - s0@group-BBE07AC09D79-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/log_inprogress_0
2024-01-22 22:31:55,052 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@24a4962
2024-01-22 22:31:55,055 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:31:55,055 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(321)) - leader is ready since appliedIndex == 0 >= startIndex == 0
2024-01-22 22:31:55,190 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(125)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:31:55,193 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:31:55,221 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 1 returns []
2024-01-22 22:31:55,222 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=1, seq=null, RW, m0
2024-01-22 22:31:55,665 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=1, seq=null, RW, Message:6d30)
2024-01-22 22:31:55,688 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=1, seq=null, RW, Message:6d30, entry=(t:1, i:1), STATEMACHINELOGENTRY, 1@client-0FF745BE8015
2024-01-22 22:31:55,690 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 1
2024-01-22 22:31:55,690 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 1@client-0FF745BE8015
2024-01-22 22:31:55,724 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 1
2024-01-22 22:31:55,724 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 2 returns [1]
2024-01-22 22:31:55,725 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=2, seq=null, RW, m1
2024-01-22 22:31:55,734 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=2, seq=null, RW, Message:6d31)
2024-01-22 22:31:55,745 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=2, seq=null, RW, Message:6d31, entry=(t:1, i:3), STATEMACHINELOGENTRY, 2@client-0FF745BE8015
2024-01-22 22:31:55,746 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 3
2024-01-22 22:31:55,746 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 2@client-0FF745BE8015
2024-01-22 22:31:55,752 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 2
2024-01-22 22:31:55,752 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 3 returns [2]
2024-01-22 22:31:55,752 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=3, seq=null, RW, m2
2024-01-22 22:31:55,756 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=3, seq=null, RW, Message:6d32)
2024-01-22 22:31:55,757 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=3, seq=null, RW, Message:6d32, entry=(t:1, i:5), STATEMACHINELOGENTRY, 3@client-0FF745BE8015
2024-01-22 22:31:55,758 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 5
2024-01-22 22:31:55,758 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 3@client-0FF745BE8015
2024-01-22 22:31:55,761 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 3
2024-01-22 22:31:55,762 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 4 returns [3]
2024-01-22 22:31:55,762 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=4, seq=null, RW, m3
2024-01-22 22:31:55,764 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=4, seq=null, RW, Message:6d33)
2024-01-22 22:31:55,765 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=4, seq=null, RW, Message:6d33, entry=(t:1, i:7), STATEMACHINELOGENTRY, 4@client-0FF745BE8015
2024-01-22 22:31:55,766 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 7
2024-01-22 22:31:55,766 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 4@client-0FF745BE8015
2024-01-22 22:31:55,772 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 4
2024-01-22 22:31:55,772 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 5 returns [4]
2024-01-22 22:31:55,772 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=5, seq=null, RW, m4
2024-01-22 22:31:55,776 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=5, seq=null, RW, Message:6d34)
2024-01-22 22:31:55,777 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=5, seq=null, RW, Message:6d34, entry=(t:1, i:9), STATEMACHINELOGENTRY, 5@client-0FF745BE8015
2024-01-22 22:31:55,778 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 9
2024-01-22 22:31:55,779 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 5@client-0FF745BE8015
2024-01-22 22:31:55,781 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_9 at position 0
2024-01-22 22:31:55,783 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 5
2024-01-22 22:31:55,783 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 6 returns [5]
2024-01-22 22:31:55,783 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=6, seq=null, RW, m5
2024-01-22 22:31:55,787 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=6, seq=null, RW, Message:6d35)
2024-01-22 22:31:55,788 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=6, seq=null, RW, Message:6d35, entry=(t:1, i:11), STATEMACHINELOGENTRY, 6@client-0FF745BE8015
2024-01-22 22:31:55,795 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_9 with options [READ]: sun.nio.ch.FileChannelImpl@48020e86
2024-01-22 22:31:55,797 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_9.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@632601f0
2024-01-22 22:31:55,798 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_9.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_9.md5 with options [REPLACE_EXISTING]
2024-01-22 22:31:55,800 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-BBE07AC09D79-StateMachineUpdater: Took a snapshot at index 9
2024-01-22 22:31:55,800 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-BBE07AC09D79-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 9
2024-01-22 22:31:55,803 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 11
2024-01-22 22:31:55,803 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 6@client-0FF745BE8015
2024-01-22 22:31:55,805 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 6
2024-01-22 22:31:55,806 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 7 returns [6]
2024-01-22 22:31:55,806 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=7, seq=null, RW, m6
2024-01-22 22:31:55,808 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=7, seq=null, RW, Message:6d36)
2024-01-22 22:31:55,809 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=7, seq=null, RW, Message:6d36, entry=(t:1, i:13), STATEMACHINELOGENTRY, 7@client-0FF745BE8015
2024-01-22 22:31:55,811 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 13
2024-01-22 22:31:55,811 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 7@client-0FF745BE8015
2024-01-22 22:31:55,813 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 7
2024-01-22 22:31:55,813 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 8 returns [7]
2024-01-22 22:31:55,814 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=8, seq=null, RW, m7
2024-01-22 22:31:55,817 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=8, seq=null, RW, Message:6d37)
2024-01-22 22:31:55,818 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=8, seq=null, RW, Message:6d37, entry=(t:1, i:15), STATEMACHINELOGENTRY, 8@client-0FF745BE8015
2024-01-22 22:31:55,819 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 15
2024-01-22 22:31:55,819 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 8@client-0FF745BE8015
2024-01-22 22:31:55,822 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 8
2024-01-22 22:31:55,823 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 9 returns [8]
2024-01-22 22:31:55,823 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=9, seq=null, RW, m8
2024-01-22 22:31:55,825 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=9, seq=null, RW, Message:6d38)
2024-01-22 22:31:55,826 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=9, seq=null, RW, Message:6d38, entry=(t:1, i:17), STATEMACHINELOGENTRY, 9@client-0FF745BE8015
2024-01-22 22:31:55,827 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 17
2024-01-22 22:31:55,827 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 9@client-0FF745BE8015
2024-01-22 22:31:55,830 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 9
2024-01-22 22:31:55,830 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 10 returns [9]
2024-01-22 22:31:55,830 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=10, seq=null, RW, m9
2024-01-22 22:31:55,833 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=10, seq=null, RW, Message:6d39)
2024-01-22 22:31:55,834 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=10, seq=null, RW, Message:6d39, entry=(t:1, i:19), STATEMACHINELOGENTRY, 10@client-0FF745BE8015
2024-01-22 22:31:55,835 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 19
2024-01-22 22:31:55,835 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 10@client-0FF745BE8015
2024-01-22 22:31:55,838 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 10
2024-01-22 22:31:55,838 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 11 returns [10]
2024-01-22 22:31:55,838 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=11, seq=null, RW, m10
2024-01-22 22:31:55,839 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_19 at position 0
2024-01-22 22:31:55,845 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=11, seq=null, RW, Message:6d3130)
2024-01-22 22:31:55,846 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=11, seq=null, RW, Message:6d3130, entry=(t:1, i:21), STATEMACHINELOGENTRY, 11@client-0FF745BE8015
2024-01-22 22:31:55,848 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_19 with options [READ]: sun.nio.ch.FileChannelImpl@eafd7ce
2024-01-22 22:31:55,849 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_19.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@75760ad6
2024-01-22 22:31:55,850 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_19.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_19.md5 with options [REPLACE_EXISTING]
2024-01-22 22:31:55,851 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-BBE07AC09D79-StateMachineUpdater: Took a snapshot at index 19
2024-01-22 22:31:55,851 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-BBE07AC09D79-StateMachineUpdater: snapshotIndex: updateIncreasingly 9 -> 19
2024-01-22 22:31:55,851 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 21
2024-01-22 22:31:55,851 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 11@client-0FF745BE8015
2024-01-22 22:31:55,854 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 11
2024-01-22 22:31:55,854 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 12 returns [11]
2024-01-22 22:31:55,854 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=12, seq=null, RW, m11
2024-01-22 22:31:55,857 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=12, seq=null, RW, Message:6d3131)
2024-01-22 22:31:55,858 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=12, seq=null, RW, Message:6d3131, entry=(t:1, i:23), STATEMACHINELOGENTRY, 12@client-0FF745BE8015
2024-01-22 22:31:55,859 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 23
2024-01-22 22:31:55,859 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 12@client-0FF745BE8015
2024-01-22 22:31:55,861 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 12
2024-01-22 22:31:55,862 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 13 returns [12]
2024-01-22 22:31:55,862 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=13, seq=null, RW, m12
2024-01-22 22:31:55,865 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=13, seq=null, RW, Message:6d3132)
2024-01-22 22:31:55,866 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=13, seq=null, RW, Message:6d3132, entry=(t:1, i:25), STATEMACHINELOGENTRY, 13@client-0FF745BE8015
2024-01-22 22:31:55,867 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 25
2024-01-22 22:31:55,867 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 13@client-0FF745BE8015
2024-01-22 22:31:55,869 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 13
2024-01-22 22:31:55,870 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 14 returns [13]
2024-01-22 22:31:55,870 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=14, seq=null, RW, m13
2024-01-22 22:31:55,873 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=14, seq=null, RW, Message:6d3133)
2024-01-22 22:31:55,873 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=14, seq=null, RW, Message:6d3133, entry=(t:1, i:27), STATEMACHINELOGENTRY, 14@client-0FF745BE8015
2024-01-22 22:31:55,874 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 27
2024-01-22 22:31:55,875 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 14@client-0FF745BE8015
2024-01-22 22:31:55,877 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 14
2024-01-22 22:31:55,878 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 15 returns [14]
2024-01-22 22:31:55,878 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=15, seq=null, RW, m14
2024-01-22 22:31:55,881 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=15, seq=null, RW, Message:6d3134)
2024-01-22 22:31:55,882 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=15, seq=null, RW, Message:6d3134, entry=(t:1, i:29), STATEMACHINELOGENTRY, 15@client-0FF745BE8015
2024-01-22 22:31:55,883 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 29
2024-01-22 22:31:55,883 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 15@client-0FF745BE8015
2024-01-22 22:31:55,886 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_29 at position 0
2024-01-22 22:31:55,887 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 15
2024-01-22 22:31:55,887 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 16 returns [15]
2024-01-22 22:31:55,887 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=16, seq=null, RW, m15
2024-01-22 22:31:55,890 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=16, seq=null, RW, Message:6d3135)
2024-01-22 22:31:55,891 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=16, seq=null, RW, Message:6d3135, entry=(t:1, i:31), STATEMACHINELOGENTRY, 16@client-0FF745BE8015
2024-01-22 22:31:55,899 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29 with options [READ]: sun.nio.ch.FileChannelImpl@7a7609e3
2024-01-22 22:31:55,900 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@74d9f9fc
2024-01-22 22:31:55,901 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29.md5 with options [REPLACE_EXISTING]
2024-01-22 22:31:55,901 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-BBE07AC09D79-StateMachineUpdater: Took a snapshot at index 29
2024-01-22 22:31:55,901 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-BBE07AC09D79-StateMachineUpdater: snapshotIndex: updateIncreasingly 19 -> 29
2024-01-22 22:31:55,901 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 31
2024-01-22 22:31:55,901 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 16@client-0FF745BE8015
2024-01-22 22:31:55,904 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 16
2024-01-22 22:31:55,904 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 17 returns [16]
2024-01-22 22:31:55,904 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=17, seq=null, RW, m16
2024-01-22 22:31:55,907 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=17, seq=null, RW, Message:6d3136)
2024-01-22 22:31:55,908 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=17, seq=null, RW, Message:6d3136, entry=(t:1, i:33), STATEMACHINELOGENTRY, 17@client-0FF745BE8015
2024-01-22 22:31:55,908 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 33
2024-01-22 22:31:55,908 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 17@client-0FF745BE8015
2024-01-22 22:31:55,911 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 17
2024-01-22 22:31:55,911 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 18 returns [17]
2024-01-22 22:31:55,911 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=18, seq=null, RW, m17
2024-01-22 22:31:55,913 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=18, seq=null, RW, Message:6d3137)
2024-01-22 22:31:55,914 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=18, seq=null, RW, Message:6d3137, entry=(t:1, i:35), STATEMACHINELOGENTRY, 18@client-0FF745BE8015
2024-01-22 22:31:55,914 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 35
2024-01-22 22:31:55,915 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 18@client-0FF745BE8015
2024-01-22 22:31:55,917 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 18
2024-01-22 22:31:55,917 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-0FF745BE8015: get 19 returns [18]
2024-01-22 22:31:55,917 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=19, seq=null, RW, m18
2024-01-22 22:31:55,920 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-BBE07AC09D79: receive client request(RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=19, seq=null, RW, Message:6d3138)
2024-01-22 22:31:55,920 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-BBE07AC09D79-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0FF745BE8015->s0@group-BBE07AC09D79, cid=19, seq=null, RW, Message:6d3138, entry=(t:1, i:37), STATEMACHINELOGENTRY, 19@client-0FF745BE8015
2024-01-22 22:31:55,921 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 37
2024-01-22 22:31:55,921 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 19@client-0FF745BE8015
2024-01-22 22:31:55,922 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-0FF745BE8015: add replied callId 19
2024-01-22 22:31:55,932 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:testInstallSnapshotDuringBootstrap(292)) - nextIndex = 39
2024-01-22 22:31:55,934 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:exists(183)) - File exists: /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29
2024-01-22 22:31:55,934 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:31:55,934 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:31:55,934 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(125)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:31:56,095 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 0) 0 term: 1, index: 1, stateMachineLogEntry {,   logData: "m0",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 1, }, 
2024-01-22 22:31:56,097 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 1) 1 term: 1, index: 3, stateMachineLogEntry {,   logData: "m1",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 2, }, 
2024-01-22 22:31:56,098 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 2) 2 term: 1, index: 5, stateMachineLogEntry {,   logData: "m2",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 3, }, 
2024-01-22 22:31:56,098 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 3) 3 term: 1, index: 7, stateMachineLogEntry {,   logData: "m3",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 4, }, 
2024-01-22 22:31:56,099 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 4) 4 term: 1, index: 9, stateMachineLogEntry {,   logData: "m4",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 5, }, 
2024-01-22 22:31:56,099 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 5) 5 term: 1, index: 11, stateMachineLogEntry {,   logData: "m5",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 6, }, 
2024-01-22 22:31:56,100 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 6) 6 term: 1, index: 13, stateMachineLogEntry {,   logData: "m6",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 7, }, 
2024-01-22 22:31:56,102 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 7) 7 term: 1, index: 15, stateMachineLogEntry {,   logData: "m7",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 8, }, 
2024-01-22 22:31:56,102 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 8) 8 term: 1, index: 17, stateMachineLogEntry {,   logData: "m8",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 9, }, 
2024-01-22 22:31:56,103 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 9) 9 term: 1, index: 19, stateMachineLogEntry {,   logData: "m9",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 10, }, 
2024-01-22 22:31:56,103 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 10) 10 term: 1, index: 21, stateMachineLogEntry {,   logData: "m10",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 11, }, 
2024-01-22 22:31:56,103 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 11) 11 term: 1, index: 23, stateMachineLogEntry {,   logData: "m11",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 12, }, 
2024-01-22 22:31:56,104 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 12) 12 term: 1, index: 25, stateMachineLogEntry {,   logData: "m12",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 13, }, 
2024-01-22 22:31:56,104 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 13) 13 term: 1, index: 27, stateMachineLogEntry {,   logData: "m13",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 14, }, 
2024-01-22 22:31:56,104 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 14) 14 term: 1, index: 29, stateMachineLogEntry {,   logData: "m14",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 15, }, 
2024-01-22 22:31:56,106 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 15) 15 term: 1, index: 31, stateMachineLogEntry {,   logData: "m15",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 16, }, 
2024-01-22 22:31:56,106 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 16) 16 term: 1, index: 33, stateMachineLogEntry {,   logData: "m16",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 17, }, 
2024-01-22 22:31:56,107 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 17) 17 term: 1, index: 35, stateMachineLogEntry {,   logData: "m17",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 18, }, 
2024-01-22 22:31:56,107 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 18) 18 term: 1, index: 37, stateMachineLogEntry {,   logData: "m18",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\354\245\034)\375\261I\253\261?\017\367E\276\200\025",   callId: 19, }, 
2024-01-22 22:31:56,107 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:addNewPeers(463)) - Add new peers [s3, s4]
2024-01-22 22:31:56,109 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(381)) - newRaftServer: s3, group-BBE07AC09D79:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000], format? true
2024-01-22 22:31:56,109 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3
2024-01-22 22:31:56,110 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3 does not exist.
2024-01-22 22:31:56,110 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(386)) - Formatted directory target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3
2024-01-22 22:31:56,110 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:31:56,110 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:31:56,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 15005 (custom)
2024-01-22 22:31:56,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:31:56,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 15006 (custom)
2024-01-22 22:31:56,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2024-01-22 22:31:56,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 15004 (custom)
2024-01-22 22:31:56,111 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2024-01-22 22:31:56,112 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:56,112 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2024-01-22 22:31:56,112 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:56,112 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:31:56,112 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2024-01-22 22:31:56,112 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2024-01-22 22:31:56,114 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2024-01-22 22:31:56,114 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:31:56,114 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2024-01-22 22:31:56,114 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:31:56,114 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3] (custom)
2024-01-22 22:31:56,115 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2024-01-22 22:31:56,115 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2024-01-22 22:31:56,115 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(101)) - s3: addNew group-BBE07AC09D79:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000] returns group-BBE07AC09D79:java.util.concurrent.CompletableFuture@5df9e395[Not completed]
2024-01-22 22:31:56,115 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(381)) - newRaftServer: s4, group-BBE07AC09D79:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000], format? true
2024-01-22 22:31:56,115 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:31:56,115 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4
2024-01-22 22:31:56,116 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:31:56,116 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4 does not exist.
2024-01-22 22:31:56,118 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:31:56,118 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(386)) - Formatted directory target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4
2024-01-22 22:31:56,118 [s3-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(211)) - s3: new RaftServerImpl for group-BBE07AC09D79:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000] with SimpleStateMachine4Testing:uninitialized
2024-01-22 22:31:56,118 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:31:56,118 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:31:56,118 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:31:56,119 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2024-01-22 22:31:56,119 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:31:56,119 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2024-01-22 22:31:56,119 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 15009 (custom)
2024-01-22 22:31:56,119 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:31:56,119 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:31:56,119 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.member.majority-add = false (default)
2024-01-22 22:31:56,119 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 15010 (custom)
2024-01-22 22:31:56,119 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:31:56,119 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2024-01-22 22:31:56,120 [s3-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s3@group-BBE07AC09D79: ConfigurationManager, init=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null, confs=<EMPTY_MAP>
2024-01-22 22:31:56,120 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 15008 (custom)
2024-01-22 22:31:56,120 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2024-01-22 22:31:56,120 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2024-01-22 22:31:56,120 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2024-01-22 22:31:56,120 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:56,120 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2024-01-22 22:31:56,120 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2024-01-22 22:31:56,120 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2024-01-22 22:31:56,120 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:56,121 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:31:56,121 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2024-01-22 22:31:56,121 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2024-01-22 22:31:56,121 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2024-01-22 22:31:56,121 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2024-01-22 22:31:56,123 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2024-01-22 22:31:56,123 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:31:56,123 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2024-01-22 22:31:56,123 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:31:56,124 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4] (custom)
2024-01-22 22:31:56,124 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2024-01-22 22:31:56,124 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2024-01-22 22:31:56,124 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:56,124 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:31:56,125 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2024-01-22 22:31:56,125 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2024-01-22 22:31:56,125 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2024-01-22 22:31:56,125 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2024-01-22 22:31:56,126 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(101)) - s4: addNew group-BBE07AC09D79:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000] returns group-BBE07AC09D79:java.util.concurrent.CompletableFuture@1a470f65[Not completed]
2024-01-22 22:31:56,127 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:31:56,127 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2024-01-22 22:31:56,127 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2024-01-22 22:31:56,127 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3] (custom)
2024-01-22 22:31:56,127 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79 does not exist. Creating ...
2024-01-22 22:31:56,128 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79
2024-01-22 22:31:56,128 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:31:56,128 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:31:56,129 [s4-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(211)) - s4: new RaftServerImpl for group-BBE07AC09D79:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000] with SimpleStateMachine4Testing:uninitialized
2024-01-22 22:31:56,129 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:31:56,129 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:31:56,129 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(228)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/in_use.lock acquired by nodename 3663@fv-az531-398
2024-01-22 22:31:56,129 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current
2024-01-22 22:31:56,129 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm
2024-01-22 22:31:56,129 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@50bcf591
2024-01-22 22:31:56,130 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2024-01-22 22:31:56,130 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2024-01-22 22:31:56,130 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:31:56,131 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.member.majority-add = false (default)
2024-01-22 22:31:56,131 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:31:56,131 [s4-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s4@group-BBE07AC09D79: ConfigurationManager, init=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null, confs=<EMPTY_MAP>
2024-01-22 22:31:56,131 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2024-01-22 22:31:56,131 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2024-01-22 22:31:56,131 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:31:56,131 [s3-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(99)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79 has been successfully formatted.
2024-01-22 22:31:56,132 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(61)) - Failed to Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf with options []
java.nio.file.NoSuchFileException: /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.newByteChannel(Files.java:407)
	at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)
	at java.nio.file.Files.newInputStream(Files.java:152)
	at org.apache.ratis.util.FileUtils.lambda$newInputStream$2(FileUtils.java:73)
	at org.apache.ratis.util.LogUtils.supplyAndLog(LogUtils.java:58)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:72)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:68)
	at org.apache.ratis.server.storage.RaftStorageImpl.readRaftConfiguration(RaftStorageImpl.java:156)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:141)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:342)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:203)
	at org.apache.ratis.util.ConcurrentUtils.lambda$null$4(ConcurrentUtils.java:182)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:56,132 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2024-01-22 22:31:56,132 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2024-01-22 22:31:56,132 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2024-01-22 22:31:56,133 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2024-01-22 22:31:56,133 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:56,133 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2024-01-22 22:31:56,133 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2024-01-22 22:31:56,134 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:31:56,134 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2024-01-22 22:31:56,135 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2024-01-22 22:31:56,135 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:56,135 [s3-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s3@group-BBE07AC09D79-cacheEviction-AwaitToRun,5,main] started
2024-01-22 22:31:56,135 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(182)) - new s3@group-BBE07AC09D79-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79
2024-01-22 22:31:56,135 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:31:56,135 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2024-01-22 22:31:56,135 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:31:56,135 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:31:56,136 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2024-01-22 22:31:56,136 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2024-01-22 22:31:56,136 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2024-01-22 22:31:56,136 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2024-01-22 22:31:56,136 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:31:56,137 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:56,138 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2024-01-22 22:31:56,138 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2024-01-22 22:31:56,138 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2024-01-22 22:31:56,138 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-BBE07AC09D79-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2024-01-22 22:31:56,138 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-BBE07AC09D79-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2024-01-22 22:31:56,138 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2024-01-22 22:31:56,138 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2024-01-22 22:31:56,138 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2024-01-22 22:31:56,138 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2024-01-22 22:31:56,139 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(346)) - s3@group-BBE07AC09D79: start as a follower, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:56,139 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s3@group-BBE07AC09D79: changes role from      null to FOLLOWER at term 0 for startAsFollower
2024-01-22 22:31:56,139 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s3: start s3@group-BBE07AC09D79-FollowerState
2024-01-22 22:31:56,139 [s3@group-BBE07AC09D79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:31:56,139 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BBE07AC09D79,id=s3
2024-01-22 22:31:56,139 [s3@group-BBE07AC09D79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:31:56,139 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:register(58)) - register mxBean class org.apache.ratis.server.impl.RaftServerJmxAdapter as Ratis:service=RaftServer,group=group-BBE07AC09D79,id=s3
2024-01-22 22:31:56,139 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2024-01-22 22:31:56,140 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2024-01-22 22:31:56,140 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2024-01-22 22:31:56,140 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2024-01-22 22:31:56,140 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2024-01-22 22:31:56,140 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(407)) - s3: start RPC server
2024-01-22 22:31:56,141 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s3: GrpcService started, listening on 15006
2024-01-22 22:31:56,141 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:56,141 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:31:56,142 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2024-01-22 22:31:56,142 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s3: GrpcService started, listening on 15004
2024-01-22 22:31:56,142 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2024-01-22 22:31:56,142 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2024-01-22 22:31:56,142 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2024-01-22 22:31:56,142 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s3: GrpcService started, listening on 15005
2024-01-22 22:31:56,142 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2024-01-22 22:31:56,142 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2024-01-22 22:31:56,143 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s3: Started
2024-01-22 22:31:56,143 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4] (custom)
2024-01-22 22:31:56,144 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79 does not exist. Creating ...
2024-01-22 22:31:56,144 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79
2024-01-22 22:31:56,145 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(228)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79/in_use.lock acquired by nodename 3663@fv-az531-398
2024-01-22 22:31:56,145 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79/current
2024-01-22 22:31:56,145 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm
2024-01-22 22:31:56,146 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@72181ed5
2024-01-22 22:31:56,147 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:31:56,147 [s4-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(99)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79 has been successfully formatted.
2024-01-22 22:31:56,147 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(61)) - Failed to Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf with options []
java.nio.file.NoSuchFileException: /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.newByteChannel(Files.java:407)
	at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)
	at java.nio.file.Files.newInputStream(Files.java:152)
	at org.apache.ratis.util.FileUtils.lambda$newInputStream$2(FileUtils.java:73)
	at org.apache.ratis.util.LogUtils.supplyAndLog(LogUtils.java:58)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:72)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:68)
	at org.apache.ratis.server.storage.RaftStorageImpl.readRaftConfiguration(RaftStorageImpl.java:156)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:141)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:342)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:203)
	at org.apache.ratis.util.ConcurrentUtils.lambda$null$4(ConcurrentUtils.java:182)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:56,147 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2024-01-22 22:31:56,147 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2024-01-22 22:31:56,147 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2024-01-22 22:31:56,147 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2024-01-22 22:31:56,148 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:56,148 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2024-01-22 22:31:56,148 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2024-01-22 22:31:56,149 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:31:56,149 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2024-01-22 22:31:56,149 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2024-01-22 22:31:56,149 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s4@group-BBE07AC09D79-cacheEviction-AwaitToRun,5,main] started
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(182)) - new s4@group-BBE07AC09D79-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s4/b314e33f-42d9-4c35-9448-bbe07ac09d79
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2024-01-22 22:31:56,150 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:31:56,152 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:56,152 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2024-01-22 22:31:56,152 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2024-01-22 22:31:56,152 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2024-01-22 22:31:56,152 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-BBE07AC09D79-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2024-01-22 22:31:56,152 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-BBE07AC09D79-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2024-01-22 22:31:56,152 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(346)) - s4@group-BBE07AC09D79: start as a follower, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:56,153 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s4@group-BBE07AC09D79: changes role from      null to FOLLOWER at term 0 for startAsFollower
2024-01-22 22:31:56,153 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s4: start s4@group-BBE07AC09D79-FollowerState
2024-01-22 22:31:56,153 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BBE07AC09D79,id=s4
2024-01-22 22:31:56,153 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:register(58)) - register mxBean class org.apache.ratis.server.impl.RaftServerJmxAdapter as Ratis:service=RaftServer,group=group-BBE07AC09D79,id=s4
2024-01-22 22:31:56,153 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2024-01-22 22:31:56,153 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2024-01-22 22:31:56,153 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2024-01-22 22:31:56,153 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2024-01-22 22:31:56,153 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2024-01-22 22:31:56,153 [s4@group-BBE07AC09D79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:31:56,154 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(407)) - s4: start RPC server
2024-01-22 22:31:56,154 [s4@group-BBE07AC09D79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:31:56,154 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s4: GrpcService started, listening on 15010
2024-01-22 22:31:56,155 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s4: GrpcService started, listening on 15008
2024-01-22 22:31:56,156 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s4: GrpcService started, listening on 15009
2024-01-22 22:31:56,156 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s4: Started
2024-01-22 22:31:56,163 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:31:56,163 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:setConfiguration(820)) - Start changing the configuration: [s3|0.0.0.0:15004, s0|localhost:15000]
2024-01-22 22:31:56,167 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest SetConfigurationRequest:client-88290AEE25E2->s0@group-BBE07AC09D79, cid=20, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s0|localhost:15000], listeners:[]
2024-01-22 22:31:56,184 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-88290AEE25E2->s0@group-BBE07AC09D79, cid=20, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s0|localhost:15000], listeners:[]
2024-01-22 22:31:56,184 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-88290AEE25E2->s0@group-BBE07AC09D79, cid=20, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s0|localhost:15000], listeners:[]
2024-01-22 22:31:56,195 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:31:56,195 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:56,195 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:31:56,197 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:31:56,198 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:31:56,198 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:56,199 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:31:56,199 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:31:56,199 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:31:56,199 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:31:56,199 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:31:56,204 [s0@group-BBE07AC09D79->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s3-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:29):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29] to follower
2024-01-22 22:31:56,207 [s0@group-BBE07AC09D79->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s3|0.0.0.0:15004
2024-01-22 22:31:56,220 [s0@group-BBE07AC09D79->s3-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29 with options []: sun.nio.ch.ChannelInputStream@3bd0dbea
2024-01-22 22:31:56,239 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(89)) - s3@group-BBE07AC09D79: receive installSnapshot: s0->s3#0-t1,chunk:7e635184-ee3d-465c-ad92-fadc2715e45c,0
2024-01-22 22:31:56,240 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@53f23913
2024-01-22 22:31:56,241 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:31:56,242 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(505)) - s3@group-BBE07AC09D79: set firstElectionSinceStartup to false for installSnapshot
2024-01-22 22:31:56,242 [grpc-default-executor-2] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s3@group-BBE07AC09D79: change Leader from null to s0 at term 1 for installSnapshot, leader elected after 121ms
2024-01-22 22:31:56,243 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/tmp/snapshot-7e635184-ee3d-465c-ad92-fadc2715e45c
2024-01-22 22:31:56,243 [grpc-default-executor-2] INFO  storage.SnapshotManager (SnapshotManager.java:installSnapshot(111)) - Installing snapshot:s0->s3#0-t1,chunk:7e635184-ee3d-465c-ad92-fadc2715e45c,0, to tmp dir:/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/tmp/snapshot-7e635184-ee3d-465c-ad92-fadc2715e45c
2024-01-22 22:31:56,244 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/tmp/snapshot-7e635184-ee3d-465c-ad92-fadc2715e45c
2024-01-22 22:31:56,244 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/tmp/snapshot-7e635184-ee3d-465c-ad92-fadc2715e45c/snapshot.1_29 with options [WRITE, CREATE]: sun.nio.ch.FileChannelImpl@3b97ce51
2024-01-22 22:31:56,244 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/tmp/snapshot-7e635184-ee3d-465c-ad92-fadc2715e45c/snapshot.1_29.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@70b2688b
2024-01-22 22:31:56,245 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/tmp/snapshot-7e635184-ee3d-465c-ad92-fadc2715e45c/snapshot.1_29.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/tmp/snapshot-7e635184-ee3d-465c-ad92-fadc2715e45c/snapshot.1_29.md5 with options [REPLACE_EXISTING]
2024-01-22 22:31:56,246 [grpc-default-executor-2] INFO  storage.SnapshotManager (SnapshotManager.java:rename(175)) - Installed snapshot, renaming temporary dir /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/tmp/snapshot-7e635184-ee3d-465c-ad92-fadc2715e45c to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm
2024-01-22 22:31:56,250 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm.tmp20240122-223156_249
2024-01-22 22:31:56,251 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/tmp/snapshot-7e635184-ee3d-465c-ad92-fadc2715e45c to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm
2024-01-22 22:31:56,251 [grpc-default-executor-2] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm.tmp20240122-223156_249
2024-01-22 22:31:56,252 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.delete /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm.tmp20240122-223156_249
2024-01-22 22:31:56,252 [grpc-default-executor-2] INFO  raftlog.RaftLog (RaftLogBase.java:lambda$new$0(56)) - s3@group-BBE07AC09D79-SegmentedRaftLog: snapshotIndex: updateIncreasingly -1 -> 29
2024-01-22 22:31:56,252 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:reinitialize(236)) - Reinitializing SimpleStateMachine4Testing:s3:group-BBE07AC09D79
2024-01-22 22:31:56,252 [grpc-default-executor-2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-BBE07AC09D79-SegmentedRaftLogWorker: flushIndex: setUnconditionally -1 -> 29
2024-01-22 22:31:56,253 [grpc-default-executor-2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-BBE07AC09D79-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally -1 -> 29
2024-01-22 22:31:56,253 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29.md5 with options []: sun.nio.ch.ChannelInputStream@5ee2211d
2024-01-22 22:31:56,253 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29.md5 with options []: sun.nio.ch.ChannelInputStream@49eac8a0
2024-01-22 22:31:56,254 [grpc-default-executor-2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:purgeImpl(381)) - purging segments:null
2024-01-22 22:31:56,254 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:1, i:29):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29]
2024-01-22 22:31:56,254 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:checkAndInstallSnapshot(194)) - s3@group-BBE07AC09D79: successfully install the entire snapshot-29
2024-01-22 22:31:56,257 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29 with options []: sun.nio.ch.ChannelInputStream@6841f24e
2024-01-22 22:31:56,258 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 1@client-0FF745BE8015
2024-01-22 22:31:56,258 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 2@client-0FF745BE8015
2024-01-22 22:31:56,258 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 3@client-0FF745BE8015
2024-01-22 22:31:56,259 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 4@client-0FF745BE8015
2024-01-22 22:31:56,259 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 5@client-0FF745BE8015
2024-01-22 22:31:56,259 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 6@client-0FF745BE8015
2024-01-22 22:31:56,259 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 7@client-0FF745BE8015
2024-01-22 22:31:56,259 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 8@client-0FF745BE8015
2024-01-22 22:31:56,260 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 9@client-0FF745BE8015
2024-01-22 22:31:56,260 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 10@client-0FF745BE8015
2024-01-22 22:31:56,260 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 11@client-0FF745BE8015
2024-01-22 22:31:56,260 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 12@client-0FF745BE8015
2024-01-22 22:31:56,261 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 13@client-0FF745BE8015
2024-01-22 22:31:56,261 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 14@client-0FF745BE8015
2024-01-22 22:31:56,261 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 15@client-0FF745BE8015
2024-01-22 22:31:56,262 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-BBE07AC09D79-StateMachineUpdater: snapshotIndex: setUnconditionally -1 -> 29
2024-01-22 22:31:56,262 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-BBE07AC09D79-StateMachineUpdater: appliedIndex: setUnconditionally -1 -> 29
2024-01-22 22:31:56,263 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshotImpl(134)) - s3@group-BBE07AC09D79: set new configuration configurationEntry {
  peers {
    id: "s0"
    address: "localhost:15000"
    dataStreamAddress: "localhost:15003"
    clientAddress: "localhost:15002"
    adminAddress: "localhost:15001"
    startupRole: FOLLOWER
  }
}
 from snapshot
2024-01-22 22:31:56,263 [grpc-default-executor-2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s3@group-BBE07AC09D79: set configuration 0: peers:[s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:56,264 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@68c2871d
2024-01-22 22:31:56,265 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:31:56,265 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(100)) - s3@group-BBE07AC09D79: reply installSnapshot: s0<-s3#0:OK-t0,SUCCESS,requestIndex=0
2024-01-22 22:31:56,267 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(186)) - s3: Completed INSTALL_SNAPSHOT, lastRequest: s0->s3#0-t1,chunk:7e635184-ee3d-465c-ad92-fadc2715e45c,0
2024-01-22 22:31:56,267 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$7(188)) - s3: Completed INSTALL_SNAPSHOT, lastReply: null
2024-01-22 22:31:56,268 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(625)) - s0@group-BBE07AC09D79->s3-InstallSnapshotResponseHandler: received the first reply s0<-s3#0:OK-t0,SUCCESS,requestIndex=0
2024-01-22 22:31:56,271 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(636)) - s0@group-BBE07AC09D79->s3-InstallSnapshotResponseHandler: Completed InstallSnapshot. Reply: serverReply {
  requestorId: "s0"
  replyId: "s3"
  raftGroupId {
    id: "\263\024\343?B\331L5\224H\273\340z\300\235y"
  }
  success: true
}
requestIndex: 0

2024-01-22 22:31:56,271 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:setAttemptedToInstallSnapshot(154)) - Follower s0@group-BBE07AC09D79->s3 acknowledged installing snapshot
2024-01-22 22:31:56,272 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(701)) - s0@group-BBE07AC09D79->s3-InstallSnapshotResponseHandler: follower responded installSnapshot COMPLETED
2024-01-22 22:31:56,273 [s0@group-BBE07AC09D79->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-BBE07AC09D79->s3: snapshotIndex: setUnconditionally 0 -> 29
2024-01-22 22:31:56,273 [s0@group-BBE07AC09D79->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-BBE07AC09D79->s3: matchIndex: setUnconditionally -1 -> 29
2024-01-22 22:31:56,273 [s0@group-BBE07AC09D79->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-BBE07AC09D79->s3: nextIndex: setUnconditionally 0 -> 30
2024-01-22 22:31:56,273 [s0@group-BBE07AC09D79->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(757)) - s0@group-BBE07AC09D79->s3-GrpcLogAppender: installed snapshot SingleFileSnapshotInfo(t:1, i:29):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_29] successfully
2024-01-22 22:31:56,293 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-BBE07AC09D79: receive appendEntries(s0, 1, (t:1, i:29), 38, true, commits:[s0:c38, s3:c-1], cId:1, entries: [(t:1, i:30), METADATAENTRY(c:29), (t:1, i:31), STATEMACHINELOGENTRY, 16@client-0FF745BE8015, (t:1, i:32), METADATAENTRY(c:31), (t:1, i:33), STATEMACHINELOGENTRY, 17@client-0FF745BE8015, (t:1, i:34), METADATAENTRY(c:33), (t:1, i:35), STATEMACHINELOGENTRY, 18@client-0FF745BE8015, (t:1, i:36), METADATAENTRY(c:35), (t:1, i:37), STATEMACHINELOGENTRY, 19@client-0FF745BE8015, (t:1, i:38), METADATAENTRY(c:37)]
2024-01-22 22:31:56,295 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:31:56,295 [s3-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(430)) - s3@group-BBE07AC09D79-SegmentedRaftLogWorker: Starting segment from index:30
2024-01-22 22:31:56,296 [s3@group-BBE07AC09D79-SegmentedRaftLogWorker] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_30 at position 0
2024-01-22 22:31:56,302 [s3@group-BBE07AC09D79-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(634)) - s3@group-BBE07AC09D79-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/log_inprogress_30
2024-01-22 22:31:56,304 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 31
2024-01-22 22:31:56,304 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 16@client-0FF745BE8015
2024-01-22 22:31:56,305 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 33
2024-01-22 22:31:56,305 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 17@client-0FF745BE8015
2024-01-22 22:31:56,305 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 35
2024-01-22 22:31:56,306 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 18@client-0FF745BE8015
2024-01-22 22:31:56,306 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 37
2024-01-22 22:31:56,306 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 19@client-0FF745BE8015
2024-01-22 22:31:56,306 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-BBE07AC09D79: succeeded to handle AppendEntries. Reply: s0<-s3#1:OK-t1,SUCCESS,nextIndex=39,followerCommit=38,matchIndex=38
2024-01-22 22:31:56,309 [s0@group-BBE07AC09D79-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-BBE07AC09D79: set configuration 39: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=peers:[s0|localhost:15000]|listeners:[]
2024-01-22 22:31:56,313 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-BBE07AC09D79: receive appendEntries(s0, 1, (t:1, i:38), 38, false, commits:[s0:c38, s3:c38], cId:4, entries: [(t:1, i:39), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15004"
clientAddress: "0.0.0.0:15006"
adminAddress: "0.0.0.0:15005"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15000"
dataStreamAddress: "localhost:15003"
clientAddress: "localhost:15002"
adminAddress: "localhost:15001"
startupRole: FOLLOWER
, old:id: "s0"
address: "localhost:15000"
dataStreamAddress: "localhost:15003"
clientAddress: "localhost:15002"
adminAddress: "localhost:15001"
startupRole: FOLLOWER
)]
2024-01-22 22:31:56,313 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s3@group-BBE07AC09D79: set configuration 39: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=peers:[s0|localhost:15000]|listeners:[]
2024-01-22 22:31:56,313 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:31:56,314 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-BBE07AC09D79: succeeded to handle AppendEntries. Reply: s0<-s3#4:OK-t1,SUCCESS,nextIndex=40,followerCommit=38,matchIndex=39
2024-01-22 22:31:56,315 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@4b8510e
2024-01-22 22:31:56,316 [s0@group-BBE07AC09D79-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-BBE07AC09D79: set configuration 41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:56,317 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:31:56,317 [s4@group-BBE07AC09D79-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-BBE07AC09D79-FollowerState: change to CANDIDATE, lastRpcElapsedTime:164593049ns, electionTimeout:163ms
2024-01-22 22:31:56,317 [s4@group-BBE07AC09D79-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s4: shutdown s4@group-BBE07AC09D79-FollowerState
2024-01-22 22:31:56,317 [s4@group-BBE07AC09D79-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s4@group-BBE07AC09D79: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2024-01-22 22:31:56,318 [s4@group-BBE07AC09D79-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2024-01-22 22:31:56,318 [s4@group-BBE07AC09D79-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s4: start s4@group-BBE07AC09D79-LeaderElection2
2024-01-22 22:31:56,319 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_39 at position 0
2024-01-22 22:31:56,320 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-BBE07AC09D79: receive appendEntries(s0, 1, (t:1, i:39), 39, false, commits:[s0:c39, s3:c38], cId:5, entries: [(t:1, i:40), METADATAENTRY(c:39)]
2024-01-22 22:31:56,320 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:31:56,322 [s4@group-BBE07AC09D79-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s4@group-BBE07AC09D79-LeaderElection2 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:56,322 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@2f89fcce
2024-01-22 22:31:56,324 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-BBE07AC09D79: succeeded to handle AppendEntries. Reply: s0<-s3#5:OK-t1,SUCCESS,nextIndex=41,followerCommit=39,matchIndex=40
2024-01-22 22:31:56,324 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-BBE07AC09D79: receive appendEntries(s0, 1, (t:1, i:40), 39, false, commits:[s0:c39, s3:c38], cId:6, entries: [(t:1, i:41), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15004"
clientAddress: "0.0.0.0:15006"
adminAddress: "0.0.0.0:15005"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15000"
dataStreamAddress: "localhost:15003"
clientAddress: "localhost:15002"
adminAddress: "localhost:15001"
startupRole: FOLLOWER
, old:)]
2024-01-22 22:31:56,324 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s3@group-BBE07AC09D79: set configuration 41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:56,324 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:31:56,326 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-BBE07AC09D79: succeeded to handle AppendEntries. Reply: s0<-s3#6:OK-t1,SUCCESS,nextIndex=42,followerCommit=39,matchIndex=41
2024-01-22 22:31:56,326 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:31:56,328 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_39 at position 0
2024-01-22 22:31:56,329 [s4@group-BBE07AC09D79-LeaderElection2-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s3|localhost:15004
2024-01-22 22:31:56,331 [s4@group-BBE07AC09D79-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:31:56,331 [s4@group-BBE07AC09D79-LeaderElection2-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s0|localhost:15000
2024-01-22 22:31:56,332 [s4@group-BBE07AC09D79-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:31:56,332 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-BBE07AC09D79: receive appendEntries(s0, 1, (t:1, i:41), 41, false, commits:[s0:c41, s3:c39], cId:9, entries: [(t:1, i:42), METADATAENTRY(c:41)]
2024-01-22 22:31:56,332 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:31:56,337 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-88290AEE25E2: add replied callId 20
2024-01-22 22:31:56,339 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-BBE07AC09D79: succeeded to handle AppendEntries. Reply: s0<-s3#9:OK-t1,SUCCESS,nextIndex=43,followerCommit=41,matchIndex=42
2024-01-22 22:31:56,340 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options [READ]: sun.nio.ch.FileChannelImpl@415ddbf5
2024-01-22 22:31:56,340 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@baefb2c
2024-01-22 22:31:56,340 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1386)) - s0@group-BBE07AC09D79: receive requestVote(PRE_VOTE, s4, group-BBE07AC09D79, 0, (t:0, i:0))
2024-01-22 22:31:56,341 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:31:56,341 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:setConfiguration(820)) - Start changing the configuration: [s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]
2024-01-22 22:31:56,341 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:56,341 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options [READ]: sun.nio.ch.FileChannelImpl@e912db3
2024-01-22 22:31:56,342 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-BBE07AC09D79-LEADER: reject PRE_VOTE from s4: s4 is not in current conf [s3|0.0.0.0:15004, s0|localhost:15000]
2024-01-22 22:31:56,342 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@6380a899
2024-01-22 22:31:56,343 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39.md5 with options [REPLACE_EXISTING]
2024-01-22 22:31:56,343 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-BBE07AC09D79-StateMachineUpdater: Took a snapshot at index 39
2024-01-22 22:31:56,343 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-BBE07AC09D79-StateMachineUpdater: snapshotIndex: updateIncreasingly 29 -> 39
2024-01-22 22:31:56,343 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3083e5bc
2024-01-22 22:31:56,344 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1419)) - s0@group-BBE07AC09D79 replies to PRE_VOTE vote request: s4<-s0#0:FAIL-t1. Peer's state: s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c41, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:56,345 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:31:56,345 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39.md5 with options [REPLACE_EXISTING]
2024-01-22 22:31:56,345 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s3@group-BBE07AC09D79-StateMachineUpdater: Took a snapshot at index 39
2024-01-22 22:31:56,345 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-BBE07AC09D79-StateMachineUpdater: snapshotIndex: updateIncreasingly 29 -> 39
2024-01-22 22:31:56,346 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@39c9c67a
2024-01-22 22:31:56,347 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:31:56,349 [s4@group-BBE07AC09D79-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-BBE07AC09D79-LeaderElection2: PRE_VOTE SHUTDOWN received 1 response(s) and 0 exception(s):
2024-01-22 22:31:56,349 [s4@group-BBE07AC09D79-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s4<-s0#0:FAIL-t1
2024-01-22 22:31:56,349 [s4@group-BBE07AC09D79-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s4@group-BBE07AC09D79-LeaderElection2 PRE_VOTE round 0: result SHUTDOWN
2024-01-22 22:31:56,350 [s4@group-BBE07AC09D79-LeaderElection2] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(417)) - s4: close
2024-01-22 22:31:56,350 [s4@group-BBE07AC09D79-LeaderElection2] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2024-01-22 22:31:56,350 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$1(457)) - s4@group-BBE07AC09D79: shutdown
2024-01-22 22:31:56,350 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(74)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BBE07AC09D79,id=s4
2024-01-22 22:31:56,350 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(131)) - s4: shutdown s4@group-BBE07AC09D79-LeaderElection2
2024-01-22 22:31:56,350 [s4-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s4@group-BBE07AC09D79-StateMachineUpdater: set stopIndex = -1
2024-01-22 22:31:56,351 [s4-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(427)) - s4@group-BBE07AC09D79: applyIndex: -1
2024-01-22 22:31:56,351 [s4@group-BBE07AC09D79-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s4@group-BBE07AC09D79-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2024-01-22 22:31:56,351 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:56,352 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:56,352 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1386)) - s3@group-BBE07AC09D79: receive requestVote(PRE_VOTE, s4, group-BBE07AC09D79, 0, (t:0, i:0))
2024-01-22 22:31:56,352 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-BBE07AC09D79-FOLLOWER: reject PRE_VOTE from s4: s4 is not in current conf [s3|0.0.0.0:15004, s0|localhost:15000]
2024-01-22 22:31:56,352 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1419)) - s3@group-BBE07AC09D79 replies to PRE_VOTE vote request: s4<-s3#0:FAIL-t1. Peer's state: s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c41, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null
2024-01-22 22:31:56,352 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:31:56,353 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:56,353 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:31:56,353 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:31:56,353 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:31:56,353 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:56,353 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:31:56,353 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:31:56,353 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:31:56,353 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:31:56,353 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:31:56,354 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:56,354 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s4|0.0.0.0:15008
2024-01-22 22:31:56,355 [Thread-51] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s3 Close channels
2024-01-22 22:31:56,356 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@73ce9a5e
2024-01-22 22:31:56,357 [Thread-52] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s0 Close channels
2024-01-22 22:31:56,358 [s4@group-BBE07AC09D79-LeaderElection2] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2024-01-22 22:31:56,358 [s4@group-BBE07AC09D79-LeaderElection2] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s4: shutdown server GrpcServerProtocolService now
2024-01-22 22:31:56,364 [grpc-default-executor-0] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(121)) - s4: INSTALL_SNAPSHOT onError, lastRequest: null: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2024-01-22 22:31:56,365 [s4@group-BBE07AC09D79-LeaderElection2] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s4: shutdown server GrpcServerProtocolService successfully
2024-01-22 22:31:56,365 [s4@group-BBE07AC09D79-LeaderElection2] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2024-01-22 22:31:56,366 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: RST_STREAM closed stream. HTTP/2 error code: CANCEL
2024-01-22 22:31:56,367 [s4@group-BBE07AC09D79-LeaderElection2] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2024-01-22 22:31:56,370 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:31:56,377 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:56,380 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:56,380 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:56,380 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4cfcd24c
2024-01-22 22:31:56,384 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:56,384 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@e2f1187
2024-01-22 22:31:56,384 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:56,388 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:56,388 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:56,388 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@ae554b7
2024-01-22 22:31:56,425 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:56,426 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:56,426 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@702a6144
2024-01-22 22:31:57,153 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(245)) - s4@group-BBE07AC09D79-SegmentedRaftLogWorker close()
2024-01-22 22:31:57,154 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s4: Stopped
2024-01-22 22:31:57,246 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=817, lastRpcResponseTime=1194) timeout (1194ms) for bootstrapping
2024-01-22 22:31:57,247 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:31:57,247 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:31:57,265 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:31:57,266 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s4
2024-01-22 22:31:57,266 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s4 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:31:57,369 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #2, newRequest SetConfigurationRequest:client-6B4505145CB4->s4@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:57,373 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s4@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
java.io.IOException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
	at org.apache.ratis.grpc.GrpcUtil.unwrapException(GrpcUtil.java:103)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:223)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.setConfiguration(GrpcClientProtocolClient.java:189)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
Caused by: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$AdminProtocolServiceBlockingStub.setConfiguration(AdminProtocolServiceGrpc.java:451)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.lambda$setConfiguration$6(GrpcClientProtocolClient.java:191)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:221)
	... 25 more
Caused by: org.apache.ratis.thirdparty.io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: /0.0.0.0:15009
Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused
	at org.apache.ratis.thirdparty.io.netty.channel.unix.Errors.newConnectException0(Errors.java:166)
	at org.apache.ratis.thirdparty.io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:131)
	at org.apache.ratis.thirdparty.io.netty.channel.unix.Socket.finishConnect(Socket.java:359)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:499)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:407)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:57,373 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s4,  curLeader=s4, newLeader=s3
2024-01-22 22:31:57,373 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s4 to s3 for group-BBE07AC09D79
java.io.IOException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
	at org.apache.ratis.grpc.GrpcUtil.unwrapException(GrpcUtil.java:103)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:223)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.setConfiguration(GrpcClientProtocolClient.java:189)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
Caused by: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$AdminProtocolServiceBlockingStub.setConfiguration(AdminProtocolServiceGrpc.java:451)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.lambda$setConfiguration$6(GrpcClientProtocolClient.java:191)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:221)
	... 25 more
Caused by: org.apache.ratis.thirdparty.io.netty.channel.AbstractChannel$AnnotatedConnectException: finishConnect(..) failed: Connection refused: /0.0.0.0:15009
Caused by: java.net.ConnectException: finishConnect(..) failed: Connection refused
	at org.apache.ratis.thirdparty.io.netty.channel.unix.Errors.newConnectException0(Errors.java:166)
	at org.apache.ratis.thirdparty.io.netty.channel.unix.Errors.handleConnectErrno(Errors.java:131)
	at org.apache.ratis.thirdparty.io.netty.channel.unix.Socket.finishConnect(Socket.java:359)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.doFinishConnect(AbstractEpollChannel.java:710)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.finishConnect(AbstractEpollChannel.java:687)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe.epollOutReady(AbstractEpollChannel.java:567)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:499)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:407)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:57,474 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #3, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:57,481 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:57,488 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:57,489 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:31:57,489 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:57,590 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #4, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:57,597 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:57,597 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:31:57,598 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:31:57,599 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:57,599 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:57,600 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7ad7bad9
2024-01-22 22:31:57,604 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:57,605 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:57,605 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@a1b8ea6
2024-01-22 22:31:57,610 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:57,611 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:57,611 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2f27b79c
2024-01-22 22:31:57,617 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:57,618 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:57,618 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4f5a2626
2024-01-22 22:31:58,457 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=834, lastRpcResponseTime=1159) timeout (1159ms) for bootstrapping
2024-01-22 22:31:58,457 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:31:58,458 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:58,458 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(689)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender is stopped
2024-01-22 22:31:58,459 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2e9255b6
2024-01-22 22:31:58,459 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(740)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39]
java.lang.IllegalStateException: Failed to iterate installSnapshot requests: org.apache.ratis.server.leader.InstallSnapshotRequests$Iter@76664773
	at org.apache.ratis.server.leader.InstallSnapshotRequests$Iter.next(InstallSnapshotRequests.java:141)
	at org.apache.ratis.server.leader.InstallSnapshotRequests$Iter.next(InstallSnapshotRequests.java:99)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:728)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:238)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:257)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.nio.channels.ClosedByInterruptException
	at java.nio.channels.spi.AbstractInterruptibleChannel.end(AbstractInterruptibleChannel.java:202)
	at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:164)
	at sun.nio.ch.ChannelInputStream.read(ChannelInputStream.java:65)
	at sun.nio.ch.ChannelInputStream.read(ChannelInputStream.java:109)
	at sun.nio.ch.ChannelInputStream.read(ChannelInputStream.java:103)
	at org.apache.ratis.util.IOUtils.readFully(IOUtils.java:119)
	at org.apache.ratis.server.storage.FileChunkReader.readFileChunk(FileChunkReader.java:69)
	at org.apache.ratis.server.storage.FileChunkReader.readFileChunk(FileChunkReader.java:83)
	at org.apache.ratis.server.leader.InstallSnapshotRequests$Iter.next(InstallSnapshotRequests.java:124)
	... 6 more
2024-01-22 22:31:58,460 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(533)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender is already stopped
2024-01-22 22:31:58,460 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:31:58,460 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(533)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender is already stopped
2024-01-22 22:31:58,463 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:31:58,463 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:31:58,464 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:31:58,565 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #5, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:58,575 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:58,578 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:58,578 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:31:58,578 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:58,681 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #6, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:58,689 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:58,689 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:58,690 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:31:58,690 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:58,690 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:31:58,690 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:31:58,690 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:31:58,690 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:58,690 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:31:58,690 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:31:58,691 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:31:58,691 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:31:58,691 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:31:58,691 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:58,692 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:58,692 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3bbbbd01
2024-01-22 22:31:58,701 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:58,702 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4bb62c05
2024-01-22 22:31:58,702 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:58,705 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:58,705 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@534da04b
2024-01-22 22:31:58,706 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:58,712 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:58,713 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:58,713 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@26e1830
2024-01-22 22:31:59,360 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=646, lastRpcResponseTime=970) timeout (970ms) for bootstrapping
2024-01-22 22:31:59,360 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:31:59,361 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:31:59,365 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:31:59,365 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:31:59,365 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:31:59,466 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #7, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:59,473 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:59,475 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:59,475 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:31:59,475 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:31:59,576 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #8, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:59,587 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:59,587 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:31:59,588 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:31:59,588 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:31:59,588 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:31:59,588 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:31:59,588 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:31:59,588 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:31:59,588 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:31:59,588 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:31:59,588 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:31:59,589 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:31:59,589 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:31:59,589 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:59,590 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:59,590 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@f488863
2024-01-22 22:31:59,593 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:59,593 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:59,593 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7f71ceb7
2024-01-22 22:31:59,596 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:59,596 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:59,596 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@613e7485
2024-01-22 22:31:59,598 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:31:59,599 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:31:59,599 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@70bded10
2024-01-22 22:32:00,262 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=663, lastRpcResponseTime=974) timeout (974ms) for bootstrapping
2024-01-22 22:32:00,262 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:00,263 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:00,268 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:00,268 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:00,268 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:00,369 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #9, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:00,375 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:00,377 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:00,377 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:00,377 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:00,478 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #10, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:00,484 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:00,484 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:00,484 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:00,484 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:00,484 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:00,485 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:00,485 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:00,485 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:00,485 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:00,485 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:00,485 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:00,485 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:00,485 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:00,486 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:00,487 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:00,487 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6fefb099
2024-01-22 22:32:00,493 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:00,494 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:00,495 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1f36b1ce
2024-01-22 22:32:00,498 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:00,498 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:00,498 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@144c7263
2024-01-22 22:32:00,502 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:00,502 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:00,502 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@73ee5cf5
2024-01-22 22:32:01,165 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=661, lastRpcResponseTime=980) timeout (980ms) for bootstrapping
2024-01-22 22:32:01,165 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:01,165 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:01,169 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:01,169 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:01,169 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:01,270 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #11, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:01,276 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:01,277 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:01,278 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:01,278 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:01,371 [timer1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 63 times in the last 5.000s)
2024-01-22 22:32:01,378 [timer2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 42 times in the last 5.001s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:01,379 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #12, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:01,383 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:01,384 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:01,384 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:01,384 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:01,384 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:01,384 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:01,384 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:01,384 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:01,384 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:01,385 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:01,385 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:01,385 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:01,385 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:01,386 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:01,386 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:01,386 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@717d1cc3
2024-01-22 22:32:01,387 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:01,388 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:01,389 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:01,390 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:01,390 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@13a01a9
2024-01-22 22:32:01,393 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:01,393 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5d068a6a
2024-01-22 22:32:01,393 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:01,397 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:01,397 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:01,397 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@36ded66a
2024-01-22 22:32:02,004 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:02,005 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:02,005 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7f602b5d
2024-01-22 22:32:02,067 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=59, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2024-01-22 22:32:02,067 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:02,067 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:02,071 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:02,071 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:02,071 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:02,172 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #13, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:02,177 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:02,179 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:02,180 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:02,180 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:02,281 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #14, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:02,286 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:02,287 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:02,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:02,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:02,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:02,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:02,287 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:02,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:02,287 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:02,287 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:02,288 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:02,288 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:02,288 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:02,288 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:02,289 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:02,289 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1676672d
2024-01-22 22:32:02,292 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:02,293 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:02,293 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@66d69e23
2024-01-22 22:32:02,295 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:02,296 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@403b4e59
2024-01-22 22:32:02,296 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:02,299 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:02,299 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4c3fec9b
2024-01-22 22:32:02,300 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:02,881 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:02,881 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:02,881 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@76db92bf
2024-01-22 22:32:02,969 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=85, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2024-01-22 22:32:02,969 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:02,970 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:02,973 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:02,973 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:02,973 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:03,074 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #15, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:03,079 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:03,081 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:03,081 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:03,081 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:03,182 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #16, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:03,187 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:03,187 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:03,188 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:03,189 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:03,189 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:03,189 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@ecc778d
2024-01-22 22:32:03,192 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:03,193 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:03,193 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7e743432
2024-01-22 22:32:03,196 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:03,196 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:03,196 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@29aaee3c
2024-01-22 22:32:03,198 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:03,199 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@276cc8e0
2024-01-22 22:32:03,199 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:03,871 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=669, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2024-01-22 22:32:03,871 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:03,872 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:03,875 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:03,875 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:03,875 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:03,976 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #17, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:03,981 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:03,983 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:03,983 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:03,983 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:04,084 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #18, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:04,089 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:04,089 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:04,090 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:04,091 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:04,091 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:04,091 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6ee25764
2024-01-22 22:32:04,094 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:04,094 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:04,094 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1ebad2c1
2024-01-22 22:32:04,097 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:04,097 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:04,097 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1a1224d2
2024-01-22 22:32:04,100 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:04,101 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:04,101 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@24d757c2
2024-01-22 22:32:04,642 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:04,643 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:04,643 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4f95f899
2024-01-22 22:32:04,734 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$null$7(348)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:32:04,773 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=129, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2024-01-22 22:32:04,773 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:04,774 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:04,777 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:04,777 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:04,777 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:04,878 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #19, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:04,883 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:04,885 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:04,885 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:04,885 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:04,986 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #20, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:04,991 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:04,991 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:04,991 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:04,991 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:04,991 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:04,991 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:04,991 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:04,991 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:04,991 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:04,992 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:04,992 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:04,992 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:04,992 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:04,992 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:04,992 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:04,993 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@45ce1493
2024-01-22 22:32:04,996 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:04,997 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:04,997 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@35bd9e54
2024-01-22 22:32:04,999 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:04,999 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:04,999 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2ef9f26c
2024-01-22 22:32:05,001 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:05,001 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:05,002 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@a9255a3
2024-01-22 22:32:05,675 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=673, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2024-01-22 22:32:05,675 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:05,676 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:05,679 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:05,679 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:05,679 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:05,780 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #21, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:05,785 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:05,787 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:05,787 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:05,787 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:05,888 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #22, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:05,893 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:05,893 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:05,893 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:05,893 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:05,893 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:05,894 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:05,894 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:05,894 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:05,894 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:05,894 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:05,894 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:05,894 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:05,894 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:05,895 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:05,895 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:05,895 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@72ee4c32
2024-01-22 22:32:05,899 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:05,899 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:05,899 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@22a519b
2024-01-22 22:32:05,902 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:05,902 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:05,902 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2914adbc
2024-01-22 22:32:05,905 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:05,905 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:05,905 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3624acc1
2024-01-22 22:32:06,387 [timer5] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 81 times in the last 5.000s)
2024-01-22 22:32:06,388 [timer6] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 54 times in the last 5.000s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:06,490 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:06,491 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:06,491 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@20c5434d
2024-01-22 22:32:06,492 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=13); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:06,492 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:06,577 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=83, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2024-01-22 22:32:06,577 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:06,578 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:06,581 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:06,581 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:06,581 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:06,682 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #23, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:06,687 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:06,689 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:06,689 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:06,689 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:06,790 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #24, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:06,795 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:06,795 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:06,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:06,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:06,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:06,796 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:06,796 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:06,796 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:06,796 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:06,796 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:06,796 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:06,796 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:06,796 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:06,796 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:06,797 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:06,797 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@66058078
2024-01-22 22:32:06,799 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:06,799 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:06,799 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1655eaec
2024-01-22 22:32:06,802 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:06,802 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:06,802 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6f9e5304
2024-01-22 22:32:06,804 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:06,805 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:06,805 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@26127d10
2024-01-22 22:32:07,479 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=674, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2024-01-22 22:32:07,479 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:07,480 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:07,483 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:07,483 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:07,483 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:07,584 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #25, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:07,589 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:07,591 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:07,591 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:07,591 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:07,692 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #26, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:07,697 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:07,697 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:07,697 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:07,697 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:07,698 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:07,698 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:07,698 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:07,698 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:07,698 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:07,698 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:07,698 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:07,698 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:07,698 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:07,699 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:07,699 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:07,699 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@465f6965
2024-01-22 22:32:07,702 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:07,702 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:07,702 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@362f615e
2024-01-22 22:32:07,707 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:07,707 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:07,707 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@10b164f3
2024-01-22 22:32:07,710 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:07,711 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:07,711 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6b18197c
2024-01-22 22:32:08,381 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=670, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2024-01-22 22:32:08,381 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:08,382 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:08,385 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:08,385 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:08,385 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:08,486 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #27, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:08,491 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:08,492 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:08,492 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:08,492 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:08,593 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #28, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:08,598 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:08,598 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:08,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:08,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:08,599 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:08,599 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:08,599 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:08,599 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:08,599 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:08,599 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:08,599 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:08,599 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:08,599 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:08,600 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:08,600 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:08,600 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@61b221b7
2024-01-22 22:32:08,604 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:08,604 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:08,604 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@11656b35
2024-01-22 22:32:08,607 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:08,607 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:08,607 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4936bf58
2024-01-22 22:32:08,610 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:08,610 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:08,610 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@49690d15
2024-01-22 22:32:09,282 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:09,282 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:09,282 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@705edd69
2024-01-22 22:32:09,283 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=0, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2024-01-22 22:32:09,283 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:09,284 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(533)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender is already stopped
2024-01-22 22:32:09,284 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(533)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender is already stopped
2024-01-22 22:32:09,284 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:09,286 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:09,286 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:09,286 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:09,387 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #29, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:09,392 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:09,394 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:09,394 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:09,394 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:09,495 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #30, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:09,500 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:09,501 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:09,501 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:09,501 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:09,501 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@64c2fbdc
2024-01-22 22:32:09,505 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:09,505 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:09,505 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1410d4e4
2024-01-22 22:32:09,507 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:09,508 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4e6de078
2024-01-22 22:32:09,511 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:09,513 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:09,514 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:09,514 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7947d5f2
2024-01-22 22:32:10,185 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=670, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2024-01-22 22:32:10,185 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:10,185 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:10,188 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:10,188 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:10,188 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:10,289 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #31, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:10,293 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:10,295 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:10,295 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:10,295 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:10,396 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #32, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:10,400 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:10,400 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:10,400 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:10,400 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:10,400 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:10,401 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:10,401 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:10,401 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:10,401 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:10,401 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:10,401 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:10,401 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:10,401 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:10,401 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:10,402 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@28757339
2024-01-22 22:32:10,403 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:10,405 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:10,406 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:10,406 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@58ebb727
2024-01-22 22:32:10,408 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:10,408 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:10,408 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7016cd67
2024-01-22 22:32:10,411 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:10,411 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:10,411 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@365de8e9
2024-01-22 22:32:11,086 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=675, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2024-01-22 22:32:11,087 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:11,087 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:11,091 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:11,091 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:11,092 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:11,193 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #33, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:11,197 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:11,199 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:11,199 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:11,199 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:11,300 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #34, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:11,304 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:11,305 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:11,306 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:11,306 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:11,306 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@69ce748f
2024-01-22 22:32:11,309 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:11,309 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:11,309 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1991d22d
2024-01-22 22:32:11,312 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:11,312 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:11,312 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5182d943
2024-01-22 22:32:11,315 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:11,315 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:11,316 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@66bd3fed
2024-01-22 22:32:11,492 [timer2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 50 times in the last 5.000s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:11,492 [timer1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 76 times in the last 5.000s)
2024-01-22 22:32:11,989 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=673, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2024-01-22 22:32:11,989 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:11,990 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:11,992 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:11,992 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:11,993 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:12,093 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #35, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:12,098 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:12,100 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:12,100 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:12,100 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:12,201 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #36, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:12,205 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:12,205 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:12,206 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:12,207 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:12,207 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:12,207 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@30fce02a
2024-01-22 22:32:12,207 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:12,208 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:12,210 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:12,210 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:12,210 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@40fa3d35
2024-01-22 22:32:12,213 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:12,214 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:12,214 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@143a19eb
2024-01-22 22:32:12,217 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:12,217 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:12,217 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@10977c90
2024-01-22 22:32:12,891 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=673, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2024-01-22 22:32:12,891 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:12,892 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:12,895 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:12,895 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:12,895 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:12,996 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #37, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:13,000 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:13,001 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:13,001 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:13,002 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:13,102 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #38, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:13,107 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:13,107 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:13,107 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:13,107 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:13,107 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:13,108 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:13,108 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:13,108 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:13,108 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:13,108 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:13,108 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:13,108 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:13,108 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:13,108 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:13,109 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:13,109 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@790af45e
2024-01-22 22:32:13,112 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:13,113 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@94586ba
2024-01-22 22:32:13,114 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:13,118 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:13,118 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:13,118 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4340fdf1
2024-01-22 22:32:13,121 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:13,121 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:13,122 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@50defa6b
2024-01-22 22:32:13,793 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=671, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2024-01-22 22:32:13,793 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:13,794 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:13,797 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:13,797 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:13,797 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:13,898 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #39, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:13,903 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:13,904 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:13,904 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:13,904 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:14,005 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #40, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:14,010 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:14,010 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:14,010 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:14,010 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:14,010 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:14,011 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:14,011 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:14,011 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:14,011 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:14,011 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:14,011 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:14,011 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:14,011 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:14,012 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:14,012 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@37e155cf
2024-01-22 22:32:14,013 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:14,018 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:14,018 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:14,019 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@47e08a60
2024-01-22 22:32:14,021 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:14,021 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:14,021 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@38c2cf5e
2024-01-22 22:32:14,025 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:14,025 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:14,025 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@50bbd521
2024-01-22 22:32:14,550 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:14,551 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:14,551 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2d87e875
2024-01-22 22:32:14,695 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=143, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2024-01-22 22:32:14,695 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:14,695 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:14,699 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:14,699 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:14,699 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:14,733 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$null$7(348)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:32:14,804 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #41, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:14,808 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:14,810 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:14,810 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:14,810 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:14,911 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #42, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:14,915 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:14,915 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:14,916 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:14,917 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:14,917 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:14,917 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7189bcba
2024-01-22 22:32:14,920 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:14,920 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:14,920 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@14ec584
2024-01-22 22:32:14,923 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:14,923 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:14,923 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6ccc14fc
2024-01-22 22:32:14,925 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:14,926 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@f3b0e43
2024-01-22 22:32:14,926 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:15,597 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=671, lastRpcResponseTime=981) timeout (981ms) for bootstrapping
2024-01-22 22:32:15,597 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:15,598 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:15,600 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:15,600 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:15,600 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:15,701 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #43, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:15,706 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:15,707 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:15,707 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:15,707 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:15,808 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #44, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:15,812 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:15,812 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:15,812 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:15,812 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:15,813 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:15,813 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:15,813 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:15,813 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:15,813 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:15,813 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:15,813 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:15,813 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:15,813 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:15,814 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:15,814 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:15,814 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5a95e4b2
2024-01-22 22:32:15,816 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:15,816 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:15,816 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2a79b2d5
2024-01-22 22:32:15,821 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:15,821 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:15,821 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2060fd2d
2024-01-22 22:32:15,824 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:15,824 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:15,824 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5f0882ca
2024-01-22 22:32:16,350 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:16,350 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:16,350 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1acfe9dc
2024-01-22 22:32:16,499 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=148, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2024-01-22 22:32:16,499 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:16,500 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:16,502 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:16,502 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:16,503 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:16,603 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #45, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:16,608 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:16,611 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:16,611 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:16,611 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:16,712 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #46, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:16,716 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:16,716 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:16,716 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:16,716 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:16,717 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:16,717 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:16,717 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:16,717 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:16,717 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:16,717 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:16,717 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:16,717 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:16,717 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:16,718 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:16,718 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:16,718 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1bb13b18
2024-01-22 22:32:16,720 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:16,720 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:16,720 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6b9c889c
2024-01-22 22:32:16,725 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:16,726 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:16,726 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@74f83677
2024-01-22 22:32:16,728 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:16,728 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:16,728 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@cf48c2c
2024-01-22 22:32:17,207 [timer5] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 78 times in the last 5.000s)
2024-01-22 22:32:17,209 [timer6] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 52 times in the last 5.001s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:17,401 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=672, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2024-01-22 22:32:17,401 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:17,401 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:17,404 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:17,404 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:17,404 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:17,505 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #47, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:17,509 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:17,511 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:17,511 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:17,511 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:17,612 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #48, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:17,616 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:17,617 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:17,617 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:17,617 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@25470ccf
2024-01-22 22:32:17,618 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:17,618 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:17,621 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:17,621 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:17,621 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5554679d
2024-01-22 22:32:17,625 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:17,625 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:17,625 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7bf34dc6
2024-01-22 22:32:17,627 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:17,627 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:17,627 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1b1b874
2024-01-22 22:32:18,303 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=675, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2024-01-22 22:32:18,303 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:18,303 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:18,306 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:18,306 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:18,306 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:18,407 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #49, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:18,411 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:18,412 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:18,412 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:18,412 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:18,513 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #50, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:18,517 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:18,517 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:18,517 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:18,517 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:18,517 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:18,518 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:18,518 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:18,518 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:18,518 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:18,518 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:18,518 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:18,518 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:18,518 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:18,519 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:18,519 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:18,519 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@377861fc
2024-01-22 22:32:18,522 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:18,522 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:18,522 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@47f9bff6
2024-01-22 22:32:18,524 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:18,524 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:18,524 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7d82eb46
2024-01-22 22:32:18,527 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:18,527 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:18,527 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@78fa1d99
2024-01-22 22:32:19,204 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:19,205 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:19,205 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:19,208 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:19,208 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:19,208 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:19,309 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #51, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:19,313 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:19,314 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:19,314 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:19,314 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:19,415 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #52, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:19,419 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:19,419 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:19,419 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:19,419 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:19,419 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:19,419 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:19,419 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:19,420 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:19,420 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:19,420 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:19,420 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:19,420 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:19,420 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:19,420 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:19,420 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:19,421 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6f01ae46
2024-01-22 22:32:19,422 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:19,423 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:19,423 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1fd849e9
2024-01-22 22:32:19,425 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:19,425 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:19,425 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@237c353d
2024-01-22 22:32:19,428 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:19,428 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:19,428 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@43d7923c
2024-01-22 22:32:20,106 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:20,106 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:20,107 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:20,109 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:20,109 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:20,109 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:20,210 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #53, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:20,214 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:20,215 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:20,216 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:20,216 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:20,316 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #54, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:20,320 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:20,320 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:20,321 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:20,322 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:20,322 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:20,322 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3a31221a
2024-01-22 22:32:20,324 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:20,324 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:20,324 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4a3d3003
2024-01-22 22:32:20,328 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:20,328 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:20,328 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3e72975e
2024-01-22 22:32:20,330 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:20,330 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:20,330 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4810abe7
2024-01-22 22:32:21,008 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=677, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:21,008 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:21,009 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:21,011 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:21,011 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:21,011 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:21,112 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #55, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:21,116 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:21,117 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:21,117 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:21,117 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:21,218 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #56, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:21,222 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:21,222 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:21,222 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:21,222 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:21,222 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:21,223 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:21,223 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:21,223 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:21,223 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:21,223 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:21,223 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:21,223 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:21,223 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:21,223 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:21,224 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:21,224 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@37224d74
2024-01-22 22:32:21,227 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:21,227 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:21,227 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@47a3d110
2024-01-22 22:32:21,229 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:21,229 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:21,229 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@56dab9db
2024-01-22 22:32:21,233 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:21,233 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:21,233 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@589b3fd0
2024-01-22 22:32:21,910 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:21,910 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:21,910 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:21,912 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:21,913 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:21,913 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:22,013 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #57, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:22,017 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:22,018 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:22,019 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:22,019 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:22,119 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #58, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:22,123 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:22,123 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:22,124 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:22,125 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:22,125 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:22,125 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@634f2aae
2024-01-22 22:32:22,128 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:22,128 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:22,128 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@131a07d2
2024-01-22 22:32:22,131 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:22,131 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:22,131 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5acbb39a
2024-01-22 22:32:22,134 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:22,134 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:22,134 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@38093a57
2024-01-22 22:32:22,619 [timer6] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 72 times in the last 5.001s)
2024-01-22 22:32:22,619 [timer7] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 48 times in the last 5.001s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:22,811 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:22,811 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:22,812 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:22,814 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:22,814 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:22,814 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:22,915 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #59, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:22,919 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:22,921 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:22,921 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:22,921 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:23,022 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #60, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:23,025 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:23,026 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:23,026 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:23,026 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:23,026 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:23,026 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:23,026 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:23,026 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:23,027 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:23,027 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:23,027 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:23,027 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:23,027 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:23,027 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:23,028 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:23,028 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3b9430c8
2024-01-22 22:32:23,028 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:23,029 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:23,030 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:23,031 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:23,031 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4b190676
2024-01-22 22:32:23,039 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:23,039 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:23,039 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@43932ac9
2024-01-22 22:32:23,041 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:23,041 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:23,041 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@51888a53
2024-01-22 22:32:23,713 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=671, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:23,713 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:23,714 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:23,716 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:23,716 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:23,716 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:23,817 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #61, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:23,821 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:23,822 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:23,822 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:23,822 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:23,923 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #62, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:23,927 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:23,928 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:23,928 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:23,928 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:23,928 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:23,928 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2abb2a89
2024-01-22 22:32:23,930 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:23,931 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:23,931 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5a272a08
2024-01-22 22:32:23,933 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:23,933 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:23,933 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1ce473c2
2024-01-22 22:32:23,936 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:23,936 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:23,936 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4c244d0b
2024-01-22 22:32:24,615 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=988) timeout (987ms) for bootstrapping
2024-01-22 22:32:24,615 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:24,615 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:24,618 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:24,618 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:24,618 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:24,719 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #63, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:24,723 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:24,724 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:24,724 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:24,724 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:24,733 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$null$7(348)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:32:24,825 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #64, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:24,829 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:24,829 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:24,829 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:24,830 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:24,830 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:24,830 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:24,830 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:24,830 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:24,830 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:24,830 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:24,830 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:24,830 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:24,830 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:24,830 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:24,831 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:24,831 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@31ab61eb
2024-01-22 22:32:24,834 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:24,834 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:24,834 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@41acfa32
2024-01-22 22:32:24,837 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:24,837 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:24,837 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@e2c7050
2024-01-22 22:32:24,840 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:24,840 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:24,840 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6ac01185
2024-01-22 22:32:25,516 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:25,517 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:25,517 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:25,520 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:25,520 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:25,520 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:25,621 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #65, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:25,625 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:25,625 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:25,626 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:25,626 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:25,726 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #66, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:25,730 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:25,730 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:25,731 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:25,732 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:25,732 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:25,732 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5efe6aca
2024-01-22 22:32:25,734 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:25,734 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:25,734 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2e165b40
2024-01-22 22:32:25,737 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:25,737 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:25,737 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7efc1f16
2024-01-22 22:32:25,739 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:25,739 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:25,739 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@63b06587
2024-01-22 22:32:26,418 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:26,418 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:26,418 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:26,421 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:26,422 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:26,422 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:26,522 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #67, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:26,527 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:26,528 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:26,528 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:26,528 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:26,629 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #68, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:26,632 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:26,633 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:26,634 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:26,634 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:26,634 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7c4c96d5
2024-01-22 22:32:26,638 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:26,638 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:26,638 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@c06a715
2024-01-22 22:32:26,640 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:26,640 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:26,640 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@53014a43
2024-01-22 22:32:26,643 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:26,644 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:26,644 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@59f5d855
2024-01-22 22:32:27,270 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:27,270 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:27,270 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@17e5f558
2024-01-22 22:32:27,320 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=49, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:27,320 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:27,320 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:27,322 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:27,322 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:27,322 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:27,423 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #69, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:27,426 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:27,427 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:27,428 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:27,428 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:27,528 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #70, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:27,532 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:27,532 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:27,533 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:27,533 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:27,533 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:27,533 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:27,533 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:27,533 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:27,533 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:27,533 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:27,533 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:27,533 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:27,534 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:27,534 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:27,534 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:27,534 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5f6a7ecd
2024-01-22 22:32:27,538 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:27,538 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:27,538 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2f034ac7
2024-01-22 22:32:27,541 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:27,541 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:27,541 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@76953f67
2024-01-22 22:32:27,543 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:27,543 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:27,543 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4e9ce53f
2024-01-22 22:32:28,029 [timer0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 75 times in the last 5.000s)
2024-01-22 22:32:28,029 [timer1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 50 times in the last 5.000s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:28,221 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=677, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:28,221 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:28,221 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:28,224 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:28,224 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:28,224 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:28,324 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #71, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:28,328 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:28,330 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:28,330 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:28,330 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:28,431 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #72, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:28,435 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:28,435 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:28,435 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:28,435 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:28,435 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:28,435 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:28,435 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:28,435 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:28,436 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:28,436 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:28,436 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:28,436 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:28,436 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:28,436 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:28,436 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:28,437 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@156c1657
2024-01-22 22:32:28,437 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:28,437 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:28,439 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:28,440 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:28,440 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@654f6e3a
2024-01-22 22:32:28,441 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:28,441 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:28,441 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1aec038a
2024-01-22 22:32:28,444 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:28,445 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:28,445 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2a0a7f17
2024-01-22 22:32:29,123 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:29,123 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:29,123 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:29,126 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:29,126 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:29,126 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:29,227 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #73, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:29,230 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:29,232 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:29,232 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:29,232 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:29,333 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #74, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:29,337 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:29,337 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:29,337 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:29,337 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:29,337 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:29,337 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:29,338 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:29,338 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:29,338 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:29,338 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:29,338 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:29,338 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:29,338 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:29,339 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:29,339 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:29,339 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@41cf10a2
2024-01-22 22:32:29,341 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:29,341 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:29,341 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@31b89f60
2024-01-22 22:32:29,342 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:29,343 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:29,343 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@43d0d229
2024-01-22 22:32:29,345 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:29,346 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:29,346 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@27b75c87
2024-01-22 22:32:30,024 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:30,024 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:30,025 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:30,027 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:30,027 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:30,027 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:30,128 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #75, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:30,132 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:30,133 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:30,134 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:30,134 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:30,234 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #76, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:30,238 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:30,238 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:30,239 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:30,240 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:30,240 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@50090905
2024-01-22 22:32:30,240 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:30,242 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:30,242 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:30,242 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@20efd10a
2024-01-22 22:32:30,249 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:30,249 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:30,249 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2228fa95
2024-01-22 22:32:30,252 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:30,252 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:30,252 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@64b52fe4
2024-01-22 22:32:30,915 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:30,916 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:30,916 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5684b9d4
2024-01-22 22:32:30,926 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=9, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:30,926 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:30,926 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:30,928 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:30,928 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:30,929 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:31,029 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #77, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:31,033 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:31,034 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:31,034 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:31,034 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:31,135 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #78, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:31,139 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:31,139 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:31,139 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:31,139 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:31,139 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:31,139 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:31,139 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:31,140 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:31,140 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:31,140 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:31,140 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:31,140 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:31,140 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:31,140 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:31,141 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:31,141 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@45733119
2024-01-22 22:32:31,143 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:31,144 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:31,144 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@35809e4e
2024-01-22 22:32:31,146 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:31,146 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:31,146 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@dc3839
2024-01-22 22:32:31,149 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:31,149 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:31,149 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4d9550b4
2024-01-22 22:32:31,827 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=677, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:31,828 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:31,828 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:31,830 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:31,830 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:31,830 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:31,931 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #79, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:31,935 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:31,936 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:31,936 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:31,936 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:32,037 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #80, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:32,040 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:32,040 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:32,041 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:32,042 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:32,042 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:32,042 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@34db22fc
2024-01-22 22:32:32,045 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:32,045 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:32,045 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@44d9dc06
2024-01-22 22:32:32,047 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:32,047 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:32,047 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7055b07f
2024-01-22 22:32:32,049 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:32,049 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:32,049 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5f52b9b
2024-01-22 22:32:32,729 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=679, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:32,729 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:32,729 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:32,732 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:32,732 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:32,732 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:32,832 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #81, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:32,836 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:32,837 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:32,838 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:32,838 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:32,939 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #82, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:32,943 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:32,943 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:32,943 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:32,943 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:32,943 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:32,943 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:32,943 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:32,943 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:32,943 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:32,944 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:32,944 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:32,944 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:32,944 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:32,944 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:32,944 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:32,944 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@666a5497
2024-01-22 22:32:32,946 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:32,946 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:32,946 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@16bad9a0
2024-01-22 22:32:32,949 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:32,949 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:32,949 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@22d6504d
2024-01-22 22:32:32,951 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:32,951 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:32,951 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3e6dbbbe
2024-01-22 22:32:33,437 [timer1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 50 times in the last 5.000s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:33,437 [timer0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 75 times in the last 5.001s)
2024-01-22 22:32:33,631 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=679, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:33,631 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:33,631 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:33,633 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:33,633 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:33,633 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:33,734 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #83, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:33,737 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:33,738 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:33,738 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:33,738 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:33,839 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #84, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:33,842 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:33,842 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:33,843 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:33,844 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:33,844 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:33,844 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7a65159d
2024-01-22 22:32:33,844 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:33,845 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:33,846 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:33,846 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:33,846 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@a2903ff
2024-01-22 22:32:33,848 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:33,848 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:33,848 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@501c9633
2024-01-22 22:32:33,850 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:33,850 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:33,850 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3b535c77
2024-01-22 22:32:34,532 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:34,532 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:34,532 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:34,534 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:34,534 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:34,534 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:34,635 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #85, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:34,639 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:34,640 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:34,640 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:34,640 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:34,733 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$null$7(348)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:32:34,741 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #86, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:34,744 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:34,745 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:34,746 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:34,746 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:34,746 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3f643d23
2024-01-22 22:32:34,748 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:34,748 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:34,748 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4f6d6f60
2024-01-22 22:32:34,749 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:34,749 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:34,750 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1df7b4f2
2024-01-22 22:32:34,752 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:34,752 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:34,752 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2dccb519
2024-01-22 22:32:35,433 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:35,433 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:35,434 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:35,436 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:35,436 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:35,436 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:35,537 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #87, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:35,540 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:35,542 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:35,542 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:35,542 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:35,643 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #88, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:35,646 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:35,646 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:35,647 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:35,648 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:35,648 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:35,648 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5654ba63
2024-01-22 22:32:35,650 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:35,650 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:35,650 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2634a18a
2024-01-22 22:32:35,651 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:35,652 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:35,652 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@251b2d35
2024-01-22 22:32:35,653 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:35,653 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:35,653 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2e03335a
2024-01-22 22:32:36,335 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:36,335 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:36,335 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:36,337 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:36,337 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:36,337 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:36,438 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #89, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:36,442 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:36,443 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:36,443 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:36,443 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:36,544 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #90, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:36,547 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:36,547 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:36,547 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:36,548 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:36,548 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:36,548 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:36,548 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:36,548 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:36,548 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:36,548 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:36,548 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:36,548 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:36,548 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:36,548 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:36,549 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:36,549 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1b632778
2024-01-22 22:32:36,550 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:36,551 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:36,551 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6b4e5622
2024-01-22 22:32:36,552 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:36,552 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:36,552 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6de9de24
2024-01-22 22:32:36,555 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:36,555 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:36,555 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@12ca4bd7
2024-01-22 22:32:37,236 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:37,236 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:37,236 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:37,238 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:37,238 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:37,238 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:37,339 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #91, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:37,343 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:37,344 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:37,344 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:37,344 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:37,444 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #92, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:37,448 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:37,449 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:37,449 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:37,449 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4f2a8880
2024-01-22 22:32:37,451 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:37,451 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:37,451 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3fd36c2e
2024-01-22 22:32:37,453 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:37,453 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:37,453 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5a6d9ce2
2024-01-22 22:32:37,456 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:37,456 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:37,456 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7bfea33f
2024-01-22 22:32:38,137 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:38,137 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:38,138 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:38,139 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:38,140 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:38,140 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:38,241 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #93, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:38,244 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:38,245 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:38,245 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:38,245 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:38,346 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #94, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:38,349 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:38,350 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:38,351 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:38,351 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:38,351 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7a37fd0
2024-01-22 22:32:38,354 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:38,354 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:38,354 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7792d211
2024-01-22 22:32:38,356 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:38,356 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:38,356 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@371b28ff
2024-01-22 22:32:38,358 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:38,358 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:38,358 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@59f347e5
2024-01-22 22:32:38,846 [timer5] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 72 times in the last 5.001s)
2024-01-22 22:32:38,846 [timer6] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 48 times in the last 5.001s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:39,039 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:39,039 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:39,039 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:39,041 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:39,041 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:39,041 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:39,141 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #95, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:39,145 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:39,146 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:39,146 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:39,146 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:39,247 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #96, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:39,250 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:39,250 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:39,250 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:39,250 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:39,250 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:39,251 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:39,251 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:39,251 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:39,251 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:39,251 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:39,251 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:39,251 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:39,251 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:39,251 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:39,251 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:39,252 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@63b9030f
2024-01-22 22:32:39,252 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:39,252 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:39,253 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:39,253 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:39,253 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@13ecc8bc
2024-01-22 22:32:39,256 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:39,256 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:39,256 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3fb78b86
2024-01-22 22:32:39,259 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:39,259 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:39,259 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@576e103c
2024-01-22 22:32:39,894 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:39,894 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:39,895 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@22ca812b
2024-01-22 22:32:39,940 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=44, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:39,940 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:39,940 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:39,942 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:39,942 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:39,942 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:40,042 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #97, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:40,046 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:40,047 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:40,047 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:40,047 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:40,148 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #98, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:40,151 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:40,152 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:40,153 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:40,153 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:40,153 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@46686404
2024-01-22 22:32:40,156 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:40,156 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:40,156 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@36184b15
2024-01-22 22:32:40,157 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:40,157 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:40,157 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@a8b4428
2024-01-22 22:32:40,160 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:40,160 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:40,160 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@32306b09
2024-01-22 22:32:40,715 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:40,715 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:40,715 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@13e911ef
2024-01-22 22:32:40,841 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=125, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:40,841 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:40,841 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:40,843 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:40,844 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:40,844 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:40,944 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #99, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:40,948 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:40,949 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:40,949 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:40,949 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:41,050 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #100, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:41,054 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:41,054 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:41,054 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:41,054 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:41,054 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:41,054 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:41,054 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:41,054 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:41,054 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:41,055 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:41,055 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:41,055 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:41,055 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:41,055 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:41,055 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:41,056 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@9fa5b22
2024-01-22 22:32:41,058 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:41,058 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:41,059 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@79c5b987
2024-01-22 22:32:41,060 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:41,060 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:41,060 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@306932ef
2024-01-22 22:32:41,064 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:41,064 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:41,064 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@146797b3
2024-01-22 22:32:41,742 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:41,742 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:41,743 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:41,744 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:41,745 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:41,745 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:41,845 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #101, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:41,849 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:41,850 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:41,850 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:41,850 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:41,951 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #102, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:41,955 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:41,955 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:41,955 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:41,955 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:41,955 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:41,955 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:41,955 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:41,955 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:41,955 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:41,956 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:41,956 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:41,956 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:41,956 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:41,956 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:41,956 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:41,957 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@ce1472c
2024-01-22 22:32:41,958 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:41,958 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:41,959 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7cdba396
2024-01-22 22:32:41,961 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:41,961 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:41,962 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5cdeccb2
2024-01-22 22:32:41,963 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:41,963 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:41,963 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3e95885c
2024-01-22 22:32:42,644 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=679, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:42,644 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:42,644 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:42,646 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:42,646 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:42,646 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:42,747 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #103, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:42,750 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:42,751 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:42,751 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:42,751 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:42,852 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #104, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:42,857 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:42,857 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:42,857 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:42,857 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:42,857 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:42,857 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:42,857 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:42,858 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:42,858 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:42,858 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:42,858 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:42,858 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:42,858 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:42,859 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:42,859 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:42,859 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@368635d5
2024-01-22 22:32:42,861 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:42,861 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:42,861 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@46060c6d
2024-01-22 22:32:42,864 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:42,864 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6daa501c
2024-01-22 22:32:42,865 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:42,866 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:42,866 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:42,867 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7db4d337
2024-01-22 22:32:43,419 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:43,420 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:43,420 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5d5fb06d
2024-01-22 22:32:43,545 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=124, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:43,545 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:43,545 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:43,547 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:43,547 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:43,547 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:43,648 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #105, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:43,651 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:43,652 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:43,652 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:43,652 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:43,753 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #106, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:43,756 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:43,757 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:43,758 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:43,758 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:43,758 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@b98ec21
2024-01-22 22:32:43,760 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:43,760 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:43,761 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7b25ee41
2024-01-22 22:32:43,763 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:43,763 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:43,763 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4e02c0d0
2024-01-22 22:32:43,765 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:43,766 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:43,766 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6799db33
2024-01-22 22:32:44,252 [timer4] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 81 times in the last 5.000s)
2024-01-22 22:32:44,252 [timer5] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 54 times in the last 5.000s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:44,446 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:44,446 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:44,446 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:44,448 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:44,449 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:44,449 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:44,549 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #107, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:44,553 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:44,554 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:44,554 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:44,554 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:44,654 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #108, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:44,657 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:44,658 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:44,659 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:44,659 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:44,659 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5daa8701
2024-01-22 22:32:44,659 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:44,660 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:44,661 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:44,661 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:44,661 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2d41f122
2024-01-22 22:32:44,664 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:44,664 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:44,664 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2dba0e2c
2024-01-22 22:32:44,665 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:44,665 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:44,666 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@b2eb0f8
2024-01-22 22:32:44,733 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$null$7(348)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:32:45,348 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:45,348 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:45,348 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:45,349 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:45,350 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:45,350 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:45,450 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #109, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:45,454 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:45,455 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:45,455 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:45,455 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:45,556 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #110, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:45,560 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:45,561 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:45,561 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:45,561 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@215cc57
2024-01-22 22:32:45,563 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:45,563 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:45,563 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@72a14293
2024-01-22 22:32:45,565 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:45,566 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:45,566 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@57efdcb3
2024-01-22 22:32:45,568 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:45,569 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:45,569 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@34427b6f
2024-01-22 22:32:46,135 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:46,136 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:46,136 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3a94ce5f
2024-01-22 22:32:46,249 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=112, lastRpcResponseTime=989) timeout (988ms) for bootstrapping
2024-01-22 22:32:46,249 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:46,249 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:46,251 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:46,251 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:46,251 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:46,352 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #111, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:46,355 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:46,356 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:46,356 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:46,356 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:46,457 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #112, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:46,461 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:46,461 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:46,461 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:46,461 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:46,461 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:46,461 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:46,462 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:46,462 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:46,462 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:46,462 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:46,462 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:46,462 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:46,462 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:46,463 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:46,463 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:46,463 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@214db5d9
2024-01-22 22:32:46,465 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:46,465 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:46,465 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@51da5820
2024-01-22 22:32:46,467 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:46,467 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:46,467 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@30a85c87
2024-01-22 22:32:46,469 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:46,469 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:46,469 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@45e02f89
2024-01-22 22:32:47,150 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:47,150 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:47,150 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:47,152 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:47,152 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:47,152 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:47,253 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #113, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:47,257 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:47,257 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:47,258 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:47,258 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:47,358 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #114, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:47,362 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:47,363 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:47,363 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:47,363 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:47,363 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@77b6100f
2024-01-22 22:32:47,366 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:47,366 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:47,366 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7f7c8aa
2024-01-22 22:32:47,369 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:47,369 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:47,369 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1babc7e2
2024-01-22 22:32:47,372 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:47,372 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:47,372 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@32f2bd3f
2024-01-22 22:32:48,051 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:48,052 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:48,052 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:48,053 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:48,054 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:48,054 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:48,154 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #115, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:48,158 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:48,159 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:48,159 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:48,159 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:48,259 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #116, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:48,263 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:48,263 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:48,263 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:48,264 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:48,264 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:48,264 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:48,264 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:48,264 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:48,264 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:48,264 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:48,264 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:48,264 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:48,264 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:48,265 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:48,265 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:48,265 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7dcf78f5
2024-01-22 22:32:48,268 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:48,268 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:48,268 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@d84cb58
2024-01-22 22:32:48,271 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:48,271 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:48,271 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2ce9bbd4
2024-01-22 22:32:48,274 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:48,274 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:48,274 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5d4e2409
2024-01-22 22:32:48,953 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:48,953 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:48,953 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:48,955 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:48,955 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:48,955 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:49,056 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #117, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:49,059 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:49,060 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:49,060 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:49,060 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:49,161 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #118, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:49,165 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:49,166 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:49,166 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:49,166 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:49,166 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:49,166 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3b4eee51
2024-01-22 22:32:49,168 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:49,168 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:49,168 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4b439ae3
2024-01-22 22:32:49,171 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:49,171 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:49,171 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@54b4fc03
2024-01-22 22:32:49,173 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:49,173 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:49,173 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@51ae6fba
2024-01-22 22:32:49,659 [timer5] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 75 times in the last 5.000s)
2024-01-22 22:32:49,660 [timer7] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 50 times in the last 5.001s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:49,749 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:49,749 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:49,749 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@18ce2ca5
2024-01-22 22:32:49,749 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=13); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:49,750 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:49,854 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=104, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:49,854 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:49,854 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:49,856 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:49,856 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:49,856 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:49,957 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #119, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:49,960 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:49,961 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:49,961 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:49,961 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:50,062 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #120, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:50,066 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:50,066 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:50,066 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:50,066 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:50,066 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:50,066 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:50,066 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:50,066 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:50,067 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:50,067 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:50,067 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:50,067 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:50,067 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:50,067 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:50,067 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:50,067 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@65e583e8
2024-01-22 22:32:50,070 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:50,070 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:50,070 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@15b60a9f
2024-01-22 22:32:50,073 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:50,073 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:50,073 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1481b4fb
2024-01-22 22:32:50,076 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:50,076 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:50,076 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5dd1852b
2024-01-22 22:32:50,755 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:50,755 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:50,755 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:50,757 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:50,757 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:50,757 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:50,858 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #121, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:50,861 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:50,862 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:50,862 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:50,862 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:50,963 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #122, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:50,967 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:50,968 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:50,968 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:50,968 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7473e5a6
2024-01-22 22:32:50,971 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:50,971 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:50,971 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4b17b23
2024-01-22 22:32:50,972 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:50,973 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:50,973 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@12a786cb
2024-01-22 22:32:50,974 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:50,974 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:50,974 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6638c287
2024-01-22 22:32:51,656 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:51,656 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:51,657 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:51,658 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:51,658 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:51,658 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:51,759 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #123, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:51,763 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:51,764 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:51,764 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:51,764 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:51,865 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #124, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:51,868 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:51,868 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:51,868 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:51,868 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:51,868 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:51,869 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:51,869 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:51,869 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:51,869 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:51,869 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:51,869 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:51,869 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:51,869 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:51,869 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:51,869 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:51,870 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@28f5d1b6
2024-01-22 22:32:51,872 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:51,872 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:51,872 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@58eb159a
2024-01-22 22:32:51,874 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:51,874 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:51,874 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7fffeeb6
2024-01-22 22:32:51,875 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:51,875 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:51,876 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@31bf29ea
2024-01-22 22:32:52,558 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:52,558 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:52,558 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:52,560 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:52,560 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:52,560 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:52,660 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #125, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:52,664 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:52,665 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:52,665 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:52,665 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:52,765 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #126, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:52,769 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:52,769 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:52,769 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:52,769 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:52,770 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:52,770 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:52,770 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:52,770 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:52,770 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:52,770 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:52,770 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:52,770 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:52,770 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:52,771 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:52,771 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:52,771 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@8068c6
2024-01-22 22:32:52,774 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:52,774 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:52,774 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@70366123
2024-01-22 22:32:52,776 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:52,777 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:52,777 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@e7fd2c0
2024-01-22 22:32:52,778 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:52,778 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:52,778 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@47e5643
2024-01-22 22:32:53,459 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:53,459 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:53,459 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:53,461 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:53,461 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:53,462 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:53,562 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #127, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:53,566 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:53,567 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:53,567 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:53,567 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:53,668 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #128, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:53,671 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:53,671 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:53,672 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:53,672 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:53,673 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:53,673 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@68768c9d
2024-01-22 22:32:53,675 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:53,675 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:53,675 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@18a80b77
2024-01-22 22:32:53,677 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:53,677 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:53,677 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@66f69c3d
2024-01-22 22:32:53,680 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:53,680 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:53,680 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4fbbf21e
2024-01-22 22:32:54,360 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:32:54,361 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:54,361 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:54,363 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:54,363 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:54,363 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:54,464 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #129, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:54,467 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:54,468 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:54,468 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:54,468 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:54,569 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #130, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:54,572 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:54,573 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:54,574 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:54,574 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:54,574 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1b6433f6
2024-01-22 22:32:54,576 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:54,577 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:54,577 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6bc9c5af
2024-01-22 22:32:54,579 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:54,579 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:54,579 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@b94c500
2024-01-22 22:32:54,582 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:54,582 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:54,582 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@11b0b34a
2024-01-22 22:32:54,733 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$null$7(348)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:32:54,750 [timer7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 75 times in the last 5.000s)
2024-01-22 22:32:54,750 [timer0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 50 times in the last 5.000s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:55,262 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=679, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:55,262 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:55,262 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:55,264 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:55,264 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:55,264 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:55,365 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #131, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:55,369 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:55,370 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:55,370 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:55,370 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:55,471 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #132, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:55,475 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:55,476 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:55,477 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:55,477 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:55,477 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@c86b52a
2024-01-22 22:32:55,478 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:32:55,478 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:55,479 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:55,479 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:55,479 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7cbc3605
2024-01-22 22:32:55,481 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:55,481 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:55,481 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@229ed565
2024-01-22 22:32:55,483 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:55,483 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:55,483 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3cf16ae5
2024-01-22 22:32:56,163 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=679, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2024-01-22 22:32:56,163 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:56,163 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:56,165 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:56,165 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:56,165 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:56,266 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #133, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:56,269 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:56,270 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:56,270 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:56,270 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:56,371 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #134, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:56,374 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:56,374 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:56,375 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:56,375 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:56,376 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:56,376 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3ca925fa
2024-01-22 22:32:56,377 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:56,377 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:56,377 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4c233174
2024-01-22 22:32:56,380 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:56,380 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:56,380 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7387c99f
2024-01-22 22:32:56,382 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:56,383 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:56,383 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@255dcef6
2024-01-22 22:32:57,053 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:57,054 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:57,054 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@78640dd5
2024-01-22 22:32:57,064 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=10, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:57,064 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:57,064 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:57,066 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:57,066 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:57,066 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:57,167 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #135, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:57,170 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:57,171 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:57,171 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:57,171 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:57,272 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #136, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:57,275 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:57,275 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:57,275 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:57,275 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:57,275 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:57,275 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:57,275 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:57,275 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:57,275 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:57,276 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:57,276 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:57,276 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:57,276 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:57,276 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:57,276 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:57,276 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1489cd88
2024-01-22 22:32:57,279 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:57,279 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:57,279 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@642bd1cb
2024-01-22 22:32:57,281 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:57,281 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:57,281 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@147bbd13
2024-01-22 22:32:57,283 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:57,283 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:57,283 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@72c56ac0
2024-01-22 22:32:57,941 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:57,941 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:57,941 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@62db6b7
2024-01-22 22:32:57,965 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=23, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:32:57,965 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:57,966 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:57,967 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:57,967 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:57,967 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:58,068 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #137, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:58,071 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:58,072 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:58,072 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:58,072 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:58,173 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #138, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:58,176 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:58,177 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:58,177 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:58,177 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:58,177 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:58,177 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:58,177 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:58,177 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:58,177 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:58,177 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:58,178 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:58,178 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:58,178 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:58,178 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:58,178 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:58,178 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@550c0d6c
2024-01-22 22:32:58,180 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:58,180 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:58,180 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@25efd562
2024-01-22 22:32:58,182 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:58,183 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:58,183 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5129cdf3
2024-01-22 22:32:58,184 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:58,184 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:58,184 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@57ef67da
2024-01-22 22:32:58,867 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:58,867 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:58,867 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:58,869 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:58,869 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:58,869 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:58,969 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #139, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:58,973 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:58,974 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:58,974 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:58,974 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:59,075 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #140, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:59,078 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:59,078 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:59,078 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:59,078 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:59,079 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:59,079 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:59,079 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:59,079 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:59,079 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:59,079 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:59,079 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:59,079 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:59,079 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:59,079 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:59,080 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:59,080 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@53c3ddc1
2024-01-22 22:32:59,082 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:59,082 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:59,082 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2326c4d8
2024-01-22 22:32:59,083 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:59,083 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:59,083 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@38d5781e
2024-01-22 22:32:59,086 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:59,086 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:59,086 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4bbc8c54
2024-01-22 22:32:59,768 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:32:59,768 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:32:59,768 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:32:59,770 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:59,770 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:32:59,770 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:32:59,871 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #141, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:59,874 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:59,875 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:59,875 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:32:59,875 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:32:59,976 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #142, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:59,979 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:59,979 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:32:59,979 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:32:59,979 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:32:59,979 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:32:59,980 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:32:59,980 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:32:59,980 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:32:59,980 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:32:59,980 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:32:59,980 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:32:59,980 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:32:59,980 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:32:59,980 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:59,980 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:59,981 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@77f7f7f3
2024-01-22 22:32:59,983 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:59,983 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:59,983 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@736eee0
2024-01-22 22:32:59,986 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:59,986 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:59,986 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1fdf903a
2024-01-22 22:32:59,988 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:32:59,988 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:32:59,988 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6fb0e70e
2024-01-22 22:33:00,478 [timer6] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 78 times in the last 5.000s)
2024-01-22 22:33:00,478 [timer7] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 52 times in the last 5.000s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:00,669 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:00,669 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:00,669 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:00,671 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:00,671 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:00,671 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:00,772 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #143, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:00,775 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:00,776 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:00,776 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:00,776 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:00,876 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #144, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:00,880 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:00,880 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:00,880 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:00,880 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:00,880 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:00,880 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:00,880 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:00,880 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:00,880 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:00,881 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:00,881 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:00,881 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:00,881 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:00,881 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:00,881 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:00,881 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@221b0b5f
2024-01-22 22:33:00,882 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:33:00,882 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:00,883 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:00,883 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:00,883 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@528fa35e
2024-01-22 22:33:00,886 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:00,886 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:00,886 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@24280ee5
2024-01-22 22:33:00,888 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:00,888 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:00,888 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7ebfac73
2024-01-22 22:33:01,570 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:01,570 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:01,571 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:01,572 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:01,572 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:01,573 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:01,673 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #145, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:01,677 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:01,678 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:01,678 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:01,678 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:01,778 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #146, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:01,782 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:01,782 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:01,782 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:01,782 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:01,782 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:01,783 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:01,783 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:01,783 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:01,783 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:01,783 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:01,783 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:01,783 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:01,783 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:01,783 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:01,784 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:01,784 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2d10b629
2024-01-22 22:33:01,785 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:01,785 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:01,785 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5d8b1297
2024-01-22 22:33:01,788 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:01,788 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:01,788 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6e62a42c
2024-01-22 22:33:01,791 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:01,791 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:01,791 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5844deea
2024-01-22 22:33:02,472 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:02,472 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:02,472 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:02,473 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:02,474 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:02,474 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:02,574 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #147, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:02,577 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:02,578 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:02,578 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:02,578 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:02,679 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #148, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:02,682 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:02,682 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:02,683 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:02,684 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:02,684 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:02,684 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@604948a1
2024-01-22 22:33:02,685 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:02,685 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:02,685 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@109fe0a9
2024-01-22 22:33:02,688 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:02,688 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:02,688 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@59b8a3ea
2024-01-22 22:33:02,689 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:02,689 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:02,690 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@380ac5e
2024-01-22 22:33:03,276 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:03,277 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:03,277 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1465657c
2024-01-22 22:33:03,373 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=95, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:03,373 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:03,373 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:03,376 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:03,377 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:03,377 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:03,477 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #149, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:03,481 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:03,482 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:03,482 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:03,482 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:03,582 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #150, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:03,586 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:03,586 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:03,586 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:03,586 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:03,586 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:03,586 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:03,587 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:03,587 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:03,587 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:03,587 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:03,587 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:03,587 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:03,587 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:03,587 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:03,587 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:03,587 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@167e65ee
2024-01-22 22:33:03,590 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:03,590 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:03,590 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@665e1cf2
2024-01-22 22:33:03,592 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:03,592 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:03,592 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@70bb7e47
2024-01-22 22:33:03,593 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:03,593 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:03,593 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5caf68a7
2024-01-22 22:33:04,274 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:33:04,274 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:04,274 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:04,276 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:04,276 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:04,276 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:04,377 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #151, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:04,380 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:04,381 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:04,381 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:04,381 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:04,482 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #152, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:04,485 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:04,486 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:04,487 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:04,487 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:04,487 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@40e094b8
2024-01-22 22:33:04,489 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:04,489 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:04,489 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3016bdc9
2024-01-22 22:33:04,491 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:04,491 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:04,491 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2dc46d64
2024-01-22 22:33:04,493 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:04,493 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:04,493 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@8ed0c9a
2024-01-22 22:33:04,734 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$null$7(348)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:33:05,165 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:05,165 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:05,166 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@c28944a
2024-01-22 22:33:05,175 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=9, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:05,175 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:05,175 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:05,177 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:05,177 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:05,177 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:05,278 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #153, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:05,281 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:05,282 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:05,282 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:05,282 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:05,383 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #154, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:05,386 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:05,386 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:05,387 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:05,387 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:05,388 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:05,388 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@d7fe05f
2024-01-22 22:33:05,389 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:05,390 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:05,390 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7dc403d4
2024-01-22 22:33:05,391 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:05,391 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:05,391 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@254ea195
2024-01-22 22:33:05,394 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:05,394 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:05,394 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4e717947
2024-01-22 22:33:05,882 [timer1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 52 times in the last 5.000s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:05,883 [timer7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 78 times in the last 5.001s)
2024-01-22 22:33:06,076 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:06,076 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:06,077 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:06,078 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:06,078 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:06,078 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:06,179 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #155, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:06,182 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:06,183 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:06,183 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:06,183 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:06,284 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #156, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:06,287 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:06,287 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:06,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:06,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:06,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:06,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:06,287 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:06,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:06,287 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:06,287 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:06,288 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:06,288 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:06,288 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:06,288 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:06,288 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:06,288 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@58c1dd85
2024-01-22 22:33:06,289 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:33:06,289 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:06,290 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:06,290 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:06,290 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@282fcd9f
2024-01-22 22:33:06,292 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:06,292 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:06,292 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@711d7217
2024-01-22 22:33:06,294 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:06,294 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:06,294 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@e79407
2024-01-22 22:33:06,978 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=683, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:06,978 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:06,978 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:06,979 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:06,980 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:06,980 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:07,080 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #157, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:07,084 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:07,084 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:07,085 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:07,085 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:07,185 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #158, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:07,189 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:07,190 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:07,190 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:07,190 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1f85a26e
2024-01-22 22:33:07,193 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:07,193 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:07,193 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6f2cb147
2024-01-22 22:33:07,194 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:07,195 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:07,195 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2edb2fec
2024-01-22 22:33:07,196 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:07,196 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:07,196 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@51c443c6
2024-01-22 22:33:07,879 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:07,879 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:07,879 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:07,881 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:07,881 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:07,881 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:07,981 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #159, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:07,985 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:07,986 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:07,986 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:07,986 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:08,087 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #160, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:08,090 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:08,090 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:08,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:08,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:08,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:08,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:08,090 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:08,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:08,091 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:08,091 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:08,091 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:08,091 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:08,091 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:08,091 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:08,091 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:08,091 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2fa05942
2024-01-22 22:33:08,093 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:08,093 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:08,093 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5fb9dfa3
2024-01-22 22:33:08,096 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:08,096 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:08,096 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1a0b9c42
2024-01-22 22:33:08,097 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:08,098 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:08,098 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@378476b2
2024-01-22 22:33:08,780 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:08,780 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:08,780 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:08,782 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:08,782 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:08,782 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:08,883 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #161, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:08,886 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:08,887 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:08,887 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:08,887 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:08,988 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #162, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:08,992 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:08,992 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:08,992 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:08,992 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:08,992 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:08,992 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:08,992 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:08,993 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:08,993 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:08,993 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:08,993 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:08,993 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:08,993 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:08,993 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:08,993 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:08,993 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7d5c3d97
2024-01-22 22:33:08,996 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:08,996 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:08,996 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@d170dfc
2024-01-22 22:33:08,999 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:08,999 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:08,999 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2126db4d
2024-01-22 22:33:09,000 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:09,000 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:09,000 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1a8ff3f
2024-01-22 22:33:09,681 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:09,681 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:09,682 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:09,683 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:09,683 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:09,683 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:09,784 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #163, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:09,788 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:09,789 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:09,789 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:09,789 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:09,890 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #164, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:09,894 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:09,894 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:09,894 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:09,895 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:09,895 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:09,895 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:09,895 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:09,895 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:09,895 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:09,895 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:09,895 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:09,895 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:09,895 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:09,896 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:09,896 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:09,896 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@566a8814
2024-01-22 22:33:09,899 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:09,899 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:09,899 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@268a35f9
2024-01-22 22:33:09,901 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:09,901 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:09,901 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@35a7a0bf
2024-01-22 22:33:09,904 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:09,904 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:09,904 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@12872bc8
2024-01-22 22:33:10,582 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=673, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:33:10,583 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:10,583 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:10,585 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:10,585 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:10,585 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:10,686 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #165, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:10,689 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:10,690 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:10,690 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:10,690 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:10,791 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #166, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:10,794 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:10,794 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:10,795 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:10,796 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:10,796 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:10,796 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3c2d210b
2024-01-22 22:33:10,797 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:10,797 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:10,798 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4ca7b105
2024-01-22 22:33:10,799 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:10,799 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:10,799 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4ae2d578
2024-01-22 22:33:10,802 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:10,802 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:10,802 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1d248eeb
2024-01-22 22:33:11,289 [timer0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 72 times in the last 5.001s)
2024-01-22 22:33:11,290 [timer1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 48 times in the last 5.001s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:11,484 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:11,484 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:11,484 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:11,486 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:11,486 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:11,486 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:11,587 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #167, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:11,590 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:11,591 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:11,591 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:11,591 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:11,692 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #168, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:11,695 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:11,695 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:11,695 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:11,695 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:11,695 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:11,695 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:11,696 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:11,696 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:11,696 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:11,696 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:11,696 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:11,696 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:11,696 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:11,696 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:11,696 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:11,696 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@71d58b26
2024-01-22 22:33:11,697 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:33:11,697 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:11,699 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:11,699 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:11,699 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@112b66b
2024-01-22 22:33:11,701 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:11,701 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:11,701 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4225359
2024-01-22 22:33:11,702 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:11,702 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:11,702 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6aee7bdf
2024-01-22 22:33:12,276 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:12,276 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@10e40477
2024-01-22 22:33:12,276 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:12,385 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=108, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:12,385 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:12,386 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:12,387 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:12,387 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:12,387 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:12,488 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #169, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:12,491 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:12,492 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:12,492 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:12,492 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:12,593 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #170, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:12,597 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:12,597 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:12,598 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:12,599 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:12,599 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:12,599 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6f5297af
2024-01-22 22:33:12,601 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:12,601 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:12,601 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1f8b337a
2024-01-22 22:33:12,603 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:12,603 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:12,603 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@156997a3
2024-01-22 22:33:12,605 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:12,605 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:12,605 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3be65dc9
2024-01-22 22:33:13,287 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=989) timeout (988ms) for bootstrapping
2024-01-22 22:33:13,287 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:13,287 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:13,289 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:13,289 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:13,289 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:13,389 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #171, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:13,393 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:13,394 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:13,394 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:13,394 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:13,495 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #172, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:13,498 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:13,498 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:13,498 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:13,498 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:13,498 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:13,498 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:13,498 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:13,499 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:13,499 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:13,499 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:13,499 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:13,499 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:13,499 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:13,499 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:13,499 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:13,500 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5fabcfa3
2024-01-22 22:33:13,501 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:13,501 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:13,501 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2fc23ad9
2024-01-22 22:33:13,504 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:13,504 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:13,504 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4772ec29
2024-01-22 22:33:13,506 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:13,506 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:13,506 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@137cbc8f
2024-01-22 22:33:14,064 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:14,065 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:14,065 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2e02658a
2024-01-22 22:33:14,188 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=123, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:14,188 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:14,188 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:14,190 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:14,190 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:14,190 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:14,291 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #173, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:14,294 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:14,296 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:14,296 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:14,296 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:14,397 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #174, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:14,400 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:14,400 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:14,400 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:14,400 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:14,400 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:14,400 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:14,400 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:14,401 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:14,401 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:14,401 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:14,401 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:14,401 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:14,401 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:14,401 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:14,401 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:14,401 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6658c808
2024-01-22 22:33:14,403 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:14,403 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:14,403 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@16886781
2024-01-22 22:33:14,405 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:14,406 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:14,406 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2324873d
2024-01-22 22:33:14,408 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:14,408 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:14,408 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1897a05d
2024-01-22 22:33:14,733 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$null$7(348)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:33:15,089 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:15,090 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:15,090 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:15,092 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:15,092 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:15,092 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:15,192 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #175, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:15,196 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:15,197 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:15,197 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:15,197 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:15,298 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #176, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:15,301 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:15,301 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:15,301 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:15,301 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:15,301 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:15,301 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:15,301 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:15,301 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:15,301 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:15,302 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:15,302 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:15,302 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:15,302 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:15,302 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:15,302 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:15,302 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@64ce186b
2024-01-22 22:33:15,304 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:15,304 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:15,304 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@149cb3a4
2024-01-22 22:33:15,306 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:15,306 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:15,306 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1bf28d4a
2024-01-22 22:33:15,309 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:15,309 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:15,309 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@34ec77f7
2024-01-22 22:33:15,872 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:15,873 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:15,873 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@16b3614d
2024-01-22 22:33:15,991 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=117, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:15,991 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:15,991 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:15,993 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:15,993 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:15,993 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:16,093 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #177, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:16,097 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:16,098 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:16,099 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:16,099 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:16,199 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #178, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:16,202 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:16,203 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:16,204 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:16,204 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:16,204 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4f353d70
2024-01-22 22:33:16,207 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:16,207 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:16,207 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3fccde6c
2024-01-22 22:33:16,208 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:16,208 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:16,208 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4b7d5810
2024-01-22 22:33:16,211 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:16,211 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:16,211 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7fe3a81
2024-01-22 22:33:16,697 [timer0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 81 times in the last 5.000s)
2024-01-22 22:33:16,697 [timer1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 54 times in the last 5.000s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:16,892 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:16,892 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:16,892 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:16,894 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:16,894 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:16,894 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:16,994 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #179, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:16,998 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:16,999 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:16,999 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:16,999 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:17,099 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #180, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:17,103 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:17,103 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:17,103 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:17,104 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:17,104 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:17,104 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:17,104 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:17,104 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:17,104 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:17,104 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:17,104 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:17,104 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:17,104 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:17,105 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:17,105 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:17,105 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1228768e
2024-01-22 22:33:17,105 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:33:17,106 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:17,108 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:17,108 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:17,108 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@628ccdd7
2024-01-22 22:33:17,110 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:17,111 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:17,111 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@eadb228
2024-01-22 22:33:17,113 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:17,113 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:17,113 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@795c93b
2024-01-22 22:33:17,793 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=679, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:17,793 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:17,793 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:17,795 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:17,795 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:17,795 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:17,896 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #181, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:17,899 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:17,900 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:17,900 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:17,900 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:18,001 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #182, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:18,004 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:18,004 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:18,005 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:18,006 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:18,006 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:18,006 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5b5a4401
2024-01-22 22:33:18,007 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:18,008 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:18,008 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2b375411
2024-01-22 22:33:18,010 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:18,010 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:18,010 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6a3b48c4
2024-01-22 22:33:18,013 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:18,013 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:18,013 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5d068adb
2024-01-22 22:33:18,694 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:18,694 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:18,695 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:18,696 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:18,696 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:18,696 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:18,797 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #183, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:18,800 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:18,801 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:18,801 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:18,801 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:18,902 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #184, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:18,905 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:18,906 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:18,907 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:18,907 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:18,907 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:18,907 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@64e87352
2024-01-22 22:33:18,909 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:18,909 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:18,909 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@14bafed0
2024-01-22 22:33:18,911 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:18,911 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:18,911 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4e1a1310
2024-01-22 22:33:18,913 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:18,913 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:18,913 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7b19efac
2024-01-22 22:33:19,595 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:19,596 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:19,596 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:19,597 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:19,597 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:19,598 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:19,698 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #185, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:19,702 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:19,703 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:19,703 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:19,703 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:19,803 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #186, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:19,807 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:19,807 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:19,807 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:19,807 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:19,807 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:19,807 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:19,807 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:19,807 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:19,807 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:19,807 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:19,808 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:19,808 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:19,808 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:19,808 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:19,808 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:19,808 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@54dcb2a8
2024-01-22 22:33:19,811 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:19,811 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:19,811 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@243eabd9
2024-01-22 22:33:19,813 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:19,813 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:19,813 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@18dddb9
2024-01-22 22:33:19,814 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:19,814 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:19,814 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@28255532
2024-01-22 22:33:20,497 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:20,497 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:20,497 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:20,498 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:20,499 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:20,499 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:20,599 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #187, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:20,603 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:20,604 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:20,605 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:20,605 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:20,706 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #188, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:20,709 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:20,709 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:20,709 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:20,710 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:20,710 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:20,710 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:20,710 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:20,710 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:20,710 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:20,710 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:20,710 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:20,710 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:20,710 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:20,711 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:20,711 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:20,711 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@b3fbd97
2024-01-22 22:33:20,714 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:20,714 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:20,714 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7b029811
2024-01-22 22:33:20,717 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:20,717 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:20,717 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7269b55f
2024-01-22 22:33:20,718 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:20,718 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:20,718 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2fc22884
2024-01-22 22:33:21,398 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=679, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:33:21,398 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:21,398 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:21,400 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:21,400 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:21,400 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:21,501 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #189, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:21,504 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:21,505 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:21,505 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:21,505 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:21,607 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #190, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:21,611 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:21,612 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:21,612 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:21,612 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@356133d0
2024-01-22 22:33:21,614 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:21,614 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:21,614 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@45626e99
2024-01-22 22:33:21,615 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:21,615 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:21,615 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@320c6a0f
2024-01-22 22:33:21,618 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:21,618 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:21,618 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@43cb9713
2024-01-22 22:33:22,105 [timer0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 72 times in the last 5.000s)
2024-01-22 22:33:22,107 [timer1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 48 times in the last 5.001s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:22,231 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:22,232 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:22,232 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@17a41d3b
2024-01-22 22:33:22,232 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=13); keep nextIndex (0) unchanged and retry.
2024-01-22 22:33:22,232 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:22,299 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=67, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2024-01-22 22:33:22,299 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:22,300 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:22,301 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:22,301 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:22,301 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:22,402 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #191, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:22,405 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:22,406 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:22,406 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:22,406 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:22,507 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #192, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:22,511 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:22,512 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:22,512 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:22,512 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1f627e5
2024-01-22 22:33:22,514 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:22,514 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:22,514 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@71c1c939
2024-01-22 22:33:22,516 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:22,516 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:22,516 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5e95eb4a
2024-01-22 22:33:22,517 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:22,517 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:22,517 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@67f6ba21
2024-01-22 22:33:23,201 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=683, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:23,201 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:23,201 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:23,202 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:23,203 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:23,203 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:23,303 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #193, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:23,307 [s3-server-thread3] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:23,307 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:23,308 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:23,308 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:23,408 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #194, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:23,411 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:23,411 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:23,411 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:23,411 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:23,411 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:23,412 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:23,412 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:23,412 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:23,412 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:23,412 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:23,412 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:23,412 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:23,412 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:23,412 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:23,412 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:23,412 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@f90c50
2024-01-22 22:33:23,415 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:23,415 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:23,415 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@70cfe4a0
2024-01-22 22:33:23,418 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:23,418 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:23,418 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@716e5f7f
2024-01-22 22:33:23,419 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:23,419 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:23,419 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@26b6051
2024-01-22 22:33:24,102 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:24,102 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:24,102 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:24,104 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:24,104 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:24,104 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:24,205 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #195, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:24,208 [s3-server-thread3] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:24,209 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:24,209 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:24,209 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:24,310 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #196, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:24,313 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:24,313 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:24,314 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:24,314 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:24,315 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:24,315 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@429baa40
2024-01-22 22:33:24,318 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:24,318 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:24,318 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@326fe26c
2024-01-22 22:33:24,319 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:24,319 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:24,319 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4fc129c8
2024-01-22 22:33:24,321 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:24,321 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:24,321 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@25416a53
2024-01-22 22:33:24,733 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$null$7(348)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:33:24,922 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:24,922 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:24,922 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@495ba3c0
2024-01-22 22:33:25,003 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=80, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:25,003 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:25,003 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:25,005 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:25,005 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:25,005 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:25,105 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #197, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:25,108 [s3-server-thread3] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:25,109 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:25,109 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:25,109 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:25,210 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #198, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:25,213 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:25,213 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:25,213 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:25,214 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:25,214 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:25,214 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:25,214 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:25,214 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:25,214 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:25,214 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:25,214 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:25,214 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:25,214 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:25,214 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:25,214 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:25,214 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@62d934ff
2024-01-22 22:33:25,216 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:25,216 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:25,216 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@120d1e0b
2024-01-22 22:33:25,219 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:25,219 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:25,219 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@45b05679
2024-01-22 22:33:25,220 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:25,220 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:25,220 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@20e8aa
2024-01-22 22:33:25,904 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=683, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:25,904 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:25,904 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:25,906 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:25,906 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:25,906 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:26,007 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #199, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:26,010 [s3-server-thread3] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:26,011 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:26,011 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:26,011 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:26,116 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #200, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:26,119 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:26,120 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:26,121 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:26,121 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:26,121 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:26,121 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@da01a90
2024-01-22 22:33:26,123 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:26,123 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:26,123 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7d9bbe36
2024-01-22 22:33:26,125 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:26,125 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:26,125 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6e894afc
2024-01-22 22:33:26,126 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:26,127 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:26,127 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5baa7597
2024-01-22 22:33:26,670 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:26,671 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:26,671 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@27057a0f
2024-01-22 22:33:26,805 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=134, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2024-01-22 22:33:26,805 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:26,806 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:26,807 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:26,807 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:26,807 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:26,908 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #201, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:26,911 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:26,912 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:26,912 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:26,912 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:27,013 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #202, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:27,016 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:27,017 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:27,018 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:27,018 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:27,018 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@e54b259
2024-01-22 22:33:27,020 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:27,020 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:27,020 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7e6cf1b3
2024-01-22 22:33:27,023 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:27,023 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:27,023 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@69593bec
2024-01-22 22:33:27,026 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:27,026 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:27,026 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@769b2bcc
2024-01-22 22:33:27,232 [timer7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 81 times in the last 5.000s)
2024-01-22 22:33:27,233 [timer0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 54 times in the last 5.001s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:27,706 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=989) timeout (989ms) for bootstrapping
2024-01-22 22:33:27,706 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:27,707 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:27,708 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:27,708 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:27,708 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:27,809 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #203, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:27,812 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:27,813 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:27,813 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:27,813 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:27,913 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #204, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:27,916 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:27,916 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:27,917 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:27,918 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:27,918 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:27,918 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1f2fe6de
2024-01-22 22:33:27,918 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:33:27,919 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:27,920 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:27,920 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:27,920 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6f06d701
2024-01-22 22:33:27,922 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:27,922 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:27,923 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@161db383
2024-01-22 22:33:27,925 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:27,925 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:27,925 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@58379cd0
2024-01-22 22:33:28,608 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=991) timeout (991ms) for bootstrapping
2024-01-22 22:33:28,608 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:28,608 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:28,609 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:28,609 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:28,609 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:28,710 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #205, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:28,713 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:28,714 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:28,714 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:28,714 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:28,815 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #206, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:28,818 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:28,819 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:28,819 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:28,819 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:28,819 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:28,819 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4f0e022a
2024-01-22 22:33:28,821 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:28,821 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:28,821 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3f77423a
2024-01-22 22:33:28,823 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:28,823 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:28,823 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@53eaf6f3
2024-01-22 22:33:28,826 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:28,826 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:28,826 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@70584876
2024-01-22 22:33:29,509 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:29,509 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:29,509 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:29,510 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:29,511 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:29,511 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:29,611 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #207, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:29,614 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:29,615 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:29,615 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:29,615 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:29,716 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #208, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:29,719 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:29,719 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:29,719 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:29,719 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:29,719 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:29,720 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:29,720 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:29,720 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:29,720 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:29,720 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:29,720 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:29,720 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:29,720 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:29,720 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:29,720 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:29,720 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@e9c10ae
2024-01-22 22:33:29,723 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:29,723 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:29,723 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7e241336
2024-01-22 22:33:29,724 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:29,725 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:29,725 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@7af20636
2024-01-22 22:33:29,727 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:29,727 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:29,727 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6d35badb
2024-01-22 22:33:30,410 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:30,410 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:30,410 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:30,411 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:30,412 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:30,412 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:30,512 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #209, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:30,515 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:30,516 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:30,516 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:30,516 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:30,617 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #210, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:30,620 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:30,621 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:30,621 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:30,621 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:30,621 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:30,621 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@57f3195b
2024-01-22 22:33:30,624 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:30,624 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:30,624 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@2792a4b6
2024-01-22 22:33:30,625 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:30,626 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:30,626 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@ec3faa8
2024-01-22 22:33:30,627 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:30,627 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:30,627 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6d94a766
2024-01-22 22:33:31,311 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=683, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:31,311 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:31,311 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:31,312 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:31,313 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:31,313 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:31,413 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #211, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:31,417 [s3-server-thread3] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:31,418 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:31,418 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:31,418 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:31,518 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #212, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:31,521 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:31,521 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:31,522 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:31,522 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:31,523 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:31,523 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1c0486d9
2024-01-22 22:33:31,524 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:31,524 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:31,524 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6c2e9745
2024-01-22 22:33:31,527 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:31,527 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:31,527 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@5647a92b
2024-01-22 22:33:31,530 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:31,530 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:31,530 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@40bc0fdb
2024-01-22 22:33:32,212 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=681, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:32,212 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:32,212 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:32,213 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:32,213 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:32,213 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:32,314 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #213, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:32,317 [s3-server-thread3] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:32,318 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:32,318 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:32,318 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:32,419 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #214, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:32,422 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:32,422 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:32,422 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:32,422 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:32,422 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:32,422 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:32,422 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:32,422 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:32,422 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:32,422 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:32,423 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:32,423 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:32,423 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:32,423 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:32,423 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:32,423 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@1ddd43c1
2024-01-22 22:33:32,426 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:32,426 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:32,426 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6d761249
2024-01-22 22:33:32,428 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:32,428 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:32,428 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@6ff646bc
2024-01-22 22:33:32,430 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:32,430 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:32,430 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@286af4c7
2024-01-22 22:33:32,918 [timer1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 72 times in the last 5.000s)
2024-01-22 22:33:32,920 [timer2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 48 times in the last 5.001s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:33,113 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(800)) - s0@group-BBE07AC09D79-LeaderStateImpl detects a follower s0@group-BBE07AC09D79->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=682, lastRpcResponseTime=990) timeout (990ms) for bootstrapping
2024-01-22 22:33:33,113 [s0@group-BBE07AC09D79-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1256)) - s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
2024-01-22 22:33:33,113 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:33,115 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:33,115 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:33,115 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-BBE07AC09D79-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1261)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:843)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:101)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:775)
2024-01-22 22:33:33,215 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #215, newRequest SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:33,218 [s3-server-thread3] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s3@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:33,219 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: s0. Failed SetConfigurationRequest:client-6B4505145CB4->s3@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:33,219 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s3,  curLeader=s3, newLeader=s0
2024-01-22 22:33:33,219 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s3 to s0 for group-BBE07AC09D79
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BBE07AC09D79 is not the leader s0|localhost:15000
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:33,320 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #216, newRequest SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:33,323 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-BBE07AC09D79: receive setConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:33,323 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-BBE07AC09D79-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[]
2024-01-22 22:33:33,323 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:33,323 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:33,323 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:33,323 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:33,324 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:33,324 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:33,324 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:33,324 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:33,324 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:33,324 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:33,324 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:33,324 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:33,324 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:33,324 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@3ae7f1f
2024-01-22 22:33:33,324 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (0) unchanged and retry.
2024-01-22 22:33:33,325 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:33,327 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:33,327 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:33,327 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@739bd3db
2024-01-22 22:33:33,328 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:33,329 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:33,329 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@64d31755
2024-01-22 22:33:33,331 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39] to follower
2024-01-22 22:33:33,331 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:33,331 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_39 with options []: sun.nio.ch.ChannelInputStream@4b08aed3
2024-01-22 22:33:33,598 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(421)) - client-6B4505145CB4: suggested new leader: null. Failed SetConfigurationRequest:client-6B4505145CB4->s0@group-BBE07AC09D79, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15004, s4|0.0.0.0:15008, s0|localhost:15000], listeners:[] with {}
java.io.IOException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: Thread interrupted
	at org.apache.ratis.grpc.GrpcUtil.unwrapException(GrpcUtil.java:103)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:223)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.setConfiguration(GrpcClientProtocolClient.java:189)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
Caused by: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: Thread interrupted
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$AdminProtocolServiceBlockingStub.setConfiguration(AdminProtocolServiceGrpc.java:451)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.lambda$setConfiguration$6(GrpcClientProtocolClient.java:191)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:221)
	... 25 more
Caused by: java.lang.InterruptedException
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.throwIfInterrupted(ClientCalls.java:750)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:718)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:159)
	... 28 more
2024-01-22 22:33:33,598 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(440)) - client-6B4505145CB4: oldLeader=s0,  curLeader=s0, newLeader=s3
2024-01-22 22:33:33,598 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(446)) - client-6B4505145CB4 changes Leader from s0 to s3 for group-BBE07AC09D79
java.io.IOException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: Thread interrupted
	at org.apache.ratis.grpc.GrpcUtil.unwrapException(GrpcUtil.java:103)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:223)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.setConfiguration(GrpcClientProtocolClient.java:189)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
Caused by: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: Thread interrupted
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$AdminProtocolServiceBlockingStub.setConfiguration(AdminProtocolServiceGrpc.java:451)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.lambda$setConfiguration$6(GrpcClientProtocolClient.java:191)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:221)
	... 25 more
Caused by: java.lang.InterruptedException
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.throwIfInterrupted(ClientCalls.java:750)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:718)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:159)
	... 28 more
2024-01-22 22:33:33,601 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - ************************************************************** 
2024-01-22 22:33:33,601 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - *** 
2024-01-22 22:33:33,601 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - ***     Stopping MiniRaftClusterWithGrpc
2024-01-22 22:33:33,601 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - *** 
2024-01-22 22:33:33,601 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - ************************************************************** 
2024-01-22 22:33:33,601 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(837)) - printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:33:33,603 [MiniRaftCluster-1] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(417)) - s3: close

2024-01-22 10:33:33,604 2024-01-22 22:33:33,606 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2024-01-22 22:33:33,606 [Time-limited test] WARN  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(850)) - shutdown interrupted
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2067)
	at java.util.concurrent.ThreadPoolExecutor.awaitTermination(ThreadPoolExecutor.java:1475)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:848)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:320)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:33,607 [MiniRaftCluster-3] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(417)) - s0: close
org.junit.runners.model.TestTimedOutException: test timed out after 100 seconds
	at sun.misc.Unsafe.park(Native Method)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:717)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:159)
	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$AdminProtocolServiceBlockingStub.setConfiguration(AdminProtocolServiceGrpc.java:451)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.lambda$setConfiguration$6(GrpcClientProtocolClient.java:191)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$$Lambda$613/2136424541.get(Unknown Source)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:221)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.setConfiguration(GrpcClientProtocolClient.java:189)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
2024-01-22 22:33:33,607 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:821)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest$$Lambda$598/1745832445.accept(Unknown Source)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2024-01-22 22:33:33,607 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(856)) - MiniRaftClusterWithGrpc shutdown completed
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:33,608 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - ************************************************************** 
2024-01-22 22:33:33,608 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - *** 
2024-01-22 22:33:33,608 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - ***     Stopping MiniRaftClusterWithGrpc
2024-01-22 22:33:33,608 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - *** 
2024-01-22 22:33:33,608 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - ************************************************************** 
2024-01-22 22:33:33,608 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2024-01-22 22:33:33,608 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s3: shutdown server GrpcServerProtocolService now
2024-01-22 22:33:33,608 [Thread-177] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s3 Close channels
2024-01-22 22:33:33,608 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(837)) - printing ALL groups
  s3:  CLOSING  FOLLOWER s3@group-BBE07AC09D79:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-BBE07AC09D79:t0, leader=null, voted=, raftlog=Memoized:s4@group-BBE07AC09D79-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3|localhost:15004, s4|localhost:15008, s0|localhost:15000]|listeners:[], old=null CLOSED
  s0:  CLOSING    LEADER s0@group-BBE07AC09D79:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-BBE07AC09D79-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:15004, s0|localhost:15000]|listeners:[], old=null RUNNING
2024-01-22 22:33:33,609 [Thread-179] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s4 Close channels
2024-01-22 22:33:33,608 [s3-impl-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$1(457)) - s3@group-BBE07AC09D79: shutdown
2024-01-22 22:33:33,609 [s0-impl-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$1(457)) - s0@group-BBE07AC09D79: shutdown
2024-01-22 22:33:33,609 [grpc-default-executor-1] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(121)) - s3: APPEND_ENTRIES onError, lastRequest: s0->s3#9-t1,previous=(t:1, i:41),leaderCommit=41,initializing? false,entries: size=1, first=(t:1, i:42), METADATAENTRY(c:41): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2024-01-22 22:33:33,618 [s0-impl-thread2] INFO  util.JmxRegister (JmxRegister.java:unregister(74)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BBE07AC09D79,id=s0
2024-01-22 22:33:33,618 [s0-impl-thread2] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(95)) - s0: shutdown s0@group-BBE07AC09D79-LeaderStateImpl
2024-01-22 22:33:33,618 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s3-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: RST_STREAM closed stream. HTTP/2 error code: CANCEL
2024-01-22 22:33:33,618 [s0-impl-thread2] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(287)) - s0@group-BBE07AC09D79-PendingRequests: sendNotLeaderResponses
2024-01-22 22:33:33,618 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2024-01-22 22:33:33,619 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(226)) - s0@group-BBE07AC09D79->s3-GrpcLogAppender: Failed to getClient for s3
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:65)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:114)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:196)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:201)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$800(GrpcLogAppender.java:62)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onError(GrpcLogAppender.java:541)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:481)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:489)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:453)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:486)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:33,619 [s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:33,618 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s3: Stopped
"Thread-180" Id=201 RUNNABLE


2024-01-22 22:33:33,617 [Time-limited test] WARN  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(850)) - shutdown interrupted
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2067)
	at java.util.concurrent.ThreadPoolExecutor.awaitTermination(ThreadPoolExecutor.java:1475)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:848)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.tearDown(RaftSnapshotBaseTest.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:750)
"Thread-177" Id=199 TIMED_WAITING on java.util.concurrent.CountDownLatch$Sync@c333c60
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.CountDownLatch$Sync@c333c60
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1037)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:277)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelImpl.awaitTermination(ManagedChannelImpl.java:887)
	at org.apache.ratis.thirdparty.io.grpc.internal.ForwardingManagedChannel.awaitTermination(ForwardingManagedChannel.java:57)
	at org.apache.ratis.grpc.GrpcUtil.shutdownManagedChannel(GrpcUtil.java:236)
	...


"s0-impl-thread2" Id=198 BLOCKED on org.apache.log4j.spi.RootLogger@79da8dc5 owned by "s3-impl-thread2" Id=193
	at org.apache.log4j.Category.callAppenders(Category.java:204)
	-  blocked on org.apache.log4j.spi.RootLogger@79da8dc5
	at org.apache.log4j.Category.forcedLog(Category.java:384)
	at org.apache.log4j.Category.log(Category.java:810)
	at org.slf4j.reload4j.Reload4jLoggerAdapter.handleNormalizedLoggingCall(Reload4jLoggerAdapter.java:137)
	at org.slf4j.helpers.AbstractLogger.handle_1ArgsCall(AbstractLogger.java:386)
	at org.slf4j.helpers.AbstractLogger.info(AbstractLogger.java:209)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$close$1(RaftServerImpl.java:457)
	at org.apache.ratis.server.impl.RaftServerImpl$$Lambda$801/255765250.run(Unknown Source)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@22993070


2024-01-22 22:33:33,617 [s3-impl-thread2] INFO  util.JmxRegister (JmxRegister.java:unregister(74)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BBE07AC09D79,id=s3
"MiniRaftCluster-3" Id=194 RUNNABLE
	at java.lang.Thread.currentThread(Native Method)
	at java.util.concurrent.ThreadLocalRandom.localInit(ThreadLocalRandom.java:210)
	at java.util.concurrent.ThreadLocalRandom.nextSecondarySeed(ThreadLocalRandom.java:1007)
	at java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1728)
	at java.util.concurrent.CompletableFuture.join(CompletableFuture.java:1947)
	at org.apache.ratis.util.PeerProxyMap.close(PeerProxyMap.java:168)
	at org.apache.ratis.server.RaftServerRpcWithProxy.closeImpl(RaftServerRpcWithProxy.java:85)
	at org.apache.ratis.grpc.server.GrpcService.closeImpl(GrpcService.java:319)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@5208d25


2024-01-22 22:33:33,619 [s3-impl-thread2] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s3: shutdown s3@group-BBE07AC09D79-FollowerState
"s3-impl-thread2" Id=193 RUNNABLE
	at java.lang.StringBuffer.capacity(StringBuffer.java:174)
	-  locked java.lang.StringBuffer@1eb5174b
	at org.apache.log4j.PatternLayout.format(PatternLayout.java:501)
	at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:303)
	at org.apache.log4j.WriterAppender.append(WriterAppender.java:156)
	at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:232)
	-  locked org.apache.log4j.ConsoleAppender@67080771
	at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:57)
	at org.apache.log4j.Category.callAppenders(Category.java:206)
	-  locked org.apache.log4j.spi.RootLogger@79da8dc5
	at org.apache.log4j.Category.forcedLog(Category.java:384)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@7217fe0


"MiniRaftCluster-1" Id=191 RUNNABLE
	at java.lang.Thread.setPriority0(Native Method)
	at java.lang.Thread.setPriority(Thread.java:1100)
	at java.lang.Thread.init(Thread.java:419)
	at java.lang.Thread.init(Thread.java:351)
	at java.lang.Thread.<init>(Thread.java:466)
	at org.apache.ratis.util.PeerProxyMap.lambda$close$6(PeerProxyMap.java:167)
	at org.apache.ratis.util.PeerProxyMap$$Lambda$576/1515377136.execute(Unknown Source)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$5(ConcurrentUtils.java:182)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@3b3eacba


2024-01-22 22:33:33,620 [s3-impl-thread2] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s3@group-BBE07AC09D79-StateMachineUpdater: set stopIndex = 42
"s0@group-BBE07AC09D79->s4-GrpcLogAppender-LogAppenderDaemon" Id=187 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@72cde7cc
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@72cde7cc
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)
	at org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:65)
	at org.apache.ratis.grpc.server.GrpcLogAppender.mayWait(GrpcLogAppender.java:286)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:254)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at org.apache.ratis.server.leader.LogAppenderDaemon$$Lambda$645/1625404386.run(Unknown Source)
	...


"s3-server-thread3" Id=170 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@5fd4f8f5
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@5fd4f8f5
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)
	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)
	at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	...


2024-01-22 22:33:33,620 [s3@group-BBE07AC09D79-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s3@group-BBE07AC09D79-FollowerState was interrupted
"timer0" Id=75 TIMED_WAITING on java.util.TaskQueue@696da30b
	at java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@696da30b
	at java.util.TimerThread.mainLoop(Timer.java:552)
	at java.util.TimerThread.run(Timer.java:505)


"timer7" Id=68 TIMED_WAITING on java.util.TaskQueue@4e7912d8
	at java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@4e7912d8
	at java.util.TimerThread.mainLoop(Timer.java:552)
	at java.util.TimerThread.run(Timer.java:505)


"timer6" Id=65 TIMED_WAITING on java.util.TaskQueue@53976f5c
	at java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@53976f5c
	at java.util.TimerThread.mainLoop(Timer.java:552)
	at java.util.TimerThread.run(Timer.java:505)


"timer5" Id=63 TIMED_WAITING on java.util.TaskQueue@2bfc268b
	at java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@2bfc268b
	at java.util.TimerThread.mainLoop(Timer.java:552)
	at java.util.TimerThread.run(Timer.java:505)


"timer4" Id=62 TIMED_WAITING on java.util.TaskQueue@2f8dad04
	at java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@2f8dad04
	at java.util.TimerThread.mainLoop(Timer.java:552)
	at java.util.TimerThread.run(Timer.java:505)


"timer3" Id=61 TIMED_WAITING on java.util.TaskQueue@29e495ff
	at java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@29e495ff
	at java.util.TimerThread.mainLoop(Timer.java:552)
	at java.util.TimerThread.run(Timer.java:505)


"s3-server-thread2" Id=60 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@5fd4f8f5
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@5fd4f8f5
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)
	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)
	at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	...


"s3-server-thread1" Id=59 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@5fd4f8f5
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@5fd4f8f5
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)
	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)
	at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	...


"timer2" Id=58 TIMED_WAITING on java.util.TaskQueue@41e1e210
	at java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@41e1e210
	at java.util.TimerThread.mainLoop(Timer.java:552)
	at java.util.TimerThread.run(Timer.java:505)


"grpc-default-executor-3" Id=57 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@be35cd9
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@be35cd9
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)
	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)
	at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	...


"timer1" Id=56 TIMED_WAITING on java.util.TaskQueue@4944252c
	at java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@4944252c
	at java.util.TimerThread.mainLoop(Timer.java:552)
	at java.util.TimerThread.run(Timer.java:505)


"s0@group-BBE07AC09D79->s3-GrpcLogAppender-LogAppenderDaemon" Id=55 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@44821a96
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@44821a96
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)
	at org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:65)
	at org.apache.ratis.grpc.server.GrpcLogAppender.mayWait(GrpcLogAppender.java:286)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:254)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at org.apache.ratis.server.leader.LogAppenderDaemon$$Lambda$645/1625404386.run(Unknown Source)
	...


"s0-server-thread1" Id=54 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@a3d8174
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@a3d8174
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)
	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)
	at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	...


"JvmPauseMonitor1" Id=48 TIMED_WAITING
	at java.lang.Thread.sleep(Native Method)
	at java.lang.Thread.sleep(Thread.java:342)
	at java.util.concurrent.TimeUnit.sleep(TimeUnit.java:386)
	at org.apache.ratis.util.TimeDuration.sleep(TimeDuration.java:353)
	at org.apache.ratis.util.TimeDuration.sleep(TimeDuration.java:338)
	at org.apache.ratis.util.JvmPauseMonitor.detectPause(JvmPauseMonitor.java:160)
	at org.apache.ratis.util.JvmPauseMonitor.run(JvmPauseMonitor.java:149)
	at org.apache.ratis.util.JvmPauseMonitor$$Lambda$333/1459715737.run(Unknown Source)
	...


"s3@group-BBE07AC09D79-StateMachineUpdater" Id=47 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1ba9117e
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@1ba9117e
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)
	at org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:65)
	at org.apache.ratis.server.impl.StateMachineUpdater.waitForCommit(StateMachineUpdater.java:211)
	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:180)
	at java.lang.Thread.run(Thread.java:750)


"s3@group-BBE07AC09D79-FollowerState" Id=46 TIMED_WAITING
	at java.lang.Thread.sleep(Native Method)
	at java.lang.Thread.sleep(Thread.java:342)
	at java.util.concurrent.TimeUnit.sleep(TimeUnit.java:386)
	at org.apache.ratis.util.TimeDuration.sleep(TimeDuration.java:353)
	at org.apache.ratis.util.TimeDuration.sleep(TimeDuration.java:338)
	at org.apache.ratis.server.impl.FollowerState.run(FollowerState.java:128)


"s3@group-BBE07AC09D79-SegmentedRaftLogWorker" Id=45 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@732c2a62
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@732c2a62
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)
	at org.apache.ratis.util.DataBlockingQueue.poll(DataBlockingQueue.java:148)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.run(SegmentedRaftLogWorker.java:299)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker$$Lambda$305/2112118643.run(Unknown Source)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@5a449ee1


"s3@group-BBE07AC09D79-cacheEviction-AwaitToRun" Id=44 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@272ed83b
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@272ed83b
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)
	at org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:48)
	at org.apache.ratis.util.AwaitToRun$RunnableImpl.run(AwaitToRun.java:47)
	at java.lang.Thread.run(Thread.java:750)


"s3-groupManagement" Id=39 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@41fecb8b
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@41fecb8b
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)
	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)


"grpc-default-worker-ELG-3-4" Id=34 RUNNABLE (in native)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait0(Native Method)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait(Native.java:182)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.epollWait(EpollEventLoop.java:312)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:376)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)


"grpc-default-worker-ELG-3-3" Id=32 RUNNABLE (in native)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait0(Native Method)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait(Native.java:182)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.epollWait(EpollEventLoop.java:312)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:376)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)


"grpc-default-executor-1" Id=31 BLOCKED on org.apache.log4j.spi.RootLogger@79da8dc5 owned by "s3-impl-thread2" Id=193
	at org.apache.log4j.Category.callAppenders(Category.java:204)
	-  blocked on org.apache.log4j.spi.RootLogger@79da8dc5
	at org.apache.log4j.Category.forcedLog(Category.java:384)
	at org.apache.log4j.Category.log(Category.java:810)
	at org.slf4j.reload4j.Reload4jLoggerAdapter.handleNormalizedLoggingCall(Reload4jLoggerAdapter.java:137)
	at org.slf4j.helpers.AbstractLogger.handle_0ArgsCall(AbstractLogger.java:382)
	at org.slf4j.helpers.AbstractLogger.warn(AbstractLogger.java:263)
	at org.apache.ratis.util.LogUtils.warn(LogUtils.java:121)
	at org.apache.ratis.grpc.GrpcUtil.warn(GrpcUtil.java:199)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@5b13b209


"grpc-default-worker-ELG-3-2" Id=30 RUNNABLE
	at java.lang.Thread.setPriority0(Native Method)
	at java.lang.Thread.setPriority(Thread.java:1100)
	at java.lang.Thread.init(Thread.java:419)
	at java.lang.Thread.init(Thread.java:351)
	at java.lang.Thread.<init>(Thread.java:680)
	at java.util.concurrent.Executors$DefaultThreadFactory.newThread(Executors.java:613)
	at org.apache.ratis.thirdparty.com.google.common.util.concurrent.ThreadFactoryBuilder$1.newThread(ThreadFactoryBuilder.java:173)
	at java.util.concurrent.ThreadPoolExecutor$Worker.<init>(ThreadPoolExecutor.java:619)
	...


"grpc-default-executor-0" Id=29 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@be35cd9
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@be35cd9
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)
	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)
	at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	...


"grpc-default-worker-ELG-3-1" Id=28 RUNNABLE (in native)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait0(Native Method)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait(Native.java:182)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.epollWait(EpollEventLoop.java:312)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:376)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)


"s0@group-BBE07AC09D79-LeaderStateImpl" Id=27 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@120f102b
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@120f102b
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventQueue.poll(LeaderStateImpl.java:165)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:769)


"JvmPauseMonitor0" Id=24 TIMED_WAITING
	at java.lang.Thread.sleep(Native Method)
	at java.lang.Thread.sleep(Thread.java:342)
	at java.util.concurrent.TimeUnit.sleep(TimeUnit.java:386)
	at org.apache.ratis.util.TimeDuration.sleep(TimeDuration.java:353)
	at org.apache.ratis.util.TimeDuration.sleep(TimeDuration.java:338)
	at org.apache.ratis.util.JvmPauseMonitor.detectPause(JvmPauseMonitor.java:160)
	at org.apache.ratis.util.JvmPauseMonitor.run(JvmPauseMonitor.java:149)
	at org.apache.ratis.util.JvmPauseMonitor$$Lambda$333/1459715737.run(Unknown Source)
	...


"grpc-default-boss-ELG-1-1" Id=23 RUNNABLE (in native)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait(Native Method)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait(Native.java:209)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait(Native.java:202)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.epollWaitNoTimerChange(EpollEventLoop.java:316)
	at org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:373)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	...


"s0@group-BBE07AC09D79-StateMachineUpdater" Id=22 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@625732
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@625732
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2163)
	at org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:65)
	at org.apache.ratis.server.impl.StateMachineUpdater.waitForCommit(StateMachineUpdater.java:211)
	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:180)
	at java.lang.Thread.run(Thread.java:750)


"s0@group-BBE07AC09D79-SegmentedRaftLogWorker" Id=20 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@51dcb805
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@51dcb805
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)
	at org.apache.ratis.util.DataBlockingQueue.poll(DataBlockingQueue.java:148)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.run(SegmentedRaftLogWorker.java:299)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker$$Lambda$305/2112118643.run(Unknown Source)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@7f48af49


"s0@group-BBE07AC09D79-cacheEviction-AwaitToRun" Id=19 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@66498326
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@66498326
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)
	at org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:48)
	at org.apache.ratis.util.AwaitToRun$RunnableImpl.run(AwaitToRun.java:47)
	at java.lang.Thread.run(Thread.java:750)


2024-01-22 22:33:33,621 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_42 at position 0
"s0-groupManagement" Id=17 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@cad498c
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@cad498c
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)
	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)


"Time-limited test" Id=14 RUNNABLE
	at java.lang.Thread.setPriority0(Native Method)
	at java.lang.Thread.setPriority(Thread.java:1100)
	at java.lang.Thread.init(Thread.java:419)
	at java.lang.Thread.init(Thread.java:351)
	at java.lang.Thread.<init>(Thread.java:501)
	at org.apache.ratis.util.Daemon.<init>(Daemon.java:29)
	at org.apache.ratis.util.Daemon$Builder.build(Daemon.java:60)
	at org.apache.ratis.server.impl.MiniRaftCluster.lambda$shutdown$23(MiniRaftCluster.java:843)
	...


"surefire-forkedjvm-command-thread" Id=12 RUNNABLE (in native)
	at java.io.FileInputStream.readBytes(Native Method)
	at java.io.FileInputStream.read(FileInputStream.java:255)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:284)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:345)
	-  locked java.io.BufferedInputStream@1e6454ec
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:286)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:345)
	-  locked java.io.BufferedInputStream@2accdbb5
	at org.apache.maven.surefire.api.util.internal.Channels$3.readImpl(Channels.java:169)
	...


"surefire-forkedjvm-stream-flusher" Id=10 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@b62d79
	at sun.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@b62d79
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	...


"Signal Dispatcher" Id=4 RUNNABLE


"Finalizer" Id=3 WAITING on java.lang.ref.ReferenceQueue$Lock@6631f5ca
	at java.lang.Object.wait(Native Method)
	-  waiting on java.lang.ref.ReferenceQueue$Lock@6631f5ca
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:165)
	at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:188)


"Reference Handler" Id=2 WAITING on java.lang.ref.Reference$Lock@5ace1ed4
	at java.lang.Object.wait(Native Method)
	-  waiting on java.lang.ref.Reference$Lock@5ace1ed4
	at java.lang.Object.wait(Object.java:502)
	at java.lang.ref.Reference.tryHandlePending(Reference.java:191)
	at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:153)


"main" Id=1 RUNNABLE
	at sun.management.ThreadImpl.dumpThreads0(Native Method)
	at sun.management.ThreadImpl.dumpAllThreads(ThreadImpl.java:496)
	at sun.management.ThreadImpl.dumpAllThreads(ThreadImpl.java:484)
	at org.apache.ratis.util.JavaUtils.dumpAllThreads(JavaUtils.java:275)
	at org.apache.ratis.JUnitRunListener.testFailure(JUnitRunListener.java:65)
	at org.junit.runner.notification.SynchronizedRunListener.testFailure(SynchronizedRunListener.java:94)
	-  locked org.apache.maven.surefire.common.junit4.Notifier@1613674b
	at org.junit.runner.notification.RunNotifier$6.notifyListener(RunNotifier.java:177)
	at org.junit.runner.notification.RunNotifier$SafeNotifier.run(RunNotifier.java:72)
	...


2024-01-22 22:33:33,619 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(856)) - MiniRaftClusterWithGrpc shutdown completed
2024-01-22 22:33:33,619 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(533)) - s0@group-BBE07AC09D79->s3-GrpcLogAppender is already stopped
2024-01-22 22:33:33,619 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2024-01-22 22:33:33,623 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s3: shutdown server GrpcServerProtocolService successfully
2024-01-22 22:33:33,627 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2024-01-22 22:33:33,622 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2024-01-22 22:33:33,622 [grpc-default-executor-4] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(121)) - s3: APPEND_ENTRIES onError, lastRequest: null: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2024-01-22 22:33:33,622 [s0@group-BBE07AC09D79->s3-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-BBE07AC09D79->s3-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:33,627 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2024-01-22 22:33:33,628 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.RaftServer$Division log level to DEBUG
2024-01-22 22:33:33,629 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.raftlog.RaftLog log level to DEBUG
2024-01-22 22:33:33,629 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.client.RaftClient log level to DEBUG
2024-01-22 22:33:33,629 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_42 at position 0
2024-01-22 22:33:33,627 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server GrpcServerProtocolService now
2024-01-22 22:33:33,628 [s0-impl-thread2] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-BBE07AC09D79-StateMachineUpdater: set stopIndex = 42
2024-01-22 22:33:33,635 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(305)) - new MiniRaftClusterWithGrpc with group-02B20A285EBD:[s0|localhost:15012]
2024-01-22 22:33:33,635 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(338)) - .............................................................. 
2024-01-22 22:33:33,635 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - ... 
2024-01-22 22:33:33,635 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ...     Starting MiniRaftClusterWithGrpc
2024-01-22 22:33:33,635 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ... 
2024-01-22 22:33:33,635 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - .............................................................. 
2024-01-22 22:33:33,635 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(317)) - servers = {}
2024-01-22 22:33:33,635 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(381)) - newRaftServer: s0, group-02B20A285EBD:[s0|localhost:15012], format? true
2024-01-22 22:33:33,635 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0
2024-01-22 22:33:33,635 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0 does not exist.
2024-01-22 22:33:33,635 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(386)) - Formatted directory target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0
2024-01-22 22:33:33,636 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2024-01-22 22:33:33,636 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:33,636 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:33,637 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 15013 (custom)
2024-01-22 22:33:33,637 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:33,637 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_42 with options [READ]: sun.nio.ch.FileChannelImpl@59462201
2024-01-22 22:33:33,638 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_42.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@5e3d702f
2024-01-22 22:33:33,638 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server GrpcServerProtocolService successfully
2024-01-22 22:33:33,638 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2024-01-22 22:33:33,638 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 15014 (custom)
2024-01-22 22:33:33,638 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2024-01-22 22:33:33,638 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 15012 (custom)
2024-01-22 22:33:33,639 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2024-01-22 22:33:33,639 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:33,639 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2024-01-22 22:33:33,639 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:33,639 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:33,639 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2024-01-22 22:33:33,639 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2024-01-22 22:33:33,643 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2024-01-22 22:33:33,644 [s3@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_42.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s3/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_42.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:33,644 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s3@group-BBE07AC09D79-StateMachineUpdater: Took a snapshot at index 42
2024-01-22 22:33:33,644 [s3@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-BBE07AC09D79-StateMachineUpdater: snapshotIndex: updateIncreasingly 39 -> 42
2024-01-22 22:33:33,644 [s3-impl-thread2] INFO  server.RaftServer$Division (ServerState.java:close(427)) - s3@group-BBE07AC09D79: applyIndex: 42
2024-01-22 22:33:33,645 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_42 with options [READ]: sun.nio.ch.FileChannelImpl@76f5e283
2024-01-22 22:33:33,645 [s3@group-BBE07AC09D79-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s3@group-BBE07AC09D79-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2024-01-22 22:33:33,645 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_42.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@59d80ddb
2024-01-22 22:33:33,646 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2024-01-22 22:33:33,646 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:33,646 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2024-01-22 22:33:33,646 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:33,646 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0] (custom)
2024-01-22 22:33:33,646 [s0@group-BBE07AC09D79-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_42.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc9f500f42/s0/b314e33f-42d9-4c35-9448-bbe07ac09d79/sm/snapshot.1_42.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:33,646 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2024-01-22 22:33:33,646 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-BBE07AC09D79-StateMachineUpdater: Took a snapshot at index 42
2024-01-22 22:33:33,646 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2024-01-22 22:33:33,647 [s0@group-BBE07AC09D79-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-BBE07AC09D79-StateMachineUpdater: snapshotIndex: updateIncreasingly 39 -> 42
2024-01-22 22:33:33,647 [s0-impl-thread2] INFO  server.RaftServer$Division (ServerState.java:close(427)) - s0@group-BBE07AC09D79: applyIndex: 42
2024-01-22 22:33:33,647 [s0@group-BBE07AC09D79-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-BBE07AC09D79-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2024-01-22 22:33:33,647 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(101)) - s0: addNew group-02B20A285EBD:[s0|localhost:15012] returns group-02B20A285EBD:java.util.concurrent.CompletableFuture@519d2388[Not completed]
2024-01-22 22:33:33,647 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:33,647 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:33,647 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(211)) - s0: new RaftServerImpl for group-02B20A285EBD:[s0|localhost:15012] with SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.member.majority-add = false (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-02B20A285EBD: ConfigurationManager, init=-1: peers:[s0|localhost:15012]|listeners:[], old=null, confs=<EMPTY_MAP>
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2024-01-22 22:33:33,648 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2024-01-22 22:33:33,649 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2024-01-22 22:33:33,649 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2024-01-22 22:33:33,650 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:33,650 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:33,650 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2024-01-22 22:33:33,650 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2024-01-22 22:33:33,650 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2024-01-22 22:33:33,650 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2024-01-22 22:33:33,650 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2024-01-22 22:33:33,650 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2024-01-22 22:33:33,650 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0] (custom)
2024-01-22 22:33:33,651 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd does not exist. Creating ...
2024-01-22 22:33:33,651 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd
2024-01-22 22:33:33,652 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(228)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/in_use.lock acquired by nodename 3663@fv-az531-398
2024-01-22 22:33:33,652 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current
2024-01-22 22:33:33,652 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm
2024-01-22 22:33:33,652 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@7d6896
2024-01-22 22:33:33,653 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:33,653 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(99)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd has been successfully formatted.
2024-01-22 22:33:33,653 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(61)) - Failed to Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.conf with options []
java.nio.file.NoSuchFileException: /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.conf
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.newByteChannel(Files.java:407)
	at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)
	at java.nio.file.Files.newInputStream(Files.java:152)
	at org.apache.ratis.util.FileUtils.lambda$newInputStream$2(FileUtils.java:73)
	at org.apache.ratis.util.LogUtils.supplyAndLog(LogUtils.java:58)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:72)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:68)
	at org.apache.ratis.server.storage.RaftStorageImpl.readRaftConfiguration(RaftStorageImpl.java:156)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:141)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:342)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:203)
	at org.apache.ratis.util.ConcurrentUtils.lambda$null$4(ConcurrentUtils.java:182)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:33,653 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:33,653 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2024-01-22 22:33:33,653 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2024-01-22 22:33:33,653 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2024-01-22 22:33:33,653 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:33,653 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2024-01-22 22:33:33,653 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-02B20A285EBD-cacheEviction-AwaitToRun,5,main] started
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(182)) - new s0@group-02B20A285EBD-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2024-01-22 22:33:33,654 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:33,656 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:33,656 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2024-01-22 22:33:33,656 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2024-01-22 22:33:33,656 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2024-01-22 22:33:33,656 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:33,656 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:33,656 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(346)) - s0@group-02B20A285EBD: start as a follower, conf=-1: peers:[s0|localhost:15012]|listeners:[], old=null
2024-01-22 22:33:33,656 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-02B20A285EBD: changes role from      null to FOLLOWER at term 0 for startAsFollower
2024-01-22 22:33:33,656 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-02B20A285EBD-FollowerState
2024-01-22 22:33:33,656 [s0@group-02B20A285EBD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:33:33,656 [s0@group-02B20A285EBD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:33:33,657 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-02B20A285EBD,id=s0
2024-01-22 22:33:33,657 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:register(58)) - register mxBean class org.apache.ratis.server.impl.RaftServerJmxAdapter as Ratis:service=RaftServer,group=group-02B20A285EBD,id=s0
2024-01-22 22:33:33,657 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2024-01-22 22:33:33,657 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2024-01-22 22:33:33,657 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2024-01-22 22:33:33,657 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2024-01-22 22:33:33,657 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2024-01-22 22:33:33,657 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(407)) - s0: start RPC server
2024-01-22 22:33:33,658 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15014
2024-01-22 22:33:33,658 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15012
2024-01-22 22:33:33,659 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15013
2024-01-22 22:33:33,659 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2024-01-22 22:33:33,659 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:33,659 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-02B20A285EBD:t0, leader=null, voted=, raftlog=Memoized:s0@group-02B20A285EBD-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:15012]|listeners:[], old=null RUNNING
2024-01-22 22:33:33,659 [Time-limited test] WARN  ratis.RaftTestUtil (RaftTestUtil.java:lambda$waitForLeader$3(120)) - Attempt #1 failed: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-02B20A285EBD:t0, leader=null, voted=, raftlog=Memoized:s0@group-02B20A285EBD-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:15012]|listeners:[], old=null RUNNING
2024-01-22 22:33:33,852 [s0@group-02B20A285EBD-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-02B20A285EBD-FollowerState: change to CANDIDATE, lastRpcElapsedTime:195438350ns, electionTimeout:195ms
2024-01-22 22:33:33,852 [s0@group-02B20A285EBD-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s0: shutdown s0@group-02B20A285EBD-FollowerState
2024-01-22 22:33:33,852 [s0@group-02B20A285EBD-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-02B20A285EBD: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2024-01-22 22:33:33,852 [s0@group-02B20A285EBD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2024-01-22 22:33:33,852 [s0@group-02B20A285EBD-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-02B20A285EBD-LeaderElection3
2024-01-22 22:33:33,853 [s0@group-02B20A285EBD-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s0@group-02B20A285EBD-LeaderElection3 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|localhost:15012]|listeners:[], old=null
2024-01-22 22:33:33,853 [s0@group-02B20A285EBD-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-02B20A285EBD-LeaderElection3 PRE_VOTE round 0: result PASSED (term=0)
2024-01-22 22:33:33,853 [s0@group-02B20A285EBD-LeaderElection3] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@17c1f269
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s0@group-02B20A285EBD-LeaderElection3 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|localhost:15012]|listeners:[], old=null
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-02B20A285EBD-LeaderElection3 ELECTION round 0: result PASSED (term=1)
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(131)) - s0: shutdown s0@group-02B20A285EBD-LeaderElection3
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-02B20A285EBD: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2024-01-22 22:33:33,854 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2024-01-22 22:33:33,855 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2024-01-22 22:33:33,855 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2024-01-22 22:33:33,855 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:33,855 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:33:33,855 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2024-01-22 22:33:33,855 [s0@group-02B20A285EBD-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-02B20A285EBD-LeaderStateImpl
2024-01-22 22:33:33,855 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(505)) - s0@group-02B20A285EBD: set firstElectionSinceStartup to false for becomeLeader
2024-01-22 22:33:33,855 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s0@group-02B20A285EBD: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 206ms
2024-01-22 22:33:33,855 [s0@group-02B20A285EBD-LeaderElection3] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(430)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker: Starting segment from index:0
2024-01-22 22:33:33,856 [s0@group-02B20A285EBD-LeaderElection3] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-02B20A285EBD: set configuration 0: peers:[s0|localhost:15012]|listeners:[], old=null
2024-01-22 22:33:33,856 [s0@group-02B20A285EBD-SegmentedRaftLogWorker] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_0 at position 0
2024-01-22 22:33:33,862 [s0@group-02B20A285EBD-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(634)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/log_inprogress_0
2024-01-22 22:33:33,863 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@4a1d1946
2024-01-22 22:33:33,864 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:33,864 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(321)) - leader is ready since appliedIndex == 0 >= startIndex == 0
2024-01-22 22:33:34,110 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(125)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-02B20A285EBD:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-02B20A285EBD-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|localhost:15012]|listeners:[], old=null RUNNING
2024-01-22 22:33:34,110 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:34,111 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 22 returns []
2024-01-22 22:33:34,111 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=22, seq=null, RW, m0
2024-01-22 22:33:34,115 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=22, seq=null, RW, Message:6d30)
2024-01-22 22:33:34,116 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=22, seq=null, RW, Message:6d30, entry=(t:1, i:1), STATEMACHINELOGENTRY, 22@client-7D568AC96F6A
2024-01-22 22:33:34,117 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 1
2024-01-22 22:33:34,117 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 22@client-7D568AC96F6A
2024-01-22 22:33:34,119 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 22
2024-01-22 22:33:34,119 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 23 returns [22]
2024-01-22 22:33:34,119 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=23, seq=null, RW, m1
2024-01-22 22:33:34,121 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=23, seq=null, RW, Message:6d31)
2024-01-22 22:33:34,121 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=23, seq=null, RW, Message:6d31, entry=(t:1, i:3), STATEMACHINELOGENTRY, 23@client-7D568AC96F6A
2024-01-22 22:33:34,121 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 3
2024-01-22 22:33:34,122 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 23@client-7D568AC96F6A
2024-01-22 22:33:34,122 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 23
2024-01-22 22:33:34,123 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 24 returns [23]
2024-01-22 22:33:34,123 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=24, seq=null, RW, m2
2024-01-22 22:33:34,124 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=24, seq=null, RW, Message:6d32)
2024-01-22 22:33:34,124 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=24, seq=null, RW, Message:6d32, entry=(t:1, i:5), STATEMACHINELOGENTRY, 24@client-7D568AC96F6A
2024-01-22 22:33:34,125 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 5
2024-01-22 22:33:34,125 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 24@client-7D568AC96F6A
2024-01-22 22:33:34,126 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 24
2024-01-22 22:33:34,126 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 25 returns [24]
2024-01-22 22:33:34,126 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=25, seq=null, RW, m3
2024-01-22 22:33:34,127 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=25, seq=null, RW, Message:6d33)
2024-01-22 22:33:34,127 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=25, seq=null, RW, Message:6d33, entry=(t:1, i:7), STATEMACHINELOGENTRY, 25@client-7D568AC96F6A
2024-01-22 22:33:34,128 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 7
2024-01-22 22:33:34,128 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 25@client-7D568AC96F6A
2024-01-22 22:33:34,129 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 25
2024-01-22 22:33:34,129 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 26 returns [25]
2024-01-22 22:33:34,129 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=26, seq=null, RW, m4
2024-01-22 22:33:34,129 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=26, seq=null, RW, Message:6d34)
2024-01-22 22:33:34,130 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=26, seq=null, RW, Message:6d34, entry=(t:1, i:9), STATEMACHINELOGENTRY, 26@client-7D568AC96F6A
2024-01-22 22:33:34,130 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 9
2024-01-22 22:33:34,130 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 26@client-7D568AC96F6A
2024-01-22 22:33:34,132 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_9 at position 0
2024-01-22 22:33:34,136 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 26
2024-01-22 22:33:34,136 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 27 returns [26]
2024-01-22 22:33:34,136 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=27, seq=null, RW, m5
2024-01-22 22:33:34,137 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=27, seq=null, RW, Message:6d35)
2024-01-22 22:33:34,138 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=27, seq=null, RW, Message:6d35, entry=(t:1, i:11), STATEMACHINELOGENTRY, 27@client-7D568AC96F6A
2024-01-22 22:33:34,141 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_9 with options [READ]: sun.nio.ch.FileChannelImpl@40e57236
2024-01-22 22:33:34,142 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_9.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@5e7f44e
2024-01-22 22:33:34,142 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_9.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_9.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:34,143 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-02B20A285EBD-StateMachineUpdater: Took a snapshot at index 9
2024-01-22 22:33:34,143 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-02B20A285EBD-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 9
2024-01-22 22:33:34,143 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 11
2024-01-22 22:33:34,143 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 27@client-7D568AC96F6A
2024-01-22 22:33:34,144 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 27
2024-01-22 22:33:34,144 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 28 returns [27]
2024-01-22 22:33:34,144 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=28, seq=null, RW, m6
2024-01-22 22:33:34,145 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=28, seq=null, RW, Message:6d36)
2024-01-22 22:33:34,145 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=28, seq=null, RW, Message:6d36, entry=(t:1, i:13), STATEMACHINELOGENTRY, 28@client-7D568AC96F6A
2024-01-22 22:33:34,146 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 13
2024-01-22 22:33:34,146 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 28@client-7D568AC96F6A
2024-01-22 22:33:34,147 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 28
2024-01-22 22:33:34,147 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 29 returns [28]
2024-01-22 22:33:34,147 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=29, seq=null, RW, m7
2024-01-22 22:33:34,148 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=29, seq=null, RW, Message:6d37)
2024-01-22 22:33:34,149 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=29, seq=null, RW, Message:6d37, entry=(t:1, i:15), STATEMACHINELOGENTRY, 29@client-7D568AC96F6A
2024-01-22 22:33:34,149 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 15
2024-01-22 22:33:34,149 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 29@client-7D568AC96F6A
2024-01-22 22:33:34,150 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 29
2024-01-22 22:33:34,150 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 30 returns [29]
2024-01-22 22:33:34,150 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=30, seq=null, RW, m8
2024-01-22 22:33:34,151 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=30, seq=null, RW, Message:6d38)
2024-01-22 22:33:34,151 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=30, seq=null, RW, Message:6d38, entry=(t:1, i:17), STATEMACHINELOGENTRY, 30@client-7D568AC96F6A
2024-01-22 22:33:34,155 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 17
2024-01-22 22:33:34,155 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 30@client-7D568AC96F6A
2024-01-22 22:33:34,156 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 30
2024-01-22 22:33:34,156 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 31 returns [30]
2024-01-22 22:33:34,156 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=31, seq=null, RW, m9
2024-01-22 22:33:34,157 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=31, seq=null, RW, Message:6d39)
2024-01-22 22:33:34,158 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=31, seq=null, RW, Message:6d39, entry=(t:1, i:19), STATEMACHINELOGENTRY, 31@client-7D568AC96F6A
2024-01-22 22:33:34,158 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 19
2024-01-22 22:33:34,158 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 31@client-7D568AC96F6A
2024-01-22 22:33:34,161 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 31
2024-01-22 22:33:34,161 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 32 returns [31]
2024-01-22 22:33:34,161 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=32, seq=null, RW, m10
2024-01-22 22:33:34,162 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=32, seq=null, RW, Message:6d3130)
2024-01-22 22:33:34,163 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_19 at position 0
2024-01-22 22:33:34,163 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=32, seq=null, RW, Message:6d3130, entry=(t:1, i:21), STATEMACHINELOGENTRY, 32@client-7D568AC96F6A
2024-01-22 22:33:34,171 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_19 with options [READ]: sun.nio.ch.FileChannelImpl@27120a9d
2024-01-22 22:33:34,171 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_19.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@34a8715c
2024-01-22 22:33:34,172 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_19.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_19.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:34,172 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-02B20A285EBD-StateMachineUpdater: Took a snapshot at index 19
2024-01-22 22:33:34,172 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-02B20A285EBD-StateMachineUpdater: snapshotIndex: updateIncreasingly 9 -> 19
2024-01-22 22:33:34,172 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 21
2024-01-22 22:33:34,172 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 32@client-7D568AC96F6A
2024-01-22 22:33:34,174 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 32
2024-01-22 22:33:34,174 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 33 returns [32]
2024-01-22 22:33:34,174 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=33, seq=null, RW, m11
2024-01-22 22:33:34,175 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=33, seq=null, RW, Message:6d3131)
2024-01-22 22:33:34,175 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=33, seq=null, RW, Message:6d3131, entry=(t:1, i:23), STATEMACHINELOGENTRY, 33@client-7D568AC96F6A
2024-01-22 22:33:34,176 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 23
2024-01-22 22:33:34,176 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 33@client-7D568AC96F6A
2024-01-22 22:33:34,177 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 33
2024-01-22 22:33:34,177 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 34 returns [33]
2024-01-22 22:33:34,177 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=34, seq=null, RW, m12
2024-01-22 22:33:34,178 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=34, seq=null, RW, Message:6d3132)
2024-01-22 22:33:34,178 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=34, seq=null, RW, Message:6d3132, entry=(t:1, i:25), STATEMACHINELOGENTRY, 34@client-7D568AC96F6A
2024-01-22 22:33:34,179 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 25
2024-01-22 22:33:34,179 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 34@client-7D568AC96F6A
2024-01-22 22:33:34,180 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 34
2024-01-22 22:33:34,180 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 35 returns [34]
2024-01-22 22:33:34,180 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=35, seq=null, RW, m13
2024-01-22 22:33:34,181 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=35, seq=null, RW, Message:6d3133)
2024-01-22 22:33:34,181 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=35, seq=null, RW, Message:6d3133, entry=(t:1, i:27), STATEMACHINELOGENTRY, 35@client-7D568AC96F6A
2024-01-22 22:33:34,182 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 27
2024-01-22 22:33:34,182 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 35@client-7D568AC96F6A
2024-01-22 22:33:34,183 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 35
2024-01-22 22:33:34,183 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 36 returns [35]
2024-01-22 22:33:34,183 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=36, seq=null, RW, m14
2024-01-22 22:33:34,184 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=36, seq=null, RW, Message:6d3134)
2024-01-22 22:33:34,184 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=36, seq=null, RW, Message:6d3134, entry=(t:1, i:29), STATEMACHINELOGENTRY, 36@client-7D568AC96F6A
2024-01-22 22:33:34,184 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 29
2024-01-22 22:33:34,184 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 36@client-7D568AC96F6A
2024-01-22 22:33:34,185 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 36
2024-01-22 22:33:34,185 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 37 returns [36]
2024-01-22 22:33:34,185 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=37, seq=null, RW, m15
2024-01-22 22:33:34,186 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=37, seq=null, RW, Message:6d3135)
2024-01-22 22:33:34,187 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=37, seq=null, RW, Message:6d3135, entry=(t:1, i:31), STATEMACHINELOGENTRY, 37@client-7D568AC96F6A
2024-01-22 22:33:34,187 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_29 at position 0
2024-01-22 22:33:34,194 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_29 with options [READ]: sun.nio.ch.FileChannelImpl@5fb7d13d
2024-01-22 22:33:34,195 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_29.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@65c80b01
2024-01-22 22:33:34,195 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_29.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_29.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:34,195 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-02B20A285EBD-StateMachineUpdater: Took a snapshot at index 29
2024-01-22 22:33:34,195 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-02B20A285EBD-StateMachineUpdater: snapshotIndex: updateIncreasingly 19 -> 29
2024-01-22 22:33:34,196 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 31
2024-01-22 22:33:34,196 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 37@client-7D568AC96F6A
2024-01-22 22:33:34,197 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 37
2024-01-22 22:33:34,197 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 38 returns [37]
2024-01-22 22:33:34,197 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=38, seq=null, RW, m16
2024-01-22 22:33:34,198 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=38, seq=null, RW, Message:6d3136)
2024-01-22 22:33:34,199 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=38, seq=null, RW, Message:6d3136, entry=(t:1, i:33), STATEMACHINELOGENTRY, 38@client-7D568AC96F6A
2024-01-22 22:33:34,199 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 33
2024-01-22 22:33:34,199 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 38@client-7D568AC96F6A
2024-01-22 22:33:34,200 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 38
2024-01-22 22:33:34,200 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 39 returns [38]
2024-01-22 22:33:34,201 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=39, seq=null, RW, m17
2024-01-22 22:33:34,201 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=39, seq=null, RW, Message:6d3137)
2024-01-22 22:33:34,202 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=39, seq=null, RW, Message:6d3137, entry=(t:1, i:35), STATEMACHINELOGENTRY, 39@client-7D568AC96F6A
2024-01-22 22:33:34,202 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 35
2024-01-22 22:33:34,202 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 39@client-7D568AC96F6A
2024-01-22 22:33:34,203 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 39
2024-01-22 22:33:34,203 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-7D568AC96F6A: get 40 returns [39]
2024-01-22 22:33:34,203 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=40, seq=null, RW, m18
2024-01-22 22:33:34,204 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-02B20A285EBD: receive client request(RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=40, seq=null, RW, Message:6d3138)
2024-01-22 22:33:34,205 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-02B20A285EBD-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-7D568AC96F6A->s0@group-02B20A285EBD, cid=40, seq=null, RW, Message:6d3138, entry=(t:1, i:37), STATEMACHINELOGENTRY, 40@client-7D568AC96F6A
2024-01-22 22:33:34,205 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 37
2024-01-22 22:33:34,205 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 40@client-7D568AC96F6A
2024-01-22 22:33:34,206 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-7D568AC96F6A: add replied callId 40
2024-01-22 22:33:34,207 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:testRestartPeer(163)) - nextIndex = 39
2024-01-22 22:33:34,208 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:exists(183)) - File exists: /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_29
2024-01-22 22:33:34,208 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - ************************************************************** 
2024-01-22 22:33:34,208 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - *** 
2024-01-22 22:33:34,208 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - ***     Stopping MiniRaftClusterWithGrpc
2024-01-22 22:33:34,208 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - *** 
2024-01-22 22:33:34,208 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - ************************************************************** 
2024-01-22 22:33:34,208 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(837)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-02B20A285EBD:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-02B20A285EBD-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:15012]|listeners:[], old=null RUNNING
2024-01-22 22:33:34,211 [MiniRaftCluster-7] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(417)) - s0: close
2024-01-22 22:33:34,211 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2024-01-22 22:33:34,211 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$1(457)) - s0@group-02B20A285EBD: shutdown
2024-01-22 22:33:34,211 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(74)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-02B20A285EBD,id=s0
2024-01-22 22:33:34,211 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(95)) - s0: shutdown s0@group-02B20A285EBD-LeaderStateImpl
2024-01-22 22:33:34,211 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(287)) - s0@group-02B20A285EBD-PendingRequests: sendNotLeaderResponses
2024-01-22 22:33:34,213 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2024-01-22 22:33:34,213 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server GrpcServerProtocolService now
2024-01-22 22:33:34,214 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server GrpcServerProtocolService successfully
2024-01-22 22:33:34,214 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2024-01-22 22:33:34,214 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-02B20A285EBD-StateMachineUpdater: set stopIndex = 38
2024-01-22 22:33:34,216 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2024-01-22 22:33:34,216 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_38 at position 0
2024-01-22 22:33:34,223 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_38 with options [READ]: sun.nio.ch.FileChannelImpl@5239b3c7
2024-01-22 22:33:34,224 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_38.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@25ec0a4d
2024-01-22 22:33:34,225 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_38.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_38.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:34,225 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-02B20A285EBD-StateMachineUpdater: Took a snapshot at index 38
2024-01-22 22:33:34,225 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-02B20A285EBD-StateMachineUpdater: snapshotIndex: updateIncreasingly 29 -> 38
2024-01-22 22:33:34,225 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(427)) - s0@group-02B20A285EBD: applyIndex: 38
2024-01-22 22:33:34,225 [s0@group-02B20A285EBD-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-02B20A285EBD-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2024-01-22 22:33:34,340 [s0-impl-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(245)) - s0@group-BBE07AC09D79-SegmentedRaftLogWorker close()
2024-01-22 22:33:34,348 [s3-impl-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(245)) - s3@group-BBE07AC09D79-SegmentedRaftLogWorker close()
2024-01-22 22:33:35,206 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(245)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker close()
2024-01-22 22:33:35,207 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2024-01-22 22:33:35,207 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(856)) - MiniRaftClusterWithGrpc shutdown completed
2024-01-22 22:33:35,207 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(381)) - newRaftServer: s0, group-02B20A285EBD:[s0|localhost:15012], format? false
2024-01-22 22:33:35,208 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:35,208 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:35,208 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 15013 (custom)
2024-01-22 22:33:35,208 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:35,208 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 15014 (custom)
2024-01-22 22:33:35,208 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2024-01-22 22:33:35,208 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 15012 (custom)
2024-01-22 22:33:35,208 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2024-01-22 22:33:35,208 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:35,208 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2024-01-22 22:33:35,208 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:35,208 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:35,208 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2024-01-22 22:33:35,208 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2024-01-22 22:33:35,209 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2024-01-22 22:33:35,209 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:35,209 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2024-01-22 22:33:35,209 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:35,210 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0] (custom)
2024-01-22 22:33:35,210 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2024-01-22 22:33:35,210 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2024-01-22 22:33:35,210 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(265)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd
2024-01-22 22:33:35,210 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(101)) - s0: addNew group-02B20A285EBD:[s0|localhost:15012] returns group-02B20A285EBD:java.util.concurrent.CompletableFuture@a06bd28[Not completed]
2024-01-22 22:33:35,210 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(338)) - .............................................................. 
2024-01-22 22:33:35,211 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - ... 
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:35,211 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ...     Starting MiniRaftClusterWithGrpc
2024-01-22 22:33:35,211 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ... 
2024-01-22 22:33:35,211 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - .............................................................. 
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:35,211 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(317)) - servers = {s0=s0:      NEW group-02B20A285EBD:java.util.concurrent.CompletableFuture@a06bd28[Not completed]}
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(211)) - s0: new RaftServerImpl for group-02B20A285EBD:[s0|localhost:15012] with SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.member.majority-add = false (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-02B20A285EBD: ConfigurationManager, init=-1: peers:[s0|localhost:15012]|listeners:[], old=null, confs=<EMPTY_MAP>
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2024-01-22 22:33:35,211 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2024-01-22 22:33:35,212 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2024-01-22 22:33:35,212 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:35,212 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:35,212 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2024-01-22 22:33:35,212 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2024-01-22 22:33:35,212 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2024-01-22 22:33:35,212 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2024-01-22 22:33:35,213 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2024-01-22 22:33:35,213 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2024-01-22 22:33:35,213 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0] (custom)
2024-01-22 22:33:35,214 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(228)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/in_use.lock acquired by nodename 3663@fv-az531-398
2024-01-22 22:33:35,214 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.deleteIfExists /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.tmp
2024-01-22 22:33:35,215 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta with options []: sun.nio.ch.ChannelInputStream@7f2a51a5
2024-01-22 22:33:35,215 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:analyzeAndRecoverStorage(119)) - Read RaftStorageMetadata{term=1, votedFor=s0} from /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta
2024-01-22 22:33:35,215 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.conf with options []: sun.nio.ch.ChannelInputStream@b58add2
2024-01-22 22:33:35,216 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-02B20A285EBD: set configuration 0: peers:[s0|localhost:15012]|listeners:[], old=null
2024-01-22 22:33:35,216 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:35,216 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@26d26265
2024-01-22 22:33:35,216 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_38]
2024-01-22 22:33:35,217 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.1_38 with options []: sun.nio.ch.ChannelInputStream@5a072f6b
2024-01-22 22:33:35,217 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 22@client-7D568AC96F6A
2024-01-22 22:33:35,217 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 23@client-7D568AC96F6A
2024-01-22 22:33:35,217 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 24@client-7D568AC96F6A
2024-01-22 22:33:35,217 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 25@client-7D568AC96F6A
2024-01-22 22:33:35,217 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 26@client-7D568AC96F6A
2024-01-22 22:33:35,217 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 27@client-7D568AC96F6A
2024-01-22 22:33:35,217 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 28@client-7D568AC96F6A
2024-01-22 22:33:35,218 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 29@client-7D568AC96F6A
2024-01-22 22:33:35,218 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 30@client-7D568AC96F6A
2024-01-22 22:33:35,218 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 31@client-7D568AC96F6A
2024-01-22 22:33:35,218 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 32@client-7D568AC96F6A
2024-01-22 22:33:35,218 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 33@client-7D568AC96F6A
2024-01-22 22:33:35,218 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 34@client-7D568AC96F6A
2024-01-22 22:33:35,218 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 35@client-7D568AC96F6A
2024-01-22 22:33:35,218 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 36@client-7D568AC96F6A
2024-01-22 22:33:35,218 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 37@client-7D568AC96F6A
2024-01-22 22:33:35,219 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 38@client-7D568AC96F6A
2024-01-22 22:33:35,219 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 39@client-7D568AC96F6A
2024-01-22 22:33:35,219 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 40@client-7D568AC96F6A
2024-01-22 22:33:35,219 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2024-01-22 22:33:35,219 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2024-01-22 22:33:35,219 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:35,219 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2024-01-22 22:33:35,219 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-02B20A285EBD-cacheEviction-AwaitToRun,5,main] started
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(182)) - new s0@group-02B20A285EBD-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2024-01-22 22:33:35,220 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2024-01-22 22:33:35,221 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:35,222 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:35,222 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2024-01-22 22:33:35,222 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2024-01-22 22:33:35,222 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2024-01-22 22:33:35,224 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/log_inprogress_0 with options []: sun.nio.ch.ChannelInputStream@4b4716b3
2024-01-22 22:33:35,224 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-02B20A285EBD: set configuration 0: peers:[s0|localhost:15012]|listeners:[], old=null
2024-01-22 22:33:35,227 [s0-impl-thread1] INFO  segmented.LogSegment (LogSegment.java:loadSegment(175)) - Successfully read 39 entries from segment file /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/log_inprogress_0
2024-01-22 22:33:35,227 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> 38
2024-01-22 22:33:35,227 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:35,227 [s0-impl-thread1] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_0 (append) at position 1090
2024-01-22 22:33:35,227 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(346)) - s0@group-02B20A285EBD: start as a follower, conf=0: peers:[s0|localhost:15012]|listeners:[], old=null
2024-01-22 22:33:35,227 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-02B20A285EBD: changes role from      null to FOLLOWER at term 1 for startAsFollower
2024-01-22 22:33:35,227 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-02B20A285EBD-FollowerState
2024-01-22 22:33:35,228 [s0@group-02B20A285EBD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:33:35,228 [s0@group-02B20A285EBD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:33:35,228 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-02B20A285EBD,id=s0
2024-01-22 22:33:35,228 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:register(58)) - register mxBean class org.apache.ratis.server.impl.RaftServerJmxAdapter as Ratis:service=RaftServer,group=group-02B20A285EBD,id=s0
2024-01-22 22:33:35,228 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2024-01-22 22:33:35,228 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2024-01-22 22:33:35,228 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2024-01-22 22:33:35,228 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2024-01-22 22:33:35,228 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2024-01-22 22:33:35,228 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(407)) - s0: start RPC server
2024-01-22 22:33:35,229 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15014
2024-01-22 22:33:35,230 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15012
2024-01-22 22:33:35,230 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15013
2024-01-22 22:33:35,230 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:35,230 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2024-01-22 22:33:35,230 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-02B20A285EBD:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-02B20A285EBD-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:15012]|listeners:[], old=null RUNNING
2024-01-22 22:33:35,230 [Time-limited test] WARN  ratis.RaftTestUtil (RaftTestUtil.java:lambda$waitForLeader$3(120)) - Attempt #1 failed: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-02B20A285EBD:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-02B20A285EBD-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:15012]|listeners:[], old=null RUNNING
2024-01-22 22:33:35,451 [s0@group-02B20A285EBD-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-02B20A285EBD-FollowerState: change to CANDIDATE, lastRpcElapsedTime:223384378ns, electionTimeout:223ms
2024-01-22 22:33:35,451 [s0@group-02B20A285EBD-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s0: shutdown s0@group-02B20A285EBD-FollowerState
2024-01-22 22:33:35,451 [s0@group-02B20A285EBD-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-02B20A285EBD: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2024-01-22 22:33:35,451 [s0@group-02B20A285EBD-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2024-01-22 22:33:35,451 [s0@group-02B20A285EBD-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-02B20A285EBD-LeaderElection4
2024-01-22 22:33:35,452 [s0@group-02B20A285EBD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s0@group-02B20A285EBD-LeaderElection4 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|localhost:15012]|listeners:[], old=null
2024-01-22 22:33:35,452 [s0@group-02B20A285EBD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-02B20A285EBD-LeaderElection4 PRE_VOTE round 0: result PASSED (term=1)
2024-01-22 22:33:35,452 [s0@group-02B20A285EBD-LeaderElection4] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@51bef145
2024-01-22 22:33:35,453 [s0@group-02B20A285EBD-LeaderElection4] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:35,453 [s0@group-02B20A285EBD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s0@group-02B20A285EBD-LeaderElection4 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|localhost:15012]|listeners:[], old=null
2024-01-22 22:33:35,453 [s0@group-02B20A285EBD-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-02B20A285EBD-LeaderElection4 ELECTION round 0: result PASSED (term=2)
2024-01-22 22:33:35,453 [s0@group-02B20A285EBD-LeaderElection4] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(131)) - s0: shutdown s0@group-02B20A285EBD-LeaderElection4
2024-01-22 22:33:35,453 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-02B20A285EBD: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2024-01-22 22:33:35,453 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2024-01-22 22:33:35,453 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:33:35,453 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:35,453 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2024-01-22 22:33:35,453 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2024-01-22 22:33:35,454 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2024-01-22 22:33:35,454 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2024-01-22 22:33:35,454 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2024-01-22 22:33:35,454 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:35,454 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:33:35,454 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2024-01-22 22:33:35,454 [s0@group-02B20A285EBD-LeaderElection4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-02B20A285EBD-LeaderStateImpl
2024-01-22 22:33:35,454 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(505)) - s0@group-02B20A285EBD: set firstElectionSinceStartup to false for becomeLeader
2024-01-22 22:33:35,454 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s0@group-02B20A285EBD: change Leader from null to s0 at term 2 for becomeLeader, leader elected after 242ms
2024-01-22 22:33:35,454 [s0@group-02B20A285EBD-LeaderElection4] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(435)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker: Rolling segment log-0_38 to index:38
2024-01-22 22:33:35,455 [s0@group-02B20A285EBD-LeaderElection4] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-02B20A285EBD: set configuration 39: peers:[s0|localhost:15012]|listeners:[], old=null
2024-01-22 22:33:35,456 [s0@group-02B20A285EBD-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/log_0-38
2024-01-22 22:33:35,456 [s0@group-02B20A285EBD-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(591)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/log_0-38
2024-01-22 22:33:35,456 [s0@group-02B20A285EBD-SegmentedRaftLogWorker] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_39 at position 0
2024-01-22 22:33:35,463 [s0@group-02B20A285EBD-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(634)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/log_inprogress_39
2024-01-22 22:33:35,463 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@30d9b17c
2024-01-22 22:33:35,464 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:35,464 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(321)) - leader is ready since appliedIndex == 39 >= startIndex == 39
2024-01-22 22:33:35,681 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(125)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-02B20A285EBD:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-02B20A285EBD-SegmentedRaftLog:OPENED:c40, conf=39: peers:[s0|localhost:15012]|listeners:[], old=null RUNNING
2024-01-22 22:33:35,682 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 0) 0 term: 1, index: 1, stateMachineLogEntry {,   logData: "m0",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 22, }, 
2024-01-22 22:33:35,682 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 1) 1 term: 1, index: 3, stateMachineLogEntry {,   logData: "m1",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 23, }, 
2024-01-22 22:33:35,682 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 2) 2 term: 1, index: 5, stateMachineLogEntry {,   logData: "m2",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 24, }, 
2024-01-22 22:33:35,682 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 3) 3 term: 1, index: 7, stateMachineLogEntry {,   logData: "m3",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 25, }, 
2024-01-22 22:33:35,683 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 4) 4 term: 1, index: 9, stateMachineLogEntry {,   logData: "m4",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 26, }, 
2024-01-22 22:33:35,683 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 5) 5 term: 1, index: 11, stateMachineLogEntry {,   logData: "m5",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 27, }, 
2024-01-22 22:33:35,683 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 6) 6 term: 1, index: 13, stateMachineLogEntry {,   logData: "m6",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 28, }, 
2024-01-22 22:33:35,683 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 7) 7 term: 1, index: 15, stateMachineLogEntry {,   logData: "m7",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 29, }, 
2024-01-22 22:33:35,684 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 8) 8 term: 1, index: 17, stateMachineLogEntry {,   logData: "m8",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 30, }, 
2024-01-22 22:33:35,684 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 9) 9 term: 1, index: 19, stateMachineLogEntry {,   logData: "m9",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 31, }, 
2024-01-22 22:33:35,684 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 10) 10 term: 1, index: 21, stateMachineLogEntry {,   logData: "m10",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 32, }, 
2024-01-22 22:33:35,684 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 11) 11 term: 1, index: 23, stateMachineLogEntry {,   logData: "m11",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 33, }, 
2024-01-22 22:33:35,685 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 12) 12 term: 1, index: 25, stateMachineLogEntry {,   logData: "m12",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 34, }, 
2024-01-22 22:33:35,685 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 13) 13 term: 1, index: 27, stateMachineLogEntry {,   logData: "m13",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 35, }, 
2024-01-22 22:33:35,685 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 14) 14 term: 1, index: 29, stateMachineLogEntry {,   logData: "m14",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 36, }, 
2024-01-22 22:33:35,685 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 15) 15 term: 1, index: 31, stateMachineLogEntry {,   logData: "m15",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 37, }, 
2024-01-22 22:33:35,685 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 16) 16 term: 1, index: 33, stateMachineLogEntry {,   logData: "m16",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 38, }, 
2024-01-22 22:33:35,686 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 17) 17 term: 1, index: 35, stateMachineLogEntry {,   logData: "m17",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 39, }, 
2024-01-22 22:33:35,686 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 18) 18 term: 1, index: 37, stateMachineLogEntry {,   logData: "m18",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "]X\222e`\214M\305\242\005}V\212\311oj",   callId: 40, }, 
2024-01-22 22:33:35,686 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - ************************************************************** 
2024-01-22 22:33:35,686 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - *** 
2024-01-22 22:33:35,686 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - ***     Stopping MiniRaftClusterWithGrpc
2024-01-22 22:33:35,686 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - *** 
2024-01-22 22:33:35,686 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - ************************************************************** 
2024-01-22 22:33:35,686 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(837)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-02B20A285EBD:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-02B20A285EBD-SegmentedRaftLog:OPENED:c40, conf=39: peers:[s0|localhost:15012]|listeners:[], old=null RUNNING
2024-01-22 22:33:35,686 [MiniRaftCluster-8] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(417)) - s0: close
2024-01-22 22:33:35,687 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2024-01-22 22:33:35,687 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$1(457)) - s0@group-02B20A285EBD: shutdown
2024-01-22 22:33:35,687 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(74)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-02B20A285EBD,id=s0
2024-01-22 22:33:35,687 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(95)) - s0: shutdown s0@group-02B20A285EBD-LeaderStateImpl
2024-01-22 22:33:35,687 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(287)) - s0@group-02B20A285EBD-PendingRequests: sendNotLeaderResponses
2024-01-22 22:33:35,687 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2024-01-22 22:33:35,687 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server GrpcServerProtocolService now
2024-01-22 22:33:35,688 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server GrpcServerProtocolService successfully
2024-01-22 22:33:35,688 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-02B20A285EBD-StateMachineUpdater: set stopIndex = 40
2024-01-22 22:33:35,688 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2024-01-22 22:33:35,689 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2024-01-22 22:33:35,690 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.2_40 at position 0
2024-01-22 22:33:35,697 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.2_40 with options [READ]: sun.nio.ch.FileChannelImpl@3e1e5917
2024-01-22 22:33:35,697 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.2_40.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3a21da0c
2024-01-22 22:33:35,698 [s0@group-02B20A285EBD-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.2_40.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc1f388200/s0/1ede0752-9ebc-4504-9cf6-02b20a285ebd/sm/snapshot.2_40.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:35,698 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-02B20A285EBD-StateMachineUpdater: Took a snapshot at index 40
2024-01-22 22:33:35,698 [s0@group-02B20A285EBD-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-02B20A285EBD-StateMachineUpdater: snapshotIndex: updateIncreasingly 38 -> 40
2024-01-22 22:33:35,698 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(427)) - s0@group-02B20A285EBD: applyIndex: 40
2024-01-22 22:33:35,698 [s0@group-02B20A285EBD-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-02B20A285EBD-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2024-01-22 22:33:36,465 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(245)) - s0@group-02B20A285EBD-SegmentedRaftLogWorker close()
2024-01-22 22:33:36,465 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2024-01-22 22:33:36,465 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(856)) - MiniRaftClusterWithGrpc shutdown completed
2024-01-22 22:33:36,465 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - ************************************************************** 
2024-01-22 22:33:36,465 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - *** 
2024-01-22 22:33:36,465 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - ***     Stopping MiniRaftClusterWithGrpc
2024-01-22 22:33:36,465 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - *** 
2024-01-22 22:33:36,465 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - ************************************************************** 
2024-01-22 22:33:36,466 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(837)) - printing ALL groups
  s0:   CLOSED    LEADER s0@group-02B20A285EBD:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-02B20A285EBD-SegmentedRaftLog:CLOSED:c40, conf=39: peers:[s0|localhost:15012]|listeners:[], old=null CLOSED
2024-01-22 22:33:36,466 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(856)) - MiniRaftClusterWithGrpc shutdown completed
2024-01-22 22:33:36,466 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2024-01-22 22:33:36,466 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2024-01-22 22:33:36,466 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.RaftServer$Division log level to DEBUG
2024-01-22 22:33:36,466 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.raftlog.RaftLog log level to DEBUG
2024-01-22 22:33:36,466 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.client.RaftClient log level to DEBUG
2024-01-22 22:33:36,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(305)) - new MiniRaftClusterWithGrpc with group-058B3C611255:[s0|localhost:15016]
2024-01-22 22:33:36,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(338)) - .............................................................. 
2024-01-22 22:33:36,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - ... 
2024-01-22 22:33:36,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ...     Starting MiniRaftClusterWithGrpc
2024-01-22 22:33:36,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ... 
2024-01-22 22:33:36,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - .............................................................. 
2024-01-22 22:33:36,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(317)) - servers = {}
2024-01-22 22:33:36,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(381)) - newRaftServer: s0, group-058B3C611255:[s0|localhost:15016], format? true
2024-01-22 22:33:36,468 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0
2024-01-22 22:33:36,468 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0 does not exist.
2024-01-22 22:33:36,468 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(386)) - Formatted directory target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0
2024-01-22 22:33:36,468 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:36,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:36,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 15017 (custom)
2024-01-22 22:33:36,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:36,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 15018 (custom)
2024-01-22 22:33:36,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2024-01-22 22:33:36,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 15016 (custom)
2024-01-22 22:33:36,468 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2024-01-22 22:33:36,469 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:36,469 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2024-01-22 22:33:36,469 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:36,469 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:36,469 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2024-01-22 22:33:36,469 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2024-01-22 22:33:36,470 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2024-01-22 22:33:36,470 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:36,470 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2024-01-22 22:33:36,470 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:36,471 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0] (custom)
2024-01-22 22:33:36,471 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2024-01-22 22:33:36,471 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2024-01-22 22:33:36,471 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(101)) - s0: addNew group-058B3C611255:[s0|localhost:15016] returns group-058B3C611255:java.util.concurrent.CompletableFuture@656b48bd[Not completed]
2024-01-22 22:33:36,471 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:36,471 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:36,471 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(211)) - s0: new RaftServerImpl for group-058B3C611255:[s0|localhost:15016] with SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.member.majority-add = false (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-058B3C611255: ConfigurationManager, init=-1: peers:[s0|localhost:15016]|listeners:[], old=null, confs=<EMPTY_MAP>
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2024-01-22 22:33:36,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2024-01-22 22:33:36,473 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2024-01-22 22:33:36,473 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:36,474 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:36,474 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2024-01-22 22:33:36,474 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2024-01-22 22:33:36,474 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2024-01-22 22:33:36,474 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2024-01-22 22:33:36,474 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2024-01-22 22:33:36,474 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2024-01-22 22:33:36,474 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0] (custom)
2024-01-22 22:33:36,474 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255 does not exist. Creating ...
2024-01-22 22:33:36,474 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255
2024-01-22 22:33:36,476 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(228)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/in_use.lock acquired by nodename 3663@fv-az531-398
2024-01-22 22:33:36,476 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current
2024-01-22 22:33:36,476 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm
2024-01-22 22:33:36,476 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@4e747d19
2024-01-22 22:33:36,477 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:36,477 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(99)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255 has been successfully formatted.
2024-01-22 22:33:36,477 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(61)) - Failed to Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options []
java.nio.file.NoSuchFileException: /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.newByteChannel(Files.java:407)
	at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)
	at java.nio.file.Files.newInputStream(Files.java:152)
	at org.apache.ratis.util.FileUtils.lambda$newInputStream$2(FileUtils.java:73)
	at org.apache.ratis.util.LogUtils.supplyAndLog(LogUtils.java:58)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:72)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:68)
	at org.apache.ratis.server.storage.RaftStorageImpl.readRaftConfiguration(RaftStorageImpl.java:156)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:141)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:342)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:203)
	at org.apache.ratis.util.ConcurrentUtils.lambda$null$4(ConcurrentUtils.java:182)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:36,477 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:36,477 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2024-01-22 22:33:36,477 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2024-01-22 22:33:36,477 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2024-01-22 22:33:36,478 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:36,478 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2024-01-22 22:33:36,478 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2024-01-22 22:33:36,478 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:36,478 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2024-01-22 22:33:36,478 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2024-01-22 22:33:36,478 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:36,478 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-058B3C611255-cacheEviction-AwaitToRun,5,main] started
2024-01-22 22:33:36,478 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(182)) - new s0@group-058B3C611255-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255
2024-01-22 22:33:36,478 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:36,479 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2024-01-22 22:33:36,479 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:36,479 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:36,479 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2024-01-22 22:33:36,479 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2024-01-22 22:33:36,479 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2024-01-22 22:33:36,479 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2024-01-22 22:33:36,479 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:36,480 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:36,480 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2024-01-22 22:33:36,480 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2024-01-22 22:33:36,480 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2024-01-22 22:33:36,480 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-058B3C611255-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:36,480 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-058B3C611255-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:36,480 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(346)) - s0@group-058B3C611255: start as a follower, conf=-1: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:36,480 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-058B3C611255: changes role from      null to FOLLOWER at term 0 for startAsFollower
2024-01-22 22:33:36,480 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-058B3C611255-FollowerState
2024-01-22 22:33:36,481 [s0@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:33:36,481 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-058B3C611255,id=s0
2024-01-22 22:33:36,481 [s0@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:33:36,481 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:register(58)) - register mxBean class org.apache.ratis.server.impl.RaftServerJmxAdapter as Ratis:service=RaftServer,group=group-058B3C611255,id=s0
2024-01-22 22:33:36,481 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2024-01-22 22:33:36,481 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2024-01-22 22:33:36,481 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2024-01-22 22:33:36,481 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2024-01-22 22:33:36,481 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2024-01-22 22:33:36,481 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(407)) - s0: start RPC server
2024-01-22 22:33:36,482 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15018
2024-01-22 22:33:36,483 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15016
2024-01-22 22:33:36,483 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15017
2024-01-22 22:33:36,483 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2024-01-22 22:33:36,484 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:36,484 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-058B3C611255:t0, leader=null, voted=, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:36,484 [Time-limited test] WARN  ratis.RaftTestUtil (RaftTestUtil.java:lambda$waitForLeader$3(120)) - Attempt #1 failed: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-058B3C611255:t0, leader=null, voted=, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:36,697 [s0@group-058B3C611255-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-058B3C611255-FollowerState: change to CANDIDATE, lastRpcElapsedTime:216381378ns, electionTimeout:216ms
2024-01-22 22:33:36,697 [s0@group-058B3C611255-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s0: shutdown s0@group-058B3C611255-FollowerState
2024-01-22 22:33:36,697 [s0@group-058B3C611255-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-058B3C611255: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2024-01-22 22:33:36,697 [s0@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2024-01-22 22:33:36,697 [s0@group-058B3C611255-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-058B3C611255-LeaderElection5
2024-01-22 22:33:36,698 [s0@group-058B3C611255-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s0@group-058B3C611255-LeaderElection5 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:36,698 [s0@group-058B3C611255-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-058B3C611255-LeaderElection5 PRE_VOTE round 0: result PASSED (term=0)
2024-01-22 22:33:36,698 [s0@group-058B3C611255-LeaderElection5] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@4bcb2baf
2024-01-22 22:33:36,699 [s0@group-058B3C611255-LeaderElection5] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:36,699 [s0@group-058B3C611255-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s0@group-058B3C611255-LeaderElection5 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:36,699 [s0@group-058B3C611255-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-058B3C611255-LeaderElection5 ELECTION round 0: result PASSED (term=1)
2024-01-22 22:33:36,699 [s0@group-058B3C611255-LeaderElection5] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(131)) - s0: shutdown s0@group-058B3C611255-LeaderElection5
2024-01-22 22:33:36,699 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-058B3C611255: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2024-01-22 22:33:36,699 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2024-01-22 22:33:36,699 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:33:36,699 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-058B3C611255-LeaderStateImpl
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(505)) - s0@group-058B3C611255: set firstElectionSinceStartup to false for becomeLeader
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s0@group-058B3C611255: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 228ms
2024-01-22 22:33:36,700 [s0@group-058B3C611255-LeaderElection5] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(430)) - s0@group-058B3C611255-SegmentedRaftLogWorker: Starting segment from index:0
2024-01-22 22:33:36,701 [s0@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_0 at position 0
2024-01-22 22:33:36,703 [s0@group-058B3C611255-LeaderElection5] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 0: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:36,708 [s0@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(634)) - s0@group-058B3C611255-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_0
2024-01-22 22:33:36,709 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@14cd9eec
2024-01-22 22:33:36,709 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:36,709 [s0@group-058B3C611255-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(321)) - leader is ready since appliedIndex == 0 >= startIndex == 0
2024-01-22 22:33:36,935 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(125)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-058B3C611255:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:36,935 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:36,935 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 41 returns []
2024-01-22 22:33:36,935 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=41, seq=null, RW, m0
2024-01-22 22:33:36,940 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=41, seq=null, RW, Message:6d30)
2024-01-22 22:33:36,940 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=41, seq=null, RW, Message:6d30, entry=(t:1, i:1), STATEMACHINELOGENTRY, 41@client-8BE33A42BA81
2024-01-22 22:33:36,941 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 1
2024-01-22 22:33:36,941 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 41@client-8BE33A42BA81
2024-01-22 22:33:36,942 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 41
2024-01-22 22:33:36,942 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 42 returns [41]
2024-01-22 22:33:36,943 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=42, seq=null, RW, m1
2024-01-22 22:33:36,943 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=42, seq=null, RW, Message:6d31)
2024-01-22 22:33:36,944 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=42, seq=null, RW, Message:6d31, entry=(t:1, i:3), STATEMACHINELOGENTRY, 42@client-8BE33A42BA81
2024-01-22 22:33:36,945 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 3
2024-01-22 22:33:36,945 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 42@client-8BE33A42BA81
2024-01-22 22:33:36,947 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 42
2024-01-22 22:33:36,947 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 43 returns [42]
2024-01-22 22:33:36,947 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=43, seq=null, RW, m2
2024-01-22 22:33:36,948 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=43, seq=null, RW, Message:6d32)
2024-01-22 22:33:36,949 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=43, seq=null, RW, Message:6d32, entry=(t:1, i:5), STATEMACHINELOGENTRY, 43@client-8BE33A42BA81
2024-01-22 22:33:36,949 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 5
2024-01-22 22:33:36,949 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-8BE33A42BA81
2024-01-22 22:33:36,950 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 43
2024-01-22 22:33:36,950 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 44 returns [43]
2024-01-22 22:33:36,950 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=44, seq=null, RW, m3
2024-01-22 22:33:36,951 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=44, seq=null, RW, Message:6d33)
2024-01-22 22:33:36,951 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=44, seq=null, RW, Message:6d33, entry=(t:1, i:7), STATEMACHINELOGENTRY, 44@client-8BE33A42BA81
2024-01-22 22:33:36,952 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 7
2024-01-22 22:33:36,952 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 44@client-8BE33A42BA81
2024-01-22 22:33:36,953 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 44
2024-01-22 22:33:36,953 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 45 returns [44]
2024-01-22 22:33:36,953 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=45, seq=null, RW, m4
2024-01-22 22:33:36,954 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=45, seq=null, RW, Message:6d34)
2024-01-22 22:33:36,954 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=45, seq=null, RW, Message:6d34, entry=(t:1, i:9), STATEMACHINELOGENTRY, 45@client-8BE33A42BA81
2024-01-22 22:33:36,954 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 9
2024-01-22 22:33:36,954 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-8BE33A42BA81
2024-01-22 22:33:36,956 [s0@group-058B3C611255-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_9 at position 0
2024-01-22 22:33:36,959 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 45
2024-01-22 22:33:36,959 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 46 returns [45]
2024-01-22 22:33:36,959 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=46, seq=null, RW, m5
2024-01-22 22:33:36,960 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=46, seq=null, RW, Message:6d35)
2024-01-22 22:33:36,960 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=46, seq=null, RW, Message:6d35, entry=(t:1, i:11), STATEMACHINELOGENTRY, 46@client-8BE33A42BA81
2024-01-22 22:33:36,964 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_9 with options [READ]: sun.nio.ch.FileChannelImpl@1e35f59c
2024-01-22 22:33:36,964 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_9.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@5b37783e
2024-01-22 22:33:36,965 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_9.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_9.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:36,965 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-058B3C611255-StateMachineUpdater: Took a snapshot at index 9
2024-01-22 22:33:36,965 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-058B3C611255-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 9
2024-01-22 22:33:36,965 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 11
2024-01-22 22:33:36,965 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 46@client-8BE33A42BA81
2024-01-22 22:33:36,966 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 46
2024-01-22 22:33:36,966 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 47 returns [46]
2024-01-22 22:33:36,966 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=47, seq=null, RW, m6
2024-01-22 22:33:36,966 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=47, seq=null, RW, Message:6d36)
2024-01-22 22:33:36,967 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=47, seq=null, RW, Message:6d36, entry=(t:1, i:13), STATEMACHINELOGENTRY, 47@client-8BE33A42BA81
2024-01-22 22:33:36,967 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 13
2024-01-22 22:33:36,967 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 47@client-8BE33A42BA81
2024-01-22 22:33:36,968 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 47
2024-01-22 22:33:36,968 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 48 returns [47]
2024-01-22 22:33:36,968 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=48, seq=null, RW, m7
2024-01-22 22:33:36,969 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=48, seq=null, RW, Message:6d37)
2024-01-22 22:33:36,969 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=48, seq=null, RW, Message:6d37, entry=(t:1, i:15), STATEMACHINELOGENTRY, 48@client-8BE33A42BA81
2024-01-22 22:33:36,971 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 15
2024-01-22 22:33:36,971 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 48@client-8BE33A42BA81
2024-01-22 22:33:36,975 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 48
2024-01-22 22:33:36,975 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 49 returns [48]
2024-01-22 22:33:36,975 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=49, seq=null, RW, m8
2024-01-22 22:33:36,976 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=49, seq=null, RW, Message:6d38)
2024-01-22 22:33:36,977 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=49, seq=null, RW, Message:6d38, entry=(t:1, i:17), STATEMACHINELOGENTRY, 49@client-8BE33A42BA81
2024-01-22 22:33:36,977 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 17
2024-01-22 22:33:36,977 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 49@client-8BE33A42BA81
2024-01-22 22:33:36,978 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 49
2024-01-22 22:33:36,978 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 50 returns [49]
2024-01-22 22:33:36,978 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=50, seq=null, RW, m9
2024-01-22 22:33:36,979 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=50, seq=null, RW, Message:6d39)
2024-01-22 22:33:36,980 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=50, seq=null, RW, Message:6d39, entry=(t:1, i:19), STATEMACHINELOGENTRY, 50@client-8BE33A42BA81
2024-01-22 22:33:36,980 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 19
2024-01-22 22:33:36,980 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 50@client-8BE33A42BA81
2024-01-22 22:33:36,982 [s0@group-058B3C611255-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_19 at position 0
2024-01-22 22:33:36,987 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 50
2024-01-22 22:33:36,987 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 51 returns [50]
2024-01-22 22:33:36,987 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=51, seq=null, RW, m10
2024-01-22 22:33:36,988 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=51, seq=null, RW, Message:6d3130)
2024-01-22 22:33:36,989 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=51, seq=null, RW, Message:6d3130, entry=(t:1, i:21), STATEMACHINELOGENTRY, 51@client-8BE33A42BA81
2024-01-22 22:33:36,990 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_19 with options [READ]: sun.nio.ch.FileChannelImpl@23f5b74a
2024-01-22 22:33:36,991 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_19.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@6a26636b
2024-01-22 22:33:36,991 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_19.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_19.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:36,991 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-058B3C611255-StateMachineUpdater: Took a snapshot at index 19
2024-01-22 22:33:36,991 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-058B3C611255-StateMachineUpdater: snapshotIndex: updateIncreasingly 9 -> 19
2024-01-22 22:33:36,992 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 21
2024-01-22 22:33:36,992 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 51@client-8BE33A42BA81
2024-01-22 22:33:36,992 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 51
2024-01-22 22:33:36,992 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 52 returns [51]
2024-01-22 22:33:36,992 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=52, seq=null, RW, m11
2024-01-22 22:33:36,993 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=52, seq=null, RW, Message:6d3131)
2024-01-22 22:33:36,994 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=52, seq=null, RW, Message:6d3131, entry=(t:1, i:23), STATEMACHINELOGENTRY, 52@client-8BE33A42BA81
2024-01-22 22:33:36,994 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 23
2024-01-22 22:33:36,994 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 52@client-8BE33A42BA81
2024-01-22 22:33:36,995 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 52
2024-01-22 22:33:36,995 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 53 returns [52]
2024-01-22 22:33:36,995 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=53, seq=null, RW, m12
2024-01-22 22:33:36,995 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=53, seq=null, RW, Message:6d3132)
2024-01-22 22:33:36,996 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=53, seq=null, RW, Message:6d3132, entry=(t:1, i:25), STATEMACHINELOGENTRY, 53@client-8BE33A42BA81
2024-01-22 22:33:36,996 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 25
2024-01-22 22:33:36,996 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 53@client-8BE33A42BA81
2024-01-22 22:33:36,997 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 53
2024-01-22 22:33:36,997 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 54 returns [53]
2024-01-22 22:33:36,997 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=54, seq=null, RW, m13
2024-01-22 22:33:36,997 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=54, seq=null, RW, Message:6d3133)
2024-01-22 22:33:36,998 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=54, seq=null, RW, Message:6d3133, entry=(t:1, i:27), STATEMACHINELOGENTRY, 54@client-8BE33A42BA81
2024-01-22 22:33:36,998 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 27
2024-01-22 22:33:36,998 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 54@client-8BE33A42BA81
2024-01-22 22:33:36,999 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 54
2024-01-22 22:33:36,999 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 55 returns [54]
2024-01-22 22:33:36,999 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=55, seq=null, RW, m14
2024-01-22 22:33:37,000 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=55, seq=null, RW, Message:6d3134)
2024-01-22 22:33:37,000 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=55, seq=null, RW, Message:6d3134, entry=(t:1, i:29), STATEMACHINELOGENTRY, 55@client-8BE33A42BA81
2024-01-22 22:33:37,000 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 29
2024-01-22 22:33:37,000 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 55@client-8BE33A42BA81
2024-01-22 22:33:37,002 [s0@group-058B3C611255-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_29 at position 0
2024-01-22 22:33:37,002 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 55
2024-01-22 22:33:37,002 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 56 returns [55]
2024-01-22 22:33:37,002 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=56, seq=null, RW, m15
2024-01-22 22:33:37,003 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=56, seq=null, RW, Message:6d3135)
2024-01-22 22:33:37,004 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=56, seq=null, RW, Message:6d3135, entry=(t:1, i:31), STATEMACHINELOGENTRY, 56@client-8BE33A42BA81
2024-01-22 22:33:37,010 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_29 with options [READ]: sun.nio.ch.FileChannelImpl@5b0ef2a6
2024-01-22 22:33:37,010 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_29.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3b188771
2024-01-22 22:33:37,010 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_29.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_29.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:37,011 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-058B3C611255-StateMachineUpdater: Took a snapshot at index 29
2024-01-22 22:33:37,011 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-058B3C611255-StateMachineUpdater: snapshotIndex: updateIncreasingly 19 -> 29
2024-01-22 22:33:37,011 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 31
2024-01-22 22:33:37,011 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 56@client-8BE33A42BA81
2024-01-22 22:33:37,011 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 56
2024-01-22 22:33:37,012 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 57 returns [56]
2024-01-22 22:33:37,012 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=57, seq=null, RW, m16
2024-01-22 22:33:37,012 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=57, seq=null, RW, Message:6d3136)
2024-01-22 22:33:37,013 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=57, seq=null, RW, Message:6d3136, entry=(t:1, i:33), STATEMACHINELOGENTRY, 57@client-8BE33A42BA81
2024-01-22 22:33:37,013 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 33
2024-01-22 22:33:37,013 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 57@client-8BE33A42BA81
2024-01-22 22:33:37,014 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 57
2024-01-22 22:33:37,014 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 58 returns [57]
2024-01-22 22:33:37,014 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=58, seq=null, RW, m17
2024-01-22 22:33:37,015 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=58, seq=null, RW, Message:6d3137)
2024-01-22 22:33:37,015 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=58, seq=null, RW, Message:6d3137, entry=(t:1, i:35), STATEMACHINELOGENTRY, 58@client-8BE33A42BA81
2024-01-22 22:33:37,016 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 35
2024-01-22 22:33:37,016 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 58@client-8BE33A42BA81
2024-01-22 22:33:37,017 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 58
2024-01-22 22:33:37,017 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-8BE33A42BA81: get 59 returns [58]
2024-01-22 22:33:37,017 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=59, seq=null, RW, m18
2024-01-22 22:33:37,017 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=59, seq=null, RW, Message:6d3138)
2024-01-22 22:33:37,018 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-8BE33A42BA81->s0@group-058B3C611255, cid=59, seq=null, RW, Message:6d3138, entry=(t:1, i:37), STATEMACHINELOGENTRY, 59@client-8BE33A42BA81
2024-01-22 22:33:37,018 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 37
2024-01-22 22:33:37,018 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 59@client-8BE33A42BA81
2024-01-22 22:33:37,019 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-8BE33A42BA81: add replied callId 59
2024-01-22 22:33:37,020 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:testBasicInstallSnapshot(211)) - nextIndex = 39
2024-01-22 22:33:37,020 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:exists(183)) - File exists: /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_29
2024-01-22 22:33:37,020 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - ************************************************************** 
2024-01-22 22:33:37,020 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - *** 
2024-01-22 22:33:37,020 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - ***     Stopping MiniRaftClusterWithGrpc
2024-01-22 22:33:37,021 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - *** 
2024-01-22 22:33:37,021 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - ************************************************************** 
2024-01-22 22:33:37,021 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(837)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-058B3C611255:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:37,021 [MiniRaftCluster-10] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(417)) - s0: close
2024-01-22 22:33:37,021 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2024-01-22 22:33:37,021 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$1(457)) - s0@group-058B3C611255: shutdown
2024-01-22 22:33:37,021 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(74)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-058B3C611255,id=s0
2024-01-22 22:33:37,021 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(95)) - s0: shutdown s0@group-058B3C611255-LeaderStateImpl
2024-01-22 22:33:37,021 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(287)) - s0@group-058B3C611255-PendingRequests: sendNotLeaderResponses
2024-01-22 22:33:37,022 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2024-01-22 22:33:37,023 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server GrpcServerProtocolService now
2024-01-22 22:33:37,023 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-058B3C611255-StateMachineUpdater: set stopIndex = 38
2024-01-22 22:33:37,024 [s0@group-058B3C611255-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.1_38 at position 0
2024-01-22 22:33:37,027 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server GrpcServerProtocolService successfully
2024-01-22 22:33:37,027 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2024-01-22 22:33:37,027 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2024-01-22 22:33:37,032 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38 with options [READ]: sun.nio.ch.FileChannelImpl@355938bf
2024-01-22 22:33:37,032 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@400a7cb7
2024-01-22 22:33:37,033 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:37,034 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-058B3C611255-StateMachineUpdater: Took a snapshot at index 38
2024-01-22 22:33:37,034 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-058B3C611255-StateMachineUpdater: snapshotIndex: updateIncreasingly 29 -> 38
2024-01-22 22:33:37,034 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(427)) - s0@group-058B3C611255: applyIndex: 38
2024-01-22 22:33:37,034 [s0@group-058B3C611255-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-058B3C611255-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2024-01-22 22:33:38,019 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(245)) - s0@group-058B3C611255-SegmentedRaftLogWorker close()
2024-01-22 22:33:38,020 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2024-01-22 22:33:38,020 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(856)) - MiniRaftClusterWithGrpc shutdown completed
2024-01-22 22:33:38,020 [Time-limited test] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.delete /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_0
2024-01-22 22:33:38,020 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:testBasicInstallSnapshot(229)) - Restarting the cluster
2024-01-22 22:33:38,020 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - ************************************************************** 
2024-01-22 22:33:38,020 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - *** 
2024-01-22 22:33:38,020 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - ***     Stopping MiniRaftClusterWithGrpc
2024-01-22 22:33:38,020 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - *** 
2024-01-22 22:33:38,020 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - ************************************************************** 
2024-01-22 22:33:38,020 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(837)) - printing ALL groups
  s0:   CLOSED    LEADER s0@group-058B3C611255:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:CLOSED:c38, conf=0: peers:[s0|localhost:15016]|listeners:[], old=null CLOSED
2024-01-22 22:33:38,021 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(856)) - MiniRaftClusterWithGrpc shutdown completed
2024-01-22 22:33:38,021 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(381)) - newRaftServer: s0, group-058B3C611255:[s0|localhost:15016], format? false
2024-01-22 22:33:38,021 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:38,021 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:38,021 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 15017 (custom)
2024-01-22 22:33:38,021 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:38,021 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 15018 (custom)
2024-01-22 22:33:38,021 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2024-01-22 22:33:38,021 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 15016 (custom)
2024-01-22 22:33:38,021 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2024-01-22 22:33:38,022 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,022 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2024-01-22 22:33:38,022 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:38,022 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:38,022 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2024-01-22 22:33:38,022 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2024-01-22 22:33:38,023 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2024-01-22 22:33:38,023 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:38,023 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2024-01-22 22:33:38,023 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:38,023 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0] (custom)
2024-01-22 22:33:38,023 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2024-01-22 22:33:38,023 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2024-01-22 22:33:38,024 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(265)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255
2024-01-22 22:33:38,024 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(101)) - s0: addNew group-058B3C611255:[s0|localhost:15016] returns group-058B3C611255:java.util.concurrent.CompletableFuture@d14b332[Not completed]
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:38,024 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(338)) - .............................................................. 
2024-01-22 22:33:38,024 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - ... 
2024-01-22 22:33:38,024 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ...     Starting MiniRaftClusterWithGrpc
2024-01-22 22:33:38,024 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ... 
2024-01-22 22:33:38,024 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - .............................................................. 
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:38,024 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(317)) - servers = {s0=s0:      NEW group-058B3C611255:java.util.concurrent.CompletableFuture@d14b332[Not completed]}
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(211)) - s0: new RaftServerImpl for group-058B3C611255:[s0|localhost:15016] with SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.member.majority-add = false (default)
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:38,024 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-058B3C611255: ConfigurationManager, init=-1: peers:[s0|localhost:15016]|listeners:[], old=null, confs=<EMPTY_MAP>
2024-01-22 22:33:38,025 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2024-01-22 22:33:38,025 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2024-01-22 22:33:38,025 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2024-01-22 22:33:38,025 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2024-01-22 22:33:38,025 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2024-01-22 22:33:38,025 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2024-01-22 22:33:38,025 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:38,025 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:38,025 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2024-01-22 22:33:38,025 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2024-01-22 22:33:38,026 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2024-01-22 22:33:38,026 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2024-01-22 22:33:38,026 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2024-01-22 22:33:38,026 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2024-01-22 22:33:38,026 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0] (custom)
2024-01-22 22:33:38,026 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(228)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/in_use.lock acquired by nodename 3663@fv-az531-398
2024-01-22 22:33:38,027 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.deleteIfExists /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp
2024-01-22 22:33:38,027 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options []: sun.nio.ch.ChannelInputStream@4dcd67cc
2024-01-22 22:33:38,027 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:analyzeAndRecoverStorage(119)) - Read RaftStorageMetadata{term=1, votedFor=s0} from /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta
2024-01-22 22:33:38,027 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options []: sun.nio.ch.ChannelInputStream@430a9005
2024-01-22 22:33:38,027 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 0: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,027 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:38,028 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@47350cbc
2024-01-22 22:33:38,028 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38]
2024-01-22 22:33:38,028 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38 with options []: sun.nio.ch.ChannelInputStream@2379a3e
2024-01-22 22:33:38,028 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 41@client-8BE33A42BA81
2024-01-22 22:33:38,028 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 42@client-8BE33A42BA81
2024-01-22 22:33:38,028 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-8BE33A42BA81
2024-01-22 22:33:38,028 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 44@client-8BE33A42BA81
2024-01-22 22:33:38,028 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-8BE33A42BA81
2024-01-22 22:33:38,028 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 46@client-8BE33A42BA81
2024-01-22 22:33:38,028 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 47@client-8BE33A42BA81
2024-01-22 22:33:38,028 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 48@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 49@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 50@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 51@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 52@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 53@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 54@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 55@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 56@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 57@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 58@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 59@client-8BE33A42BA81
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2024-01-22 22:33:38,029 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-058B3C611255-cacheEviction-AwaitToRun,5,main] started
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(182)) - new s0@group-058B3C611255-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:38,030 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2024-01-22 22:33:38,031 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:38,031 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:38,031 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2024-01-22 22:33:38,031 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2024-01-22 22:33:38,031 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2024-01-22 22:33:38,031 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2024-01-22 22:33:38,031 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-058B3C611255-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> 38
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-058B3C611255-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(346)) - s0@group-058B3C611255: start as a follower, conf=0: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-058B3C611255: changes role from      null to FOLLOWER at term 1 for startAsFollower
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-058B3C611255-FollowerState
2024-01-22 22:33:38,033 [s0@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-058B3C611255,id=s0
2024-01-22 22:33:38,033 [s0@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:register(58)) - register mxBean class org.apache.ratis.server.impl.RaftServerJmxAdapter as Ratis:service=RaftServer,group=group-058B3C611255,id=s0
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2024-01-22 22:33:38,033 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2024-01-22 22:33:38,034 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(407)) - s0: start RPC server
2024-01-22 22:33:38,034 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15018
2024-01-22 22:33:38,035 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15016
2024-01-22 22:33:38,035 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15017
2024-01-22 22:33:38,035 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:38,035 [JvmPauseMonitor6] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2024-01-22 22:33:38,035 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-058B3C611255:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:38,036 [Time-limited test] WARN  ratis.RaftTestUtil (RaftTestUtil.java:lambda$waitForLeader$3(120)) - Attempt #1 failed: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-058B3C611255:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:38,210 [s0@group-058B3C611255-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-058B3C611255-FollowerState: change to CANDIDATE, lastRpcElapsedTime:177394716ns, electionTimeout:177ms
2024-01-22 22:33:38,211 [s0@group-058B3C611255-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s0: shutdown s0@group-058B3C611255-FollowerState
2024-01-22 22:33:38,211 [s0@group-058B3C611255-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-058B3C611255: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2024-01-22 22:33:38,211 [s0@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2024-01-22 22:33:38,211 [s0@group-058B3C611255-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-058B3C611255-LeaderElection6
2024-01-22 22:33:38,212 [s0@group-058B3C611255-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s0@group-058B3C611255-LeaderElection6 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,212 [s0@group-058B3C611255-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-058B3C611255-LeaderElection6 PRE_VOTE round 0: result PASSED (term=1)
2024-01-22 22:33:38,212 [s0@group-058B3C611255-LeaderElection6] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3726e273
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s0@group-058B3C611255-LeaderElection6 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-058B3C611255-LeaderElection6 ELECTION round 0: result PASSED (term=2)
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(131)) - s0: shutdown s0@group-058B3C611255-LeaderElection6
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-058B3C611255: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2024-01-22 22:33:38,213 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2024-01-22 22:33:38,214 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2024-01-22 22:33:38,214 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2024-01-22 22:33:38,214 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:38,214 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:33:38,214 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2024-01-22 22:33:38,214 [s0@group-058B3C611255-LeaderElection6] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-058B3C611255-LeaderStateImpl
2024-01-22 22:33:38,214 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(505)) - s0@group-058B3C611255: set firstElectionSinceStartup to false for becomeLeader
2024-01-22 22:33:38,214 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s0@group-058B3C611255: change Leader from null to s0 at term 2 for becomeLeader, leader elected after 189ms
2024-01-22 22:33:38,214 [s0@group-058B3C611255-LeaderElection6] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(430)) - s0@group-058B3C611255-SegmentedRaftLogWorker: Starting segment from index:39
2024-01-22 22:33:38,214 [s0@group-058B3C611255-LeaderElection6] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 39: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,214 [s0@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_39 at position 0
2024-01-22 22:33:38,221 [s0@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(634)) - s0@group-058B3C611255-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_39
2024-01-22 22:33:38,222 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@43c5fdef
2024-01-22 22:33:38,223 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,223 [s0@group-058B3C611255-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(321)) - leader is ready since appliedIndex == 39 >= startIndex == 39
2024-01-22 22:33:38,325 [timer0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-BBE07AC09D79->s4-AppendLogResponseHandler: Failed appendEntries (Repeated 8 times in the last 5.000s): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:38,325 [timer7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s0@group-BBE07AC09D79->s4-GrpcLogAppender: Follower failed (request=null, errorCount=12); keep nextIndex (0) unchanged and retry. (Repeated 12 times in the last 5.001s)
2024-01-22 22:33:38,486 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(125)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-058B3C611255:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c40, conf=39: peers:[s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:38,487 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 0) 0 term: 1, index: 1, stateMachineLogEntry {,   logData: "m0",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 41, }, 
2024-01-22 22:33:38,487 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 1) 1 term: 1, index: 3, stateMachineLogEntry {,   logData: "m1",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 42, }, 
2024-01-22 22:33:38,487 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 2) 2 term: 1, index: 5, stateMachineLogEntry {,   logData: "m2",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 43, }, 
2024-01-22 22:33:38,487 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 3) 3 term: 1, index: 7, stateMachineLogEntry {,   logData: "m3",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 44, }, 
2024-01-22 22:33:38,487 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 4) 4 term: 1, index: 9, stateMachineLogEntry {,   logData: "m4",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 45, }, 
2024-01-22 22:33:38,488 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 5) 5 term: 1, index: 11, stateMachineLogEntry {,   logData: "m5",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 46, }, 
2024-01-22 22:33:38,488 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 6) 6 term: 1, index: 13, stateMachineLogEntry {,   logData: "m6",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 47, }, 
2024-01-22 22:33:38,488 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 7) 7 term: 1, index: 15, stateMachineLogEntry {,   logData: "m7",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 48, }, 
2024-01-22 22:33:38,488 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 8) 8 term: 1, index: 17, stateMachineLogEntry {,   logData: "m8",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 49, }, 
2024-01-22 22:33:38,488 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 9) 9 term: 1, index: 19, stateMachineLogEntry {,   logData: "m9",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 50, }, 
2024-01-22 22:33:38,488 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 10) 10 term: 1, index: 21, stateMachineLogEntry {,   logData: "m10",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 51, }, 
2024-01-22 22:33:38,488 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 11) 11 term: 1, index: 23, stateMachineLogEntry {,   logData: "m11",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 52, }, 
2024-01-22 22:33:38,489 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 12) 12 term: 1, index: 25, stateMachineLogEntry {,   logData: "m12",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 53, }, 
2024-01-22 22:33:38,489 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 13) 13 term: 1, index: 27, stateMachineLogEntry {,   logData: "m13",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 54, }, 
2024-01-22 22:33:38,489 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 14) 14 term: 1, index: 29, stateMachineLogEntry {,   logData: "m14",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 55, }, 
2024-01-22 22:33:38,489 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 15) 15 term: 1, index: 31, stateMachineLogEntry {,   logData: "m15",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 56, }, 
2024-01-22 22:33:38,489 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 16) 16 term: 1, index: 33, stateMachineLogEntry {,   logData: "m16",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 57, }, 
2024-01-22 22:33:38,489 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 17) 17 term: 1, index: 35, stateMachineLogEntry {,   logData: "m17",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 58, }, 
2024-01-22 22:33:38,489 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 18) 18 term: 1, index: 37, stateMachineLogEntry {,   logData: "m18",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 59, }, 
2024-01-22 22:33:38,490 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:38,490 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(164)) - client-D4882E27370A: get 60 returns []
2024-01-22 22:33:38,490 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest RaftClientRequest:client-D4882E27370A->s0@group-058B3C611255, cid=60, seq=null, RW, m19
2024-01-22 22:33:38,494 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(880)) - s0@group-058B3C611255: receive client request(RaftClientRequest:client-D4882E27370A->s0@group-058B3C611255, cid=60, seq=null, RW, Message:6d3139)
2024-01-22 22:33:38,494 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(533)) - s0@group-058B3C611255-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-D4882E27370A->s0@group-058B3C611255, cid=60, seq=null, RW, Message:6d3139, entry=(t:2, i:41), STATEMACHINELOGENTRY, 60@client-D4882E27370A
2024-01-22 22:33:38,495 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 41
2024-01-22 22:33:38,495 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 41, m19 -> (t:2, i:41), STATEMACHINELOGENTRY, 60@client-D4882E27370A
2024-01-22 22:33:38,496 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-D4882E27370A: add replied callId 60
2024-01-22 22:33:38,497 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:addNewPeers(463)) - Add new peers [s3, s4]
2024-01-22 22:33:38,497 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(381)) - newRaftServer: s3, group-058B3C611255:[s3|localhost:15020, s4|localhost:15024, s0|localhost:15016], format? true
2024-01-22 22:33:38,497 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3
2024-01-22 22:33:38,497 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3 does not exist.
2024-01-22 22:33:38,497 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(386)) - Formatted directory target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3
2024-01-22 22:33:38,497 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:38,498 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:38,498 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 15021 (custom)
2024-01-22 22:33:38,498 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:38,498 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 15022 (custom)
2024-01-22 22:33:38,498 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2024-01-22 22:33:38,498 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 15020 (custom)
2024-01-22 22:33:38,498 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2024-01-22 22:33:38,498 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,498 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2024-01-22 22:33:38,498 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:38,498 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:38,498 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2024-01-22 22:33:38,498 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2024-01-22 22:33:38,499 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2024-01-22 22:33:38,499 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:38,499 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2024-01-22 22:33:38,499 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:38,500 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3] (custom)
2024-01-22 22:33:38,500 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2024-01-22 22:33:38,500 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2024-01-22 22:33:38,500 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(101)) - s3: addNew group-058B3C611255:[s3|localhost:15020, s4|localhost:15024, s0|localhost:15016] returns group-058B3C611255:java.util.concurrent.CompletableFuture@5acb9d1b[Not completed]
2024-01-22 22:33:38,500 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:38,500 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(381)) - newRaftServer: s4, group-058B3C611255:[s3|localhost:15020, s4|localhost:15024, s0|localhost:15016], format? true
2024-01-22 22:33:38,500 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4
2024-01-22 22:33:38,500 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:38,500 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4 does not exist.
2024-01-22 22:33:38,500 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(386)) - Formatted directory target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4
2024-01-22 22:33:38,500 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:38,500 [s3-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(211)) - s3: new RaftServerImpl for group-058B3C611255:[s3|localhost:15020, s4|localhost:15024, s0|localhost:15016] with SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:38,501 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:38,501 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:38,501 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:38,501 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:38,501 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 15025 (custom)
2024-01-22 22:33:38,501 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2024-01-22 22:33:38,501 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:38,501 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2024-01-22 22:33:38,501 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 15026 (custom)
2024-01-22 22:33:38,501 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:38,501 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2024-01-22 22:33:38,501 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.member.majority-add = false (default)
2024-01-22 22:33:38,501 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 15024 (custom)
2024-01-22 22:33:38,501 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:38,501 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2024-01-22 22:33:38,501 [s3-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s3@group-058B3C611255: ConfigurationManager, init=-1: peers:[s3|localhost:15020, s4|localhost:15024, s0|localhost:15016]|listeners:[], old=null, confs=<EMPTY_MAP>
2024-01-22 22:33:38,501 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,501 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2024-01-22 22:33:38,502 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2024-01-22 22:33:38,502 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2024-01-22 22:33:38,502 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:38,502 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2024-01-22 22:33:38,502 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:38,502 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2024-01-22 22:33:38,502 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2024-01-22 22:33:38,502 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2024-01-22 22:33:38,502 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2024-01-22 22:33:38,502 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2024-01-22 22:33:38,503 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:38,503 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:38,503 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2024-01-22 22:33:38,503 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2024-01-22 22:33:38,503 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2024-01-22 22:33:38,503 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2024-01-22 22:33:38,503 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2024-01-22 22:33:38,503 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:38,504 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2024-01-22 22:33:38,504 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:38,504 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4] (custom)
2024-01-22 22:33:38,504 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2024-01-22 22:33:38,504 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2024-01-22 22:33:38,504 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(101)) - s4: addNew group-058B3C611255:[s3|localhost:15020, s4|localhost:15024, s0|localhost:15016] returns group-058B3C611255:java.util.concurrent.CompletableFuture@47c8ca59[Not completed]
2024-01-22 22:33:38,504 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:38,504 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:38,504 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2024-01-22 22:33:38,504 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:38,504 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2024-01-22 22:33:38,504 [s4-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(211)) - s4: new RaftServerImpl for group-058B3C611255:[s3|localhost:15020, s4|localhost:15024, s0|localhost:15016] with SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:38,504 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:38,504 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3] (custom)
2024-01-22 22:33:38,504 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.member.majority-add = false (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s4@group-058B3C611255: ConfigurationManager, init=-1: peers:[s3|localhost:15020, s4|localhost:15024, s0|localhost:15016]|listeners:[], old=null, confs=<EMPTY_MAP>
2024-01-22 22:33:38,505 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255 does not exist. Creating ...
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2024-01-22 22:33:38,505 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2024-01-22 22:33:38,505 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255
2024-01-22 22:33:38,506 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:38,506 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:38,506 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2024-01-22 22:33:38,506 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2024-01-22 22:33:38,506 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2024-01-22 22:33:38,506 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2024-01-22 22:33:38,506 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(228)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/in_use.lock acquired by nodename 3663@fv-az531-398
2024-01-22 22:33:38,506 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current
2024-01-22 22:33:38,506 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm
2024-01-22 22:33:38,506 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@78a3a658
2024-01-22 22:33:38,507 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:38,507 [s3-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(99)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255 has been successfully formatted.
2024-01-22 22:33:38,507 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(61)) - Failed to Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options []
java.nio.file.NoSuchFileException: /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.newByteChannel(Files.java:407)
	at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)
	at java.nio.file.Files.newInputStream(Files.java:152)
	at org.apache.ratis.util.FileUtils.lambda$newInputStream$2(FileUtils.java:73)
	at org.apache.ratis.util.LogUtils.supplyAndLog(LogUtils.java:58)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:72)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:68)
	at org.apache.ratis.server.storage.RaftStorageImpl.readRaftConfiguration(RaftStorageImpl.java:156)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:141)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:342)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:203)
	at org.apache.ratis.util.ConcurrentUtils.lambda$null$4(ConcurrentUtils.java:182)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:38,507 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:38,507 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2024-01-22 22:33:38,507 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s3@group-058B3C611255-cacheEviction-AwaitToRun,5,main] started
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(182)) - new s3@group-058B3C611255-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2024-01-22 22:33:38,508 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2024-01-22 22:33:38,509 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-058B3C611255-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-058B3C611255-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(346)) - s3@group-058B3C611255: start as a follower, conf=-1: peers:[s3|localhost:15020, s4|localhost:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s3@group-058B3C611255: changes role from      null to FOLLOWER at term 0 for startAsFollower
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s3: start s3@group-058B3C611255-FollowerState
2024-01-22 22:33:38,510 [s3@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-058B3C611255,id=s3
2024-01-22 22:33:38,510 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:register(58)) - register mxBean class org.apache.ratis.server.impl.RaftServerJmxAdapter as Ratis:service=RaftServer,group=group-058B3C611255,id=s3
2024-01-22 22:33:38,510 [s3@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:33:38,511 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2024-01-22 22:33:38,511 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2024-01-22 22:33:38,511 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2024-01-22 22:33:38,511 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2024-01-22 22:33:38,511 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2024-01-22 22:33:38,511 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(407)) - s3: start RPC server
2024-01-22 22:33:38,512 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s3: GrpcService started, listening on 15022
2024-01-22 22:33:38,512 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s3: GrpcService started, listening on 15020
2024-01-22 22:33:38,513 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s3: GrpcService started, listening on 15021
2024-01-22 22:33:38,513 [JvmPauseMonitor7] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s3: Started
2024-01-22 22:33:38,513 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2024-01-22 22:33:38,513 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2024-01-22 22:33:38,513 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4] (custom)
2024-01-22 22:33:38,513 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255 does not exist. Creating ...
2024-01-22 22:33:38,513 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255
2024-01-22 22:33:38,514 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(228)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/in_use.lock acquired by nodename 3663@fv-az531-398
2024-01-22 22:33:38,514 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current
2024-01-22 22:33:38,514 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm
2024-01-22 22:33:38,514 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@2b2c0393
2024-01-22 22:33:38,515 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:38,515 [s4-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(99)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255 has been successfully formatted.
2024-01-22 22:33:38,515 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(61)) - Failed to Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options []
java.nio.file.NoSuchFileException: /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:361)
	at java.nio.file.Files.newByteChannel(Files.java:407)
	at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)
	at java.nio.file.Files.newInputStream(Files.java:152)
	at org.apache.ratis.util.FileUtils.lambda$newInputStream$2(FileUtils.java:73)
	at org.apache.ratis.util.LogUtils.supplyAndLog(LogUtils.java:58)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:72)
	at org.apache.ratis.util.FileUtils.newInputStream(FileUtils.java:68)
	at org.apache.ratis.server.storage.RaftStorageImpl.readRaftConfiguration(RaftStorageImpl.java:156)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:141)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:342)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:203)
	at org.apache.ratis.util.ConcurrentUtils.lambda$null$4(ConcurrentUtils.java:182)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:38,515 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:38,515 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2024-01-22 22:33:38,515 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2024-01-22 22:33:38,515 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2024-01-22 22:33:38,515 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,515 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2024-01-22 22:33:38,515 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2024-01-22 22:33:38,515 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s4@group-058B3C611255-cacheEviction-AwaitToRun,5,main] started
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(182)) - new s4@group-058B3C611255-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2024-01-22 22:33:38,516 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:38,518 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,518 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2024-01-22 22:33:38,518 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2024-01-22 22:33:38,518 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2024-01-22 22:33:38,518 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-058B3C611255-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:38,518 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-058B3C611255-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:38,519 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(346)) - s4@group-058B3C611255: start as a follower, conf=-1: peers:[s3|localhost:15020, s4|localhost:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,519 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s4@group-058B3C611255: changes role from      null to FOLLOWER at term 0 for startAsFollower
2024-01-22 22:33:38,519 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s4: start s4@group-058B3C611255-FollowerState
2024-01-22 22:33:38,519 [s4@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:33:38,519 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-058B3C611255,id=s4
2024-01-22 22:33:38,519 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:register(58)) - register mxBean class org.apache.ratis.server.impl.RaftServerJmxAdapter as Ratis:service=RaftServer,group=group-058B3C611255,id=s4
2024-01-22 22:33:38,519 [s4@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:33:38,519 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2024-01-22 22:33:38,519 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2024-01-22 22:33:38,519 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2024-01-22 22:33:38,519 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2024-01-22 22:33:38,519 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2024-01-22 22:33:38,520 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(407)) - s4: start RPC server
2024-01-22 22:33:38,520 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s4: GrpcService started, listening on 15026
2024-01-22 22:33:38,521 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s4: GrpcService started, listening on 15024
2024-01-22 22:33:38,522 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s4: GrpcService started, listening on 15025
2024-01-22 22:33:38,522 [JvmPauseMonitor8] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s4: Started
2024-01-22 22:33:38,522 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:38,523 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:setConfiguration(820)) - Start changing the configuration: [s3|0.0.0.0:15020, s0|localhost:15016]
2024-01-22 22:33:38,523 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest SetConfigurationRequest:client-096D54299484->s0@group-058B3C611255, cid=61, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15020, s0|localhost:15016], listeners:[]
2024-01-22 22:33:38,526 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-058B3C611255: receive setConfiguration SetConfigurationRequest:client-096D54299484->s0@group-058B3C611255, cid=61, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15020, s0|localhost:15016], listeners:[]
2024-01-22 22:33:38,526 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-058B3C611255-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-096D54299484->s0@group-058B3C611255, cid=61, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15020, s0|localhost:15016], listeners:[]
2024-01-22 22:33:38,526 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:38,526 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,526 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:38,526 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:38,526 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:38,526 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:38,526 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:38,527 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:38,527 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:38,527 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:38,527 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:38,527 [s0@group-058B3C611255->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-058B3C611255->s3-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38] to follower
2024-01-22 22:33:38,527 [s0@group-058B3C611255->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s3|0.0.0.0:15020
2024-01-22 22:33:38,528 [s0@group-058B3C611255->s3-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38 with options []: sun.nio.ch.ChannelInputStream@54e62821
2024-01-22 22:33:38,531 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(89)) - s3@group-058B3C611255: receive installSnapshot: s0->s3#0-t2,chunk:14e813ae-380b-4588-bcf9-af424118ada9,0
2024-01-22 22:33:38,532 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@2ec73519
2024-01-22 22:33:38,532 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:38,532 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(505)) - s3@group-058B3C611255: set firstElectionSinceStartup to false for installSnapshot
2024-01-22 22:33:38,533 [grpc-default-executor-2] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s3@group-058B3C611255: change Leader from null to s0 at term 2 for installSnapshot, leader elected after 31ms
2024-01-22 22:33:38,533 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-14e813ae-380b-4588-bcf9-af424118ada9
2024-01-22 22:33:38,533 [grpc-default-executor-2] INFO  storage.SnapshotManager (SnapshotManager.java:installSnapshot(111)) - Installing snapshot:s0->s3#0-t2,chunk:14e813ae-380b-4588-bcf9-af424118ada9,0, to tmp dir:/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-14e813ae-380b-4588-bcf9-af424118ada9
2024-01-22 22:33:38,533 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-14e813ae-380b-4588-bcf9-af424118ada9
2024-01-22 22:33:38,533 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-14e813ae-380b-4588-bcf9-af424118ada9/snapshot.1_38 with options [WRITE, CREATE]: sun.nio.ch.FileChannelImpl@2f6e7ed5
2024-01-22 22:33:38,533 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-14e813ae-380b-4588-bcf9-af424118ada9/snapshot.1_38.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3402bfff
2024-01-22 22:33:38,534 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-14e813ae-380b-4588-bcf9-af424118ada9/snapshot.1_38.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-14e813ae-380b-4588-bcf9-af424118ada9/snapshot.1_38.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:38,534 [grpc-default-executor-2] INFO  storage.SnapshotManager (SnapshotManager.java:rename(175)) - Installed snapshot, renaming temporary dir /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-14e813ae-380b-4588-bcf9-af424118ada9 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm
2024-01-22 22:33:38,534 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm.tmp20240122-223338_534
2024-01-22 22:33:38,534 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-14e813ae-380b-4588-bcf9-af424118ada9 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm
2024-01-22 22:33:38,534 [grpc-default-executor-2] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm.tmp20240122-223338_534
2024-01-22 22:33:38,535 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.delete /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm.tmp20240122-223338_534
2024-01-22 22:33:38,535 [grpc-default-executor-2] INFO  raftlog.RaftLog (RaftLogBase.java:lambda$new$0(56)) - s3@group-058B3C611255-SegmentedRaftLog: snapshotIndex: updateIncreasingly -1 -> 38
2024-01-22 22:33:38,535 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:reinitialize(236)) - Reinitializing SimpleStateMachine4Testing:s3:group-058B3C611255
2024-01-22 22:33:38,535 [grpc-default-executor-2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-058B3C611255-SegmentedRaftLogWorker: flushIndex: setUnconditionally -1 -> 38
2024-01-22 22:33:38,535 [grpc-default-executor-2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-058B3C611255-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally -1 -> 38
2024-01-22 22:33:38,535 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@3d7bc478
2024-01-22 22:33:38,535 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@3df1ea2d
2024-01-22 22:33:38,535 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38]
2024-01-22 22:33:38,535 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38 with options []: sun.nio.ch.ChannelInputStream@33bc3da7
2024-01-22 22:33:38,535 [grpc-default-executor-2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:purgeImpl(381)) - purging segments:null
2024-01-22 22:33:38,535 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:checkAndInstallSnapshot(194)) - s3@group-058B3C611255: successfully install the entire snapshot-38
2024-01-22 22:33:38,535 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 41@client-8BE33A42BA81
2024-01-22 22:33:38,536 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 42@client-8BE33A42BA81
2024-01-22 22:33:38,536 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-8BE33A42BA81
2024-01-22 22:33:38,536 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshotImpl(134)) - s3@group-058B3C611255: set new configuration index: 39
configurationEntry {
  peers {
    id: "s0"
    address: "localhost:15016"
    dataStreamAddress: "localhost:15019"
    clientAddress: "localhost:15018"
    adminAddress: "localhost:15017"
    startupRole: FOLLOWER
  }
}
 from snapshot
2024-01-22 22:33:38,536 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 44@client-8BE33A42BA81
2024-01-22 22:33:38,536 [grpc-default-executor-2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s3@group-058B3C611255: set configuration 39: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,536 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-8BE33A42BA81
2024-01-22 22:33:38,536 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@2a896f77
2024-01-22 22:33:38,536 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 46@client-8BE33A42BA81
2024-01-22 22:33:38,536 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 47@client-8BE33A42BA81
2024-01-22 22:33:38,536 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 48@client-8BE33A42BA81
2024-01-22 22:33:38,536 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 49@client-8BE33A42BA81
2024-01-22 22:33:38,537 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 50@client-8BE33A42BA81
2024-01-22 22:33:38,537 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 51@client-8BE33A42BA81
2024-01-22 22:33:38,537 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 52@client-8BE33A42BA81
2024-01-22 22:33:38,537 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,537 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(100)) - s3@group-058B3C611255: reply installSnapshot: s0<-s3#0:OK-t0,SUCCESS,requestIndex=0
2024-01-22 22:33:38,537 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 53@client-8BE33A42BA81
2024-01-22 22:33:38,537 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(186)) - s3: Completed INSTALL_SNAPSHOT, lastRequest: s0->s3#0-t2,chunk:14e813ae-380b-4588-bcf9-af424118ada9,0
2024-01-22 22:33:38,537 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 54@client-8BE33A42BA81
2024-01-22 22:33:38,537 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$7(188)) - s3: Completed INSTALL_SNAPSHOT, lastReply: null
2024-01-22 22:33:38,537 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 55@client-8BE33A42BA81
2024-01-22 22:33:38,537 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 56@client-8BE33A42BA81
2024-01-22 22:33:38,537 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(625)) - s0@group-058B3C611255->s3-InstallSnapshotResponseHandler: received the first reply s0<-s3#0:OK-t0,SUCCESS,requestIndex=0
2024-01-22 22:33:38,537 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 57@client-8BE33A42BA81
2024-01-22 22:33:38,538 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 58@client-8BE33A42BA81
2024-01-22 22:33:38,538 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 59@client-8BE33A42BA81
2024-01-22 22:33:38,538 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(636)) - s0@group-058B3C611255->s3-InstallSnapshotResponseHandler: Completed InstallSnapshot. Reply: serverReply {
  requestorId: "s0"
  replyId: "s3"
  raftGroupId {
    id: "z\327\345\253\2479O\003\270F\005\213<a\022U"
  }
  success: true
}
requestIndex: 0

2024-01-22 22:33:38,538 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-058B3C611255-StateMachineUpdater: snapshotIndex: setUnconditionally -1 -> 38
2024-01-22 22:33:38,538 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:setAttemptedToInstallSnapshot(154)) - Follower s0@group-058B3C611255->s3 acknowledged installing snapshot
2024-01-22 22:33:38,538 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-058B3C611255-StateMachineUpdater: appliedIndex: setUnconditionally -1 -> 38
2024-01-22 22:33:38,538 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(701)) - s0@group-058B3C611255->s3-InstallSnapshotResponseHandler: follower responded installSnapshot COMPLETED
2024-01-22 22:33:38,538 [s0@group-058B3C611255->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-058B3C611255->s3: snapshotIndex: setUnconditionally 0 -> 38
2024-01-22 22:33:38,539 [s0@group-058B3C611255->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-058B3C611255->s3: matchIndex: setUnconditionally -1 -> 38
2024-01-22 22:33:38,539 [s0@group-058B3C611255->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-058B3C611255->s3: nextIndex: setUnconditionally 0 -> 39
2024-01-22 22:33:38,539 [s0@group-058B3C611255->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(757)) - s0@group-058B3C611255->s3-GrpcLogAppender: installed snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38] successfully
2024-01-22 22:33:38,545 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s0, 2, (t:1, i:38), 42, true, commits:[s0:c42, s3:c-1], cId:1, entries: [(t:2, i:39), CONFIGURATIONENTRY(current:id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:), (t:2, i:40), METADATAENTRY(c:39), (t:2, i:41), STATEMACHINELOGENTRY, 60@client-D4882E27370A, (t:2, i:42), METADATAENTRY(c:41)]
2024-01-22 22:33:38,546 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s3@group-058B3C611255: set configuration 39: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,546 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,546 [s3-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(430)) - s3@group-058B3C611255-SegmentedRaftLogWorker: Starting segment from index:39
2024-01-22 22:33:38,546 [s3@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_39 at position 0
2024-01-22 22:33:38,554 [s3@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(634)) - s3@group-058B3C611255-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_39
2024-01-22 22:33:38,555 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s3#1:OK-t2,SUCCESS,nextIndex=43,followerCommit=42,matchIndex=42
2024-01-22 22:33:38,555 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3783af08
2024-01-22 22:33:38,556 [s0@group-058B3C611255-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 43: peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[], old=peers:[s0|localhost:15016]|listeners:[]
2024-01-22 22:33:38,556 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,556 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 41
2024-01-22 22:33:38,556 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 41, m19 -> (t:2, i:41), STATEMACHINELOGENTRY, 60@client-D4882E27370A
2024-01-22 22:33:38,557 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:42), 42, false, commits:[s0:c42, s3:c42], cId:2, entries: [(t:2, i:43), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
)]
2024-01-22 22:33:38,558 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s3@group-058B3C611255: set configuration 43: peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[], old=peers:[s0|localhost:15016]|listeners:[]
2024-01-22 22:33:38,558 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,558 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s3#2:OK-t2,SUCCESS,nextIndex=44,followerCommit=42,matchIndex=43
2024-01-22 22:33:38,558 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@493d969f
2024-01-22 22:33:38,559 [s0@group-058B3C611255-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 45: peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,559 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:43), 43, false, commits:[s0:c43, s3:c42], cId:3, entries: [(t:2, i:44), METADATAENTRY(c:43)]
2024-01-22 22:33:38,559 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,560 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s3#3:OK-t2,SUCCESS,nextIndex=45,followerCommit=43,matchIndex=44
2024-01-22 22:33:38,560 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,561 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@7281379c
2024-01-22 22:33:38,561 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:44), 43, false, commits:[s0:c43, s3:c42], cId:4, entries: [(t:2, i:45), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:)]
2024-01-22 22:33:38,561 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s3@group-058B3C611255: set configuration 45: peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,561 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,562 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s3#4:OK-t2,SUCCESS,nextIndex=46,followerCommit=43,matchIndex=45
2024-01-22 22:33:38,562 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,562 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@c3f01dc
2024-01-22 22:33:38,563 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:45), 45, false, commits:[s0:c45, s3:c43], cId:6, entries: [(t:2, i:46), METADATAENTRY(c:45)]
2024-01-22 22:33:38,563 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-096D54299484: add replied callId 61
2024-01-22 22:33:38,563 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,564 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,564 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s3#6:OK-t2,SUCCESS,nextIndex=47,followerCommit=45,matchIndex=46
2024-01-22 22:33:38,564 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@113a75b0
2024-01-22 22:33:38,566 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,566 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:38,566 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:setConfiguration(820)) - Start changing the configuration: [s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]
2024-01-22 22:33:38,566 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:newRequest(92)) - attempt #1, newRequest SetConfigurationRequest:client-C09951078025->s0@group-058B3C611255, cid=62, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016], listeners:[]
2024-01-22 22:33:38,570 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1273)) - s0@group-058B3C611255: receive setConfiguration SetConfigurationRequest:client-C09951078025->s0@group-058B3C611255, cid=62, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016], listeners:[]
2024-01-22 22:33:38,570 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(490)) - s0@group-058B3C611255-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-C09951078025->s0@group-058B3C611255, cid=62, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016], listeners:[]
2024-01-22 22:33:38,570 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:38,570 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,570 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:38,570 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:38,570 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:38,570 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:38,571 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:38,571 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:38,571 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:38,571 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:38,571 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:38,571 [s0@group-058B3C611255->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(718)) - s0@group-058B3C611255->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38] to follower
2024-01-22 22:33:38,571 [s0@group-058B3C611255->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s4|0.0.0.0:15024
2024-01-22 22:33:38,572 [s0@group-058B3C611255->s4-GrpcLogAppender-LogAppenderDaemon] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38 with options []: sun.nio.ch.ChannelInputStream@4a77b513
2024-01-22 22:33:38,573 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(89)) - s4@group-058B3C611255: receive installSnapshot: s0->s4#0-t2,chunk:827da3ea-5cd0-453c-8c97-512b7869ed3c,0
2024-01-22 22:33:38,573 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@57918044
2024-01-22 22:33:38,574 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:38,574 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(505)) - s4@group-058B3C611255: set firstElectionSinceStartup to false for installSnapshot
2024-01-22 22:33:38,574 [grpc-default-executor-2] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s4@group-058B3C611255: change Leader from null to s0 at term 2 for installSnapshot, leader elected after 69ms
2024-01-22 22:33:38,575 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-827da3ea-5cd0-453c-8c97-512b7869ed3c
2024-01-22 22:33:38,575 [grpc-default-executor-2] INFO  storage.SnapshotManager (SnapshotManager.java:installSnapshot(111)) - Installing snapshot:s0->s4#0-t2,chunk:827da3ea-5cd0-453c-8c97-512b7869ed3c,0, to tmp dir:/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-827da3ea-5cd0-453c-8c97-512b7869ed3c
2024-01-22 22:33:38,575 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-827da3ea-5cd0-453c-8c97-512b7869ed3c
2024-01-22 22:33:38,575 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-827da3ea-5cd0-453c-8c97-512b7869ed3c/snapshot.1_38 with options [WRITE, CREATE]: sun.nio.ch.FileChannelImpl@6503b819
2024-01-22 22:33:38,575 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-827da3ea-5cd0-453c-8c97-512b7869ed3c/snapshot.1_38.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@4108119
2024-01-22 22:33:38,576 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-827da3ea-5cd0-453c-8c97-512b7869ed3c/snapshot.1_38.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-827da3ea-5cd0-453c-8c97-512b7869ed3c/snapshot.1_38.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:38,576 [grpc-default-executor-2] INFO  storage.SnapshotManager (SnapshotManager.java:rename(175)) - Installed snapshot, renaming temporary dir /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-827da3ea-5cd0-453c-8c97-512b7869ed3c to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm
2024-01-22 22:33:38,576 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm.tmp20240122-223338_576
2024-01-22 22:33:38,576 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/tmp/snapshot-827da3ea-5cd0-453c-8c97-512b7869ed3c to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm
2024-01-22 22:33:38,577 [grpc-default-executor-2] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm.tmp20240122-223338_576
2024-01-22 22:33:38,577 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.delete /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm.tmp20240122-223338_576
2024-01-22 22:33:38,577 [grpc-default-executor-2] INFO  raftlog.RaftLog (RaftLogBase.java:lambda$new$0(56)) - s4@group-058B3C611255-SegmentedRaftLog: snapshotIndex: updateIncreasingly -1 -> 38
2024-01-22 22:33:38,577 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:reinitialize(236)) - Reinitializing SimpleStateMachine4Testing:s4:group-058B3C611255
2024-01-22 22:33:38,577 [grpc-default-executor-2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-058B3C611255-SegmentedRaftLogWorker: flushIndex: setUnconditionally -1 -> 38
2024-01-22 22:33:38,577 [grpc-default-executor-2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-058B3C611255-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally -1 -> 38
2024-01-22 22:33:38,577 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@6d99291d
2024-01-22 22:33:38,577 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@1b63f1a2
2024-01-22 22:33:38,578 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38]
2024-01-22 22:33:38,578 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38 with options []: sun.nio.ch.ChannelInputStream@635edade
2024-01-22 22:33:38,578 [grpc-default-executor-2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:purgeImpl(381)) - purging segments:null
2024-01-22 22:33:38,578 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:checkAndInstallSnapshot(194)) - s4@group-058B3C611255: successfully install the entire snapshot-38
2024-01-22 22:33:38,578 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 41@client-8BE33A42BA81
2024-01-22 22:33:38,578 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 42@client-8BE33A42BA81
2024-01-22 22:33:38,578 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-8BE33A42BA81
2024-01-22 22:33:38,578 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 44@client-8BE33A42BA81
2024-01-22 22:33:38,578 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshotImpl(134)) - s4@group-058B3C611255: set new configuration index: 45
configurationEntry {
  peers {
    id: "s3"
    address: "0.0.0.0:15020"
    clientAddress: "0.0.0.0:15022"
    adminAddress: "0.0.0.0:15021"
    startupRole: FOLLOWER
  }
  peers {
    id: "s0"
    address: "localhost:15016"
    dataStreamAddress: "localhost:15019"
    clientAddress: "localhost:15018"
    adminAddress: "localhost:15017"
    startupRole: FOLLOWER
  }
}
 from snapshot
2024-01-22 22:33:38,578 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-8BE33A42BA81
2024-01-22 22:33:38,579 [grpc-default-executor-2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s4@group-058B3C611255: set configuration 45: peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,579 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 46@client-8BE33A42BA81
2024-01-22 22:33:38,579 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@40abc12a
2024-01-22 22:33:38,579 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 47@client-8BE33A42BA81
2024-01-22 22:33:38,579 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 48@client-8BE33A42BA81
2024-01-22 22:33:38,579 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 49@client-8BE33A42BA81
2024-01-22 22:33:38,579 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 50@client-8BE33A42BA81
2024-01-22 22:33:38,579 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 51@client-8BE33A42BA81
2024-01-22 22:33:38,580 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 52@client-8BE33A42BA81
2024-01-22 22:33:38,580 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 53@client-8BE33A42BA81
2024-01-22 22:33:38,580 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 54@client-8BE33A42BA81
2024-01-22 22:33:38,580 [grpc-default-executor-2] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,580 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 55@client-8BE33A42BA81
2024-01-22 22:33:38,580 [grpc-default-executor-2] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(100)) - s4@group-058B3C611255: reply installSnapshot: s0<-s4#0:OK-t0,SUCCESS,requestIndex=0
2024-01-22 22:33:38,580 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 56@client-8BE33A42BA81
2024-01-22 22:33:38,580 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 57@client-8BE33A42BA81
2024-01-22 22:33:38,580 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 58@client-8BE33A42BA81
2024-01-22 22:33:38,580 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 59@client-8BE33A42BA81
2024-01-22 22:33:38,580 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s4@group-058B3C611255-StateMachineUpdater: snapshotIndex: setUnconditionally -1 -> 38
2024-01-22 22:33:38,580 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s4@group-058B3C611255-StateMachineUpdater: appliedIndex: setUnconditionally -1 -> 38
2024-01-22 22:33:38,581 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(186)) - s4: Completed INSTALL_SNAPSHOT, lastRequest: s0->s4#0-t2,chunk:827da3ea-5cd0-453c-8c97-512b7869ed3c,0
2024-01-22 22:33:38,581 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(625)) - s0@group-058B3C611255->s4-InstallSnapshotResponseHandler: received the first reply s0<-s4#0:OK-t0,SUCCESS,requestIndex=0
2024-01-22 22:33:38,581 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$7(188)) - s4: Completed INSTALL_SNAPSHOT, lastReply: null
2024-01-22 22:33:38,581 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(636)) - s0@group-058B3C611255->s4-InstallSnapshotResponseHandler: Completed InstallSnapshot. Reply: serverReply {
  requestorId: "s0"
  replyId: "s4"
  raftGroupId {
    id: "z\327\345\253\2479O\003\270F\005\213<a\022U"
  }
  success: true
}
requestIndex: 0

2024-01-22 22:33:38,581 [grpc-default-executor-1] INFO  leader.FollowerInfo (FollowerInfoImpl.java:setAttemptedToInstallSnapshot(154)) - Follower s0@group-058B3C611255->s4 acknowledged installing snapshot
2024-01-22 22:33:38,581 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(701)) - s0@group-058B3C611255->s4-InstallSnapshotResponseHandler: follower responded installSnapshot COMPLETED
2024-01-22 22:33:38,582 [s0@group-058B3C611255->s4-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-058B3C611255->s4: snapshotIndex: setUnconditionally 0 -> 38
2024-01-22 22:33:38,582 [s0@group-058B3C611255->s4-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-058B3C611255->s4: matchIndex: setUnconditionally -1 -> 38
2024-01-22 22:33:38,582 [s0@group-058B3C611255->s4-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-058B3C611255->s4: nextIndex: setUnconditionally 0 -> 39
2024-01-22 22:33:38,582 [s0@group-058B3C611255->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(757)) - s0@group-058B3C611255->s4-GrpcLogAppender: installed snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.1_38] successfully
2024-01-22 22:33:38,589 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s4@group-058B3C611255: receive appendEntries(s0, 2, (t:1, i:38), 46, true, commits:[s0:c46, s3:c45, s4:c-1], cId:1, entries: [(t:2, i:39), CONFIGURATIONENTRY(current:id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:), (t:2, i:40), METADATAENTRY(c:39), (t:2, i:41), STATEMACHINELOGENTRY, 60@client-D4882E27370A, (t:2, i:42), METADATAENTRY(c:41), (t:2, i:43), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
), (t:2, i:44), METADATAENTRY(c:43), (t:2, i:45), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:), (t:2, i:46), METADATAENTRY(c:45)]
2024-01-22 22:33:38,589 [s4-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s4@group-058B3C611255: set configuration 39: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,589 [s4-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s4@group-058B3C611255: set configuration 43: peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[], old=peers:[s0|localhost:15016]|listeners:[]
2024-01-22 22:33:38,589 [s4-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s4@group-058B3C611255: set configuration 45: peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,589 [s4-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,589 [s4-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(430)) - s4@group-058B3C611255-SegmentedRaftLogWorker: Starting segment from index:39
2024-01-22 22:33:38,590 [s4@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_39 at position 0
2024-01-22 22:33:38,596 [s4@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(634)) - s4@group-058B3C611255-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_39
2024-01-22 22:33:38,597 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s4@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s4#1:OK-t2,SUCCESS,nextIndex=47,followerCommit=46,matchIndex=46
2024-01-22 22:33:38,597 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@6761426d
2024-01-22 22:33:38,598 [s0@group-058B3C611255-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 47: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[]
2024-01-22 22:33:38,599 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:46), 46, false, commits:[s0:c46, s3:c45, s4:c46], cId:10, entries: [(t:2, i:47), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s4"
address: "0.0.0.0:15024"
clientAddress: "0.0.0.0:15026"
adminAddress: "0.0.0.0:15025"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
)]
2024-01-22 22:33:38,599 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s4@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:46), 46, false, commits:[s0:c46, s3:c45, s4:c46], cId:2, entries: [(t:2, i:47), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s4"
address: "0.0.0.0:15024"
clientAddress: "0.0.0.0:15026"
adminAddress: "0.0.0.0:15025"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
)]
2024-01-22 22:33:38,599 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s3@group-058B3C611255: set configuration 47: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[]
2024-01-22 22:33:38,600 [s4-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s4@group-058B3C611255: set configuration 47: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[]
2024-01-22 22:33:38,600 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,600 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,600 [s4-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,600 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s3#10:OK-t2,SUCCESS,nextIndex=48,followerCommit=46,matchIndex=47
2024-01-22 22:33:38,601 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 41
2024-01-22 22:33:38,601 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 41, m19 -> (t:2, i:41), STATEMACHINELOGENTRY, 60@client-D4882E27370A
2024-01-22 22:33:38,601 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@6079bf31
2024-01-22 22:33:38,601 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s4@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s4#2:OK-t2,SUCCESS,nextIndex=48,followerCommit=46,matchIndex=47
2024-01-22 22:33:38,601 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@2263d0e5
2024-01-22 22:33:38,602 [s0@group-058B3C611255-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,602 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s4@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:47), 47, false, commits:[s0:c47, s3:c46, s4:c46], cId:3, entries: [(t:2, i:48), METADATAENTRY(c:47)]
2024-01-22 22:33:38,602 [s4-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,602 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:47), 47, false, commits:[s0:c47, s3:c46, s4:c46], cId:11, entries: [(t:2, i:48), METADATAENTRY(c:47)]
2024-01-22 22:33:38,603 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,603 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,603 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s4@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s4#3:OK-t2,SUCCESS,nextIndex=49,followerCommit=47,matchIndex=48
2024-01-22 22:33:38,603 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s3#11:OK-t2,SUCCESS,nextIndex=49,followerCommit=47,matchIndex=48
2024-01-22 22:33:38,603 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@43392335
2024-01-22 22:33:38,604 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s4@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:48), 47, false, commits:[s0:c47, s3:c46, s4:c46], cId:4, entries: [(t:2, i:49), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s4"
address: "0.0.0.0:15024"
clientAddress: "0.0.0.0:15026"
adminAddress: "0.0.0.0:15025"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:)]
2024-01-22 22:33:38,604 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,604 [s4-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s4@group-058B3C611255: set configuration 49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,604 [s4-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,604 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@616d475
2024-01-22 22:33:38,605 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,605 [s0@group-058B3C611255-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.2_48 at position 0
2024-01-22 22:33:38,605 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s4@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s4#4:OK-t2,SUCCESS,nextIndex=50,followerCommit=47,matchIndex=49
2024-01-22 22:33:38,607 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,607 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:48), 47, false, commits:[s0:c47, s3:c46, s4:c46], cId:12, entries: [(t:2, i:49), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s4"
address: "0.0.0.0:15024"
clientAddress: "0.0.0.0:15026"
adminAddress: "0.0.0.0:15025"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:)]
2024-01-22 22:33:38,607 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@138b7643
2024-01-22 22:33:38,607 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s3@group-058B3C611255: set configuration 49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,607 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,608 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:49), 49, false, commits:[s0:c49, s3:c47, s4:c47], cId:13, entries: [(t:2, i:50), METADATAENTRY(c:49)]
2024-01-22 22:33:38,608 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,609 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(152)) - client-C09951078025: add replied callId 62
2024-01-22 22:33:38,609 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s3#12:OK-t2,SUCCESS,nextIndex=50,followerCommit=47,matchIndex=49
2024-01-22 22:33:38,609 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,609 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s3#13:OK-t2,SUCCESS,nextIndex=51,followerCommit=49,matchIndex=50
2024-01-22 22:33:38,609 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@69683fb5
2024-01-22 22:33:38,610 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,612 [s3@group-058B3C611255-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.2_49 at position 0
2024-01-22 22:33:38,615 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s4@group-058B3C611255: receive appendEntries(s0, 2, (t:2, i:49), 49, false, commits:[s0:c49, s3:c47, s4:c47], cId:5, entries: [(t:2, i:50), METADATAENTRY(c:49)]
2024-01-22 22:33:38,615 [s4-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,615 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_48 with options [READ]: sun.nio.ch.FileChannelImpl@3df9cdea
2024-01-22 22:33:38,616 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_48.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@18552da4
2024-01-22 22:33:38,616 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s4@group-058B3C611255: succeeded to handle AppendEntries. Reply: s0<-s4#5:OK-t2,SUCCESS,nextIndex=51,followerCommit=49,matchIndex=50
2024-01-22 22:33:38,616 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_48.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_48.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:38,616 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@7e142c75
2024-01-22 22:33:38,616 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-058B3C611255-StateMachineUpdater: Took a snapshot at index 48
2024-01-22 22:33:38,617 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-058B3C611255-StateMachineUpdater: snapshotIndex: updateIncreasingly 38 -> 48
2024-01-22 22:33:38,617 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@6c10fe93
2024-01-22 22:33:38,619 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,620 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:38,620 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,621 [s4@group-058B3C611255-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.2_49 at position 0
2024-01-22 22:33:38,622 [Time-limited test] INFO  impl.RaftServerTestUtil (RaftServerTestUtil.java:waitAndCheckNewConf(94)) - waitAndCheckNewConf: peers=[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016], deadPeers=null, printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-058B3C611255:t2, leader=s0, voted=null, raftlog=Memoized:s3@group-058B3C611255-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
  s4:  RUNNING  FOLLOWER s4@group-058B3C611255:t2, leader=s0, voted=null, raftlog=Memoized:s4@group-058B3C611255-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
  s0:  RUNNING    LEADER s0@group-058B3C611255:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:38,622 [Time-limited test] INFO  impl.RaftServerTestUtil (RaftServerTestUtil.java:waitAndCheckNewConf(103)) - checking  FOLLOWER s3@group-058B3C611255:t2, leader=s0, voted=null, raftlog=Memoized:s3@group-058B3C611255-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:38,622 [Time-limited test] INFO  impl.RaftServerTestUtil (RaftServerTestUtil.java:waitAndCheckNewConf(103)) - checking  FOLLOWER s4@group-058B3C611255:t2, leader=s0, voted=null, raftlog=Memoized:s4@group-058B3C611255-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:38,622 [Time-limited test] INFO  impl.RaftServerTestUtil (RaftServerTestUtil.java:waitAndCheckNewConf(103)) - checking    LEADER s0@group-058B3C611255:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:38,622 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:killServer(534)) - killServer s0
2024-01-22 22:33:38,623 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(417)) - s0: close
2024-01-22 22:33:38,623 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2024-01-22 22:33:38,623 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$1(457)) - s0@group-058B3C611255: shutdown
2024-01-22 22:33:38,623 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(74)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-058B3C611255,id=s0
2024-01-22 22:33:38,623 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(95)) - s0: shutdown s0@group-058B3C611255-LeaderStateImpl
2024-01-22 22:33:38,623 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(287)) - s0@group-058B3C611255-PendingRequests: sendNotLeaderResponses
2024-01-22 22:33:38,623 [s0@group-058B3C611255->s3-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-058B3C611255->s3-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:38,623 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_49 with options [READ]: sun.nio.ch.FileChannelImpl@12aec8d3
2024-01-22 22:33:38,625 [grpc-default-executor-4] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(186)) - s3: Completed APPEND_ENTRIES, lastRequest: s0->s3#13-t2,previous=(t:2, i:49),leaderCommit=49,initializing? false,entries: size=1, first=(t:2, i:50), METADATAENTRY(c:49)
2024-01-22 22:33:38,625 [grpc-default-executor-4] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$7(188)) - s3: Completed APPEND_ENTRIES, lastReply: null
2024-01-22 22:33:38,625 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_49.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@50fba8c3
2024-01-22 22:33:38,625 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(546)) - s0@group-058B3C611255->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2024-01-22 22:33:38,625 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_49.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_49.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:38,625 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s3@group-058B3C611255-StateMachineUpdater: Took a snapshot at index 49
2024-01-22 22:33:38,625 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-058B3C611255-StateMachineUpdater: snapshotIndex: updateIncreasingly 38 -> 49
2024-01-22 22:33:38,628 [s0@group-058B3C611255->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s0@group-058B3C611255->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:38,628 [grpc-default-executor-4] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(186)) - s3: Completed APPEND_ENTRIES, lastRequest: null
2024-01-22 22:33:38,628 [Thread-289] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s3 Close channels
2024-01-22 22:33:38,629 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-058B3C611255-StateMachineUpdater: set stopIndex = 50
2024-01-22 22:33:38,630 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(186)) - s4: Completed APPEND_ENTRIES, lastRequest: s0->s4#5-t2,previous=(t:2, i:49),leaderCommit=49,initializing? false,entries: size=1, first=(t:2, i:50), METADATAENTRY(c:49)
2024-01-22 22:33:38,630 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$7(188)) - s4: Completed APPEND_ENTRIES, lastReply: null
2024-01-22 22:33:38,630 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(186)) - s4: Completed APPEND_ENTRIES, lastRequest: null
2024-01-22 22:33:38,631 [grpc-default-executor-4] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$7(188)) - s3: Completed APPEND_ENTRIES, lastReply: serverReply {
  requestorId: "s0"
  replyId: "s3"
  raftGroupId {
    id: "z\327\345\253\2479O\003\270F\005\213<a\022U"
  }
  success: true
}
term: 2
nextIndex: 39
followerCommit: 38
matchIndex: 18446744073709551615
isHearbeat: true

2024-01-22 22:33:38,631 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(546)) - s0@group-058B3C611255->s4-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2024-01-22 22:33:38,631 [s0@group-058B3C611255-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.2_50 at position 0
2024-01-22 22:33:38,631 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$7(188)) - s4: Completed APPEND_ENTRIES, lastReply: serverReply {
  requestorId: "s0"
  replyId: "s4"
  raftGroupId {
    id: "z\327\345\253\2479O\003\270F\005\213<a\022U"
  }
  success: true
}
term: 2
nextIndex: 39
followerCommit: 38
matchIndex: 18446744073709551615
isHearbeat: true

2024-01-22 22:33:38,633 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_49 with options [READ]: sun.nio.ch.FileChannelImpl@424c2faa
2024-01-22 22:33:38,633 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_49.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@7249eeea
2024-01-22 22:33:38,634 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_49.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_49.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:38,634 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s4@group-058B3C611255-StateMachineUpdater: Took a snapshot at index 49
2024-01-22 22:33:38,634 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s4@group-058B3C611255-StateMachineUpdater: snapshotIndex: updateIncreasingly 38 -> 49
2024-01-22 22:33:38,637 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(546)) - s0@group-058B3C611255->s4-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2024-01-22 22:33:38,639 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(546)) - s0@group-058B3C611255->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2024-01-22 22:33:38,639 [Thread-290] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s4 Close channels
2024-01-22 22:33:38,639 [grpc-default-executor-4] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(226)) - s0@group-058B3C611255->s3-GrpcLogAppender: Failed to getClient for s3
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:65)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:114)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:196)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:201)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$800(GrpcLogAppender.java:62)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:547)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:479)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:489)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:453)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:486)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-22 22:33:38,641 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_50 with options [READ]: sun.nio.ch.FileChannelImpl@41bd4417
2024-01-22 22:33:38,641 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_50.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@32d84757
2024-01-22 22:33:38,641 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2024-01-22 22:33:38,641 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server GrpcServerProtocolService now
2024-01-22 22:33:38,642 [s0@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_50.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_50.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:38,642 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-058B3C611255-StateMachineUpdater: Took a snapshot at index 50
2024-01-22 22:33:38,642 [s0@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-058B3C611255-StateMachineUpdater: snapshotIndex: updateIncreasingly 48 -> 50
2024-01-22 22:33:38,642 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server GrpcServerProtocolService successfully
2024-01-22 22:33:38,642 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2024-01-22 22:33:38,642 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(427)) - s0@group-058B3C611255: applyIndex: 50
2024-01-22 22:33:38,642 [s0@group-058B3C611255-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-058B3C611255-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2024-01-22 22:33:38,644 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2024-01-22 22:33:38,908 [s4@group-058B3C611255-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-058B3C611255-FollowerState: change to CANDIDATE, lastRpcElapsedTime:292503386ns, electionTimeout:182ms
2024-01-22 22:33:38,908 [s4@group-058B3C611255-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s4: shutdown s4@group-058B3C611255-FollowerState
2024-01-22 22:33:38,909 [s4@group-058B3C611255-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s4@group-058B3C611255: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2024-01-22 22:33:38,909 [s4@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2024-01-22 22:33:38,909 [s4@group-058B3C611255-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s4: start s4@group-058B3C611255-LeaderElection7
2024-01-22 22:33:38,909 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s4@group-058B3C611255: change Leader from s0 to null at term 2 for PRE_VOTE
2024-01-22 22:33:38,909 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s4@group-058B3C611255-LeaderElection7 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,910 [s4@group-058B3C611255-LeaderElection7-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s3|localhost:15020
2024-01-22 22:33:38,910 [s4@group-058B3C611255-LeaderElection7-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s0|localhost:15016
2024-01-22 22:33:38,914 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1386)) - s3@group-058B3C611255: receive requestVote(PRE_VOTE, s4, group-058B3C611255, 2, (t:2, i:50))
2024-01-22 22:33:38,915 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-058B3C611255-FOLLOWER: accept PRE_VOTE from s4: our priority 0 <= candidate's priority 0
2024-01-22 22:33:38,915 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1419)) - s3@group-058B3C611255 replies to PRE_VOTE vote request: s4<-s3#0:OK-t2. Peer's state: s3@group-058B3C611255:t2, leader=s0, voted=null, raftlog=Memoized:s3@group-058B3C611255-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,917 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-058B3C611255-LeaderElection7 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:38,918 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-058B3C611255-LeaderElection7: PRE_VOTE PASSED received 1 response(s) and 1 exception(s):
2024-01-22 22:33:38,918 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s4<-s3#0:OK-t2
2024-01-22 22:33:38,918 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:38,918 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s4@group-058B3C611255-LeaderElection7 PRE_VOTE round 0: result PASSED
2024-01-22 22:33:38,918 [s4@group-058B3C611255-LeaderElection7] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@34f39000
2024-01-22 22:33:38,920 [s4@group-058B3C611255-LeaderElection7] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:38,920 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(321)) - s4@group-058B3C611255-LeaderElection7 ELECTION round 0: submit vote requests at term 3 for 49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,920 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-058B3C611255-LeaderElection7 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:38,920 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1386)) - s3@group-058B3C611255: receive requestVote(ELECTION, s4, group-058B3C611255, 3, (t:2, i:50))
2024-01-22 22:33:38,921 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-058B3C611255-FOLLOWER: accept ELECTION from s4: our priority 0 <= candidate's priority 0
2024-01-22 22:33:38,921 [grpc-default-executor-4] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s3@group-058B3C611255: change Leader from s0 to null at term 3 for updateCurrentTerm
2024-01-22 22:33:38,921 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s3@group-058B3C611255: changes role from  FOLLOWER to FOLLOWER at term 3 for candidate:s4
2024-01-22 22:33:38,921 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s3: shutdown s3@group-058B3C611255-FollowerState
2024-01-22 22:33:38,921 [s3@group-058B3C611255-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s3@group-058B3C611255-FollowerState was interrupted
2024-01-22 22:33:38,921 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s3: start s3@group-058B3C611255-FollowerState
2024-01-22 22:33:38,921 [grpc-default-executor-4] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@5cf8c8e2
2024-01-22 22:33:38,922 [grpc-default-executor-4] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options [REPLACE_EXISTING]
2024-01-22 22:33:38,922 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1419)) - s3@group-058B3C611255 replies to ELECTION vote request: s4<-s3#0:OK-t3. Peer's state: s3@group-058B3C611255:t3, leader=null, voted=s4, raftlog=Memoized:s3@group-058B3C611255-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,923 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-058B3C611255-LeaderElection7: ELECTION PASSED received 1 response(s) and 1 exception(s):
2024-01-22 22:33:38,923 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s4<-s3#0:OK-t3
2024-01-22 22:33:38,923 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:38,923 [s4@group-058B3C611255-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s4@group-058B3C611255-LeaderElection7 ELECTION round 0: result PASSED
2024-01-22 22:33:38,923 [s4@group-058B3C611255-LeaderElection7] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(131)) - s4: shutdown s4@group-058B3C611255-LeaderElection7
2024-01-22 22:33:38,923 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s4@group-058B3C611255: changes role from CANDIDATE to LEADER at term 3 for changeToLeader
2024-01-22 22:33:38,923 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:38,924 [s4@group-058B3C611255-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2024-01-22 22:33:38,925 [s4@group-058B3C611255-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.log-message.batch.duration = 5s (default)
2024-01-22 22:33:38,926 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:38,926 [s4@group-058B3C611255-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:38,926 [s4@group-058B3C611255-LeaderElection7] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s4: start s4@group-058B3C611255-LeaderStateImpl
2024-01-22 22:33:38,926 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s4@group-058B3C611255: change Leader from null to s4 at term 3 for becomeLeader, leader elected after 16ms
2024-01-22 22:33:38,926 [s4@group-058B3C611255-LeaderElection7] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(435)) - s4@group-058B3C611255-SegmentedRaftLogWorker: Rolling segment log-39_50 to index:50
2024-01-22 22:33:38,926 [s4@group-058B3C611255-LeaderElection7] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s4@group-058B3C611255: set configuration 51: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,927 [s4@group-058B3C611255-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_39 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_39-50
2024-01-22 22:33:38,927 [s4@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(591)) - s4@group-058B3C611255-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_39 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_39-50
2024-01-22 22:33:38,927 [s4@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_51 at position 0
2024-01-22 22:33:38,927 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s4@group-058B3C611255->s0-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2024-01-22 22:33:38,928 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s4@group-058B3C611255->s0-GrpcLogAppender: Follower failed (request=null, errorCount=1); keep nextIndex (51) unchanged and retry.
2024-01-22 22:33:38,929 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s4@group-058B3C611255->s0-GrpcLogAppender: Follower failed (request=null, errorCount=2); keep nextIndex (52) unchanged and retry.
2024-01-22 22:33:38,942 [s4@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(634)) - s4@group-058B3C611255-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_51
2024-01-22 22:33:38,942 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setLeader(269)) - s3@group-058B3C611255: change Leader from null to s4 at term 3 for appendEntries, leader elected after 21ms
2024-01-22 22:33:38,942 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s4, 3, (t:2, i:50), 49, false, commits:[s4:c49, s3:c47, s0:c49], cId:1, entries: [(t:3, i:51), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:15020"
clientAddress: "0.0.0.0:15022"
adminAddress: "0.0.0.0:15021"
startupRole: FOLLOWER
,id: "s4"
address: "0.0.0.0:15024"
clientAddress: "0.0.0.0:15026"
adminAddress: "0.0.0.0:15025"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:15016"
dataStreamAddress: "localhost:15019"
clientAddress: "localhost:15018"
adminAddress: "localhost:15017"
startupRole: FOLLOWER
, old:)]
2024-01-22 22:33:38,942 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s3@group-058B3C611255: set configuration 51: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:38,943 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,943 [s3-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(435)) - s3@group-058B3C611255-SegmentedRaftLogWorker: Rolling segment log-39_50 to index:50
2024-01-22 22:33:38,944 [s3@group-058B3C611255-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_39 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_39-50
2024-01-22 22:33:38,944 [s3@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(591)) - s3@group-058B3C611255-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_39 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_39-50
2024-01-22 22:33:38,944 [s3@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_51 at position 0
2024-01-22 22:33:38,950 [s3@group-058B3C611255-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(634)) - s3@group-058B3C611255-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_51
2024-01-22 22:33:38,950 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s4<-s3#1:OK-t3,SUCCESS,nextIndex=52,followerCommit=49,matchIndex=51
2024-01-22 22:33:38,951 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3a38a78e
2024-01-22 22:33:38,953 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: receive appendEntries(s4, 3, (t:3, i:51), 51, false, commits:[s4:c51, s3:c49, s0:c49], cId:2, entries: [(t:3, i:52), METADATAENTRY(c:51)]
2024-01-22 22:33:38,953 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:lambda$resetClient$1(217)) - s4@group-058B3C611255->s0-GrpcLogAppender: Follower failed (request=null, errorCount=5); keep nextIndex (53) unchanged and retry.
2024-01-22 22:33:38,953 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:38,953 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(471)) - truncateIndex=-1, arrayIndex=0
2024-01-22 22:33:38,953 [s4@group-058B3C611255-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(321)) - leader is ready since appliedIndex == 51 >= startIndex == 51
2024-01-22 22:33:38,953 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1516)) - s3@group-058B3C611255: succeeded to handle AppendEntries. Reply: s4<-s3#2:OK-t3,SUCCESS,nextIndex=53,followerCommit=51,matchIndex=52
2024-01-22 22:33:38,953 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@5a511962
2024-01-22 22:33:38,954 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options [REPLACE_EXISTING]
2024-01-22 22:33:39,610 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(245)) - s0@group-058B3C611255-SegmentedRaftLogWorker close()
2024-01-22 22:33:39,611 [JvmPauseMonitor6] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2024-01-22 22:33:39,611 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(381)) - newRaftServer: s0, group-058B3C611255:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016], format? false
2024-01-22 22:33:39,611 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2024-01-22 22:33:39,611 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:39,611 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 15017 (custom)
2024-01-22 22:33:39,611 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2024-01-22 22:33:39,611 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 15018 (custom)
2024-01-22 22:33:39,612 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2024-01-22 22:33:39,612 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 15016 (custom)
2024-01-22 22:33:39,612 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2024-01-22 22:33:39,612 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:39,612 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2024-01-22 22:33:39,612 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:39,612 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2024-01-22 22:33:39,612 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2024-01-22 22:33:39,612 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2024-01-22 22:33:39,613 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2024-01-22 22:33:39,613 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:39,613 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2024-01-22 22:33:39,613 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:39,613 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0] (custom)
2024-01-22 22:33:39,613 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2024-01-22 22:33:39,613 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2024-01-22 22:33:39,614 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(265)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255
2024-01-22 22:33:39,614 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(101)) - s0: addNew group-058B3C611255:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016] returns group-058B3C611255:java.util.concurrent.CompletableFuture@6ecfbcd6[Not completed]
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(211)) - s0: new RaftServerImpl for group-058B3C611255:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016] with SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.member.majority-add = false (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-058B3C611255: ConfigurationManager, init=-1: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null, confs=<EMPTY_MAP>
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2024-01-22 22:33:39,614 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2024-01-22 22:33:39,615 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2024-01-22 22:33:39,615 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2024-01-22 22:33:39,615 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2024-01-22 22:33:39,615 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2024-01-22 22:33:39,615 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2024-01-22 22:33:39,615 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2024-01-22 22:33:39,615 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2024-01-22 22:33:39,615 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2024-01-22 22:33:39,615 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2024-01-22 22:33:39,615 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2024-01-22 22:33:39,615 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0] (custom)
2024-01-22 22:33:39,616 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(228)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/in_use.lock acquired by nodename 3663@fv-az531-398
2024-01-22 22:33:39,616 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.deleteIfExists /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.tmp
2024-01-22 22:33:39,617 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta with options []: sun.nio.ch.ChannelInputStream@21741b59
2024-01-22 22:33:39,617 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:analyzeAndRecoverStorage(119)) - Read RaftStorageMetadata{term=2, votedFor=s0} from /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta
2024-01-22 22:33:39,617 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/raft-meta.conf with options []: sun.nio.ch.ChannelInputStream@2fb3f107
2024-01-22 22:33:39,617 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:39,617 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2024-01-22 22:33:39,617 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_50.md5 with options []: sun.nio.ch.ChannelInputStream@2b8c7029
2024-01-22 22:33:39,617 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:2, i:50):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_50]
2024-01-22 22:33:39,617 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.2_50 with options []: sun.nio.ch.ChannelInputStream@6e8efb3c
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 41@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 42@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 44@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 46@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 47@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 48@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 49@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 50@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 51@client-8BE33A42BA81
2024-01-22 22:33:39,618 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 52@client-8BE33A42BA81
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 53@client-8BE33A42BA81
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 54@client-8BE33A42BA81
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 55@client-8BE33A42BA81
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 56@client-8BE33A42BA81
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 57@client-8BE33A42BA81
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 58@client-8BE33A42BA81
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 59@client-8BE33A42BA81
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 41, m19 -> (t:2, i:41), STATEMACHINELOGENTRY, 60@client-D4882E27370A
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2024-01-22 22:33:39,619 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-058B3C611255-cacheEviction-AwaitToRun,5,main] started
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(182)) - new s0@group-058B3C611255-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2024-01-22 22:33:39,620 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 8MB (=8388608) (default)
2024-01-22 22:33:39,621 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2024-01-22 22:33:39,622 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2024-01-22 22:33:39,622 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2024-01-22 22:33:39,622 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2024-01-22 22:33:39,622 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_39 with options []: sun.nio.ch.ChannelInputStream@6f218b67
2024-01-22 22:33:39,622 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 39: peers:[s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:39,622 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 43: peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[], old=peers:[s0|localhost:15016]|listeners:[]
2024-01-22 22:33:39,622 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 45: peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:39,623 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 47: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=peers:[s3|0.0.0.0:15020, s0|localhost:15016]|listeners:[]
2024-01-22 22:33:39,623 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(386)) - s0@group-058B3C611255: set configuration 49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:39,623 [s0-impl-thread1] INFO  segmented.LogSegment (LogSegment.java:loadSegment(175)) - Successfully read 12 entries from segment file /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s0/7ad7e5ab-a739-4f03-b846-058b3c611255/current/log_inprogress_39
2024-01-22 22:33:39,623 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-058B3C611255-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> 50
2024-01-22 22:33:39,623 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-058B3C611255-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2024-01-22 22:33:39,623 [s0-impl-thread1] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open log_inprogress_39 (append) at position 1092
2024-01-22 22:33:39,623 [s0-impl-thread1] INFO  raftlog.RaftLog (RaftLogBase.java:lambda$new$0(56)) - s0@group-058B3C611255-SegmentedRaftLog: purgeIndex: updateIncreasingly -1 -> 38
2024-01-22 22:33:39,623 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(346)) - s0@group-058B3C611255: start as a follower, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null
2024-01-22 22:33:39,623 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(333)) - s0@group-058B3C611255: changes role from      null to FOLLOWER at term 2 for startAsFollower
2024-01-22 22:33:39,623 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(140)) - s0: start s0@group-058B3C611255-FollowerState
2024-01-22 22:33:39,624 [s0@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2024-01-22 22:33:39,624 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-058B3C611255,id=s0
2024-01-22 22:33:39,624 [s0@group-058B3C611255-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2024-01-22 22:33:39,624 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:register(58)) - register mxBean class org.apache.ratis.server.impl.RaftServerJmxAdapter as Ratis:service=RaftServer,group=group-058B3C611255,id=s0
2024-01-22 22:33:39,624 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2024-01-22 22:33:39,624 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2024-01-22 22:33:39,624 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2024-01-22 22:33:39,624 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2024-01-22 22:33:39,624 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2024-01-22 22:33:39,624 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(407)) - s0: start RPC server
2024-01-22 22:33:39,625 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15018
2024-01-22 22:33:39,626 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15016
2024-01-22 22:33:39,626 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(308)) - s0: GrpcService started, listening on 15017
2024-01-22 22:33:39,626 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2024-01-22 22:33:39,626 [JvmPauseMonitor9] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2024-01-22 22:33:39,626 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-058B3C611255:t3, leader=s4, voted=s4, raftlog=Memoized:s3@group-058B3C611255-SegmentedRaftLog:OPENED:c52, conf=51: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
  s4:  RUNNING    LEADER s4@group-058B3C611255:t3, leader=s4, voted=s4, raftlog=Memoized:s4@group-058B3C611255-SegmentedRaftLog:OPENED:c52, conf=51: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
  s0:  RUNNING  FOLLOWER s0@group-058B3C611255:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:39,626 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(125)) - printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-058B3C611255:t3, leader=s4, voted=s4, raftlog=Memoized:s3@group-058B3C611255-SegmentedRaftLog:OPENED:c52, conf=51: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
  s4:  RUNNING    LEADER s4@group-058B3C611255:t3, leader=s4, voted=s4, raftlog=Memoized:s4@group-058B3C611255-SegmentedRaftLog:OPENED:c52, conf=51: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
  s0:  RUNNING  FOLLOWER s0@group-058B3C611255:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:39,627 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 0) 0 term: 1, index: 1, stateMachineLogEntry {,   logData: "m0",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 41, }, 
2024-01-22 22:33:39,627 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 1) 1 term: 1, index: 3, stateMachineLogEntry {,   logData: "m1",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 42, }, 
2024-01-22 22:33:39,627 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 2) 2 term: 1, index: 5, stateMachineLogEntry {,   logData: "m2",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 43, }, 
2024-01-22 22:33:39,627 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 3) 3 term: 1, index: 7, stateMachineLogEntry {,   logData: "m3",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 44, }, 
2024-01-22 22:33:39,627 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 4) 4 term: 1, index: 9, stateMachineLogEntry {,   logData: "m4",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 45, }, 
2024-01-22 22:33:39,628 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 5) 5 term: 1, index: 11, stateMachineLogEntry {,   logData: "m5",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 46, }, 
2024-01-22 22:33:39,628 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 6) 6 term: 1, index: 13, stateMachineLogEntry {,   logData: "m6",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 47, }, 
2024-01-22 22:33:39,628 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 7) 7 term: 1, index: 15, stateMachineLogEntry {,   logData: "m7",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 48, }, 
2024-01-22 22:33:39,628 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 8) 8 term: 1, index: 17, stateMachineLogEntry {,   logData: "m8",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 49, }, 
2024-01-22 22:33:39,628 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 9) 9 term: 1, index: 19, stateMachineLogEntry {,   logData: "m9",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 50, }, 
2024-01-22 22:33:39,628 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 10) 10 term: 1, index: 21, stateMachineLogEntry {,   logData: "m10",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 51, }, 
2024-01-22 22:33:39,628 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 11) 11 term: 1, index: 23, stateMachineLogEntry {,   logData: "m11",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 52, }, 
2024-01-22 22:33:39,629 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 12) 12 term: 1, index: 25, stateMachineLogEntry {,   logData: "m12",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 53, }, 
2024-01-22 22:33:39,629 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 13) 13 term: 1, index: 27, stateMachineLogEntry {,   logData: "m13",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 54, }, 
2024-01-22 22:33:39,629 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 14) 14 term: 1, index: 29, stateMachineLogEntry {,   logData: "m14",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 55, }, 
2024-01-22 22:33:39,629 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 15) 15 term: 1, index: 31, stateMachineLogEntry {,   logData: "m15",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 56, }, 
2024-01-22 22:33:39,629 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 16) 16 term: 1, index: 33, stateMachineLogEntry {,   logData: "m16",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 57, }, 
2024-01-22 22:33:39,629 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 17) 17 term: 1, index: 35, stateMachineLogEntry {,   logData: "m17",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 58, }, 
2024-01-22 22:33:39,629 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 18) 18 term: 1, index: 37, stateMachineLogEntry {,   logData: "m18",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "`7\334Y\306!J8\240V\213\343:B\272\201",   callId: 59, }, 
2024-01-22 22:33:39,630 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 19) 19 term: 2, index: 41, stateMachineLogEntry {,   logData: "m19",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\357\236\tb\0303A{\256\353\324\210.\'7\n",   callId: 60, }, 
2024-01-22 22:33:39,630 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - ************************************************************** 
2024-01-22 22:33:39,630 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - *** 
2024-01-22 22:33:39,630 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - ***     Stopping MiniRaftClusterWithGrpc
2024-01-22 22:33:39,630 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - *** 
2024-01-22 22:33:39,630 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - ************************************************************** 
2024-01-22 22:33:39,630 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(837)) - printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-058B3C611255:t3, leader=s4, voted=s4, raftlog=Memoized:s3@group-058B3C611255-SegmentedRaftLog:OPENED:c52, conf=51: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
  s4:  RUNNING    LEADER s4@group-058B3C611255:t3, leader=s4, voted=s4, raftlog=Memoized:s4@group-058B3C611255-SegmentedRaftLog:OPENED:c52, conf=51: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
  s0:  RUNNING  FOLLOWER s0@group-058B3C611255:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null RUNNING
2024-01-22 22:33:39,630 [MiniRaftCluster-12] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(417)) - s3: close
2024-01-22 22:33:39,630 [MiniRaftCluster-13] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(417)) - s4: close
2024-01-22 22:33:39,630 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$1(457)) - s3@group-058B3C611255: shutdown
2024-01-22 22:33:39,630 [MiniRaftCluster-14] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(417)) - s0: close
2024-01-22 22:33:39,630 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(74)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-058B3C611255,id=s3
2024-01-22 22:33:39,631 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2024-01-22 22:33:39,631 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2024-01-22 22:33:39,631 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s3: shutdown s3@group-058B3C611255-FollowerState
2024-01-22 22:33:39,631 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$1(457)) - s0@group-058B3C611255: shutdown
2024-01-22 22:33:39,631 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2024-01-22 22:33:39,631 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$1(457)) - s4@group-058B3C611255: shutdown
2024-01-22 22:33:39,631 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(74)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-058B3C611255,id=s0
2024-01-22 22:33:39,631 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(74)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-058B3C611255,id=s4
2024-01-22 22:33:39,632 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(95)) - s4: shutdown s4@group-058B3C611255-LeaderStateImpl
2024-01-22 22:33:39,632 [s4@group-058B3C611255->s3-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s4@group-058B3C611255->s3-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:39,631 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(111)) - s0: shutdown s0@group-058B3C611255-FollowerState
2024-01-22 22:33:39,632 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-058B3C611255-StateMachineUpdater: set stopIndex = 50
2024-01-22 22:33:39,632 [s4@group-058B3C611255->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(289)) - s4@group-058B3C611255->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2024-01-22 22:33:39,632 [s4-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(287)) - s4@group-058B3C611255-PendingRequests: sendNotLeaderResponses
2024-01-22 22:33:39,632 [s3-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s3@group-058B3C611255-StateMachineUpdater: set stopIndex = 52
2024-01-22 22:33:39,632 [s3@group-058B3C611255-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s3@group-058B3C611255-FollowerState was interrupted
2024-01-22 22:33:39,632 [grpc-default-executor-7] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(186)) - s3: Completed APPEND_ENTRIES, lastRequest: null
2024-01-22 22:33:39,632 [s4-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s4@group-058B3C611255-StateMachineUpdater: set stopIndex = 52
2024-01-22 22:33:39,632 [s0@group-058B3C611255-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-058B3C611255-FollowerState was interrupted
2024-01-22 22:33:39,632 [grpc-default-executor-7] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$7(188)) - s3: Completed APPEND_ENTRIES, lastReply: serverReply {
  requestorId: "s4"
  replyId: "s3"
  raftGroupId {
    id: "z\327\345\253\2479O\003\270F\005\213<a\022U"
  }
  callId: 11
  success: true
}
term: 3
nextIndex: 53
followerCommit: 52
matchIndex: 18446744073709551615
isHearbeat: true

2024-01-22 22:33:39,633 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2024-01-22 22:33:39,633 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server GrpcServerProtocolService now
2024-01-22 22:33:39,634 [grpc-default-executor-7] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(546)) - s4@group-058B3C611255->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2024-01-22 22:33:39,634 [s3@group-058B3C611255-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.3_52 at position 0
2024-01-22 22:33:39,634 [s4@group-058B3C611255-StateMachineUpdater] INFO  segmented.BufferedWriteChannel (BufferedWriteChannel.java:open(61)) - open snapshot.3_52 at position 0
2024-01-22 22:33:39,635 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(186)) - s3: Completed APPEND_ENTRIES, lastRequest: s4->s3#2-t3,previous=(t:3, i:51),leaderCommit=51,initializing? false,entries: size=1, first=(t:3, i:52), METADATAENTRY(c:51)
2024-01-22 22:33:39,635 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$7(188)) - s3: Completed APPEND_ENTRIES, lastReply: null
2024-01-22 22:33:39,635 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2024-01-22 22:33:39,635 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s3: shutdown server GrpcServerProtocolService now
2024-01-22 22:33:39,635 [grpc-default-executor-7] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(546)) - s4@group-058B3C611255->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2024-01-22 22:33:39,637 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(427)) - s0@group-058B3C611255: applyIndex: 50
2024-01-22 22:33:39,640 [s0@group-058B3C611255-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-058B3C611255-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2024-01-22 22:33:39,645 [Thread-328] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s0 Close channels
2024-01-22 22:33:39,645 [Thread-325] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s3 Close channels
2024-01-22 22:33:39,646 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server GrpcServerProtocolService successfully
2024-01-22 22:33:39,646 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2024-01-22 22:33:39,646 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2024-01-22 22:33:39,646 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s4: shutdown server GrpcServerProtocolService now
2024-01-22 22:33:39,647 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.3_52 with options [READ]: sun.nio.ch.FileChannelImpl@726c100a
2024-01-22 22:33:39,647 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.3_52.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@16e0b6c4
2024-01-22 22:33:39,649 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s3: shutdown server GrpcServerProtocolService successfully
2024-01-22 22:33:39,649 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2024-01-22 22:33:39,649 [s3@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.3_52.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s3/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.3_52.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:39,649 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s4: shutdown server GrpcServerProtocolService successfully
2024-01-22 22:33:39,649 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s3@group-058B3C611255-StateMachineUpdater: Took a snapshot at index 52
2024-01-22 22:33:39,649 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(317)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2024-01-22 22:33:39,649 [s3@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-058B3C611255-StateMachineUpdater: snapshotIndex: updateIncreasingly 49 -> 52
2024-01-22 22:33:39,651 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2024-01-22 22:33:39,653 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2024-01-22 22:33:39,653 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.3_52 with options [READ]: sun.nio.ch.FileChannelImpl@65104338
2024-01-22 22:33:39,653 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.3_52.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@4602114f
2024-01-22 22:33:39,654 [s3-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(427)) - s3@group-058B3C611255: applyIndex: 52
2024-01-22 22:33:39,654 [s4@group-058B3C611255-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.3_52.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/67f5edbf/MiniRaftClusterWithGrpc87b0c5fc/s4/7ad7e5ab-a739-4f03-b846-058b3c611255/sm/snapshot.3_52.md5 with options [REPLACE_EXISTING]
2024-01-22 22:33:39,654 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s4@group-058B3C611255-StateMachineUpdater: Took a snapshot at index 52
2024-01-22 22:33:39,654 [s4@group-058B3C611255-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s4@group-058B3C611255-StateMachineUpdater: snapshotIndex: updateIncreasingly 49 -> 52
2024-01-22 22:33:39,655 [s4-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(427)) - s4@group-058B3C611255: applyIndex: 52
2024-01-22 22:33:39,655 [s4@group-058B3C611255-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s4@group-058B3C611255-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2024-01-22 22:33:39,655 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(326)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2024-01-22 22:33:39,655 [s3@group-058B3C611255-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s3@group-058B3C611255-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2024-01-22 22:33:39,952 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(245)) - s4@group-058B3C611255-SegmentedRaftLogWorker close()
2024-01-22 22:33:39,953 [JvmPauseMonitor8] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s4: Stopped
2024-01-22 22:33:39,954 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(245)) - s3@group-058B3C611255-SegmentedRaftLogWorker close()
2024-01-22 22:33:39,957 [JvmPauseMonitor7] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s3: Stopped
2024-01-22 22:33:40,624 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(245)) - s0@group-058B3C611255-SegmentedRaftLogWorker close()
2024-01-22 22:33:40,624 [JvmPauseMonitor9] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2024-01-22 22:33:40,624 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(856)) - MiniRaftClusterWithGrpc shutdown completed
2024-01-22 22:33:40,624 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - ************************************************************** 
2024-01-22 22:33:40,624 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - *** 
2024-01-22 22:33:40,624 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - ***     Stopping MiniRaftClusterWithGrpc
2024-01-22 22:33:40,624 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - *** 
2024-01-22 22:33:40,624 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - ************************************************************** 
2024-01-22 22:33:40,625 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(837)) - printing ALL groups
  s3:   CLOSED  FOLLOWER s3@group-058B3C611255:t3, leader=s4, voted=s4, raftlog=Memoized:s3@group-058B3C611255-SegmentedRaftLog:CLOSED:c52, conf=51: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null CLOSED
  s4:   CLOSED    LEADER s4@group-058B3C611255:t3, leader=s4, voted=s4, raftlog=Memoized:s4@group-058B3C611255-SegmentedRaftLog:CLOSED:c52, conf=51: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null CLOSED
  s0:   CLOSED  FOLLOWER s0@group-058B3C611255:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-058B3C611255-SegmentedRaftLog:CLOSED:c50, conf=49: peers:[s3|0.0.0.0:15020, s4|0.0.0.0:15024, s0|localhost:15016]|listeners:[], old=null CLOSED
2024-01-22 22:33:40,625 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(856)) - MiniRaftClusterWithGrpc shutdown completed
