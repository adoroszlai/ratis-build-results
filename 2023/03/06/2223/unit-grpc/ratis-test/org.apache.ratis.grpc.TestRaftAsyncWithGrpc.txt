-------------------------------------------------------------------------------
Test set: org.apache.ratis.grpc.TestRaftAsyncWithGrpc
-------------------------------------------------------------------------------
Tests run: 22, Failures: 18, Errors: 0, Skipped: 0, Time elapsed: 61.672 s <<< FAILURE! - in org.apache.ratis.grpc.TestRaftAsyncWithGrpc
testBasicAppendEntriesAsyncKillLeader(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 6.298 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:854)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:147)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.RaftAsyncTests.runTestBasicAppendEntriesAsync(RaftAsyncTests.java:257)
	at org.apache.ratis.RaftAsyncTests.testBasicAppendEntriesAsyncKillLeader(RaftAsyncTests.java:268)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testBasicAppendEntriesAsyncKillLeader(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 6.298 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.BaseTest.assertNoFailures(BaseTest.java:89)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testAppendEntriesTimeout(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 6.541 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:854)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:147)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.RaftAsyncTests.testAppendEntriesTimeout(RaftAsyncTests.java:380)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testAppendEntriesTimeout(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 6.542 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.BaseTest.assertNoFailures(BaseTest.java:89)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testWithLoadAsync(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 17.233 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:854)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:147)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.RaftAsyncTests.testWithLoadAsync(RaftAsyncTests.java:273)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testWithLoadAsync(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 17.235 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.BaseTest.assertNoFailures(BaseTest.java:89)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testRequestTimeout(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 7.695 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:854)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:147)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.RaftAsyncTests.testRequestTimeout(RaftAsyncTests.java:365)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testRequestTimeout(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 7.696 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.BaseTest.assertNoFailures(BaseTest.java:89)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testAsyncRequestSemaphore(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 2.625 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:854)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:147)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.RaftAsyncTests.testAsyncRequestSemaphore(RaftAsyncTests.java:203)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testAsyncRequestSemaphore(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 2.626 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.BaseTest.assertNoFailures(BaseTest.java:89)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testBasicAppendEntriesAsync(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 5.657 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:854)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:147)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.RaftAsyncTests.runTestBasicAppendEntriesAsync(RaftAsyncTests.java:257)
	at org.apache.ratis.RaftAsyncTests.testBasicAppendEntriesAsync(RaftAsyncTests.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testBasicAppendEntriesAsync(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 5.658 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.BaseTest.assertNoFailures(BaseTest.java:89)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testNoRetryWaitOnNotLeaderException(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 1.56 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:854)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:147)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.RaftAsyncTests.testNoRetryWaitOnNotLeaderException(RaftAsyncTests.java:464)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testNoRetryWaitOnNotLeaderException(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 1.56 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.BaseTest.assertNoFailures(BaseTest.java:89)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testRequestAsyncWithRetryFailureAfterInitialMessages(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 3.595 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:854)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:147)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:125)
	at org.apache.ratis.RaftAsyncTests.runTestRequestAsyncWithRetryFailure(RaftAsyncTests.java:126)
	at org.apache.ratis.RaftAsyncTests.testRequestAsyncWithRetryFailureAfterInitialMessages(RaftAsyncTests.java:121)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testRequestAsyncWithRetryFailureAfterInitialMessages(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 3.596 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.BaseTest.assertNoFailures(BaseTest.java:89)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testCheckLeadershipFailure(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 2.802 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:854)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:147)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.RaftAsyncTests.testCheckLeadershipFailure(RaftAsyncTests.java:417)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

testCheckLeadershipFailure(org.apache.ratis.grpc.TestRaftAsyncWithGrpc)  Time elapsed: 2.806 s  <<< FAILURE!
java.lang.AssertionError: Unexpected exit.
	at org.apache.ratis.util.ExitUtils.assertNotTerminated(ExitUtils.java:109)
	at org.apache.ratis.BaseTest.assertNoFailures(BaseTest.java:89)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.ExitUtils$ExitException: Failed to kill/restart server: s4
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:141)
	at org.apache.ratis.util.ExitUtils.terminate(ExitUtils.java:151)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:108)
	... 1 more
Caused by: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4-RaftServerProxy, CLOSING -> EXCEPTION
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:273)
	at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:395)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:364)
	at org.apache.ratis.server.impl.MiniRaftCluster.restartServer(MiniRaftCluster.java:356)
	at org.apache.ratis.RaftBasicTests.lambda$killAndRestartServer$2(RaftBasicTests.java:105)
	... 1 more

