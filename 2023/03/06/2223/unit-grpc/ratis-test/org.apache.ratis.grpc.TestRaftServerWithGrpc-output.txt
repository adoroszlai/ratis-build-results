2023-03-06 08:13:38,732 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:13:38,734 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:13:38,738 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:13:38,761 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-03-06 08:13:38,805 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-B349ED2EEE2C:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]
2023-03-06 08:13:38,805 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:13:38,805 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:13:38,805 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:13:38,805 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:13:38,806 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:13:38,806 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:13:38,809 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-B349ED2EEE2C:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:38,810 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0
2023-03-06 08:13:38,811 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0 does not exist.
2023-03-06 08:13:38,811 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0
2023-03-06 08:13:38,826 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:38,892 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:38,894 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 42785 (custom)
2023-03-06 08:13:38,894 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:38,895 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34827 (custom)
2023-03-06 08:13:38,895 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:38,895 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37609 (custom)
2023-03-06 08:13:38,896 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:38,898 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:38,898 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:38,899 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:38,913 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:38,916 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:38,917 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:39,076 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:39,079 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:39,079 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:39,079 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:39,081 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:39,083 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0] (custom)
2023-03-06 08:13:39,093 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-B349ED2EEE2C:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER] returns group-B349ED2EEE2C:java.util.concurrent.CompletableFuture@753f11e0[Not completed]
2023-03-06 08:13:39,094 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-B349ED2EEE2C:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:39,095 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1
2023-03-06 08:13:39,095 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1 does not exist.
2023-03-06 08:13:39,095 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1
2023-03-06 08:13:39,095 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:39,096 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:39,096 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 39169 (custom)
2023-03-06 08:13:39,096 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:39,096 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 42699 (custom)
2023-03-06 08:13:39,096 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:39,096 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 46689 (custom)
2023-03-06 08:13:39,097 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:39,097 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,101 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:39,101 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:39,101 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:39,101 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:39,102 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:39,104 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:39,104 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:39,104 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:39,104 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:39,104 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:39,105 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1] (custom)
2023-03-06 08:13:39,119 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-B349ED2EEE2C:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER] returns group-B349ED2EEE2C:java.util.concurrent.CompletableFuture@148fd432[Not completed]
2023-03-06 08:13:39,119 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-B349ED2EEE2C:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:39,119 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2
2023-03-06 08:13:39,119 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2 does not exist.
2023-03-06 08:13:39,119 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2
2023-03-06 08:13:39,120 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:39,120 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:39,120 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 41791 (custom)
2023-03-06 08:13:39,120 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:39,120 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37557 (custom)
2023-03-06 08:13:39,121 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:39,121 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 33055 (custom)
2023-03-06 08:13:39,121 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:39,121 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,121 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:39,121 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:39,121 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:39,121 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:39,122 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:39,123 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:39,124 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:39,124 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:39,124 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:39,124 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:39,124 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2] (custom)
2023-03-06 08:13:39,125 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:39,134 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-B349ED2EEE2C:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER] returns group-B349ED2EEE2C:java.util.concurrent.CompletableFuture@c11825b[Not completed]
2023-03-06 08:13:39,118 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:39,136 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:39,136 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:39,139 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-B349ED2EEE2C:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:39,140 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:39,142 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:39,142 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:39,142 [s2-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-B349ED2EEE2C:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:39,143 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:39,143 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:39,143 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:39,143 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:39,142 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:39,140 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:39,144 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:39,144 [s1-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-B349ED2EEE2C:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:39,145 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:39,145 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:39,145 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:39,145 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:39,145 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:39,145 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:39,149 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:39,151 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:39,151 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:39,153 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:39,151 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:39,154 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:39,154 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:39,158 [s1-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-B349ED2EEE2C: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:39,160 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-B349ED2EEE2C: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:39,161 [s2-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-B349ED2EEE2C: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:39,175 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:39,177 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:39,181 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:39,183 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:39,183 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:39,183 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:39,191 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:39,191 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:39,192 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:39,195 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:39,195 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:39,205 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:39,209 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:39,210 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:39,213 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:39,216 [s2-groupManagement] INFO  metrics.MetricRegistries (MetricRegistriesLoader.java:load(64)) - Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2023-03-06 08:13:39,380 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:39,381 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:39,381 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:39,382 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:39,383 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:39,383 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:39,383 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:39,383 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:39,384 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:39,384 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:39,384 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:39,384 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:39,384 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:39,385 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:39,385 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:39,385 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:39,385 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:39,385 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0] (custom)
2023-03-06 08:13:39,393 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0/3a06a965-7db0-4d10-a7ce-b349ed2eee2c does not exist. Creating ...
2023-03-06 08:13:39,397 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0/3a06a965-7db0-4d10-a7ce-b349ed2eee2c
2023-03-06 08:13:39,402 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:39,402 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/current
2023-03-06 08:13:39,402 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/sm
2023-03-06 08:13:39,415 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0/3a06a965-7db0-4d10-a7ce-b349ed2eee2c has been successfully formatted.
2023-03-06 08:13:39,417 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:39,419 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:39,420 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:39,426 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:39,427 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,428 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:39,429 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:39,432 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:39,436 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:39,437 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:39,437 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,440 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s0@group-B349ED2EEE2C-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0/3a06a965-7db0-4d10-a7ce-b349ed2eee2c
2023-03-06 08:13:39,440 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:39,440 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:39,442 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:39,442 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:39,442 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:39,443 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:39,443 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:39,443 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:39,445 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:39,445 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,447 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:39,447 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:39,448 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:39,453 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-B349ED2EEE2C-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:39,453 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-B349ED2EEE2C-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:39,455 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s0@group-B349ED2EEE2C: start as a follower, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:39,455 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-B349ED2EEE2C: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:39,456 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:39,459 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B349ED2EEE2C,id=s0
2023-03-06 08:13:39,460 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:39,461 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:39,461 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:39,464 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s0: start RPC server
2023-03-06 08:13:39,465 [s0@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:39,466 [s0@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:39,503 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 34827
2023-03-06 08:13:39,505 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 37609
2023-03-06 08:13:39,506 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 42785
2023-03-06 08:13:39,509 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:39,510 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:39,510 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1] (custom)
2023-03-06 08:13:39,510 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1/3a06a965-7db0-4d10-a7ce-b349ed2eee2c does not exist. Creating ...
2023-03-06 08:13:39,514 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1/3a06a965-7db0-4d10-a7ce-b349ed2eee2c
2023-03-06 08:13:39,515 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s0: Started
2023-03-06 08:13:39,515 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:39,516 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/current
2023-03-06 08:13:39,516 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/sm
2023-03-06 08:13:39,517 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1/3a06a965-7db0-4d10-a7ce-b349ed2eee2c has been successfully formatted.
2023-03-06 08:13:39,521 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:39,521 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:39,521 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:39,522 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:39,525 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,526 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:39,526 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:39,528 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:39,529 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:39,529 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:39,529 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,531 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s1@group-B349ED2EEE2C-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1/3a06a965-7db0-4d10-a7ce-b349ed2eee2c
2023-03-06 08:13:39,531 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:39,531 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:39,531 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:39,531 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:39,532 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:39,532 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:39,533 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:39,533 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:39,533 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:39,533 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,535 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:39,535 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:39,535 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:39,535 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-B349ED2EEE2C-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:39,535 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-B349ED2EEE2C-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:39,537 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s1@group-B349ED2EEE2C: start as a follower, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:39,537 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-B349ED2EEE2C: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:39,537 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:39,541 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B349ED2EEE2C,id=s1
2023-03-06 08:13:39,544 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:39,544 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:39,544 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:39,546 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s1: start RPC server
2023-03-06 08:13:39,550 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 42699
2023-03-06 08:13:39,551 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 46689
2023-03-06 08:13:39,552 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 39169
2023-03-06 08:13:39,553 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:39,553 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:39,553 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2] (custom)
2023-03-06 08:13:39,554 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2/3a06a965-7db0-4d10-a7ce-b349ed2eee2c does not exist. Creating ...
2023-03-06 08:13:39,554 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2/3a06a965-7db0-4d10-a7ce-b349ed2eee2c
2023-03-06 08:13:39,555 [s1@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:39,555 [s1@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:39,555 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:39,556 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/current
2023-03-06 08:13:39,557 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/sm
2023-03-06 08:13:39,556 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s1: Started
2023-03-06 08:13:39,558 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2/3a06a965-7db0-4d10-a7ce-b349ed2eee2c has been successfully formatted.
2023-03-06 08:13:39,559 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:39,559 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:39,559 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:39,559 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:39,559 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,559 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:39,559 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:39,561 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:39,561 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:39,561 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:39,561 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,561 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s2@group-B349ED2EEE2C-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2/3a06a965-7db0-4d10-a7ce-b349ed2eee2c
2023-03-06 08:13:39,562 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:39,562 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:39,562 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:39,562 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:39,562 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:39,562 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:39,562 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:39,562 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:39,566 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:39,567 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:39,568 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:39,568 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:39,568 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:39,569 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-B349ED2EEE2C-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:39,569 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-B349ED2EEE2C-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:39,570 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s2@group-B349ED2EEE2C: start as a follower, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:39,570 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-B349ED2EEE2C: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:39,570 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:39,571 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B349ED2EEE2C,id=s2
2023-03-06 08:13:39,571 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:39,571 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:39,571 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:39,574 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s2: start RPC server
2023-03-06 08:13:39,575 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 37557
2023-03-06 08:13:39,576 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 33055
2023-03-06 08:13:39,577 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 41791
2023-03-06 08:13:39,578 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s2: Started
2023-03-06 08:13:39,583 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:39,584 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:39,586 [s2@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:39,586 [s2@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:39,589 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:308)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:219)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:39,747 [s0@group-B349ED2EEE2C-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-B349ED2EEE2C-FollowerState: change to CANDIDATE, lastRpcElapsedTime:290767682ns, electionTimeout:280ms
2023-03-06 08:13:39,747 [s0@group-B349ED2EEE2C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:39,747 [s0@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-B349ED2EEE2C: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:13:39,750 [s0@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:39,750 [s0@group-B349ED2EEE2C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-B349ED2EEE2C-LeaderElection1
2023-03-06 08:13:39,754 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-B349ED2EEE2C-LeaderElection1 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:39,770 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:39,770 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:39,771 [s0@group-B349ED2EEE2C-LeaderElection1-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-03-06 08:13:39,773 [s0@group-B349ED2EEE2C-LeaderElection1-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-03-06 08:13:39,790 [s1@group-B349ED2EEE2C-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-B349ED2EEE2C-FollowerState: change to CANDIDATE, lastRpcElapsedTime:252688579ns, electionTimeout:234ms
2023-03-06 08:13:39,791 [s1@group-B349ED2EEE2C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:39,791 [s1@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-B349ED2EEE2C: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:13:39,791 [s1@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:39,791 [s1@group-B349ED2EEE2C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-B349ED2EEE2C-LeaderElection2
2023-03-06 08:13:39,809 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-B349ED2EEE2C-LeaderElection2 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:39,810 [s1@group-B349ED2EEE2C-LeaderElection2-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-03-06 08:13:39,810 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:39,814 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:39,822 [s1@group-B349ED2EEE2C-LeaderElection2-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-03-06 08:13:39,855 [s2@group-B349ED2EEE2C-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-B349ED2EEE2C-FollowerState: change to CANDIDATE, lastRpcElapsedTime:284547416ns, electionTimeout:268ms
2023-03-06 08:13:39,855 [s2@group-B349ED2EEE2C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:39,855 [s2@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-B349ED2EEE2C: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:13:39,865 [s2@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:39,865 [s2@group-B349ED2EEE2C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-B349ED2EEE2C-LeaderElection3
2023-03-06 08:13:39,874 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-B349ED2EEE2C-LeaderElection3 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:39,882 [s2@group-B349ED2EEE2C-LeaderElection3-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-03-06 08:13:39,885 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:39,894 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:39,895 [s2@group-B349ED2EEE2C-LeaderElection3-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-03-06 08:13:39,945 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-B349ED2EEE2C-LeaderElection1: PRE_VOTE TIMEOUT received 0 response(s) and 0 exception(s):
2023-03-06 08:13:39,945 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-B349ED2EEE2C-LeaderElection1 PRE_VOTE round 0: result TIMEOUT
2023-03-06 08:13:39,945 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-B349ED2EEE2C-LeaderElection1 PRE_VOTE round 1: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:39,960 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:39,961 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,046 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #2/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:308)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:219)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:40,101 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-B349ED2EEE2C-LeaderElection2: PRE_VOTE TIMEOUT received 0 response(s) and 0 exception(s):
2023-03-06 08:13:40,101 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-B349ED2EEE2C-LeaderElection2 PRE_VOTE round 0: result TIMEOUT
2023-03-06 08:13:40,101 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-B349ED2EEE2C-LeaderElection2 PRE_VOTE round 1: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,108 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,109 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,116 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-B349ED2EEE2C-LeaderElection3: PRE_VOTE TIMEOUT received 0 response(s) and 0 exception(s):
2023-03-06 08:13:40,117 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-B349ED2EEE2C-LeaderElection3 PRE_VOTE round 0: result TIMEOUT
2023-03-06 08:13:40,118 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-B349ED2EEE2C-LeaderElection3 PRE_VOTE round 1: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,119 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,119 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,134 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s2, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,140 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,143 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s0, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,143 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,144 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s2, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,144 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,145 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s0, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,145 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s1, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,149 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-B349ED2EEE2C replies to PRE_VOTE vote request: s2<-s0#0:OK-t0. Peer's state: s0@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,149 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-B349ED2EEE2C replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,150 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,152 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-B349ED2EEE2C replies to PRE_VOTE vote request: s1<-s2#0:OK-t0. Peer's state: s2@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,153 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s2, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,155 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,157 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-B349ED2EEE2C replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,152 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-B349ED2EEE2C replies to PRE_VOTE vote request: s2<-s1#0:OK-t0. Peer's state: s1@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,158 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,156 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s0, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,155 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s2, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,162 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-B349ED2EEE2C replies to PRE_VOTE vote request: s2<-s1#0:OK-t0. Peer's state: s1@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,158 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s0, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,163 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,163 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,164 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-B349ED2EEE2C replies to PRE_VOTE vote request: s2<-s0#0:OK-t0. Peer's state: s0@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,163 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-B349ED2EEE2C replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,165 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,165 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-B349ED2EEE2C replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,171 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s1, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,171 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,171 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-B349ED2EEE2C replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,172 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s1, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,172 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,172 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-B349ED2EEE2C replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,172 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s1, group-B349ED2EEE2C, 0, (t:0, i:0))
2023-03-06 08:13:40,173 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,173 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-B349ED2EEE2C replies to PRE_VOTE vote request: s1<-s2#0:OK-t0. Peer's state: s2@group-B349ED2EEE2C:t0, leader=null, voted=, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,179 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-B349ED2EEE2C-LeaderElection1: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:40,182 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s2#0:OK-t0
2023-03-06 08:13:40,182 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-B349ED2EEE2C-LeaderElection1 PRE_VOTE round 1: result PASSED
2023-03-06 08:13:40,185 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-B349ED2EEE2C-LeaderElection1 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,186 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,186 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,188 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-B349ED2EEE2C-LeaderElection3: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:40,190 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s1#0:OK-t0
2023-03-06 08:13:40,190 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-B349ED2EEE2C-LeaderElection3 PRE_VOTE round 1: result PASSED
2023-03-06 08:13:40,192 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-B349ED2EEE2C-LeaderElection2: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:40,192 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:OK-t0
2023-03-06 08:13:40,192 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-B349ED2EEE2C-LeaderElection2 PRE_VOTE round 1: result PASSED
2023-03-06 08:13:40,193 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-B349ED2EEE2C-LeaderElection3 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,194 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-B349ED2EEE2C-LeaderElection2 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,202 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-B349ED2EEE2C: receive requestVote(ELECTION, s0, group-B349ED2EEE2C, 1, (t:0, i:0))
2023-03-06 08:13:40,202 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B349ED2EEE2C-CANDIDATE: reject ELECTION from s0: already has voted for s2 at current term 1
2023-03-06 08:13:40,202 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-B349ED2EEE2C replies to ELECTION vote request: s0<-s2#0:FAIL-t1. Peer's state: s2@group-B349ED2EEE2C:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,203 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-B349ED2EEE2C: receive requestVote(ELECTION, s0, group-B349ED2EEE2C, 1, (t:0, i:0))
2023-03-06 08:13:40,208 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B349ED2EEE2C-CANDIDATE: reject ELECTION from s0: already has voted for s1 at current term 1
2023-03-06 08:13:40,208 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-B349ED2EEE2C replies to ELECTION vote request: s0<-s1#0:FAIL-t1. Peer's state: s1@group-B349ED2EEE2C:t1, leader=null, voted=s1, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,202 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-B349ED2EEE2C: receive requestVote(ELECTION, s1, group-B349ED2EEE2C, 1, (t:0, i:0))
2023-03-06 08:13:40,211 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-B349ED2EEE2C-CANDIDATE: reject ELECTION from s1: already has voted for s0 at current term 1
2023-03-06 08:13:40,211 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-B349ED2EEE2C: receive requestVote(ELECTION, s2, group-B349ED2EEE2C, 1, (t:0, i:0))
2023-03-06 08:13:40,212 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B349ED2EEE2C-CANDIDATE: reject ELECTION from s2: already has voted for s1 at current term 1
2023-03-06 08:13:40,212 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-B349ED2EEE2C replies to ELECTION vote request: s2<-s1#0:FAIL-t1. Peer's state: s1@group-B349ED2EEE2C:t1, leader=null, voted=s1, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,202 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,217 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,211 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-B349ED2EEE2C replies to ELECTION vote request: s1<-s0#0:FAIL-t1. Peer's state: s0@group-B349ED2EEE2C:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,211 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-B349ED2EEE2C-LeaderElection1: ELECTION REJECTED received 2 response(s) and 0 exception(s):
2023-03-06 08:13:40,218 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:FAIL-t1
2023-03-06 08:13:40,218 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s0<-s2#0:FAIL-t1
2023-03-06 08:13:40,218 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-B349ED2EEE2C-LeaderElection1 ELECTION round 0: result REJECTED
2023-03-06 08:13:40,210 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-B349ED2EEE2C: receive requestVote(ELECTION, s2, group-B349ED2EEE2C, 1, (t:0, i:0))
2023-03-06 08:13:40,210 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-B349ED2EEE2C: receive requestVote(ELECTION, s1, group-B349ED2EEE2C, 1, (t:0, i:0))
2023-03-06 08:13:40,208 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,220 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,220 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-B349ED2EEE2C: changes role from CANDIDATE to FOLLOWER at term 1 for REJECTED
2023-03-06 08:13:40,220 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-B349ED2EEE2C-LeaderElection1
2023-03-06 08:13:40,220 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B349ED2EEE2C-CANDIDATE: reject ELECTION from s1: already has voted for s2 at current term 1
2023-03-06 08:13:40,221 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-B349ED2EEE2C replies to ELECTION vote request: s1<-s2#0:FAIL-t1. Peer's state: s2@group-B349ED2EEE2C:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,221 [s0@group-B349ED2EEE2C-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:40,225 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-B349ED2EEE2C-LeaderElection2: ELECTION REJECTED received 2 response(s) and 0 exception(s):
2023-03-06 08:13:40,225 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:FAIL-t1
2023-03-06 08:13:40,225 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s1<-s2#0:FAIL-t1
2023-03-06 08:13:40,225 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-B349ED2EEE2C-LeaderElection2 ELECTION round 0: result REJECTED
2023-03-06 08:13:40,225 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-B349ED2EEE2C: changes role from CANDIDATE to FOLLOWER at term 1 for REJECTED
2023-03-06 08:13:40,225 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-B349ED2EEE2C-LeaderElection2
2023-03-06 08:13:40,225 [s1@group-B349ED2EEE2C-LeaderElection2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:40,226 [s1@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,226 [s1@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,226 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-B349ED2EEE2C-FOLLOWER: reject ELECTION from s2: already has voted for s0 at current term 1
2023-03-06 08:13:40,226 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-B349ED2EEE2C replies to ELECTION vote request: s2<-s0#0:FAIL-t1. Peer's state: s0@group-B349ED2EEE2C:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,227 [s0@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,227 [s0@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,228 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-B349ED2EEE2C-LeaderElection3: ELECTION REJECTED received 2 response(s) and 0 exception(s):
2023-03-06 08:13:40,228 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s0#0:FAIL-t1
2023-03-06 08:13:40,228 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s2<-s1#0:FAIL-t1
2023-03-06 08:13:40,228 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-B349ED2EEE2C-LeaderElection3 ELECTION round 0: result REJECTED
2023-03-06 08:13:40,228 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-B349ED2EEE2C: changes role from CANDIDATE to FOLLOWER at term 1 for REJECTED
2023-03-06 08:13:40,228 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-B349ED2EEE2C-LeaderElection3
2023-03-06 08:13:40,228 [s2@group-B349ED2EEE2C-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:40,230 [s2@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,230 [s2@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,381 [s1@group-B349ED2EEE2C-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-B349ED2EEE2C-FollowerState: change to CANDIDATE, lastRpcElapsedTime:155846552ns, electionTimeout:155ms
2023-03-06 08:13:40,381 [s1@group-B349ED2EEE2C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:40,381 [s1@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-B349ED2EEE2C: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-03-06 08:13:40,382 [s1@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:40,382 [s1@group-B349ED2EEE2C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-B349ED2EEE2C-LeaderElection4
2023-03-06 08:13:40,385 [s0@group-B349ED2EEE2C-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-B349ED2EEE2C-FollowerState: change to CANDIDATE, lastRpcElapsedTime:164176440ns, electionTimeout:155ms
2023-03-06 08:13:40,385 [s0@group-B349ED2EEE2C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:40,385 [s0@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-B349ED2EEE2C: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-03-06 08:13:40,385 [s0@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:40,385 [s0@group-B349ED2EEE2C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-B349ED2EEE2C-LeaderElection5
2023-03-06 08:13:40,385 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-B349ED2EEE2C-LeaderElection4 PRE_VOTE round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,386 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-B349ED2EEE2C-LeaderElection5 PRE_VOTE round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,387 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,387 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,389 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,392 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,392 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s0, group-B349ED2EEE2C, 1, (t:0, i:0))
2023-03-06 08:13:40,392 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B349ED2EEE2C-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,392 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s0, group-B349ED2EEE2C, 1, (t:0, i:0))
2023-03-06 08:13:40,393 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,393 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-B349ED2EEE2C replies to PRE_VOTE vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-B349ED2EEE2C:t1, leader=null, voted=s1, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,395 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s1, group-B349ED2EEE2C, 1, (t:0, i:0))
2023-03-06 08:13:40,395 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-B349ED2EEE2C-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,395 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-B349ED2EEE2C replies to PRE_VOTE vote request: s1<-s0#0:OK-t1. Peer's state: s0@group-B349ED2EEE2C:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,396 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-B349ED2EEE2C replies to PRE_VOTE vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-B349ED2EEE2C:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,399 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-B349ED2EEE2C: receive requestVote(PRE_VOTE, s1, group-B349ED2EEE2C, 1, (t:0, i:0))
2023-03-06 08:13:40,399 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-B349ED2EEE2C-LeaderElection4: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:40,402 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:OK-t1
2023-03-06 08:13:40,402 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-B349ED2EEE2C-LeaderElection4 PRE_VOTE round 0: result PASSED
2023-03-06 08:13:40,403 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B349ED2EEE2C-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,403 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-B349ED2EEE2C replies to PRE_VOTE vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-B349ED2EEE2C:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,404 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-B349ED2EEE2C-LeaderElection4 ELECTION round 0: submit vote requests at term 2 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,405 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-B349ED2EEE2C-LeaderElection5: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:40,410 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s2#0:OK-t1
2023-03-06 08:13:40,410 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-B349ED2EEE2C-LeaderElection5 PRE_VOTE round 0: result PASSED
2023-03-06 08:13:40,412 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,412 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,413 [s2@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,413 [s2@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,413 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-B349ED2EEE2C-LeaderElection5 ELECTION round 0: submit vote requests at term 2 for -1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,418 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-B349ED2EEE2C: receive requestVote(ELECTION, s1, group-B349ED2EEE2C, 2, (t:0, i:0))
2023-03-06 08:13:40,418 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B349ED2EEE2C-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:40,418 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-B349ED2EEE2C: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s1
2023-03-06 08:13:40,418 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:40,418 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:40,418 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-B349ED2EEE2C: receive requestVote(ELECTION, s1, group-B349ED2EEE2C, 2, (t:0, i:0))
2023-03-06 08:13:40,418 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-B349ED2EEE2C-CANDIDATE: reject ELECTION from s1: already has voted for s0 at current term 2
2023-03-06 08:13:40,419 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-B349ED2EEE2C replies to ELECTION vote request: s1<-s0#0:FAIL-t2. Peer's state: s0@group-B349ED2EEE2C:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,419 [s2@group-B349ED2EEE2C-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-B349ED2EEE2C-FollowerState was interrupted
2023-03-06 08:13:40,424 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,424 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,425 [s2@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,425 [s2@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,428 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-B349ED2EEE2C replies to ELECTION vote request: s1<-s2#0:OK-t2. Peer's state: s2@group-B349ED2EEE2C:t2, leader=null, voted=s1, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,430 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-B349ED2EEE2C: receive requestVote(ELECTION, s0, group-B349ED2EEE2C, 2, (t:0, i:0))
2023-03-06 08:13:40,430 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B349ED2EEE2C-CANDIDATE: reject ELECTION from s0: already has voted for s1 at current term 2
2023-03-06 08:13:40,430 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-B349ED2EEE2C replies to ELECTION vote request: s0<-s1#0:FAIL-t2. Peer's state: s1@group-B349ED2EEE2C:t2, leader=null, voted=s1, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,432 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-B349ED2EEE2C-LeaderElection4: ELECTION PASSED received 2 response(s) and 0 exception(s):
2023-03-06 08:13:40,432 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:FAIL-t2
2023-03-06 08:13:40,432 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s1<-s2#0:OK-t2
2023-03-06 08:13:40,432 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-B349ED2EEE2C-LeaderElection4 ELECTION round 0: result PASSED
2023-03-06 08:13:40,432 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-B349ED2EEE2C-LeaderElection4
2023-03-06 08:13:40,432 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-B349ED2EEE2C: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2023-03-06 08:13:40,432 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-B349ED2EEE2C: change Leader from null to s1 at term 2 for becomeLeader, leader elected after 1257ms
2023-03-06 08:13:40,438 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-B349ED2EEE2C: receive requestVote(ELECTION, s0, group-B349ED2EEE2C, 2, (t:0, i:0))
2023-03-06 08:13:40,438 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B349ED2EEE2C-FOLLOWER: reject ELECTION from s0: already has voted for s1 at current term 2
2023-03-06 08:13:40,438 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-B349ED2EEE2C replies to ELECTION vote request: s0<-s2#0:FAIL-t2. Peer's state: s2@group-B349ED2EEE2C:t2, leader=null, voted=s1, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,439 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-B349ED2EEE2C-LeaderElection5: ELECTION REJECTED received 2 response(s) and 0 exception(s):
2023-03-06 08:13:40,440 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:FAIL-t2
2023-03-06 08:13:40,440 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s0<-s2#0:FAIL-t2
2023-03-06 08:13:40,440 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-B349ED2EEE2C-LeaderElection5 ELECTION round 0: result REJECTED
2023-03-06 08:13:40,442 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:13:40,445 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:40,445 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-B349ED2EEE2C: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-03-06 08:13:40,445 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-B349ED2EEE2C-LeaderElection5
2023-03-06 08:13:40,445 [s0@group-B349ED2EEE2C-LeaderElection5] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:40,447 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:40,450 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:13:40,450 [s0@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:40,450 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:13:40,450 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:13:40,451 [s0@group-B349ED2EEE2C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:40,455 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:40,456 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:13:40,463 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:40,463 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:40,463 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:40,465 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:40,466 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:40,466 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:40,466 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:40,466 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:40,468 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:40,468 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:40,468 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:40,469 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:40,469 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:40,469 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:40,469 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:40,469 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:40,470 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-B349ED2EEE2C-LeaderStateImpl
2023-03-06 08:13:40,481 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s1@group-B349ED2EEE2C-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:40,500 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #3/100: java.lang.IllegalStateException: Leader: s1@group-B349ED2EEE2C not ready, sleep 450ms and then retry.
java.lang.IllegalStateException: Leader: s1@group-B349ED2EEE2C not ready
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:114)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:308)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:219)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:40,539 [s1@group-B349ED2EEE2C-LeaderElection4] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-B349ED2EEE2C: set configuration 0: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,565 [s1@group-B349ED2EEE2C-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s1@group-B349ED2EEE2C-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s1/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/current/log_inprogress_0
2023-03-06 08:13:40,571 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-B349ED2EEE2C: change Leader from null to s1 at term 2 for appendEntries, leader elected after 1388ms
2023-03-06 08:13:40,573 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-B349ED2EEE2C: change Leader from null to s1 at term 2 for appendEntries, leader elected after 1395ms
2023-03-06 08:13:40,583 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-B349ED2EEE2C: set configuration 0: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,584 [s2-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s2@group-B349ED2EEE2C-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:40,594 [s2@group-B349ED2EEE2C-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s2@group-B349ED2EEE2C-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s2/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/current/log_inprogress_0
2023-03-06 08:13:40,609 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-B349ED2EEE2C: set configuration 0: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:40,610 [s0-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-B349ED2EEE2C-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:40,624 [s0@group-B349ED2EEE2C-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-B349ED2EEE2C-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf16dc9bc/s0/3a06a965-7db0-4d10-a7ce-b349ed2eee2c/current/log_inprogress_0
2023-03-06 08:13:40,951 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B349ED2EEE2C:t2, leader=s1, voted=s0, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-B349ED2EEE2C:t2, leader=s1, voted=s1, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B349ED2EEE2C:t2, leader=s1, voted=s1, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:41,022 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:41,023 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:41,154 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-97282884C53E->s0: receive RaftClientReply:client-97282884C53E->s0@group-B349ED2EEE2C, cid=0, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-B349ED2EEE2C is not the leader s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2023-03-06 08:13:41,173 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:41,173 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:41,214 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-97282884C53E->s1: receive RaftClientReply:client-97282884C53E->s1@group-B349ED2EEE2C, cid=0, SUCCESS, logIndex=0, commits[s1:c0, s0:c0, s2:c0]
2023-03-06 08:13:41,246 [s1@group-B349ED2EEE2C-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:2, i:1), STATEMACHINELOGENTRY, 1@client-97282884C53E
2023-03-06 08:13:41,248 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-97282884C53E->s1: receive RaftClientReply:client-97282884C53E->s1@group-B349ED2EEE2C, cid=1, SUCCESS, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2023-03-06 08:13:41,254 [s2@group-B349ED2EEE2C-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:2, i:1), STATEMACHINELOGENTRY, 1@client-97282884C53E
2023-03-06 08:13:41,263 [s0@group-B349ED2EEE2C-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:2, i:1), STATEMACHINELOGENTRY, 1@client-97282884C53E
2023-03-06 08:13:41,311 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:13:41,311 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:13:41,311 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:13:41,311 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:13:41,311 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:13:41,311 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B349ED2EEE2C:t2, leader=s1, voted=s0, raftlog=Memoized:s0@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-B349ED2EEE2C:t2, leader=s1, voted=s1, raftlog=Memoized:s1@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B349ED2EEE2C:t2, leader=s1, voted=s1, raftlog=Memoized:s2@group-B349ED2EEE2C-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:37609|admin:localhost:42785|client:localhost:34827|dataStream:localhost:38843|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46689|admin:localhost:39169|client:localhost:42699|dataStream:localhost:34391|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:33055|admin:localhost:41791|client:localhost:37557|dataStream:localhost:45779|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:41,332 [MiniRaftCluster-2] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s1: close
2023-03-06 08:13:41,345 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s1@group-B349ED2EEE2C: shutdown
2023-03-06 08:13:41,345 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B349ED2EEE2C,id=s1
2023-03-06 08:13:41,345 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s1: shutdown s1@group-B349ED2EEE2C-LeaderStateImpl
2023-03-06 08:13:41,346 [s1-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s1@group-B349ED2EEE2C-PendingRequests: sendNotLeaderResponses
2023-03-06 08:13:41,345 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:41,351 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-B349ED2EEE2C-StateMachineUpdater: set stopIndex = 2
2023-03-06 08:13:41,351 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-B349ED2EEE2C: applyIndex: 2
2023-03-06 08:13:41,353 [s1@group-B349ED2EEE2C->s0-GrpcLogAppender-LogAppenderDaemon] ERROR leader.LogAppenderDaemon (LogAppenderDaemon.java:run(87)) - s1@group-B349ED2EEE2C->s0-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: s1@group-B349ED2EEE2C-SegmentedRaftLog is expected to be opened but it is CLOSED
	at org.apache.ratis.util.OpenCloseState.assertOpen(OpenCloseState.java:63)
	at org.apache.ratis.server.raftlog.RaftLogBase.checkLogState(RaftLogBase.java:111)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLog.getLastEntryTermIndex(SegmentedRaftLog.java:341)
	at org.apache.ratis.server.raftlog.RaftLog.getNextIndex(RaftLog.java:83)
	at org.apache.ratis.server.leader.LogAppender.hasAppendEntries(LogAppender.java:166)
	at org.apache.ratis.server.leader.LogAppender.shouldSendAppendEntries(LogAppender.java:161)
	at org.apache.ratis.server.leader.LogAppenderBase.shouldSendAppendEntries(LogAppenderBase.java:92)
	at org.apache.ratis.grpc.server.GrpcLogAppender.shouldSendAppendEntries(GrpcLogAppender.java:203)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getWaitTimeMs(GrpcLogAppender.java:171)
	at org.apache.ratis.grpc.server.GrpcLogAppender.mayWait(GrpcLogAppender.java:188)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:139)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:78)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.OpenCloseState$CloseTrace: Close s1@group-B349ED2EEE2C-SegmentedRaftLog
	at org.apache.ratis.util.OpenCloseState.lambda$close$1(OpenCloseState.java:109)
	at java.base/java.util.concurrent.atomic.AtomicReference.getAndUpdate(AtomicReference.java:187)
	at org.apache.ratis.util.OpenCloseState.close(OpenCloseState.java:109)
	at org.apache.ratis.server.raftlog.RaftLogBase.close(RaftLogBase.java:365)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLog.close(SegmentedRaftLog.java:505)
	at org.apache.ratis.server.impl.ServerState.close(ServerState.java:418)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$close$4(RaftServerImpl.java:488)
	at org.apache.ratis.util.LifeCycle.lambda$checkStateAndClose$4(LifeCycle.java:299)
	at org.apache.ratis.util.LifeCycle.checkStateAndClose(LifeCycle.java:319)
	at org.apache.ratis.util.LifeCycle.checkStateAndClose(LifeCycle.java:297)
	at org.apache.ratis.server.impl.RaftServerImpl.close(RaftServerImpl.java:465)
	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.close(RaftServerProxy.java:135)
	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.lambda$close$0(RaftServerProxy.java:122)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 more
2023-03-06 08:13:41,357 [MiniRaftCluster-1] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s0: close
2023-03-06 08:13:41,358 [MiniRaftCluster-3] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s2: close
2023-03-06 08:13:41,358 [Thread-87] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-03-06 08:13:41,359 [Thread-89] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-03-06 08:13:41,360 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:41,360 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s0@group-B349ED2EEE2C: shutdown
2023-03-06 08:13:41,360 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B349ED2EEE2C,id=s0
2023-03-06 08:13:41,360 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:41,360 [s0@group-B349ED2EEE2C-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-B349ED2EEE2C-FollowerState was interrupted
2023-03-06 08:13:41,358 [s1@group-B349ED2EEE2C->s2-GrpcLogAppender-LogAppenderDaemon] ERROR leader.LogAppenderDaemon (LogAppenderDaemon.java:run(87)) - s1@group-B349ED2EEE2C->s2-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: s1@group-B349ED2EEE2C-SegmentedRaftLog is expected to be opened but it is CLOSED
	at org.apache.ratis.util.OpenCloseState.assertOpen(OpenCloseState.java:63)
	at org.apache.ratis.server.raftlog.RaftLogBase.checkLogState(RaftLogBase.java:111)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLog.getLastEntryTermIndex(SegmentedRaftLog.java:341)
	at org.apache.ratis.server.raftlog.RaftLog.getNextIndex(RaftLog.java:83)
	at org.apache.ratis.server.leader.LogAppender.hasAppendEntries(LogAppender.java:166)
	at org.apache.ratis.server.leader.LogAppender.shouldSendAppendEntries(LogAppender.java:161)
	at org.apache.ratis.server.leader.LogAppenderBase.shouldSendAppendEntries(LogAppenderBase.java:92)
	at org.apache.ratis.grpc.server.GrpcLogAppender.shouldSendAppendEntries(GrpcLogAppender.java:203)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getWaitTimeMs(GrpcLogAppender.java:171)
	at org.apache.ratis.grpc.server.GrpcLogAppender.mayWait(GrpcLogAppender.java:188)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:139)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:78)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.OpenCloseState$CloseTrace: Close s1@group-B349ED2EEE2C-SegmentedRaftLog
	at org.apache.ratis.util.OpenCloseState.lambda$close$1(OpenCloseState.java:109)
	at java.base/java.util.concurrent.atomic.AtomicReference.getAndUpdate(AtomicReference.java:187)
	at org.apache.ratis.util.OpenCloseState.close(OpenCloseState.java:109)
	at org.apache.ratis.server.raftlog.RaftLogBase.close(RaftLogBase.java:365)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLog.close(SegmentedRaftLog.java:505)
	at org.apache.ratis.server.impl.ServerState.close(ServerState.java:418)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$close$4(RaftServerImpl.java:488)
	at org.apache.ratis.util.LifeCycle.lambda$checkStateAndClose$4(LifeCycle.java:299)
	at org.apache.ratis.util.LifeCycle.checkStateAndClose(LifeCycle.java:319)
	at org.apache.ratis.util.LifeCycle.checkStateAndClose(LifeCycle.java:297)
	at org.apache.ratis.server.impl.RaftServerImpl.close(RaftServerImpl.java:465)
	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.close(RaftServerProxy.java:135)
	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.lambda$close$0(RaftServerProxy.java:122)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 more
2023-03-06 08:13:41,361 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s2@group-B349ED2EEE2C: shutdown
2023-03-06 08:13:41,361 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:41,361 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B349ED2EEE2C,id=s2
2023-03-06 08:13:41,361 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-B349ED2EEE2C-FollowerState
2023-03-06 08:13:41,361 [s2@group-B349ED2EEE2C-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-B349ED2EEE2C-FollowerState was interrupted
2023-03-06 08:13:41,360 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-B349ED2EEE2C-StateMachineUpdater: set stopIndex = 2
2023-03-06 08:13:41,369 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-B349ED2EEE2C: applyIndex: 2
2023-03-06 08:13:41,361 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-B349ED2EEE2C-StateMachineUpdater: set stopIndex = 2
2023-03-06 08:13:41,370 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-B349ED2EEE2C: applyIndex: 2
2023-03-06 08:13:41,370 [Thread-92] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-03-06 08:13:41,370 [Thread-91] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-03-06 08:13:41,373 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:41,373 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:41,375 [Thread-93] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-03-06 08:13:41,378 [grpc-default-executor-3] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - s0: installSnapshot onError, lastRequest: s1->s0#80-t2,previous=(t:2, i:1),leaderCommit=2,initializing? true,entries: size=1, first=(t:2, i:2), METADATAENTRY(c:1): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-03-06 08:13:41,380 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(406)) - s1@group-B349ED2EEE2C->s0-GrpcLogAppender is already stopped
2023-03-06 08:13:41,381 [Thread-94] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-03-06 08:13:41,386 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:41,386 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:41,387 [grpc-default-executor-3] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - s2: installSnapshot onError, lastRequest: s1->s2#815-t2,previous=(t:2, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:2, i:2), METADATAENTRY(c:1): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-03-06 08:13:41,388 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:41,388 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:41,390 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(406)) - s1@group-B349ED2EEE2C->s2-GrpcLogAppender is already stopped
2023-03-06 08:13:41,401 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:41,401 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:41,401 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:41,405 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:41,405 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:41,410 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:41,410 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:41,411 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:41,414 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:42,249 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s1@group-B349ED2EEE2C-SegmentedRaftLogWorker close()
2023-03-06 08:13:42,250 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s1: Stopped
2023-03-06 08:13:42,254 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s2@group-B349ED2EEE2C-SegmentedRaftLogWorker close()
2023-03-06 08:13:42,255 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s2: Stopped
2023-03-06 08:13:42,264 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s0@group-B349ED2EEE2C-SegmentedRaftLogWorker close()
2023-03-06 08:13:42,265 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s0: Stopped
2023-03-06 08:13:42,266 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:13:42,273 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:13:42,273 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:13:42,274 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:13:42,277 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/server.pem: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/server.pem
2023-03-06 08:13:42,504 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/server.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/server.crt
2023-03-06 08:13:42,639 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/ca.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/ca.crt
2023-03-06 08:13:42,644 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/client.pem: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/client.pem
2023-03-06 08:13:42,645 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/client.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/client.crt
2023-03-06 08:13:42,691 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/ca.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/ca.crt
2023-03-06 08:13:42,696 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-BA534FBE1D32:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]
2023-03-06 08:13:42,696 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:13:42,696 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:13:42,696 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:13:42,696 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:13:42,696 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:13:42,696 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:13:42,696 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s3, group-BA534FBE1D32:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:42,696 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3
2023-03-06 08:13:42,697 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3 does not exist.
2023-03-06 08:13:42,697 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3
2023-03-06 08:13:42,697 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:42,697 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:42,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46557 (custom)
2023-03-06 08:13:42,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:42,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37945 (custom)
2023-03-06 08:13:42,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:42,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 45535 (custom)
2023-03-06 08:13:42,698 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:42,698 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,698 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:42,698 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:42,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:42,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:42,699 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:42,804 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:42,804 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:42,804 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:42,804 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:42,805 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:42,805 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3] (custom)
2023-03-06 08:13:42,809 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s3: addNew group-BA534FBE1D32:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER] returns group-BA534FBE1D32:java.util.concurrent.CompletableFuture@4f3a9ea8[Not completed]
2023-03-06 08:13:42,809 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:42,809 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s4, group-BA534FBE1D32:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:42,809 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:42,809 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4
2023-03-06 08:13:42,810 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:42,810 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4 does not exist.
2023-03-06 08:13:42,811 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4
2023-03-06 08:13:42,811 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:42,812 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:42,813 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 40939 (custom)
2023-03-06 08:13:42,813 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:42,814 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34967 (custom)
2023-03-06 08:13:42,814 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:42,814 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 38849 (custom)
2023-03-06 08:13:42,814 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:42,814 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,815 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:42,815 [s3-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s3: new RaftServerImpl for group-BA534FBE1D32:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:42,815 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:42,815 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:42,816 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:42,816 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:42,816 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:42,816 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:42,816 [s3-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s3@group-BA534FBE1D32: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:42,816 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:42,816 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:42,816 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:42,816 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:42,816 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:42,819 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:42,819 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:42,819 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:42,819 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:42,819 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:42,821 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:42,821 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:42,822 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:42,822 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:42,824 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:42,825 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:42,825 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:42,825 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:42,825 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:42,825 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4] (custom)
2023-03-06 08:13:42,827 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s4: addNew group-BA534FBE1D32:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER] returns group-BA534FBE1D32:java.util.concurrent.CompletableFuture@4d3eb944[Not completed]
2023-03-06 08:13:42,827 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s5, group-BA534FBE1D32:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:42,827 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5
2023-03-06 08:13:42,827 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5 does not exist.
2023-03-06 08:13:42,827 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5
2023-03-06 08:13:42,827 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:42,827 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:42,828 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46709 (custom)
2023-03-06 08:13:42,828 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:42,828 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 39727 (custom)
2023-03-06 08:13:42,828 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:42,828 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 36231 (custom)
2023-03-06 08:13:42,828 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:42,828 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,828 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:42,828 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:42,828 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:42,828 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:42,828 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:42,831 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:42,831 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:42,831 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:42,831 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:42,831 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:42,831 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5] (custom)
2023-03-06 08:13:42,832 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s5: addNew group-BA534FBE1D32:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER] returns group-BA534FBE1D32:java.util.concurrent.CompletableFuture@52bd6adb[Not completed]
2023-03-06 08:13:42,832 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:42,832 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:42,832 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3] (custom)
2023-03-06 08:13:42,832 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3/3628383a-14dc-4b3a-aaa6-ba534fbe1d32 does not exist. Creating ...
2023-03-06 08:13:42,833 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3/3628383a-14dc-4b3a-aaa6-ba534fbe1d32
2023-03-06 08:13:42,833 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s4: new RaftServerImpl for group-BA534FBE1D32:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s4@group-BA534FBE1D32: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:42,834 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:42,835 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:42,835 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:42,835 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:42,835 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:42,837 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:42,834 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:42,834 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:42,837 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/current
2023-03-06 08:13:42,838 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/sm
2023-03-06 08:13:42,838 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:42,838 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:42,838 [s5-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s5: new RaftServerImpl for group-BA534FBE1D32:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:42,838 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:42,838 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:42,839 [s3-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3/3628383a-14dc-4b3a-aaa6-ba534fbe1d32 has been successfully formatted.
2023-03-06 08:13:42,839 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:42,839 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:42,839 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:42,839 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:42,839 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,839 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:42,839 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:42,841 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:42,841 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:42,841 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:42,841 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,841 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s3@group-BA534FBE1D32-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3/3628383a-14dc-4b3a-aaa6-ba534fbe1d32
2023-03-06 08:13:42,841 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:42,842 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:42,842 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:42,842 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:42,842 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:42,842 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:42,842 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:42,842 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:42,842 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:42,842 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,843 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:42,843 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:42,843 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:42,843 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-BA534FBE1D32-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:42,844 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-BA534FBE1D32-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:42,842 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:42,844 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:42,844 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:42,844 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:42,844 [s5-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s5@group-BA534FBE1D32: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:42,844 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:42,844 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:42,844 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:42,844 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:42,844 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:42,844 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:42,845 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:42,847 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:42,847 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:42,847 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:42,847 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:42,847 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:42,847 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:42,847 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:42,848 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s3@group-BA534FBE1D32: start as a follower, conf=-1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:42,848 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s3@group-BA534FBE1D32: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:42,848 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-BA534FBE1D32-FollowerState
2023-03-06 08:13:42,849 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA534FBE1D32,id=s3
2023-03-06 08:13:42,849 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:42,849 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:42,849 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:42,849 [s3@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:42,850 [s3@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:42,850 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s3: start RPC server
2023-03-06 08:13:42,854 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 37945
2023-03-06 08:13:42,857 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 45535
2023-03-06 08:13:42,864 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 46557
2023-03-06 08:13:42,864 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:42,865 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:42,865 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4] (custom)
2023-03-06 08:13:42,865 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4/3628383a-14dc-4b3a-aaa6-ba534fbe1d32 does not exist. Creating ...
2023-03-06 08:13:42,865 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4/3628383a-14dc-4b3a-aaa6-ba534fbe1d32
2023-03-06 08:13:42,870 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:42,870 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/current
2023-03-06 08:13:42,870 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/sm
2023-03-06 08:13:42,870 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s3: Started
2023-03-06 08:13:42,871 [s4-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4/3628383a-14dc-4b3a-aaa6-ba534fbe1d32 has been successfully formatted.
2023-03-06 08:13:42,871 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:42,871 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:42,871 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:42,872 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:42,872 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,872 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:42,872 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:42,873 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:42,873 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:42,873 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:42,873 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,873 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s4@group-BA534FBE1D32-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4/3628383a-14dc-4b3a-aaa6-ba534fbe1d32
2023-03-06 08:13:42,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:42,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:42,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:42,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:42,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:42,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:42,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:42,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:42,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:42,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,875 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:42,875 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:42,875 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:42,875 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-BA534FBE1D32-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:42,875 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-BA534FBE1D32-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:42,876 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s4@group-BA534FBE1D32: start as a follower, conf=-1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:42,876 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s4@group-BA534FBE1D32: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:42,876 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-BA534FBE1D32-FollowerState
2023-03-06 08:13:42,876 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA534FBE1D32,id=s4
2023-03-06 08:13:42,876 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:42,876 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:42,876 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:42,877 [s4@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:42,877 [s4@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:42,877 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s4: start RPC server
2023-03-06 08:13:42,879 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 34967
2023-03-06 08:13:42,880 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 38849
2023-03-06 08:13:42,881 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 40939
2023-03-06 08:13:42,881 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:42,881 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:42,881 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5] (custom)
2023-03-06 08:13:42,881 [s5-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5/3628383a-14dc-4b3a-aaa6-ba534fbe1d32 does not exist. Creating ...
2023-03-06 08:13:42,882 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5/3628383a-14dc-4b3a-aaa6-ba534fbe1d32
2023-03-06 08:13:42,882 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s4: Started
2023-03-06 08:13:42,882 [s5-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:42,883 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/current
2023-03-06 08:13:42,883 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/sm
2023-03-06 08:13:42,883 [s5-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5/3628383a-14dc-4b3a-aaa6-ba534fbe1d32 has been successfully formatted.
2023-03-06 08:13:42,884 [s5-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:42,884 [s5-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:42,884 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:42,884 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:42,884 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,884 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:42,884 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:42,885 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:42,885 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:42,885 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:42,885 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,885 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s5@group-BA534FBE1D32-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5/3628383a-14dc-4b3a-aaa6-ba534fbe1d32
2023-03-06 08:13:42,886 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:42,886 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:42,886 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:42,886 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:42,886 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:42,886 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:42,886 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:42,886 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:42,886 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:42,886 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:42,888 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:42,888 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:42,888 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:42,888 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s5@group-BA534FBE1D32-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:42,888 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s5@group-BA534FBE1D32-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:42,897 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s5@group-BA534FBE1D32: start as a follower, conf=-1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:42,898 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s5@group-BA534FBE1D32: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:42,898 [s5-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-BA534FBE1D32-FollowerState
2023-03-06 08:13:42,898 [s5-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA534FBE1D32,id=s5
2023-03-06 08:13:42,898 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:42,898 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:42,898 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:42,901 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s5: start RPC server
2023-03-06 08:13:42,903 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 39727
2023-03-06 08:13:42,904 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 36231
2023-03-06 08:13:42,904 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 46709
2023-03-06 08:13:42,905 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s5: Started
2023-03-06 08:13:42,910 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:42,910 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:42,910 [s5@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:42,910 [s5@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:43,041 [s3@group-BA534FBE1D32-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s3@group-BA534FBE1D32-FollowerState: change to CANDIDATE, lastRpcElapsedTime:193393449ns, electionTimeout:191ms
2023-03-06 08:13:43,041 [s3@group-BA534FBE1D32-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-BA534FBE1D32-FollowerState
2023-03-06 08:13:43,042 [s3@group-BA534FBE1D32-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s3@group-BA534FBE1D32: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:13:43,042 [s3@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:43,042 [s3@group-BA534FBE1D32-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-BA534FBE1D32-LeaderElection6
2023-03-06 08:13:43,048 [s3@group-BA534FBE1D32-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s3@group-BA534FBE1D32-LeaderElection6 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:43,049 [s3@group-BA534FBE1D32-LeaderElection6-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s4
2023-03-06 08:13:43,050 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:43,050 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:43,051 [s3@group-BA534FBE1D32-LeaderElection6-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s5
2023-03-06 08:13:43,084 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E7783396097D->s3: receive RaftClientReply:client-E7783396097D->s3@group-BA534FBE1D32, cid=2, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-BA534FBE1D32 is not the leader, logIndex=0, commits[s3:c-1]
2023-03-06 08:13:43,117 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s4@group-BA534FBE1D32: receive requestVote(PRE_VOTE, s3, group-BA534FBE1D32, 0, (t:0, i:0))
2023-03-06 08:13:43,118 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s4@group-BA534FBE1D32-FOLLOWER: accept PRE_VOTE from s3: our priority 0 <= candidate's priority 0
2023-03-06 08:13:43,118 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s4@group-BA534FBE1D32 replies to PRE_VOTE vote request: s3<-s4#0:OK-t0. Peer's state: s4@group-BA534FBE1D32:t0, leader=null, voted=, raftlog=Memoized:s4@group-BA534FBE1D32-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:43,124 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s5@group-BA534FBE1D32: receive requestVote(PRE_VOTE, s3, group-BA534FBE1D32, 0, (t:0, i:0))
2023-03-06 08:13:43,125 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s5@group-BA534FBE1D32-FOLLOWER: accept PRE_VOTE from s3: our priority 0 <= candidate's priority 0
2023-03-06 08:13:43,125 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s5@group-BA534FBE1D32 replies to PRE_VOTE vote request: s3<-s5#0:OK-t0. Peer's state: s5@group-BA534FBE1D32:t0, leader=null, voted=, raftlog=Memoized:s5@group-BA534FBE1D32-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:43,126 [s3@group-BA534FBE1D32-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-BA534FBE1D32-LeaderElection6: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:43,126 [s3@group-BA534FBE1D32-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s3<-s4#0:OK-t0
2023-03-06 08:13:43,126 [s3@group-BA534FBE1D32-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s3@group-BA534FBE1D32-LeaderElection6 PRE_VOTE round 0: result PASSED
2023-03-06 08:13:43,128 [s5@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:43,128 [s5@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:43,129 [s3@group-BA534FBE1D32-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s3@group-BA534FBE1D32-LeaderElection6 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:43,132 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:43,132 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:43,133 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s4@group-BA534FBE1D32: receive requestVote(ELECTION, s3, group-BA534FBE1D32, 1, (t:0, i:0))
2023-03-06 08:13:43,133 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s5@group-BA534FBE1D32: receive requestVote(ELECTION, s3, group-BA534FBE1D32, 1, (t:0, i:0))
2023-03-06 08:13:43,133 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s4@group-BA534FBE1D32-FOLLOWER: accept ELECTION from s3: our priority 0 <= candidate's priority 0
2023-03-06 08:13:43,133 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s4@group-BA534FBE1D32: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s3
2023-03-06 08:13:43,133 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s5@group-BA534FBE1D32-FOLLOWER: accept ELECTION from s3: our priority 0 <= candidate's priority 0
2023-03-06 08:13:43,133 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-BA534FBE1D32-FollowerState
2023-03-06 08:13:43,133 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s5@group-BA534FBE1D32: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s3
2023-03-06 08:13:43,133 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s5: shutdown s5@group-BA534FBE1D32-FollowerState
2023-03-06 08:13:43,133 [s4@group-BA534FBE1D32-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s4@group-BA534FBE1D32-FollowerState was interrupted
2023-03-06 08:13:43,134 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-BA534FBE1D32-FollowerState
2023-03-06 08:13:43,134 [s5@group-BA534FBE1D32-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s5@group-BA534FBE1D32-FollowerState was interrupted
2023-03-06 08:13:43,134 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-BA534FBE1D32-FollowerState
2023-03-06 08:13:43,134 [s4@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:43,134 [s4@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:43,135 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s4@group-BA534FBE1D32 replies to ELECTION vote request: s3<-s4#0:OK-t1. Peer's state: s4@group-BA534FBE1D32:t1, leader=null, voted=s3, raftlog=Memoized:s4@group-BA534FBE1D32-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:43,135 [s5@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:43,136 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s5@group-BA534FBE1D32 replies to ELECTION vote request: s3<-s5#0:OK-t1. Peer's state: s5@group-BA534FBE1D32:t1, leader=null, voted=s3, raftlog=Memoized:s5@group-BA534FBE1D32-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:43,137 [s5@group-BA534FBE1D32-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:43,137 [s3@group-BA534FBE1D32-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-BA534FBE1D32-LeaderElection6: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:43,137 [s3@group-BA534FBE1D32-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s3<-s4#0:OK-t1
2023-03-06 08:13:43,137 [s3@group-BA534FBE1D32-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s3@group-BA534FBE1D32-LeaderElection6 ELECTION round 0: result PASSED
2023-03-06 08:13:43,137 [s3@group-BA534FBE1D32-LeaderElection6] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s3: shutdown s3@group-BA534FBE1D32-LeaderElection6
2023-03-06 08:13:43,138 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s3@group-BA534FBE1D32: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:13:43,138 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s3@group-BA534FBE1D32: change Leader from null to s3 at term 1 for becomeLeader, leader elected after 321ms
2023-03-06 08:13:43,138 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:13:43,138 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-03-06 08:13:43,138 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 1MB (=1048576) (custom)
2023-03-06 08:13:43,138 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:13:43,138 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:13:43,138 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:13:43,138 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-03-06 08:13:43,138 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:13:43,139 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:43,139 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:43,139 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:43,139 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:43,139 [s3@group-BA534FBE1D32-LeaderElection6] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:43,139 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:43,139 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:43,139 [s3@group-BA534FBE1D32-LeaderElection6] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:43,139 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:43,139 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:43,140 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:43,140 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:43,140 [s3@group-BA534FBE1D32-LeaderElection6] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:43,140 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:43,140 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:43,140 [s3@group-BA534FBE1D32-LeaderElection6] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:43,140 [s3@group-BA534FBE1D32-LeaderElection6] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-BA534FBE1D32-LeaderStateImpl
2023-03-06 08:13:43,140 [s3@group-BA534FBE1D32-LeaderElection6] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s3@group-BA534FBE1D32-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:43,150 [s3@group-BA534FBE1D32-LeaderElection6] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s3@group-BA534FBE1D32: set configuration 0: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:43,150 [s4-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s4@group-BA534FBE1D32: change Leader from null to s3 at term 1 for appendEntries, leader elected after 315ms
2023-03-06 08:13:43,153 [s3@group-BA534FBE1D32-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s3@group-BA534FBE1D32-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s3/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/current/log_inprogress_0
2023-03-06 08:13:43,155 [s5-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s5@group-BA534FBE1D32: change Leader from null to s3 at term 1 for appendEntries, leader elected after 310ms
2023-03-06 08:13:43,158 [s4-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s4@group-BA534FBE1D32: set configuration 0: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:43,159 [s4-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s4@group-BA534FBE1D32-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:43,165 [s5-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s5@group-BA534FBE1D32: set configuration 0: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:43,166 [s5-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s5@group-BA534FBE1D32-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:43,177 [s4@group-BA534FBE1D32-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s4@group-BA534FBE1D32-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s4/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/current/log_inprogress_0
2023-03-06 08:13:43,177 [s5@group-BA534FBE1D32-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s5@group-BA534FBE1D32-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcb7688ec2/s5/3628383a-14dc-4b3a-aaa6-ba534fbe1d32/current/log_inprogress_0
2023-03-06 08:13:43,214 [timer7] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,214 [timer7] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,277 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E7783396097D->s4: receive RaftClientReply:client-E7783396097D->s4@group-BA534FBE1D32, cid=2, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s4@group-BA534FBE1D32 is not the leader s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s4:c-1, s3:c-1, s5:c-1]
2023-03-06 08:13:43,282 [timer6] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,282 [timer6] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,342 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E7783396097D->s3: receive RaftClientReply:client-E7783396097D->s3@group-BA534FBE1D32, cid=2, SUCCESS, logIndex=0, commits[s3:c0, s4:c0, s5:c0]
2023-03-06 08:13:43,348 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 3@client-E7783396097D
2023-03-06 08:13:43,350 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E7783396097D->s3: receive RaftClientReply:client-E7783396097D->s3@group-BA534FBE1D32, cid=3, SUCCESS, logIndex=1, commits[s3:c1, s4:c0, s5:c0]
2023-03-06 08:13:43,359 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 3@client-E7783396097D
2023-03-06 08:13:43,371 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 3@client-E7783396097D
2023-03-06 08:13:43,390 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block FLUSH_STATE_MACHINE_DATA
2023-03-06 08:13:43,391 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,391 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,403 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,403 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,406 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,421 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,424 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,424 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,432 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,432 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,442 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,454 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,469 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,469 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,485 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,485 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,494 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,495 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,507 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,511 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,514 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:43,519 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:43,814 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-8B80622EE544->s3: receive RaftClientReply:client-8B80622EE544->s3@group-BA534FBE1D32, cid=4, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:43,845 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-F190FE07B00E->s3: receive RaftClientReply:client-F190FE07B00E->s3@group-BA534FBE1D32, cid=8, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:43,908 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-55A3675BFE16->s3: receive RaftClientReply:client-55A3675BFE16->s3@group-BA534FBE1D32, cid=10, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:43,942 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-4A1F37A5191D->s3: receive RaftClientReply:client-4A1F37A5191D->s3@group-BA534FBE1D32, cid=12, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:43,952 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-1E096C8A11C7->s3: receive RaftClientReply:client-1E096C8A11C7->s3@group-BA534FBE1D32, cid=14, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:43,955 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2733B3CDB494->s3: receive RaftClientReply:client-2733B3CDB494->s3@group-BA534FBE1D32, cid=18, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:43,985 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-AC8A0C3C4A67->s3: receive RaftClientReply:client-AC8A0C3C4A67->s3@group-BA534FBE1D32, cid=22, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:43,986 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-81D65E62DA99->s3: receive RaftClientReply:client-81D65E62DA99->s3@group-BA534FBE1D32, cid=6, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:44,026 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-01D1806DCBAB->s3: receive RaftClientReply:client-01D1806DCBAB->s3@group-BA534FBE1D32, cid=20, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:44,033 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-AC1AF6280A3B->s3: receive RaftClientReply:client-AC1AF6280A3B->s3@group-BA534FBE1D32, cid=16, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:44,040 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2618CE9C6F1E->s3: receive RaftClientReply:client-2618CE9C6F1E->s3@group-BA534FBE1D32, cid=24, SUCCESS, logIndex=2, commits[s3:c2, s4:c2, s5:c2]
2023-03-06 08:13:44,094 [grpc-default-executor-1] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=message 9
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s3@group-BA534FBE1D32: Failed to acquire a pending write request for RaftClientRequest:client-2618CE9C6F1E->s3@group-BA534FBE1D32, cid=25, seq=2, RW, Message:6d6573736167652039
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s3@group-BA534FBE1D32: Failed to acquire a pending write request for RaftClientRequest:client-2618CE9C6F1E->s3@group-BA534FBE1D32, cid=25, seq=2, RW, Message:6d6573736167652039
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:775)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:886)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:824)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:824)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:894)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:893)
		... 7 more
2023-03-06 08:13:44,125 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock FLUSH_STATE_MACHINE_DATA
2023-03-06 08:13:44,133 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 3, message 1 -> (t:1, i:3), STATEMACHINELOGENTRY, 9@client-F190FE07B00E
2023-03-06 08:13:44,135 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-F190FE07B00E->s3: receive RaftClientReply:client-F190FE07B00E->s3@group-BA534FBE1D32, cid=9, SUCCESS, logIndex=3, commits[s3:c3, s4:c2, s5:c2]
2023-03-06 08:13:44,135 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 4, 2nd Messag... -> (t:1, i:4), STATEMACHINELOGENTRY, 5@client-8B80622EE544
2023-03-06 08:13:44,135 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 11@client-55A3675BFE16
2023-03-06 08:13:44,136 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 6, message 4 -> (t:1, i:6), STATEMACHINELOGENTRY, 15@client-1E096C8A11C7
2023-03-06 08:13:44,136 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 7, message 6 -> (t:1, i:7), STATEMACHINELOGENTRY, 19@client-2733B3CDB494
2023-03-06 08:13:44,136 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 13@client-4A1F37A5191D
2023-03-06 08:13:44,136 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 9, message 8 -> (t:1, i:9), STATEMACHINELOGENTRY, 23@client-AC8A0C3C4A67
2023-03-06 08:13:44,136 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 10, message 0 -> (t:1, i:10), STATEMACHINELOGENTRY, 7@client-81D65E62DA99
2023-03-06 08:13:44,136 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 21@client-01D1806DCBAB
2023-03-06 08:13:44,137 [s3@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 12, message 5 -> (t:1, i:12), STATEMACHINELOGENTRY, 17@client-AC1AF6280A3B
2023-03-06 08:13:44,139 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-81D65E62DA99->s3: receive RaftClientReply:client-81D65E62DA99->s3@group-BA534FBE1D32, cid=7, SUCCESS, logIndex=10, commits[s3:c12, s4:c2, s5:c2]
2023-03-06 08:13:44,139 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-55A3675BFE16->s3: receive RaftClientReply:client-55A3675BFE16->s3@group-BA534FBE1D32, cid=11, SUCCESS, logIndex=5, commits[s3:c12, s4:c2, s5:c2]
2023-03-06 08:13:44,139 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-01D1806DCBAB->s3: receive RaftClientReply:client-01D1806DCBAB->s3@group-BA534FBE1D32, cid=21, SUCCESS, logIndex=11, commits[s3:c12, s4:c2, s5:c2]
2023-03-06 08:13:44,140 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-4A1F37A5191D->s3: receive RaftClientReply:client-4A1F37A5191D->s3@group-BA534FBE1D32, cid=13, SUCCESS, logIndex=8, commits[s3:c12, s4:c2, s5:c2]
2023-03-06 08:13:44,140 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-8B80622EE544->s3: receive RaftClientReply:client-8B80622EE544->s3@group-BA534FBE1D32, cid=5, SUCCESS, logIndex=4, commits[s3:c12, s4:c2, s5:c2]
2023-03-06 08:13:44,151 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-1E096C8A11C7->s3: receive RaftClientReply:client-1E096C8A11C7->s3@group-BA534FBE1D32, cid=15, SUCCESS, logIndex=6, commits[s3:c12, s4:c2, s5:c2]
2023-03-06 08:13:44,152 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2733B3CDB494->s3: receive RaftClientReply:client-2733B3CDB494->s3@group-BA534FBE1D32, cid=19, SUCCESS, logIndex=7, commits[s3:c12, s4:c2, s5:c2]
2023-03-06 08:13:44,152 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-AC8A0C3C4A67->s3: receive RaftClientReply:client-AC8A0C3C4A67->s3@group-BA534FBE1D32, cid=23, SUCCESS, logIndex=9, commits[s3:c12, s4:c2, s5:c2]
2023-03-06 08:13:44,152 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-AC1AF6280A3B->s3: receive RaftClientReply:client-AC1AF6280A3B->s3@group-BA534FBE1D32, cid=17, SUCCESS, logIndex=12, commits[s3:c12, s4:c2, s5:c2]
2023-03-06 08:13:44,153 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 3, message 1 -> (t:1, i:3), STATEMACHINELOGENTRY, 9@client-F190FE07B00E
2023-03-06 08:13:44,153 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 4, 2nd Messag... -> (t:1, i:4), STATEMACHINELOGENTRY, 5@client-8B80622EE544
2023-03-06 08:13:44,153 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 11@client-55A3675BFE16
2023-03-06 08:13:44,154 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 3, message 1 -> (t:1, i:3), STATEMACHINELOGENTRY, 9@client-F190FE07B00E
2023-03-06 08:13:44,154 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 4, 2nd Messag... -> (t:1, i:4), STATEMACHINELOGENTRY, 5@client-8B80622EE544
2023-03-06 08:13:44,154 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 11@client-55A3675BFE16
2023-03-06 08:13:44,154 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 6, message 4 -> (t:1, i:6), STATEMACHINELOGENTRY, 15@client-1E096C8A11C7
2023-03-06 08:13:44,154 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 7, message 6 -> (t:1, i:7), STATEMACHINELOGENTRY, 19@client-2733B3CDB494
2023-03-06 08:13:44,155 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 13@client-4A1F37A5191D
2023-03-06 08:13:44,155 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 9, message 8 -> (t:1, i:9), STATEMACHINELOGENTRY, 23@client-AC8A0C3C4A67
2023-03-06 08:13:44,155 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 10, message 0 -> (t:1, i:10), STATEMACHINELOGENTRY, 7@client-81D65E62DA99
2023-03-06 08:13:44,156 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 21@client-01D1806DCBAB
2023-03-06 08:13:44,156 [s5@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 12, message 5 -> (t:1, i:12), STATEMACHINELOGENTRY, 17@client-AC1AF6280A3B
2023-03-06 08:13:44,154 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 6, message 4 -> (t:1, i:6), STATEMACHINELOGENTRY, 15@client-1E096C8A11C7
2023-03-06 08:13:44,157 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 7, message 6 -> (t:1, i:7), STATEMACHINELOGENTRY, 19@client-2733B3CDB494
2023-03-06 08:13:44,157 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 13@client-4A1F37A5191D
2023-03-06 08:13:44,157 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 9, message 8 -> (t:1, i:9), STATEMACHINELOGENTRY, 23@client-AC8A0C3C4A67
2023-03-06 08:13:44,158 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 10, message 0 -> (t:1, i:10), STATEMACHINELOGENTRY, 7@client-81D65E62DA99
2023-03-06 08:13:44,158 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 21@client-01D1806DCBAB
2023-03-06 08:13:44,158 [s4@group-BA534FBE1D32-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 12, message 5 -> (t:1, i:12), STATEMACHINELOGENTRY, 17@client-AC1AF6280A3B
2023-03-06 08:13:44,161 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:44,161 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:44,211 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-DEC5AA852CE4->s3: receive RaftClientReply:client-DEC5AA852CE4->s3@group-BA534FBE1D32, cid=26, SUCCESS, logIndex=14, commits[s3:c14, s4:c12, s5:c12]
2023-03-06 08:13:44,269 [grpc-default-executor-3] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=1025kb (=1049600)-message
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s3@group-BA534FBE1D32: Failed to acquire a pending write request for RaftClientRequest:client-DEC5AA852CE4->s3@group-BA534FBE1D32, cid=27, seq=2, RW, Message:bb9e513e8b5501d59d0e...(size=1049600)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s3@group-BA534FBE1D32: Failed to acquire a pending write request for RaftClientRequest:client-DEC5AA852CE4->s3@group-BA534FBE1D32, cid=27, seq=2, RW, Message:bb9e513e8b5501d59d0e...(size=1049600)
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:775)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:886)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:824)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:824)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:894)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:893)
		... 7 more
2023-03-06 08:13:44,783 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:13:44,783 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:13:44,783 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:13:44,783 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:13:44,783 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:13:44,783 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s3:  RUNNING    LEADER s3@group-BA534FBE1D32:t1, leader=s3, voted=s3, raftlog=Memoized:s3@group-BA534FBE1D32-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s4:  RUNNING  FOLLOWER s4@group-BA534FBE1D32:t1, leader=s3, voted=s3, raftlog=Memoized:s4@group-BA534FBE1D32-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s5:  RUNNING  FOLLOWER s5@group-BA534FBE1D32:t1, leader=s3, voted=s3, raftlog=Memoized:s5@group-BA534FBE1D32-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s3|rpc:localhost:45535|admin:localhost:46557|client:localhost:37945|dataStream:localhost:44255|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:38849|admin:localhost:40939|client:localhost:34967|dataStream:localhost:38643|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36231|admin:localhost:46709|client:localhost:39727|dataStream:localhost:44325|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:44,784 [MiniRaftCluster-4] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s3: close
2023-03-06 08:13:44,784 [MiniRaftCluster-5] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s4: close
2023-03-06 08:13:44,795 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:44,795 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s4@group-BA534FBE1D32: shutdown
2023-03-06 08:13:44,795 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA534FBE1D32,id=s4
2023-03-06 08:13:44,795 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-BA534FBE1D32-FollowerState
2023-03-06 08:13:44,795 [s4-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s4@group-BA534FBE1D32-StateMachineUpdater: set stopIndex = 14
2023-03-06 08:13:44,796 [s4@group-BA534FBE1D32-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s4@group-BA534FBE1D32-FollowerState was interrupted
2023-03-06 08:13:44,796 [s4-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s4@group-BA534FBE1D32: applyIndex: 14
2023-03-06 08:13:44,795 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:44,795 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s3@group-BA534FBE1D32: shutdown
2023-03-06 08:13:44,797 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA534FBE1D32,id=s3
2023-03-06 08:13:44,797 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s3: shutdown s3@group-BA534FBE1D32-LeaderStateImpl
2023-03-06 08:13:44,797 [s3-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s3@group-BA534FBE1D32-PendingRequests: sendNotLeaderResponses
2023-03-06 08:13:44,800 [MiniRaftCluster-6] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s5: close
2023-03-06 08:13:44,800 [grpc-default-executor-5] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s5: Completed APPEND_ENTRIES, lastRequest: s3->s5#5755-t1,previous=(t:1, i:12),leaderCommit=12,initializing? true,entries: size=2, first=(t:1, i:13), METADATAENTRY(c:3)
2023-03-06 08:13:44,801 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:44,802 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s5@group-BA534FBE1D32: shutdown
2023-03-06 08:13:44,802 [s5-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-BA534FBE1D32,id=s5
2023-03-06 08:13:44,802 [s5-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s5: shutdown s5@group-BA534FBE1D32-FollowerState
2023-03-06 08:13:44,802 [s5-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s5@group-BA534FBE1D32-StateMachineUpdater: set stopIndex = 14
2023-03-06 08:13:44,802 [s5@group-BA534FBE1D32-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s5@group-BA534FBE1D32-FollowerState was interrupted
2023-03-06 08:13:44,802 [s5-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s5@group-BA534FBE1D32: applyIndex: 14
2023-03-06 08:13:44,803 [grpc-default-executor-5] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s4: Completed APPEND_ENTRIES, lastRequest: s3->s4#5707-t1,previous=(t:1, i:12),leaderCommit=12,initializing? true,entries: size=2, first=(t:1, i:13), METADATAENTRY(c:3)
2023-03-06 08:13:44,803 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:44,804 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:44,804 [s3-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s3@group-BA534FBE1D32-StateMachineUpdater: set stopIndex = 14
2023-03-06 08:13:44,804 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:44,804 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:44,802 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s3@group-BA534FBE1D32->s5-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:13:44,805 [s3-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s3@group-BA534FBE1D32: applyIndex: 14
2023-03-06 08:13:44,806 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s3@group-BA534FBE1D32->s5: decreaseNextIndex nextIndex: updateUnconditionally 15 -> 14
2023-03-06 08:13:44,807 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s3@group-BA534FBE1D32->s4-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:13:44,807 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s3@group-BA534FBE1D32->s4: decreaseNextIndex nextIndex: updateUnconditionally 15 -> 14
2023-03-06 08:13:44,813 [Thread-205] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s4 Close channels
2023-03-06 08:13:44,813 [Thread-207] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s5 Close channels
2023-03-06 08:13:44,818 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:44,818 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:44,818 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:44,818 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:44,825 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:44,825 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:44,825 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:44,825 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:44,825 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:44,827 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:44,829 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:45,137 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s3@group-BA534FBE1D32-SegmentedRaftLogWorker close()
2023-03-06 08:13:45,138 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s3: Stopped
2023-03-06 08:13:45,154 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s5@group-BA534FBE1D32-SegmentedRaftLogWorker close()
2023-03-06 08:13:45,155 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s5: Stopped
2023-03-06 08:13:45,156 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s4@group-BA534FBE1D32-SegmentedRaftLogWorker close()
2023-03-06 08:13:45,157 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s4: Stopped
2023-03-06 08:13:45,157 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:13:45,158 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:13:45,158 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:13:45,158 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:13:45,159 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-03-06 08:13:45,160 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-1B3AC74315AF:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]
2023-03-06 08:13:45,160 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:13:45,160 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:13:45,160 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:13:45,160 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:13:45,160 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:13:45,160 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:13:45,160 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-1B3AC74315AF:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:45,160 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0
2023-03-06 08:13:45,160 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0 does not exist.
2023-03-06 08:13:45,160 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0
2023-03-06 08:13:45,161 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:45,161 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:45,161 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 40757 (custom)
2023-03-06 08:13:45,161 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:45,161 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37291 (custom)
2023-03-06 08:13:45,161 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:45,161 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 46525 (custom)
2023-03-06 08:13:45,161 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,161 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,161 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,161 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:45,161 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:45,161 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:45,161 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:45,163 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:45,163 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:45,163 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:45,163 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:45,163 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:45,163 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0] (custom)
2023-03-06 08:13:45,164 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-1B3AC74315AF:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER] returns group-1B3AC74315AF:java.util.concurrent.CompletableFuture@3a4c31a[Not completed]
2023-03-06 08:13:45,164 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-1B3AC74315AF:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:45,164 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1
2023-03-06 08:13:45,164 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1 does not exist.
2023-03-06 08:13:45,164 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1
2023-03-06 08:13:45,164 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:45,164 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:45,164 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33523 (custom)
2023-03-06 08:13:45,164 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:45,164 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 40853 (custom)
2023-03-06 08:13:45,164 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:45,164 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 39667 (custom)
2023-03-06 08:13:45,164 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,165 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,165 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,165 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:45,165 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:45,165 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:45,165 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:45,166 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:45,166 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:45,166 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:45,166 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:45,166 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:45,166 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1] (custom)
2023-03-06 08:13:45,166 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-1B3AC74315AF:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-1B3AC74315AF: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:45,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:45,168 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:45,168 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:45,174 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:45,174 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:45,174 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-1B3AC74315AF:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER] returns group-1B3AC74315AF:java.util.concurrent.CompletableFuture@46928b8e[Not completed]
2023-03-06 08:13:45,174 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-1B3AC74315AF:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:45,174 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2
2023-03-06 08:13:45,174 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2 does not exist.
2023-03-06 08:13:45,175 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2
2023-03-06 08:13:45,175 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:45,175 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:45,175 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 34141 (custom)
2023-03-06 08:13:45,175 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:45,175 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 42833 (custom)
2023-03-06 08:13:45,175 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:45,175 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 36621 (custom)
2023-03-06 08:13:45,175 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,175 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,175 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,175 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:45,175 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:45,175 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:45,175 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:45,176 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-1B3AC74315AF:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-1B3AC74315AF: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:45,176 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:45,177 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:45,177 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:45,177 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:45,177 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:45,177 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:45,177 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:45,178 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:45,178 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:45,178 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:45,178 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:45,178 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:45,178 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:45,178 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:45,178 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2] (custom)
2023-03-06 08:13:45,179 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-1B3AC74315AF:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER] returns group-1B3AC74315AF:java.util.concurrent.CompletableFuture@f0ae190[Not completed]
2023-03-06 08:13:45,180 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:45,180 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:45,180 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0] (custom)
2023-03-06 08:13:45,180 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0/097ca8dd-7550-47fc-b8ac-1b3ac74315af does not exist. Creating ...
2023-03-06 08:13:45,180 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0/097ca8dd-7550-47fc-b8ac-1b3ac74315af
2023-03-06 08:13:45,182 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:45,182 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:45,182 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0/097ca8dd-7550-47fc-b8ac-1b3ac74315af/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:45,182 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0/097ca8dd-7550-47fc-b8ac-1b3ac74315af/current
2023-03-06 08:13:45,182 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0/097ca8dd-7550-47fc-b8ac-1b3ac74315af/sm
2023-03-06 08:13:45,184 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:45,184 [s2-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-1B3AC74315AF:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:45,184 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0/097ca8dd-7550-47fc-b8ac-1b3ac74315af has been successfully formatted.
2023-03-06 08:13:45,184 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:45,184 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:45,184 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:45,184 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:45,184 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,185 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:45,185 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:45,186 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:45,186 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:45,186 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:45,186 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,186 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s0@group-1B3AC74315AF-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0/097ca8dd-7550-47fc-b8ac-1b3ac74315af
2023-03-06 08:13:45,186 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:45,187 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:45,187 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:45,187 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:45,187 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:45,187 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:45,187 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:45,188 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:45,188 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:45,188 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,190 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:45,190 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:45,190 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:45,190 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-1B3AC74315AF-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:45,190 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-1B3AC74315AF-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:45,191 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:45,191 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:45,191 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:45,191 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:45,191 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:45,191 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:45,191 [s2-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-1B3AC74315AF: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:45,192 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:45,192 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:45,192 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:45,192 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:45,193 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:45,196 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:45,197 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:45,198 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:45,198 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:45,198 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:45,201 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s0@group-1B3AC74315AF: start as a follower, conf=-1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,201 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-1B3AC74315AF: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:45,201 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-1B3AC74315AF-FollowerState
2023-03-06 08:13:45,201 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-1B3AC74315AF,id=s0
2023-03-06 08:13:45,201 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:45,201 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:45,202 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:45,202 [s0@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:45,202 [s0@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:45,205 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s0: start RPC server
2023-03-06 08:13:45,207 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 37291
2023-03-06 08:13:45,208 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 46525
2023-03-06 08:13:45,209 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 40757
2023-03-06 08:13:45,213 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:45,213 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:45,213 [JvmPauseMonitor6] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s0: Started
2023-03-06 08:13:45,214 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1] (custom)
2023-03-06 08:13:45,214 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1/097ca8dd-7550-47fc-b8ac-1b3ac74315af does not exist. Creating ...
2023-03-06 08:13:45,214 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1/097ca8dd-7550-47fc-b8ac-1b3ac74315af
2023-03-06 08:13:45,215 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1/097ca8dd-7550-47fc-b8ac-1b3ac74315af/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:45,215 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1/097ca8dd-7550-47fc-b8ac-1b3ac74315af/current
2023-03-06 08:13:45,215 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1/097ca8dd-7550-47fc-b8ac-1b3ac74315af/sm
2023-03-06 08:13:45,216 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1/097ca8dd-7550-47fc-b8ac-1b3ac74315af has been successfully formatted.
2023-03-06 08:13:45,216 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:45,217 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:45,217 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:45,217 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:45,217 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,217 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:45,217 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:45,218 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:45,218 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:45,218 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:45,218 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,218 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s1@group-1B3AC74315AF-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1/097ca8dd-7550-47fc-b8ac-1b3ac74315af
2023-03-06 08:13:45,218 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:45,218 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:45,218 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:45,219 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:45,219 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:45,219 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:45,219 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:45,219 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:45,219 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:45,219 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,221 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:45,221 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:45,221 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:45,221 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-1B3AC74315AF-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:45,221 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-1B3AC74315AF-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:45,222 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s1@group-1B3AC74315AF: start as a follower, conf=-1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,222 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-1B3AC74315AF: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:45,222 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-1B3AC74315AF-FollowerState
2023-03-06 08:13:45,223 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-1B3AC74315AF,id=s1
2023-03-06 08:13:45,223 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:45,223 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:45,223 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:45,224 [s1@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:45,224 [s1@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:45,224 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s1: start RPC server
2023-03-06 08:13:45,228 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 40853
2023-03-06 08:13:45,229 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 39667
2023-03-06 08:13:45,229 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 33523
2023-03-06 08:13:45,229 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:45,230 [JvmPauseMonitor7] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s1: Started
2023-03-06 08:13:45,230 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:45,230 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2] (custom)
2023-03-06 08:13:45,230 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2/097ca8dd-7550-47fc-b8ac-1b3ac74315af does not exist. Creating ...
2023-03-06 08:13:45,230 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2/097ca8dd-7550-47fc-b8ac-1b3ac74315af
2023-03-06 08:13:45,231 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2/097ca8dd-7550-47fc-b8ac-1b3ac74315af/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:45,231 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2/097ca8dd-7550-47fc-b8ac-1b3ac74315af/current
2023-03-06 08:13:45,231 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2/097ca8dd-7550-47fc-b8ac-1b3ac74315af/sm
2023-03-06 08:13:45,232 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2/097ca8dd-7550-47fc-b8ac-1b3ac74315af has been successfully formatted.
2023-03-06 08:13:45,232 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:45,232 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:45,232 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:45,233 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:45,233 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,233 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:45,233 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:45,233 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:45,233 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s2@group-1B3AC74315AF-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2/097ca8dd-7550-47fc-b8ac-1b3ac74315af
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:45,234 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,236 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:45,236 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:45,236 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:45,236 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-1B3AC74315AF-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:45,236 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-1B3AC74315AF-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:45,237 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s2@group-1B3AC74315AF: start as a follower, conf=-1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,237 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-1B3AC74315AF: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:45,238 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-1B3AC74315AF-FollowerState
2023-03-06 08:13:45,241 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-1B3AC74315AF,id=s2
2023-03-06 08:13:45,241 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:45,241 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:45,242 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:45,242 [s2@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:45,242 [s2@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:45,242 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s2: start RPC server
2023-03-06 08:13:45,246 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 42833
2023-03-06 08:13:45,247 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 36621
2023-03-06 08:13:45,247 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 34141
2023-03-06 08:13:45,248 [JvmPauseMonitor8] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s2: Started
2023-03-06 08:13:45,248 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,248 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,258 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-94B2B04FA5B8->s0: receive RaftClientReply:client-94B2B04FA5B8->s0@group-1B3AC74315AF, cid=28, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-1B3AC74315AF is not the leader, logIndex=0, commits[s0:c-1]
2023-03-06 08:13:45,361 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,362 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,372 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-94B2B04FA5B8->s2: receive RaftClientReply:client-94B2B04FA5B8->s2@group-1B3AC74315AF, cid=28, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s2@group-1B3AC74315AF is not the leader, logIndex=0, commits[s2:c-1]
2023-03-06 08:13:45,428 [s0@group-1B3AC74315AF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-1B3AC74315AF-FollowerState: change to CANDIDATE, lastRpcElapsedTime:227365103ns, electionTimeout:226ms
2023-03-06 08:13:45,428 [s0@group-1B3AC74315AF-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-1B3AC74315AF-FollowerState
2023-03-06 08:13:45,429 [s0@group-1B3AC74315AF-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-1B3AC74315AF: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:13:45,429 [s0@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:45,429 [s0@group-1B3AC74315AF-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-1B3AC74315AF-LeaderElection7
2023-03-06 08:13:45,433 [s0@group-1B3AC74315AF-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-1B3AC74315AF-LeaderElection7 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,434 [s0@group-1B3AC74315AF-LeaderElection7-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-03-06 08:13:45,434 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:45,434 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:45,434 [s0@group-1B3AC74315AF-LeaderElection7-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-03-06 08:13:45,439 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-1B3AC74315AF: receive requestVote(PRE_VOTE, s0, group-1B3AC74315AF, 0, (t:0, i:0))
2023-03-06 08:13:45,439 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-1B3AC74315AF-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:45,439 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-1B3AC74315AF replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-1B3AC74315AF:t0, leader=null, voted=, raftlog=Memoized:s2@group-1B3AC74315AF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,440 [s0@group-1B3AC74315AF-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-1B3AC74315AF-LeaderElection7: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:45,440 [s0@group-1B3AC74315AF-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s2#0:OK-t0
2023-03-06 08:13:45,440 [s0@group-1B3AC74315AF-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-1B3AC74315AF-LeaderElection7 PRE_VOTE round 0: result PASSED
2023-03-06 08:13:45,441 [s0@group-1B3AC74315AF-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-1B3AC74315AF-LeaderElection7 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,444 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:45,444 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:45,451 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-1B3AC74315AF: receive requestVote(PRE_VOTE, s0, group-1B3AC74315AF, 0, (t:0, i:0))
2023-03-06 08:13:45,451 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-1B3AC74315AF-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:45,451 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-1B3AC74315AF replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-1B3AC74315AF:t0, leader=null, voted=, raftlog=Memoized:s1@group-1B3AC74315AF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,453 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-1B3AC74315AF: receive requestVote(ELECTION, s0, group-1B3AC74315AF, 1, (t:0, i:0))
2023-03-06 08:13:45,453 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-1B3AC74315AF-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:45,453 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-1B3AC74315AF: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-03-06 08:13:45,453 [grpc-default-executor-5] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-1B3AC74315AF-FollowerState
2023-03-06 08:13:45,453 [s1@group-1B3AC74315AF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-1B3AC74315AF-FollowerState was interrupted
2023-03-06 08:13:45,457 [grpc-default-executor-5] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-1B3AC74315AF-FollowerState
2023-03-06 08:13:45,457 [s1@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:45,457 [s1@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:45,458 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-1B3AC74315AF replies to ELECTION vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-1B3AC74315AF:t1, leader=null, voted=s0, raftlog=Memoized:s1@group-1B3AC74315AF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,459 [s0@group-1B3AC74315AF-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-1B3AC74315AF-LeaderElection7: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:45,459 [s0@group-1B3AC74315AF-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t1
2023-03-06 08:13:45,459 [s0@group-1B3AC74315AF-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-1B3AC74315AF-LeaderElection7 ELECTION round 0: result PASSED
2023-03-06 08:13:45,459 [s0@group-1B3AC74315AF-LeaderElection7] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-1B3AC74315AF-LeaderElection7
2023-03-06 08:13:45,459 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-1B3AC74315AF: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:13:45,459 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-1B3AC74315AF: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 292ms
2023-03-06 08:13:45,460 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:13:45,460 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-03-06 08:13:45,460 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 1MB (=1048576) (custom)
2023-03-06 08:13:45,460 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:13:45,460 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:13:45,460 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:13:45,460 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-03-06 08:13:45,460 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-1B3AC74315AF: receive requestVote(ELECTION, s0, group-1B3AC74315AF, 1, (t:0, i:0))
2023-03-06 08:13:45,460 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:45,461 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:45,462 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:45,462 [s0@group-1B3AC74315AF-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:45,462 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:45,462 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:45,462 [s0@group-1B3AC74315AF-LeaderElection7] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:45,462 [s0@group-1B3AC74315AF-LeaderElection7] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-1B3AC74315AF-LeaderStateImpl
2023-03-06 08:13:45,462 [s0@group-1B3AC74315AF-LeaderElection7] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-1B3AC74315AF-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:45,465 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-1B3AC74315AF-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:45,466 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-1B3AC74315AF: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-03-06 08:13:45,466 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-1B3AC74315AF-FollowerState
2023-03-06 08:13:45,466 [s2@group-1B3AC74315AF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-1B3AC74315AF-FollowerState was interrupted
2023-03-06 08:13:45,472 [s0@group-1B3AC74315AF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-1B3AC74315AF-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s0/097ca8dd-7550-47fc-b8ac-1b3ac74315af/current/log_inprogress_0
2023-03-06 08:13:45,475 [timer4] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,475 [timer4] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,482 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-1B3AC74315AF-FollowerState
2023-03-06 08:13:45,482 [s0@group-1B3AC74315AF-LeaderElection7] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-1B3AC74315AF: set configuration 0: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,486 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-1B3AC74315AF: change Leader from null to s0 at term 1 for appendEntries, leader elected after 309ms
2023-03-06 08:13:45,490 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-1B3AC74315AF: set configuration 0: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,490 [s1-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s1@group-1B3AC74315AF-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:45,493 [s2@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:45,493 [s2@group-1B3AC74315AF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:45,497 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-1B3AC74315AF replies to ELECTION vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-1B3AC74315AF:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-1B3AC74315AF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,509 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-1B3AC74315AF: change Leader from null to s0 at term 1 for appendEntries, leader elected after 317ms
2023-03-06 08:13:45,510 [s1@group-1B3AC74315AF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s1@group-1B3AC74315AF-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s1/097ca8dd-7550-47fc-b8ac-1b3ac74315af/current/log_inprogress_0
2023-03-06 08:13:45,528 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-94B2B04FA5B8->s1: receive RaftClientReply:client-94B2B04FA5B8->s1@group-1B3AC74315AF, cid=28, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s1@group-1B3AC74315AF is not the leader s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s1:c-1, s0:c-1, s2:c-1]
2023-03-06 08:13:45,530 [s2-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-1B3AC74315AF: set configuration 0: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:45,530 [s2-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s2@group-1B3AC74315AF-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:45,545 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,546 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,557 [s2@group-1B3AC74315AF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s2@group-1B3AC74315AF-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf5c7c981/s2/097ca8dd-7550-47fc-b8ac-1b3ac74315af/current/log_inprogress_0
2023-03-06 08:13:45,558 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-94B2B04FA5B8->s0: receive RaftClientReply:client-94B2B04FA5B8->s0@group-1B3AC74315AF, cid=28, SUCCESS, logIndex=0, commits[s0:c0, s1:c-1, s2:c-1]
2023-03-06 08:13:45,566 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 29@client-94B2B04FA5B8
2023-03-06 08:13:45,570 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-94B2B04FA5B8->s0: receive RaftClientReply:client-94B2B04FA5B8->s0@group-1B3AC74315AF, cid=29, SUCCESS, logIndex=1, commits[s0:c1, s1:c0, s2:c-1]
2023-03-06 08:13:45,573 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 29@client-94B2B04FA5B8
2023-03-06 08:13:45,577 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 29@client-94B2B04FA5B8
2023-03-06 08:13:45,579 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block FLUSH_STATE_MACHINE_DATA
2023-03-06 08:13:45,580 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,580 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,582 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,583 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,587 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,587 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,597 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-177D80CA786A->s0: receive RaftClientReply:client-177D80CA786A->s0@group-1B3AC74315AF, cid=30, SUCCESS, logIndex=2, commits[s0:c2, s1:c1, s2:c1]
2023-03-06 08:13:45,611 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,611 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,613 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,613 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,617 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,618 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,622 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3732027D85E1->s0: receive RaftClientReply:client-3732027D85E1->s0@group-1B3AC74315AF, cid=32, SUCCESS, logIndex=2, commits[s0:c2, s1:c1, s2:c2]
2023-03-06 08:13:45,630 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-F638DBD73CD8->s0: receive RaftClientReply:client-F638DBD73CD8->s0@group-1B3AC74315AF, cid=34, SUCCESS, logIndex=2, commits[s0:c2, s1:c1, s2:c2]
2023-03-06 08:13:45,639 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-9677DD733571->s0: receive RaftClientReply:client-9677DD733571->s0@group-1B3AC74315AF, cid=36, SUCCESS, logIndex=2, commits[s0:c2, s1:c1, s2:c2]
2023-03-06 08:13:45,643 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,649 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,655 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-AC24A6B135EA->s0: receive RaftClientReply:client-AC24A6B135EA->s0@group-1B3AC74315AF, cid=38, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:13:45,659 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-168AF7E07AEF->s0: receive RaftClientReply:client-168AF7E07AEF->s0@group-1B3AC74315AF, cid=40, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:13:45,660 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,661 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,662 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,662 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,664 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,668 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E9BC94760398->s0: receive RaftClientReply:client-E9BC94760398->s0@group-1B3AC74315AF, cid=46, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:13:45,670 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,697 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:45,698 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-839E28D98E5F->s0: receive RaftClientReply:client-839E28D98E5F->s0@group-1B3AC74315AF, cid=42, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:13:45,697 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-CFA3D057F385->s0: receive RaftClientReply:client-CFA3D057F385->s0@group-1B3AC74315AF, cid=44, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:13:45,699 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:45,702 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3B26122D7470->s0: receive RaftClientReply:client-3B26122D7470->s0@group-1B3AC74315AF, cid=48, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:13:45,714 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E6873C471DEC->s0: receive RaftClientReply:client-E6873C471DEC->s0@group-1B3AC74315AF, cid=50, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:13:45,728 [grpc-default-executor-6] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=message 9
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-1B3AC74315AF: Failed to acquire a pending write request for RaftClientRequest:client-E6873C471DEC->s0@group-1B3AC74315AF, cid=51, seq=2, RW, Message:6d6573736167652039
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-1B3AC74315AF: Failed to acquire a pending write request for RaftClientRequest:client-E6873C471DEC->s0@group-1B3AC74315AF, cid=51, seq=2, RW, Message:6d6573736167652039
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:775)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:886)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:824)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:824)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:894)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:893)
		... 7 more
2023-03-06 08:13:46,018 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock FLUSH_STATE_MACHINE_DATA
2023-03-06 08:13:46,023 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 31@client-177D80CA786A
2023-03-06 08:13:46,024 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-177D80CA786A->s0: receive RaftClientReply:client-177D80CA786A->s0@group-1B3AC74315AF, cid=31, SUCCESS, logIndex=3, commits[s0:c3, s1:c2, s2:c2]
2023-03-06 08:13:46,026 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 33@client-3732027D85E1
2023-03-06 08:13:46,026 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, message 3 -> (t:1, i:5), STATEMACHINELOGENTRY, 39@client-AC24A6B135EA
2023-03-06 08:13:46,026 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 6, message 1 -> (t:1, i:6), STATEMACHINELOGENTRY, 35@client-F638DBD73CD8
2023-03-06 08:13:46,026 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, message 4 -> (t:1, i:7), STATEMACHINELOGENTRY, 41@client-168AF7E07AEF
2023-03-06 08:13:46,026 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 8, message 2 -> (t:1, i:8), STATEMACHINELOGENTRY, 37@client-9677DD733571
2023-03-06 08:13:46,026 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, message 6 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-CFA3D057F385
2023-03-06 08:13:46,027 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 10, message 5 -> (t:1, i:10), STATEMACHINELOGENTRY, 43@client-839E28D98E5F
2023-03-06 08:13:46,027 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, message 8 -> (t:1, i:11), STATEMACHINELOGENTRY, 49@client-3B26122D7470
2023-03-06 08:13:46,027 [s0@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 12, message 7 -> (t:1, i:12), STATEMACHINELOGENTRY, 47@client-E9BC94760398
2023-03-06 08:13:46,029 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-168AF7E07AEF->s0: receive RaftClientReply:client-168AF7E07AEF->s0@group-1B3AC74315AF, cid=41, SUCCESS, logIndex=7, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:13:46,030 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-9677DD733571->s0: receive RaftClientReply:client-9677DD733571->s0@group-1B3AC74315AF, cid=37, SUCCESS, logIndex=8, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:13:46,036 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-F638DBD73CD8->s0: receive RaftClientReply:client-F638DBD73CD8->s0@group-1B3AC74315AF, cid=35, SUCCESS, logIndex=6, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:13:46,036 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-839E28D98E5F->s0: receive RaftClientReply:client-839E28D98E5F->s0@group-1B3AC74315AF, cid=43, SUCCESS, logIndex=10, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:13:46,036 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-AC24A6B135EA->s0: receive RaftClientReply:client-AC24A6B135EA->s0@group-1B3AC74315AF, cid=39, SUCCESS, logIndex=5, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:13:46,037 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E9BC94760398->s0: receive RaftClientReply:client-E9BC94760398->s0@group-1B3AC74315AF, cid=47, SUCCESS, logIndex=12, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:13:46,037 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3B26122D7470->s0: receive RaftClientReply:client-3B26122D7470->s0@group-1B3AC74315AF, cid=49, SUCCESS, logIndex=11, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:13:46,037 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-CFA3D057F385->s0: receive RaftClientReply:client-CFA3D057F385->s0@group-1B3AC74315AF, cid=45, SUCCESS, logIndex=9, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:13:46,037 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 31@client-177D80CA786A
2023-03-06 08:13:46,037 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 33@client-3732027D85E1
2023-03-06 08:13:46,038 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 5, message 3 -> (t:1, i:5), STATEMACHINELOGENTRY, 39@client-AC24A6B135EA
2023-03-06 08:13:46,038 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 6, message 1 -> (t:1, i:6), STATEMACHINELOGENTRY, 35@client-F638DBD73CD8
2023-03-06 08:13:46,038 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 7, message 4 -> (t:1, i:7), STATEMACHINELOGENTRY, 41@client-168AF7E07AEF
2023-03-06 08:13:46,038 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 8, message 2 -> (t:1, i:8), STATEMACHINELOGENTRY, 37@client-9677DD733571
2023-03-06 08:13:46,038 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 9, message 6 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-CFA3D057F385
2023-03-06 08:13:46,039 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 10, message 5 -> (t:1, i:10), STATEMACHINELOGENTRY, 43@client-839E28D98E5F
2023-03-06 08:13:46,039 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 11, message 8 -> (t:1, i:11), STATEMACHINELOGENTRY, 49@client-3B26122D7470
2023-03-06 08:13:46,039 [s2@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 12, message 7 -> (t:1, i:12), STATEMACHINELOGENTRY, 47@client-E9BC94760398
2023-03-06 08:13:46,039 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3732027D85E1->s0: receive RaftClientReply:client-3732027D85E1->s0@group-1B3AC74315AF, cid=33, SUCCESS, logIndex=4, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:13:46,055 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 31@client-177D80CA786A
2023-03-06 08:13:46,056 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 33@client-3732027D85E1
2023-03-06 08:13:46,056 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 5, message 3 -> (t:1, i:5), STATEMACHINELOGENTRY, 39@client-AC24A6B135EA
2023-03-06 08:13:46,056 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 6, message 1 -> (t:1, i:6), STATEMACHINELOGENTRY, 35@client-F638DBD73CD8
2023-03-06 08:13:46,056 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 7, message 4 -> (t:1, i:7), STATEMACHINELOGENTRY, 41@client-168AF7E07AEF
2023-03-06 08:13:46,056 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 8, message 2 -> (t:1, i:8), STATEMACHINELOGENTRY, 37@client-9677DD733571
2023-03-06 08:13:46,056 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 9, message 6 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-CFA3D057F385
2023-03-06 08:13:46,057 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 10, message 5 -> (t:1, i:10), STATEMACHINELOGENTRY, 43@client-839E28D98E5F
2023-03-06 08:13:46,057 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 11, message 8 -> (t:1, i:11), STATEMACHINELOGENTRY, 49@client-3B26122D7470
2023-03-06 08:13:46,057 [s1@group-1B3AC74315AF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 12, message 7 -> (t:1, i:12), STATEMACHINELOGENTRY, 47@client-E9BC94760398
2023-03-06 08:13:46,062 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:46,062 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:46,082 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-373B2115DE47->s0: receive RaftClientReply:client-373B2115DE47->s0@group-1B3AC74315AF, cid=52, SUCCESS, logIndex=14, commits[s0:c14, s1:c12, s2:c12]
2023-03-06 08:13:46,127 [grpc-default-executor-1] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=1025kb (=1049600)-message
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-1B3AC74315AF: Failed to acquire a pending write request for RaftClientRequest:client-373B2115DE47->s0@group-1B3AC74315AF, cid=53, seq=2, RW, Message:3194751619da8e81415b...(size=1049600)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-1B3AC74315AF: Failed to acquire a pending write request for RaftClientRequest:client-373B2115DE47->s0@group-1B3AC74315AF, cid=53, seq=2, RW, Message:3194751619da8e81415b...(size=1049600)
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:775)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:886)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:824)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:824)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:894)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:893)
		... 7 more
2023-03-06 08:13:46,363 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:13:46,363 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:13:46,363 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:13:46,363 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:13:46,363 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:13:46,363 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-1B3AC74315AF:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-1B3AC74315AF-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-1B3AC74315AF:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-1B3AC74315AF-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-1B3AC74315AF:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-1B3AC74315AF-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:46525|admin:localhost:40757|client:localhost:37291|dataStream:localhost:43141|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:39667|admin:localhost:33523|client:localhost:40853|dataStream:localhost:43089|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36621|admin:localhost:34141|client:localhost:42833|dataStream:localhost:42529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:46,367 [MiniRaftCluster-7] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s0: close
2023-03-06 08:13:46,367 [MiniRaftCluster-8] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s1: close
2023-03-06 08:13:46,368 [MiniRaftCluster-9] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s2: close
2023-03-06 08:13:46,369 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:46,369 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s0@group-1B3AC74315AF: shutdown
2023-03-06 08:13:46,369 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-1B3AC74315AF,id=s0
2023-03-06 08:13:46,369 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-1B3AC74315AF-LeaderStateImpl
2023-03-06 08:13:46,369 [s0@group-1B3AC74315AF->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(190)) - s0@group-1B3AC74315AF->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-03-06 08:13:46,369 [s0@group-1B3AC74315AF->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(190)) - s0@group-1B3AC74315AF->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-03-06 08:13:46,370 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#2498-t1,previous=(t:1, i:12),leaderCommit=14,initializing? true,entries: size=2, first=(t:1, i:13), METADATAENTRY(c:3)
2023-03-06 08:13:46,370 [grpc-default-executor-6] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-1B3AC74315AF->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:13:46,371 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#1467-t1,previous=(t:1, i:13),leaderCommit=12,initializing? true,entries: size=1, first=(t:1, i:14), METADATAENTRY(c:12)
2023-03-06 08:13:46,371 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-1B3AC74315AF->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:13:46,373 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s1@group-1B3AC74315AF: shutdown
2023-03-06 08:13:46,373 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:46,373 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s2@group-1B3AC74315AF: shutdown
2023-03-06 08:13:46,373 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-1B3AC74315AF,id=s2
2023-03-06 08:13:46,373 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-1B3AC74315AF-FollowerState
2023-03-06 08:13:46,373 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-1B3AC74315AF-StateMachineUpdater: set stopIndex = 14
2023-03-06 08:13:46,373 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-1B3AC74315AF,id=s1
2023-03-06 08:13:46,374 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-1B3AC74315AF-FollowerState
2023-03-06 08:13:46,373 [s2@group-1B3AC74315AF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-1B3AC74315AF-FollowerState was interrupted
2023-03-06 08:13:46,374 [s1@group-1B3AC74315AF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-1B3AC74315AF-FollowerState was interrupted
2023-03-06 08:13:46,374 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-1B3AC74315AF: applyIndex: 14
2023-03-06 08:13:46,374 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-1B3AC74315AF-StateMachineUpdater: set stopIndex = 14
2023-03-06 08:13:46,374 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-1B3AC74315AF: applyIndex: 14
2023-03-06 08:13:46,374 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:46,374 [Thread-313] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-03-06 08:13:46,369 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-1B3AC74315AF-PendingRequests: sendNotLeaderResponses
2023-03-06 08:13:46,370 [grpc-default-executor-6] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s0@group-1B3AC74315AF->s1: decreaseNextIndex nextIndex: updateUnconditionally 15 -> 14
2023-03-06 08:13:46,371 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s0@group-1B3AC74315AF->s2: decreaseNextIndex nextIndex: updateUnconditionally 15 -> 14
2023-03-06 08:13:46,382 [Thread-314] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-03-06 08:13:46,387 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:46,388 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:46,388 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:46,388 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:46,393 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-1B3AC74315AF-StateMachineUpdater: set stopIndex = 14
2023-03-06 08:13:46,393 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-1B3AC74315AF: applyIndex: 14
2023-03-06 08:13:46,393 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:46,393 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:46,405 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:46,405 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:46,405 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:46,405 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:46,406 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:46,406 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:46,409 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:46,410 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:46,412 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:47,041 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s0@group-1B3AC74315AF-SegmentedRaftLogWorker close()
2023-03-06 08:13:47,042 [JvmPauseMonitor6] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s0: Stopped
2023-03-06 08:13:47,046 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s2@group-1B3AC74315AF-SegmentedRaftLogWorker close()
2023-03-06 08:13:47,046 [JvmPauseMonitor8] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s2: Stopped
2023-03-06 08:13:47,105 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s1@group-1B3AC74315AF-SegmentedRaftLogWorker close()
2023-03-06 08:13:47,106 [JvmPauseMonitor7] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s1: Stopped
2023-03-06 08:13:47,106 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:13:47,107 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:13:47,107 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:13:47,107 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:13:47,109 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-03-06 08:13:47,109 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-DFB1578B68F1:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]
2023-03-06 08:13:47,109 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:13:47,109 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:13:47,109 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:13:47,109 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:13:47,109 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:13:47,109 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:13:47,109 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-DFB1578B68F1:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:47,109 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0
2023-03-06 08:13:47,110 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0 does not exist.
2023-03-06 08:13:47,110 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0
2023-03-06 08:13:47,110 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:47,110 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:47,110 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44867 (custom)
2023-03-06 08:13:47,110 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:47,110 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 43375 (custom)
2023-03-06 08:13:47,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:47,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 44275 (custom)
2023-03-06 08:13:47,111 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:47,111 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:47,111 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:47,111 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:47,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:47,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:47,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:47,112 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:47,112 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:47,113 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:47,113 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:47,113 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:47,113 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0] (custom)
2023-03-06 08:13:47,113 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-DFB1578B68F1:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER] returns group-DFB1578B68F1:java.util.concurrent.CompletableFuture@1012724c[Not completed]
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-DFB1578B68F1:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:47,114 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-DFB1578B68F1: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:47,115 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:47,115 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:47,115 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:47,115 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:47,115 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:47,116 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:47,116 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:47,116 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:47,116 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:47,116 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:47,116 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:47,116 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:47,117 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0] (custom)
2023-03-06 08:13:47,117 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0/0a80c235-49e7-46c6-ae47-dfb1578b68f1 does not exist. Creating ...
2023-03-06 08:13:47,117 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0/0a80c235-49e7-46c6-ae47-dfb1578b68f1
2023-03-06 08:13:47,119 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0/0a80c235-49e7-46c6-ae47-dfb1578b68f1/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:47,119 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0/0a80c235-49e7-46c6-ae47-dfb1578b68f1/current
2023-03-06 08:13:47,119 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0/0a80c235-49e7-46c6-ae47-dfb1578b68f1/sm
2023-03-06 08:13:47,120 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0/0a80c235-49e7-46c6-ae47-dfb1578b68f1 has been successfully formatted.
2023-03-06 08:13:47,120 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:47,120 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:47,120 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:47,120 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:47,120 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:47,120 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:47,120 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s0@group-DFB1578B68F1-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0/0a80c235-49e7-46c6-ae47-dfb1578b68f1
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:47,121 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:47,122 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:47,122 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:47,122 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:47,122 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:47,122 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:47,123 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-DFB1578B68F1-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:47,123 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-DFB1578B68F1-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:47,125 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s0@group-DFB1578B68F1: start as a follower, conf=-1: peers:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:47,125 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-DFB1578B68F1: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:47,126 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-DFB1578B68F1-FollowerState
2023-03-06 08:13:47,129 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-DFB1578B68F1,id=s0
2023-03-06 08:13:47,130 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:47,130 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:47,130 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:47,130 [s0@group-DFB1578B68F1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:47,130 [s0@group-DFB1578B68F1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:47,130 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s0: start RPC server
2023-03-06 08:13:47,132 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 43375
2023-03-06 08:13:47,132 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 44275
2023-03-06 08:13:47,133 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 44867
2023-03-06 08:13:47,133 [JvmPauseMonitor9] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s0: Started
2023-03-06 08:13:47,134 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:47,134 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-DFB1578B68F1:t0, leader=null, voted=, raftlog=Memoized:s0@group-DFB1578B68F1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:47,134 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-DFB1578B68F1:t0, leader=null, voted=, raftlog=Memoized:s0@group-DFB1578B68F1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-DFB1578B68F1:t0, leader=null, voted=, raftlog=Memoized:s0@group-DFB1578B68F1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:155)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:47,328 [s0@group-DFB1578B68F1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-DFB1578B68F1-FollowerState: change to CANDIDATE, lastRpcElapsedTime:201988635ns, electionTimeout:197ms
2023-03-06 08:13:47,328 [s0@group-DFB1578B68F1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-DFB1578B68F1-FollowerState
2023-03-06 08:13:47,328 [s0@group-DFB1578B68F1-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-DFB1578B68F1: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:13:47,328 [s0@group-DFB1578B68F1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:47,328 [s0@group-DFB1578B68F1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-DFB1578B68F1-LeaderElection8
2023-03-06 08:13:47,330 [s0@group-DFB1578B68F1-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-DFB1578B68F1-LeaderElection8 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:47,330 [s0@group-DFB1578B68F1-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-DFB1578B68F1-LeaderElection8 PRE_VOTE round 0: result PASSED (term=0)
2023-03-06 08:13:47,331 [s0@group-DFB1578B68F1-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-DFB1578B68F1-LeaderElection8 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:47,331 [s0@group-DFB1578B68F1-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-DFB1578B68F1-LeaderElection8 ELECTION round 0: result PASSED (term=1)
2023-03-06 08:13:47,331 [s0@group-DFB1578B68F1-LeaderElection8] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-DFB1578B68F1-LeaderElection8
2023-03-06 08:13:47,331 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-DFB1578B68F1: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:13:47,331 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-DFB1578B68F1: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 216ms
2023-03-06 08:13:47,332 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:13:47,332 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:47,332 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-03-06 08:13:47,332 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:13:47,332 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:13:47,332 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:13:47,332 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:47,332 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:13:47,333 [s0@group-DFB1578B68F1-LeaderElection8] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-DFB1578B68F1-LeaderStateImpl
2023-03-06 08:13:47,333 [s0@group-DFB1578B68F1-LeaderElection8] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-DFB1578B68F1-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:47,337 [s0@group-DFB1578B68F1-LeaderElection8] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-DFB1578B68F1: set configuration 0: peers:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:47,346 [s0@group-DFB1578B68F1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-DFB1578B68F1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc2a379e4b/s0/0a80c235-49e7-46c6-ae47-dfb1578b68f1/current/log_inprogress_0
2023-03-06 08:13:47,585 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-DFB1578B68F1:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-DFB1578B68F1-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:47,585 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:47,585 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44867 (custom)
2023-03-06 08:13:47,585 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:47,585 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 43375 (custom)
2023-03-06 08:13:47,585 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:47,585 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 44275 (custom)
2023-03-06 08:13:47,585 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:47,585 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:47,585 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:47,585 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:47,585 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:47,585 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:47,585 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:47,587 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'appendEntries'
2023-03-06 08:13:47,587 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "appendEntries" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking appendEntries call is not supported
	at org.apache.ratis.grpc.server.GrpcService.appendEntries(GrpcService.java:355)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$1(TestRaftServerWithGrpc.java:159)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:158)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:47,588 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'installSnapshot'
2023-03-06 08:13:47,588 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "installSnapshot" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking installSnapshot call is not supported
	at org.apache.ratis.grpc.server.GrpcService.installSnapshot(GrpcService.java:361)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$2(TestRaftServerWithGrpc.java:163)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:162)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:47,588 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:13:47,588 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:13:47,588 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:13:47,588 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:13:47,588 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:13:47,588 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-DFB1578B68F1:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-DFB1578B68F1-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:44275|admin:localhost:44867|client:localhost:43375|dataStream:localhost:42403|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:47,593 [MiniRaftCluster-10] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s0: close
2023-03-06 08:13:47,593 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:47,593 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s0@group-DFB1578B68F1: shutdown
2023-03-06 08:13:47,593 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-DFB1578B68F1,id=s0
2023-03-06 08:13:47,593 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-DFB1578B68F1-LeaderStateImpl
2023-03-06 08:13:47,594 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-DFB1578B68F1-PendingRequests: sendNotLeaderResponses
2023-03-06 08:13:47,594 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-DFB1578B68F1-StateMachineUpdater: set stopIndex = 0
2023-03-06 08:13:47,594 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:47,594 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:47,594 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-DFB1578B68F1: applyIndex: 0
2023-03-06 08:13:47,594 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:47,594 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:47,595 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:48,348 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s0@group-DFB1578B68F1-SegmentedRaftLogWorker close()
2023-03-06 08:13:48,348 [JvmPauseMonitor9] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s0: Stopped
2023-03-06 08:13:48,348 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:13:48,349 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:13:48,349 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:13:48,349 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:13:48,350 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-03-06 08:13:48,350 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-5EB81BFE4F93:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]
2023-03-06 08:13:48,350 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:13:48,350 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:13:48,350 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:13:48,350 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:13:48,350 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:13:48,350 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:13:48,351 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-5EB81BFE4F93:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:48,351 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0
2023-03-06 08:13:48,351 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0 does not exist.
2023-03-06 08:13:48,351 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0
2023-03-06 08:13:48,351 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:48,351 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:48,351 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46799 (custom)
2023-03-06 08:13:48,352 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:48,352 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34453 (custom)
2023-03-06 08:13:48,352 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:48,352 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41837 (custom)
2023-03-06 08:13:48,352 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:48,352 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:48,352 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:48,352 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:48,352 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:48,352 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:48,352 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:48,353 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:48,354 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:48,354 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:48,354 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:48,354 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:48,354 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0] (custom)
2023-03-06 08:13:48,355 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-5EB81BFE4F93:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER] returns group-5EB81BFE4F93:java.util.concurrent.CompletableFuture@4ec23fe4[Not completed]
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-5EB81BFE4F93:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-5EB81BFE4F93: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:48,355 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:48,356 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:48,356 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:48,356 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:48,356 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:48,357 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:48,357 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:48,357 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:48,357 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:48,357 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:48,357 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:48,357 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:48,357 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0] (custom)
2023-03-06 08:13:48,358 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93 does not exist. Creating ...
2023-03-06 08:13:48,358 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93
2023-03-06 08:13:48,359 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:48,359 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93/current
2023-03-06 08:13:48,359 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93/sm
2023-03-06 08:13:48,360 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93 has been successfully formatted.
2023-03-06 08:13:48,360 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:48,360 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:48,360 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:48,360 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:48,360 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:48,360 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s0@group-5EB81BFE4F93-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:48,361 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:48,362 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:48,362 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:48,362 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:48,362 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:48,362 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:48,363 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-5EB81BFE4F93-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:48,363 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-5EB81BFE4F93-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:48,366 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s0@group-5EB81BFE4F93: start as a follower, conf=-1: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:48,366 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-5EB81BFE4F93: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:48,366 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-5EB81BFE4F93-FollowerState
2023-03-06 08:13:48,367 [s0@group-5EB81BFE4F93-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:48,367 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-5EB81BFE4F93,id=s0
2023-03-06 08:13:48,367 [s0@group-5EB81BFE4F93-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:48,367 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:48,367 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:48,367 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:48,368 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s0: start RPC server
2023-03-06 08:13:48,369 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 34453
2023-03-06 08:13:48,369 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 41837
2023-03-06 08:13:48,370 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 46799
2023-03-06 08:13:48,370 [JvmPauseMonitor10] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s0: Started
2023-03-06 08:13:48,370 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:48,371 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-5EB81BFE4F93:t0, leader=null, voted=, raftlog=Memoized:s0@group-5EB81BFE4F93-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:48,371 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-5EB81BFE4F93:t0, leader=null, voted=, raftlog=Memoized:s0@group-5EB81BFE4F93-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-5EB81BFE4F93:t0, leader=null, voted=, raftlog=Memoized:s0@group-5EB81BFE4F93-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestServerRestartOnException(TestRaftServerWithGrpc.java:121)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testServerRestartOnException(TestRaftServerWithGrpc.java:104)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:48,576 [s0@group-5EB81BFE4F93-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-5EB81BFE4F93-FollowerState: change to CANDIDATE, lastRpcElapsedTime:210176022ns, electionTimeout:209ms
2023-03-06 08:13:48,577 [s0@group-5EB81BFE4F93-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-5EB81BFE4F93-FollowerState
2023-03-06 08:13:48,577 [s0@group-5EB81BFE4F93-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-5EB81BFE4F93: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:13:48,577 [s0@group-5EB81BFE4F93-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:48,577 [s0@group-5EB81BFE4F93-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-5EB81BFE4F93-LeaderElection9
2023-03-06 08:13:48,580 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-5EB81BFE4F93-LeaderElection9 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:48,580 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-5EB81BFE4F93-LeaderElection9 PRE_VOTE round 0: result PASSED (term=0)
2023-03-06 08:13:48,581 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-5EB81BFE4F93-LeaderElection9 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:48,581 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-5EB81BFE4F93-LeaderElection9 ELECTION round 0: result PASSED (term=1)
2023-03-06 08:13:48,581 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-5EB81BFE4F93-LeaderElection9
2023-03-06 08:13:48,581 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-5EB81BFE4F93: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:13:48,581 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-5EB81BFE4F93: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 225ms
2023-03-06 08:13:48,581 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:13:48,582 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:48,582 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-03-06 08:13:48,582 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:13:48,582 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:13:48,582 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:13:48,582 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:48,582 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:13:48,582 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-5EB81BFE4F93-LeaderStateImpl
2023-03-06 08:13:48,582 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-5EB81BFE4F93-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:48,587 [s0@group-5EB81BFE4F93-LeaderElection9] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-5EB81BFE4F93: set configuration 0: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:48,592 [s0@group-5EB81BFE4F93-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-5EB81BFE4F93-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93/current/log_inprogress_0
2023-03-06 08:13:48,821 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-5EB81BFE4F93:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-5EB81BFE4F93-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:48,824 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:48,824 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:48,824 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46799 (custom)
2023-03-06 08:13:48,824 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:48,825 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34453 (custom)
2023-03-06 08:13:48,825 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:48,825 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41837 (custom)
2023-03-06 08:13:48,825 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:48,825 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:48,825 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:48,825 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:48,825 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:48,825 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:48,825 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:48,827 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:48,828 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:48,828 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:48,828 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:48,828 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:48,830 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0] (custom)
2023-03-06 08:13:48,830 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(259)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93
2023-03-06 08:13:48,830 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-5EB81BFE4F93:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER] returns group-5EB81BFE4F93:java.util.concurrent.CompletableFuture@6a8b7785[Not completed]
2023-03-06 08:13:48,831 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:48,831 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-5EB81BFE4F93:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-5EB81BFE4F93
2023-03-06 08:13:48,831 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:48,831 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:48,831 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:48,831 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:48,831 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-5EB81BFE4F93: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:48,832 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:48,833 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:48,833 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:48,833 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:48,833 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:48,833 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:48,834 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'Starting a new server with the same address should fail'
2023-03-06 08:13:48,834 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:48,834 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:48,834 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46799 (custom)
2023-03-06 08:13:48,834 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:48,834 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34453 (custom)
2023-03-06 08:13:48,834 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:48,834 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41837 (custom)
2023-03-06 08:13:48,835 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:48,835 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:48,835 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:48,835 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:48,835 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:48,835 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:48,835 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:48,836 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:48,836 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:48,836 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:48,836 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:48,836 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:48,836 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0] (custom)
2023-03-06 08:13:48,839 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(259)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93
2023-03-06 08:13:48,839 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-5EB81BFE4F93:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER] returns group-5EB81BFE4F93:java.util.concurrent.CompletableFuture@2b452570[Not completed]
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-5EB81BFE4F93:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-5EB81BFE4F93
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-5EB81BFE4F93: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:48,840 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:48,841 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:48,841 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:48,841 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:48,841 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:48,841 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:48,841 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:48,841 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:48,841 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:48,841 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0] (custom)
2023-03-06 08:13:48,842 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:48,842 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93/in_use.lock", attempt #1/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-03-06 08:13:49,843 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:49,843 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93/in_use.lock", attempt #2/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-03-06 08:13:50,844 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:50,844 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93/in_use.lock", attempt #3/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-03-06 08:13:51,845 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:51,845 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93/in_use.lock", attempt #4/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-03-06 08:13:52,846 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:52,847 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "Starting a new server with the same address should fail" throws CompletionException
java.util.concurrent.CompletionException: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93. The directory is already locked
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$BiRelay.tryFire(CompletableFuture.java:1423)
	at java.base/java.util.concurrent.CompletableFuture$CoCompletion.tryFire(CompletableFuture.java:1144)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:191)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpca2641ce4/s0/57881d06-5d04-4f9d-b22b-5eb81bfe4f93. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	... 4 more
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-03-06 08:13:52,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:52,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46799 (custom)
2023-03-06 08:13:52,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:52,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34453 (custom)
2023-03-06 08:13:52,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:52,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41837 (custom)
2023-03-06 08:13:52,848 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:52,848 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:52,848 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:52,848 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:52,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:52,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:52,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:52,850 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:13:52,850 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:13:52,851 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:13:52,851 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:13:52,851 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:13:52,851 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-5EB81BFE4F93:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-5EB81BFE4F93-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:41837|admin:localhost:46799|client:localhost:34453|dataStream:localhost:41271|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:52,852 [MiniRaftCluster-11] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s0: close
2023-03-06 08:13:52,852 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s0@group-5EB81BFE4F93: shutdown
2023-03-06 08:13:52,852 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-5EB81BFE4F93,id=s0
2023-03-06 08:13:52,852 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-5EB81BFE4F93-LeaderStateImpl
2023-03-06 08:13:52,852 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-5EB81BFE4F93-PendingRequests: sendNotLeaderResponses
2023-03-06 08:13:52,852 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-5EB81BFE4F93-StateMachineUpdater: set stopIndex = 0
2023-03-06 08:13:52,853 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-5EB81BFE4F93: applyIndex: 0
2023-03-06 08:13:53,595 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s0@group-5EB81BFE4F93-SegmentedRaftLogWorker close()
2023-03-06 08:13:53,595 [JvmPauseMonitor10] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s0: Stopped
2023-03-06 08:13:53,595 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:13:53,597 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:13:53,597 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:13:53,597 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:13:53,599 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-03-06 08:13:53,599 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-F8E94E0C8B87:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]
2023-03-06 08:13:53,599 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:13:53,599 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:13:53,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:13:53,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:13:53,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:13:53,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:13:53,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-F8E94E0C8B87:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:53,600 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0
2023-03-06 08:13:53,601 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0 does not exist.
2023-03-06 08:13:53,601 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0
2023-03-06 08:13:53,603 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:53,603 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:53,603 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 39485 (custom)
2023-03-06 08:13:53,603 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:53,604 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37327 (custom)
2023-03-06 08:13:53,604 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:53,604 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35877 (custom)
2023-03-06 08:13:53,604 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:53,604 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,604 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:53,604 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:53,604 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:53,604 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:53,604 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:53,606 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:53,607 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:53,608 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:53,608 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:53,608 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:53,608 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0] (custom)
2023-03-06 08:13:53,609 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-F8E94E0C8B87:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER] returns group-F8E94E0C8B87:java.util.concurrent.CompletableFuture@7ac0c1b6[Not completed]
2023-03-06 08:13:53,609 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:53,609 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:53,609 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:53,609 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-F8E94E0C8B87:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:53,609 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1
2023-03-06 08:13:53,610 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-F8E94E0C8B87:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:53,610 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1 does not exist.
2023-03-06 08:13:53,610 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1
2023-03-06 08:13:53,610 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:53,610 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:53,610 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:53,610 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:53,610 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:53,610 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:53,610 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:53,611 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:53,611 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 34855 (custom)
2023-03-06 08:13:53,611 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-F8E94E0C8B87: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:53,611 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:53,611 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:53,611 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37307 (custom)
2023-03-06 08:13:53,611 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:53,612 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:53,612 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:53,612 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 38601 (custom)
2023-03-06 08:13:53,612 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:53,612 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:53,612 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,612 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:53,612 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:53,613 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:53,613 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:53,613 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:53,614 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:53,615 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:53,615 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:53,615 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:53,615 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:53,615 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1] (custom)
2023-03-06 08:13:53,616 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-F8E94E0C8B87:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER] returns group-F8E94E0C8B87:java.util.concurrent.CompletableFuture@665e9ef5[Not completed]
2023-03-06 08:13:53,616 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-F8E94E0C8B87:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:53,616 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2
2023-03-06 08:13:53,616 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2 does not exist.
2023-03-06 08:13:53,616 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2
2023-03-06 08:13:53,617 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:53,617 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:53,617 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 37973 (custom)
2023-03-06 08:13:53,617 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:53,617 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 38297 (custom)
2023-03-06 08:13:53,617 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:53,617 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35635 (custom)
2023-03-06 08:13:53,617 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:53,617 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,617 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:53,617 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:53,617 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:53,617 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:53,617 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:53,618 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:53,618 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:53,619 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:53,619 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:53,619 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:53,619 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2] (custom)
2023-03-06 08:13:53,619 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:53,619 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:53,619 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:53,619 [s1-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-F8E94E0C8B87:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:53,619 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:53,619 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:53,619 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:53,620 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:53,620 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:53,620 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:53,620 [s1-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-F8E94E0C8B87: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:53,620 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:53,620 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:53,620 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:53,620 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:53,620 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:53,621 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:53,621 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:53,621 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:53,621 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:53,621 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:53,622 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:53,623 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:53,623 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:53,623 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:53,623 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:53,623 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:53,629 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-F8E94E0C8B87:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER] returns group-F8E94E0C8B87:java.util.concurrent.CompletableFuture@1ea1c0a7[Not completed]
2023-03-06 08:13:53,629 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:53,629 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:53,629 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:53,629 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0] (custom)
2023-03-06 08:13:53,629 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:53,629 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-F8E94E0C8B87:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:53,630 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87 does not exist. Creating ...
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:53,630 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-F8E94E0C8B87: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:53,630 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:53,631 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:53,631 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:53,631 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:53,631 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:53,631 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current
2023-03-06 08:13:53,632 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/sm
2023-03-06 08:13:53,632 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:53,632 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:53,632 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87 has been successfully formatted.
2023-03-06 08:13:53,633 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:53,633 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:53,633 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:53,633 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:53,633 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,633 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:53,633 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:53,633 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:53,633 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s0@group-F8E94E0C8B87-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:53,634 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,636 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:53,636 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:53,636 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:53,636 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:53,636 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:53,637 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s0@group-F8E94E0C8B87: start as a follower, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,637 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-F8E94E0C8B87: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:53,637 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:53,640 [s0@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:53,640 [s0@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:53,641 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-F8E94E0C8B87,id=s0
2023-03-06 08:13:53,641 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:53,641 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:53,641 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:53,641 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s0: start RPC server
2023-03-06 08:13:53,642 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 37327
2023-03-06 08:13:53,643 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 35877
2023-03-06 08:13:53,643 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 39485
2023-03-06 08:13:53,643 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:53,643 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:53,644 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1] (custom)
2023-03-06 08:13:53,644 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87 does not exist. Creating ...
2023-03-06 08:13:53,644 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87
2023-03-06 08:13:53,645 [JvmPauseMonitor11] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s0: Started
2023-03-06 08:13:53,645 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:53,646 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current
2023-03-06 08:13:53,646 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/sm
2023-03-06 08:13:53,646 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87 has been successfully formatted.
2023-03-06 08:13:53,647 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:53,647 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:53,647 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:53,647 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:53,647 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,647 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:53,647 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:53,647 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:53,648 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:53,648 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:53,648 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,648 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s1@group-F8E94E0C8B87-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87
2023-03-06 08:13:53,648 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:53,649 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:53,649 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:53,649 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:53,649 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:53,649 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:53,649 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:53,650 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:53,650 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:53,650 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,651 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:53,651 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:53,651 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:53,651 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-F8E94E0C8B87-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:53,651 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-F8E94E0C8B87-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:53,656 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s1@group-F8E94E0C8B87: start as a follower, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,656 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-F8E94E0C8B87: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:53,656 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:53,657 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-F8E94E0C8B87,id=s1
2023-03-06 08:13:53,657 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:53,657 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:53,657 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:53,658 [s1@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:53,658 [s1@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:53,658 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s1: start RPC server
2023-03-06 08:13:53,660 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 37307
2023-03-06 08:13:53,661 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 38601
2023-03-06 08:13:53,662 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 34855
2023-03-06 08:13:53,663 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:53,663 [JvmPauseMonitor12] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s1: Started
2023-03-06 08:13:53,663 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:53,663 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2] (custom)
2023-03-06 08:13:53,663 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87 does not exist. Creating ...
2023-03-06 08:13:53,663 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87
2023-03-06 08:13:53,664 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:53,664 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current
2023-03-06 08:13:53,664 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/sm
2023-03-06 08:13:53,665 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87 has been successfully formatted.
2023-03-06 08:13:53,665 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:53,665 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:53,665 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s2@group-F8E94E0C8B87-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:53,666 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:53,667 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:53,667 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:53,667 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:53,667 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,667 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:53,667 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:53,667 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:53,668 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-F8E94E0C8B87-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:53,668 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-F8E94E0C8B87-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:53,668 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s2@group-F8E94E0C8B87: start as a follower, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,668 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-F8E94E0C8B87: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:53,668 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:53,668 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-F8E94E0C8B87,id=s2
2023-03-06 08:13:53,668 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:53,668 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:53,669 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:53,669 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s2: start RPC server
2023-03-06 08:13:53,669 [s2@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:53,669 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 38297
2023-03-06 08:13:53,671 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 35635
2023-03-06 08:13:53,674 [s2@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:53,674 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 37973
2023-03-06 08:13:53,675 [JvmPauseMonitor13] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s2: Started
2023-03-06 08:13:53,675 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:53,675 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:53,676 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:173)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:53,807 [s0@group-F8E94E0C8B87-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-F8E94E0C8B87-FollowerState: change to CANDIDATE, lastRpcElapsedTime:169951199ns, electionTimeout:167ms
2023-03-06 08:13:53,807 [s0@group-F8E94E0C8B87-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:53,808 [s0@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-F8E94E0C8B87: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:13:53,808 [s0@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:53,808 [s0@group-F8E94E0C8B87-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-F8E94E0C8B87-LeaderElection10
2023-03-06 08:13:53,809 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-F8E94E0C8B87-LeaderElection10 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,809 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:53,809 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:53,809 [s0@group-F8E94E0C8B87-LeaderElection10-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-03-06 08:13:53,810 [s0@group-F8E94E0C8B87-LeaderElection10-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-03-06 08:13:53,819 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-F8E94E0C8B87: receive requestVote(PRE_VOTE, s0, group-F8E94E0C8B87, 0, (t:0, i:0))
2023-03-06 08:13:53,820 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-F8E94E0C8B87-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:53,820 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-F8E94E0C8B87 replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,823 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-F8E94E0C8B87-LeaderElection10: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:53,823 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s2#0:OK-t0
2023-03-06 08:13:53,823 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-F8E94E0C8B87-LeaderElection10 PRE_VOTE round 0: result PASSED
2023-03-06 08:13:53,824 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-F8E94E0C8B87-LeaderElection10 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,825 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-F8E94E0C8B87: receive requestVote(PRE_VOTE, s0, group-F8E94E0C8B87, 0, (t:0, i:0))
2023-03-06 08:13:53,825 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-F8E94E0C8B87-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:53,825 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-F8E94E0C8B87 replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-F8E94E0C8B87:t0, leader=null, voted=, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,826 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:53,826 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:53,828 [s1@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:53,828 [s1@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:53,829 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-F8E94E0C8B87: receive requestVote(ELECTION, s0, group-F8E94E0C8B87, 1, (t:0, i:0))
2023-03-06 08:13:53,829 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-F8E94E0C8B87: receive requestVote(ELECTION, s0, group-F8E94E0C8B87, 1, (t:0, i:0))
2023-03-06 08:13:53,830 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-F8E94E0C8B87-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:53,830 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-F8E94E0C8B87: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-03-06 08:13:53,830 [grpc-default-executor-6] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:53,830 [s1@group-F8E94E0C8B87-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-F8E94E0C8B87-FollowerState was interrupted
2023-03-06 08:13:53,830 [grpc-default-executor-6] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:53,830 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-F8E94E0C8B87-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:13:53,832 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-F8E94E0C8B87: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-03-06 08:13:53,832 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:53,832 [s2@group-F8E94E0C8B87-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-F8E94E0C8B87-FollowerState was interrupted
2023-03-06 08:13:53,836 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:53,837 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-F8E94E0C8B87 replies to ELECTION vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,838 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-F8E94E0C8B87 replies to ELECTION vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,838 [s1@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:53,838 [s1@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:53,839 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-F8E94E0C8B87-LeaderElection10: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t1
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-F8E94E0C8B87-LeaderElection10 ELECTION round 0: result PASSED
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-F8E94E0C8B87-LeaderElection10
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-F8E94E0C8B87: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-F8E94E0C8B87: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 228ms
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:53,840 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:53,841 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:53,842 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:53,842 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:53,842 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-F8E94E0C8B87-LeaderStateImpl
2023-03-06 08:13:53,843 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:53,844 [s2@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:53,844 [s2@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:53,849 [s0@group-F8E94E0C8B87-LeaderElection10] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-F8E94E0C8B87: set configuration 0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,853 [s0@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_0
2023-03-06 08:13:53,855 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-F8E94E0C8B87: change Leader from null to s0 at term 1 for appendEntries, leader elected after 235ms
2023-03-06 08:13:53,857 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-F8E94E0C8B87: change Leader from null to s0 at term 1 for appendEntries, leader elected after 226ms
2023-03-06 08:13:53,862 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-F8E94E0C8B87: set configuration 0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,862 [s1-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s1@group-F8E94E0C8B87-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:53,869 [s2-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-F8E94E0C8B87: set configuration 0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:53,869 [s2-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s2@group-F8E94E0C8B87-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:53,880 [s1@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s1@group-F8E94E0C8B87-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_0
2023-03-06 08:13:53,881 [s2@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s2@group-F8E94E0C8B87-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_0
2023-03-06 08:13:54,126 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:54,127 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:54,127 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:54,139 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2BF23A6D1D57->s0: receive RaftClientReply:client-2BF23A6D1D57->s0@group-F8E94E0C8B87, cid=54, SUCCESS, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2023-03-06 08:13:54,147 [s0@group-F8E94E0C8B87-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 55@client-2BF23A6D1D57
2023-03-06 08:13:54,149 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2BF23A6D1D57->s0: receive RaftClientReply:client-2BF23A6D1D57->s0@group-F8E94E0C8B87, cid=55, SUCCESS, logIndex=1, commits[s0:c1, s1:c0, s2:c0]
2023-03-06 08:13:54,158 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:54,158 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:54,161 [s1@group-F8E94E0C8B87-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 55@client-2BF23A6D1D57
2023-03-06 08:13:54,160 [s2@group-F8E94E0C8B87-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 55@client-2BF23A6D1D57
2023-03-06 08:13:54,171 [s0@group-F8E94E0C8B87-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-49FED4358F38
2023-03-06 08:13:54,173 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-49FED4358F38->s0: receive RaftClientReply:client-49FED4358F38->s0@group-F8E94E0C8B87, cid=1, SUCCESS, logIndex=3, commits[s0:c3, s1:c1, s2:c2]
2023-03-06 08:13:54,173 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block START_TRANSACTION
2023-03-06 08:13:54,175 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:blockRequestor(49)) - Block requestor s0
2023-03-06 08:13:54,176 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:54,176 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:54,177 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:54,178 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #1/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:54,180 [s2-server-thread1] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s2: Block request from s0
2023-03-06 08:13:54,181 [s1-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s1: Block request from s0
2023-03-06 08:13:54,279 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:54,279 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:54,279 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:54,279 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #2/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:54,380 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:54,380 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:54,380 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:54,380 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #3/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:54,481 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:54,481 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:54,481 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:54,481 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #4/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s0
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:54,532 [s2@group-F8E94E0C8B87-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-F8E94E0C8B87-FollowerState: change to CANDIDATE, lastRpcElapsedTime:362690641ns, electionTimeout:267ms
2023-03-06 08:13:54,533 [s2@group-F8E94E0C8B87-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:54,533 [s2@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-F8E94E0C8B87: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-03-06 08:13:54,533 [s2@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:54,533 [s2@group-F8E94E0C8B87-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-F8E94E0C8B87-LeaderElection11
2023-03-06 08:13:54,542 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-F8E94E0C8B87: change Leader from s0 to null at term 1 for PRE_VOTE
2023-03-06 08:13:54,542 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-F8E94E0C8B87-LeaderElection11 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,544 [s2@group-F8E94E0C8B87-LeaderElection11-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-03-06 08:13:54,549 [s1@group-F8E94E0C8B87-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-F8E94E0C8B87-FollowerState: change to CANDIDATE, lastRpcElapsedTime:376172883ns, electionTimeout:293ms
2023-03-06 08:13:54,549 [s1@group-F8E94E0C8B87-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:54,549 [s1@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-F8E94E0C8B87: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-03-06 08:13:54,549 [s1@group-F8E94E0C8B87-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:54,549 [s1@group-F8E94E0C8B87-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-F8E94E0C8B87-LeaderElection12
2023-03-06 08:13:54,553 [s2@group-F8E94E0C8B87-LeaderElection11-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-03-06 08:13:54,568 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-F8E94E0C8B87: receive requestVote(PRE_VOTE, s2, group-F8E94E0C8B87, 1, (t:1, i:3))
2023-03-06 08:13:54,568 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-F8E94E0C8B87-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-03-06 08:13:54,568 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-F8E94E0C8B87 replies to PRE_VOTE vote request: s2<-s1#0:OK-t1. Peer's state: s1@group-F8E94E0C8B87:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,570 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-F8E94E0C8B87: receive requestVote(PRE_VOTE, s2, group-F8E94E0C8B87, 1, (t:1, i:3))
2023-03-06 08:13:54,570 [grpc-default-executor-4] WARN  server.RaftServer$Division (LeaderStateImpl.java:checkLeadership(1098)) - s0@group-F8E94E0C8B87-LeaderStateImpl: Lost leadership on term: 1. Election timeout: 300ms. In charge for: 730ms. Conf: 0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,571 [grpc-default-executor-4] WARN  server.RaftServer$Division (LeaderStateImpl.java:lambda$checkLeadership$20(1102)) - Follower s0@group-F8E94E0C8B87->s1(c2,m3,n5, attendVote=true, lastRpcSendTime=19, lastRpcResponseTime=394)
2023-03-06 08:13:54,571 [grpc-default-executor-4] WARN  server.RaftServer$Division (LeaderStateImpl.java:lambda$checkLeadership$20(1102)) - Follower s0@group-F8E94E0C8B87->s2(c2,m3,n5, attendVote=true, lastRpcSendTime=13, lastRpcResponseTime=400)
2023-03-06 08:13:54,571 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-F8E94E0C8B87: changes role from    LEADER to FOLLOWER at term 1 for StepDownReason:LOST_MAJORITY_HEARTBEATS
2023-03-06 08:13:54,571 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-F8E94E0C8B87-LeaderStateImpl
2023-03-06 08:13:54,571 [grpc-default-executor-4] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-F8E94E0C8B87-PendingRequests: sendNotLeaderResponses
2023-03-06 08:13:54,571 [s1@group-F8E94E0C8B87-LeaderElection12] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-F8E94E0C8B87: change Leader from s0 to null at term 1 for PRE_VOTE
2023-03-06 08:13:54,571 [s1@group-F8E94E0C8B87-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-F8E94E0C8B87-LeaderElection12 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,572 [s1@group-F8E94E0C8B87-LeaderElection12-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-03-06 08:13:54,573 [s1@group-F8E94E0C8B87-LeaderElection12-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-03-06 08:13:54,574 [grpc-default-executor-4] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-F8E94E0C8B87: change Leader from s0 to null at term 1 for StepDownReason:LOST_MAJORITY_HEARTBEATS
2023-03-06 08:13:54,574 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:54,575 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-F8E94E0C8B87-FOLLOWER: reject PRE_VOTE from s2: our last entry (t:1, i:4) > candidate's last entry (t:1, i:3)
2023-03-06 08:13:54,575 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-F8E94E0C8B87 replies to PRE_VOTE vote request: s2<-s0#0:FAIL-t1. Peer's state: s0@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,581 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-F8E94E0C8B87-LeaderElection11: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:54,581 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s1#0:OK-t1
2023-03-06 08:13:54,581 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-F8E94E0C8B87-LeaderElection11 PRE_VOTE round 0: result PASSED
2023-03-06 08:13:54,583 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:54,583 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:54,583 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:431)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:54,585 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-F8E94E0C8B87-LeaderElection11 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,587 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-F8E94E0C8B87: receive requestVote(PRE_VOTE, s1, group-F8E94E0C8B87, 1, (t:1, i:3))
2023-03-06 08:13:54,587 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-F8E94E0C8B87-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:54,587 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-F8E94E0C8B87 replies to PRE_VOTE vote request: s1<-s2#0:OK-t2. Peer's state: s2@group-F8E94E0C8B87:t2, leader=null, voted=s2, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,588 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-F8E94E0C8B87: receive requestVote(PRE_VOTE, s1, group-F8E94E0C8B87, 1, (t:1, i:3))
2023-03-06 08:13:54,588 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-F8E94E0C8B87-FOLLOWER: reject PRE_VOTE from s1: our last entry (t:1, i:4) > candidate's last entry (t:1, i:3)
2023-03-06 08:13:54,588 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-F8E94E0C8B87 replies to PRE_VOTE vote request: s1<-s0#0:FAIL-t1. Peer's state: s0@group-F8E94E0C8B87:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,589 [s1@group-F8E94E0C8B87-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-F8E94E0C8B87-LeaderElection12: PRE_VOTE DISCOVERED_A_NEW_TERM (term=2) received 2 response(s) and 0 exception(s):
2023-03-06 08:13:54,589 [s1@group-F8E94E0C8B87-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:FAIL-t1
2023-03-06 08:13:54,589 [s1@group-F8E94E0C8B87-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s1<-s2#0:OK-t2
2023-03-06 08:13:54,589 [s1@group-F8E94E0C8B87-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-F8E94E0C8B87-LeaderElection12 PRE_VOTE round 0: result DISCOVERED_A_NEW_TERM (term=2)
2023-03-06 08:13:54,589 [s1@group-F8E94E0C8B87-LeaderElection12] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-F8E94E0C8B87: changes role from CANDIDATE to FOLLOWER at term 2 for DISCOVERED_A_NEW_TERM (term=2)
2023-03-06 08:13:54,589 [s1@group-F8E94E0C8B87-LeaderElection12] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-F8E94E0C8B87-LeaderElection12
2023-03-06 08:13:54,589 [s1@group-F8E94E0C8B87-LeaderElection12] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:54,590 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-F8E94E0C8B87: receive requestVote(ELECTION, s2, group-F8E94E0C8B87, 2, (t:1, i:3))
2023-03-06 08:13:54,590 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-F8E94E0C8B87-FOLLOWER: reject ELECTION from s2: our last entry (t:1, i:4) > candidate's last entry (t:1, i:3)
2023-03-06 08:13:54,590 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-F8E94E0C8B87: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s2
2023-03-06 08:13:54,590 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:54,591 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:54,591 [s0@group-F8E94E0C8B87-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-F8E94E0C8B87-FollowerState was interrupted
2023-03-06 08:13:54,592 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-F8E94E0C8B87: receive requestVote(ELECTION, s2, group-F8E94E0C8B87, 2, (t:1, i:3))
2023-03-06 08:13:54,593 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-F8E94E0C8B87 replies to ELECTION vote request: s2<-s0#0:FAIL-t2. Peer's state: s0@group-F8E94E0C8B87:t2, leader=null, voted=null, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,594 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-F8E94E0C8B87-FOLLOWER: accept ELECTION from s2: our priority 0 <= candidate's priority 0
2023-03-06 08:13:54,594 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-F8E94E0C8B87: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s2
2023-03-06 08:13:54,594 [grpc-default-executor-5] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:54,594 [grpc-default-executor-5] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:54,597 [s1@group-F8E94E0C8B87-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-F8E94E0C8B87-FollowerState was interrupted
2023-03-06 08:13:54,598 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-F8E94E0C8B87 replies to ELECTION vote request: s2<-s1#0:OK-t2. Peer's state: s1@group-F8E94E0C8B87:t2, leader=null, voted=s2, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,599 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-F8E94E0C8B87-LeaderElection11: ELECTION PASSED received 2 response(s) and 0 exception(s):
2023-03-06 08:13:54,599 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s0#0:FAIL-t2
2023-03-06 08:13:54,599 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s2<-s1#0:OK-t2
2023-03-06 08:13:54,599 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-F8E94E0C8B87-LeaderElection11 ELECTION round 0: result PASSED
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-F8E94E0C8B87-LeaderElection11
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-F8E94E0C8B87: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-F8E94E0C8B87: change Leader from null to s2 at term 2 for becomeLeader, leader elected after 57ms
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:54,600 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:54,601 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:54,602 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-03-06 08:13:54,602 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-F8E94E0C8B87-LeaderStateImpl
2023-03-06 08:13:54,602 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(431)) - s2@group-F8E94E0C8B87-SegmentedRaftLogWorker: Rolling segment log-0_3 to index:3
2023-03-06 08:13:54,605 [s2@group-F8E94E0C8B87-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_0-3
2023-03-06 08:13:54,605 [s2@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(587)) - s2@group-F8E94E0C8B87-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_0-3
2023-03-06 08:13:54,613 [s2@group-F8E94E0C8B87-LeaderElection11] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-F8E94E0C8B87: set configuration 4: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,615 [s2@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s2@group-F8E94E0C8B87-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s2/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_4
2023-03-06 08:13:54,618 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-F8E94E0C8B87: change Leader from null to s2 at term 2 for appendEntries, leader elected after 46ms
2023-03-06 08:13:54,620 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-F8E94E0C8B87: change Leader from null to s2 at term 2 for appendEntries, leader elected after 46ms
2023-03-06 08:13:54,629 [s1-server-thread3] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-F8E94E0C8B87: set configuration 4: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,629 [s1-server-thread3] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(431)) - s1@group-F8E94E0C8B87-SegmentedRaftLogWorker: Rolling segment log-0_3 to index:3
2023-03-06 08:13:54,630 [s1@group-F8E94E0C8B87-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_0-3
2023-03-06 08:13:54,630 [s1@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(587)) - s1@group-F8E94E0C8B87-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_0-3
2023-03-06 08:13:54,634 [s0-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-F8E94E0C8B87: set configuration 4: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:54,636 [s0-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:truncate(442)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker: Truncating segments toTruncate: (0, 4) isOpen? true, length=377, newEndIndex=3
  toDelete: [], start index 4
2023-03-06 08:13:54,638 [s0@group-F8E94E0C8B87-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran FileOutputStream.getChannel().truncate /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_0 length: 356 -> 377
2023-03-06 08:13:54,638 [s0@group-F8E94E0C8B87-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_0-3
2023-03-06 08:13:54,638 [s0@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(670)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker: Truncated log file /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_0 to length 377 and moved it to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_0-3
2023-03-06 08:13:54,639 [s0@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker: flushIndex: setUnconditionally 4 -> 3
2023-03-06 08:13:54,639 [s0@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally -1 -> 3
2023-03-06 08:13:54,639 [s0-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker: Starting segment from index:4
2023-03-06 08:13:54,641 [s1@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s1@group-F8E94E0C8B87-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s1/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_4
2023-03-06 08:13:54,647 [s2@group-F8E94E0C8B87-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-49FED4358F38
2023-03-06 08:13:54,649 [s1@group-F8E94E0C8B87-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-49FED4358F38
2023-03-06 08:13:54,650 [s0@group-F8E94E0C8B87-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpcf40e63ab/s0/7184f3ae-bf4d-4882-a3dc-f8e94e0c8b87/current/log_inprogress_4
2023-03-06 08:13:55,034 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-F8E94E0C8B87:t2, leader=s2, voted=null, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t2, leader=s2, voted=s2, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-F8E94E0C8B87:t2, leader=s2, voted=s2, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:55,034 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:lambda$changeLeader$6(435)) - Changed leader from s0 to s2
2023-03-06 08:13:55,034 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:unblockRequestor(54)) - UnBlock requestor s0
2023-03-06 08:13:55,035 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should fail'
2023-03-06 08:13:55,038 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should fail" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-49FED4358F38->s0: Stream completed: no reply for async request cid=2
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:203)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-49FED4358F38->s0: Stream completed: no reply for async request cid=2
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:396)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onCompleted(GrpcClientProtocolClient.java:336)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 more
2023-03-06 08:13:55,042 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock START_TRANSACTION
2023-03-06 08:13:55,045 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:55,045 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:55,048 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should timeout'
2023-03-06 08:13:55,082 [s2-server-thread1] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s2: unBlock request from s0
2023-03-06 08:13:55,082 [s1-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s1: unBlock request from s0
2023-03-06 08:13:55,083 [grpc-default-executor-4] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,085 [grpc-default-executor-4] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,085 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,085 [grpc-default-executor-6] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,086 [grpc-default-executor-4] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,086 [grpc-default-executor-6] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,086 [grpc-default-executor-6] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,087 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,087 [grpc-default-executor-4] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,087 [grpc-default-executor-6] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,088 [grpc-default-executor-6] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,088 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,088 [grpc-default-executor-6] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,088 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#6068-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2023-03-06 08:13:55,089 [grpc-default-executor-4] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#5486-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2023-03-06 08:13:55,088 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,089 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,090 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-F8E94E0C8B87->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:13:55,090 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s0@group-F8E94E0C8B87->s1: decreaseNextIndex nextIndex: updateUnconditionally 5 -> 4
2023-03-06 08:13:55,093 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,093 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,094 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,094 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,094 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:13:55,094 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-F8E94E0C8B87->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:13:55,094 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s0@group-F8E94E0C8B87->s2: decreaseNextIndex nextIndex: updateUnconditionally 5 -> 4
2023-03-06 08:13:56,048 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should timeout" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-49FED4358F38->s0 request #3 timeout 1s
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:211)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-49FED4358F38->s0 request #3 timeout 1s
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$timeoutCheck$5(GrpcClientProtocolClient.java:374)
	at java.base/java.util.Optional.ifPresent(Optional.java:183)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.handleReplyFuture(GrpcClientProtocolClient.java:378)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.timeoutCheck(GrpcClientProtocolClient.java:373)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$onNext$3(GrpcClientProtocolClient.java:366)
	at org.apache.ratis.util.TimeoutTimer.lambda$onTimeout$2(TimeoutTimer.java:101)
	at org.apache.ratis.util.LogUtils.runAndLog(LogUtils.java:38)
	at org.apache.ratis.util.LogUtils$1.run(LogUtils.java:79)
	at org.apache.ratis.util.TimeoutTimer$Task.run(TimeoutTimer.java:55)
	at java.base/java.util.TimerThread.mainLoop(Timer.java:556)
	at java.base/java.util.TimerThread.run(Timer.java:506)
2023-03-06 08:13:56,068 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-49FED4358F38->s0: receive RaftClientReply:client-49FED4358F38->s0@group-F8E94E0C8B87, cid=3, FAILED org.apache.ratis.protocol.exceptions.AlreadyClosedException: SlidingWindow$Server:2-OrderedRequestStreamObserver2 is closing: seq = 3 > nextToProcess = -1 will NEVER be processed; request = 3:null, logIndex=0, commits[]
2023-03-06 08:13:59,063 [Thread-430] WARN  grpc.GrpcUtil (GrpcUtil.java:shutdownManagedChannel(223)) - Timed out gracefully shutting down connection: ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=476, target=localhost:37327}}. 
2023-03-06 08:13:59,066 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:13:59,066 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:13:59,066 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:13:59,067 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:13:59,067 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:13:59,067 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-F8E94E0C8B87:t2, leader=s2, voted=null, raftlog=Memoized:s0@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-F8E94E0C8B87:t2, leader=s2, voted=s2, raftlog=Memoized:s1@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-F8E94E0C8B87:t2, leader=s2, voted=s2, raftlog=Memoized:s2@group-F8E94E0C8B87-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:35877|admin:localhost:39485|client:localhost:37327|dataStream:localhost:43575|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38601|admin:localhost:34855|client:localhost:37307|dataStream:localhost:43095|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35635|admin:localhost:37973|client:localhost:38297|dataStream:localhost:38595|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:59,067 [MiniRaftCluster-13] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s1: close
2023-03-06 08:13:59,067 [MiniRaftCluster-12] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s0: close
2023-03-06 08:13:59,072 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s0@group-F8E94E0C8B87: shutdown
2023-03-06 08:13:59,072 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-F8E94E0C8B87,id=s0
2023-03-06 08:13:59,072 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:59,072 [MiniRaftCluster-14] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s2: close
2023-03-06 08:13:59,072 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-F8E94E0C8B87-StateMachineUpdater: set stopIndex = 5
2023-03-06 08:13:59,074 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:59,073 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s1@group-F8E94E0C8B87: shutdown
2023-03-06 08:13:59,074 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-F8E94E0C8B87,id=s1
2023-03-06 08:13:59,074 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-F8E94E0C8B87-FollowerState
2023-03-06 08:13:59,074 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-F8E94E0C8B87-StateMachineUpdater: set stopIndex = 5
2023-03-06 08:13:59,074 [s1@group-F8E94E0C8B87-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-F8E94E0C8B87-FollowerState was interrupted
2023-03-06 08:13:59,074 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-F8E94E0C8B87: applyIndex: 5
2023-03-06 08:13:59,073 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:59,073 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:13:59,073 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s2@group-F8E94E0C8B87: shutdown
2023-03-06 08:13:59,076 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-F8E94E0C8B87: applyIndex: 5
2023-03-06 08:13:59,075 [s0@group-F8E94E0C8B87-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-F8E94E0C8B87-FollowerState was interrupted
2023-03-06 08:13:59,078 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-F8E94E0C8B87,id=s2
2023-03-06 08:13:59,078 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s2: shutdown s2@group-F8E94E0C8B87-LeaderStateImpl
2023-03-06 08:13:59,078 [s2-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s2@group-F8E94E0C8B87-PendingRequests: sendNotLeaderResponses
2023-03-06 08:13:59,078 [s2@group-F8E94E0C8B87->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(190)) - s2@group-F8E94E0C8B87->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-03-06 08:13:59,078 [grpc-default-executor-0] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s0: Completed APPEND_ENTRIES, lastRequest: s2->s0#2-t2,previous=(t:2, i:4),leaderCommit=4,initializing? true,entries: size=1, first=(t:2, i:5), METADATAENTRY(c:4)
2023-03-06 08:13:59,079 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s2@group-F8E94E0C8B87->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:13:59,079 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s2@group-F8E94E0C8B87->s0: decreaseNextIndex nextIndex: updateUnconditionally 6 -> 5
2023-03-06 08:13:59,079 [s2@group-F8E94E0C8B87->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(190)) - s2@group-F8E94E0C8B87->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-03-06 08:13:59,080 [Thread-439] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-03-06 08:13:59,080 [grpc-default-executor-0] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s1: Completed APPEND_ENTRIES, lastRequest: s2->s1#2-t2,previous=(t:2, i:4),leaderCommit=4,initializing? true,entries: size=1, first=(t:2, i:5), METADATAENTRY(c:4)
2023-03-06 08:13:59,081 [Thread-440] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-03-06 08:13:59,081 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:59,081 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:59,081 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s2@group-F8E94E0C8B87->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:13:59,082 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s2@group-F8E94E0C8B87->s1: decreaseNextIndex nextIndex: updateUnconditionally 6 -> 5
2023-03-06 08:13:59,083 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-F8E94E0C8B87-StateMachineUpdater: set stopIndex = 5
2023-03-06 08:13:59,083 [Thread-438] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-03-06 08:13:59,084 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-F8E94E0C8B87: applyIndex: 5
2023-03-06 08:13:59,084 [Thread-446] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-03-06 08:13:59,085 [Thread-437] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-03-06 08:13:59,085 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:59,086 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:59,086 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:59,086 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:59,087 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:59,089 [Thread-445] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-03-06 08:13:59,091 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:13:59,091 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-03-06 08:13:59,095 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:59,095 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:59,097 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:13:59,097 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:13:59,097 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:59,098 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:13:59,652 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s2@group-F8E94E0C8B87-SegmentedRaftLogWorker close()
2023-03-06 08:13:59,652 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s1@group-F8E94E0C8B87-SegmentedRaftLogWorker close()
2023-03-06 08:13:59,653 [JvmPauseMonitor13] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s2: Stopped
2023-03-06 08:13:59,654 [JvmPauseMonitor12] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s1: Stopped
2023-03-06 08:13:59,655 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s0@group-F8E94E0C8B87-SegmentedRaftLogWorker close()
2023-03-06 08:13:59,657 [JvmPauseMonitor11] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s0: Stopped
2023-03-06 08:13:59,657 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:13:59,659 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:13:59,659 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:13:59,659 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:13:59,660 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-03-06 08:13:59,660 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-6EEDD614915A:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]
2023-03-06 08:13:59,661 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:13:59,661 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:13:59,661 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:13:59,661 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:13:59,661 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:13:59,661 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:13:59,661 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-6EEDD614915A:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:59,661 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0
2023-03-06 08:13:59,661 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0 does not exist.
2023-03-06 08:13:59,661 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0
2023-03-06 08:13:59,661 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:59,661 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:59,661 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 45791 (custom)
2023-03-06 08:13:59,662 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:59,662 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 38861 (custom)
2023-03-06 08:13:59,662 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:59,662 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 44073 (custom)
2023-03-06 08:13:59,662 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:59,662 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,662 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:59,662 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:59,662 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:13:59,662 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:59,662 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:59,665 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:59,665 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:59,666 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:59,666 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:59,666 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:59,666 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0] (custom)
2023-03-06 08:13:59,666 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-6EEDD614915A:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER] returns group-6EEDD614915A:java.util.concurrent.CompletableFuture@364a43c8[Not completed]
2023-03-06 08:13:59,666 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:59,667 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:59,669 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:59,666 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-6EEDD614915A:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:59,669 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1
2023-03-06 08:13:59,669 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-6EEDD614915A:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:59,669 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1 does not exist.
2023-03-06 08:13:59,669 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1
2023-03-06 08:13:59,669 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:59,670 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:59,670 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:59,670 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:59,670 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:59,670 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:59,670 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-6EEDD614915A: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:59,670 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:59,670 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:59,670 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:59,670 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:59,670 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:59,670 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44905 (custom)
2023-03-06 08:13:59,670 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:59,670 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:59,671 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:59,671 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 38431 (custom)
2023-03-06 08:13:59,671 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:59,673 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 42465 (custom)
2023-03-06 08:13:59,673 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:59,673 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,674 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:59,674 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:59,674 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:13:59,674 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:59,674 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:59,675 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:59,675 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:59,675 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:59,675 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:59,675 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:59,671 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:59,676 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:59,676 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:59,676 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:59,676 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:59,676 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1] (custom)
2023-03-06 08:13:59,678 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-6EEDD614915A:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER] returns group-6EEDD614915A:java.util.concurrent.CompletableFuture@42f10fe1[Not completed]
2023-03-06 08:13:59,678 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-6EEDD614915A:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:13:59,678 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2
2023-03-06 08:13:59,678 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2 does not exist.
2023-03-06 08:13:59,678 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2
2023-03-06 08:13:59,679 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:13:59,679 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:59,679 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 38507 (custom)
2023-03-06 08:13:59,679 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:13:59,679 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:59,679 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 40271 (custom)
2023-03-06 08:13:59,679 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:59,679 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:13:59,679 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 36101 (custom)
2023-03-06 08:13:59,679 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:13:59,679 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,679 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:13:59,680 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:59,680 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:13:59,680 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:13:59,679 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:59,680 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:13:59,680 [s1-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-6EEDD614915A:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:59,680 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:59,680 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:59,680 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:59,680 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:59,680 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:59,680 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:59,680 [s1-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-6EEDD614915A: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:59,680 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:59,681 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:59,681 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:59,681 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:59,681 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:13:59,681 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:59,681 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:13:59,681 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:13:59,681 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:59,681 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:59,682 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2] (custom)
2023-03-06 08:13:59,687 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:59,687 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:59,687 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-6EEDD614915A:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER] returns group-6EEDD614915A:java.util.concurrent.CompletableFuture@5b6fdc20[Not completed]
2023-03-06 08:13:59,687 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:59,687 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:59,687 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:59,688 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:59,688 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:59,688 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:59,688 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0] (custom)
2023-03-06 08:13:59,688 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:59,688 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0/931534e8-d126-4cb9-97fb-6eedd614915a does not exist. Creating ...
2023-03-06 08:13:59,689 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-6EEDD614915A:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:13:59,690 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0/931534e8-d126-4cb9-97fb-6eedd614915a
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-6EEDD614915A: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:13:59,690 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:13:59,691 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0/931534e8-d126-4cb9-97fb-6eedd614915a/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:59,691 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0/931534e8-d126-4cb9-97fb-6eedd614915a/current
2023-03-06 08:13:59,691 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0/931534e8-d126-4cb9-97fb-6eedd614915a/sm
2023-03-06 08:13:59,692 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0/931534e8-d126-4cb9-97fb-6eedd614915a has been successfully formatted.
2023-03-06 08:13:59,692 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:59,692 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:59,692 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:59,692 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:59,692 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,692 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:59,692 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:59,693 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:59,693 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:13:59,693 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:13:59,693 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:13:59,693 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:13:59,694 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s0@group-6EEDD614915A-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0/931534e8-d126-4cb9-97fb-6eedd614915a
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:59,695 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:59,696 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,696 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:59,696 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:59,696 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:59,697 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-6EEDD614915A-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:59,697 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-6EEDD614915A-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:59,697 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s0@group-6EEDD614915A: start as a follower, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,697 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-6EEDD614915A: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:59,697 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-6EEDD614915A-FollowerState
2023-03-06 08:13:59,697 [s0@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:59,698 [s0@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:59,697 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6EEDD614915A,id=s0
2023-03-06 08:13:59,698 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:59,698 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:59,698 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:59,698 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s0: start RPC server
2023-03-06 08:13:59,699 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 38861
2023-03-06 08:13:59,699 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 44073
2023-03-06 08:13:59,700 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 45791
2023-03-06 08:13:59,700 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:59,700 [JvmPauseMonitor14] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s0: Started
2023-03-06 08:13:59,700 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:59,700 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1] (custom)
2023-03-06 08:13:59,701 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1/931534e8-d126-4cb9-97fb-6eedd614915a does not exist. Creating ...
2023-03-06 08:13:59,701 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1/931534e8-d126-4cb9-97fb-6eedd614915a
2023-03-06 08:13:59,702 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1/931534e8-d126-4cb9-97fb-6eedd614915a/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:59,702 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1/931534e8-d126-4cb9-97fb-6eedd614915a/current
2023-03-06 08:13:59,702 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1/931534e8-d126-4cb9-97fb-6eedd614915a/sm
2023-03-06 08:13:59,703 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1/931534e8-d126-4cb9-97fb-6eedd614915a has been successfully formatted.
2023-03-06 08:13:59,703 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:59,703 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:59,704 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:59,704 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:59,704 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,704 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:59,704 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:59,704 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:59,704 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s1@group-6EEDD614915A-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1/931534e8-d126-4cb9-97fb-6eedd614915a
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:59,705 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:59,706 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:59,706 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,707 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:59,707 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:59,707 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:59,707 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-6EEDD614915A-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:59,707 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-6EEDD614915A-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:59,708 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s1@group-6EEDD614915A: start as a follower, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,708 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-6EEDD614915A: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:59,708 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-6EEDD614915A-FollowerState
2023-03-06 08:13:59,708 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6EEDD614915A,id=s1
2023-03-06 08:13:59,708 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:59,708 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:59,708 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:59,709 [s1@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:59,709 [s1@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:59,709 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s1: start RPC server
2023-03-06 08:13:59,710 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 38431
2023-03-06 08:13:59,710 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 42465
2023-03-06 08:13:59,710 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 44905
2023-03-06 08:13:59,713 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:13:59,713 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:13:59,713 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2] (custom)
2023-03-06 08:13:59,714 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2/931534e8-d126-4cb9-97fb-6eedd614915a does not exist. Creating ...
2023-03-06 08:13:59,714 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2/931534e8-d126-4cb9-97fb-6eedd614915a
2023-03-06 08:13:59,713 [JvmPauseMonitor15] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s1: Started
2023-03-06 08:13:59,715 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2/931534e8-d126-4cb9-97fb-6eedd614915a/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:13:59,715 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2/931534e8-d126-4cb9-97fb-6eedd614915a/current
2023-03-06 08:13:59,715 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2/931534e8-d126-4cb9-97fb-6eedd614915a/sm
2023-03-06 08:13:59,716 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2/931534e8-d126-4cb9-97fb-6eedd614915a has been successfully formatted.
2023-03-06 08:13:59,716 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:13:59,716 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:13:59,716 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:13:59,716 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:13:59,716 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,716 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:13:59,716 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s2@group-6EEDD614915A-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2/931534e8-d126-4cb9-97fb-6eedd614915a
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:13:59,717 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:13:59,718 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:13:59,718 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,718 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:13:59,718 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:13:59,718 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:13:59,718 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-6EEDD614915A-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:59,718 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-6EEDD614915A-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:13:59,721 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s2@group-6EEDD614915A: start as a follower, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,721 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-6EEDD614915A: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:13:59,721 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-6EEDD614915A-FollowerState
2023-03-06 08:13:59,721 [s2@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:59,721 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6EEDD614915A,id=s2
2023-03-06 08:13:59,722 [s2@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:59,722 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:13:59,722 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:13:59,722 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:13:59,723 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s2: start RPC server
2023-03-06 08:13:59,723 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 40271
2023-03-06 08:13:59,724 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 36101
2023-03-06 08:13:59,724 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 38507
2023-03-06 08:13:59,725 [JvmPauseMonitor16] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s2: Started
2023-03-06 08:13:59,728 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:13:59,728 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s0@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s1@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s2@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:13:59,729 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s0@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s1@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s2@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s0@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s1@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s2@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:308)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:219)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:13:59,902 [s1@group-6EEDD614915A-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-6EEDD614915A-FollowerState: change to CANDIDATE, lastRpcElapsedTime:193832749ns, electionTimeout:190ms
2023-03-06 08:13:59,902 [s1@group-6EEDD614915A-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-6EEDD614915A-FollowerState
2023-03-06 08:13:59,902 [s1@group-6EEDD614915A-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-6EEDD614915A: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:13:59,902 [s1@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:13:59,902 [s1@group-6EEDD614915A-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-6EEDD614915A-LeaderElection13
2023-03-06 08:13:59,903 [s1@group-6EEDD614915A-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-6EEDD614915A-LeaderElection13 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,903 [s1@group-6EEDD614915A-LeaderElection13-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-03-06 08:13:59,903 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:59,903 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:59,904 [s1@group-6EEDD614915A-LeaderElection13-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-03-06 08:13:59,911 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-6EEDD614915A: receive requestVote(PRE_VOTE, s1, group-6EEDD614915A, 0, (t:0, i:0))
2023-03-06 08:13:59,911 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-6EEDD614915A-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:59,911 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-6EEDD614915A replies to PRE_VOTE vote request: s1<-s2#0:OK-t0. Peer's state: s2@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s2@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,912 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-6EEDD614915A: receive requestVote(PRE_VOTE, s1, group-6EEDD614915A, 0, (t:0, i:0))
2023-03-06 08:13:59,912 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-6EEDD614915A-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:59,912 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-6EEDD614915A replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-6EEDD614915A:t0, leader=null, voted=, raftlog=Memoized:s0@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,912 [s1@group-6EEDD614915A-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-6EEDD614915A-LeaderElection13: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:59,913 [s1@group-6EEDD614915A-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s2#0:OK-t0
2023-03-06 08:13:59,913 [s1@group-6EEDD614915A-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-6EEDD614915A-LeaderElection13 PRE_VOTE round 0: result PASSED
2023-03-06 08:13:59,914 [s1@group-6EEDD614915A-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-6EEDD614915A-LeaderElection13 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,914 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:59,914 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:59,915 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-6EEDD614915A: receive requestVote(ELECTION, s1, group-6EEDD614915A, 1, (t:0, i:0))
2023-03-06 08:13:59,916 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-6EEDD614915A-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:59,916 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-6EEDD614915A: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s1
2023-03-06 08:13:59,916 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-6EEDD614915A-FollowerState
2023-03-06 08:13:59,916 [s0@group-6EEDD614915A-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-6EEDD614915A-FollowerState was interrupted
2023-03-06 08:13:59,916 [grpc-default-executor-0] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-6EEDD614915A-FollowerState
2023-03-06 08:13:59,918 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-6EEDD614915A replies to ELECTION vote request: s1<-s0#0:OK-t1. Peer's state: s0@group-6EEDD614915A:t1, leader=null, voted=s1, raftlog=Memoized:s0@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,919 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-6EEDD614915A: receive requestVote(ELECTION, s1, group-6EEDD614915A, 1, (t:0, i:0))
2023-03-06 08:13:59,919 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-6EEDD614915A-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2023-03-06 08:13:59,919 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-6EEDD614915A: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s1
2023-03-06 08:13:59,919 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-6EEDD614915A-FollowerState
2023-03-06 08:13:59,919 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-6EEDD614915A-FollowerState
2023-03-06 08:13:59,919 [s2@group-6EEDD614915A-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-6EEDD614915A-FollowerState was interrupted
2023-03-06 08:13:59,921 [s0@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:59,923 [s0@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:59,923 [s2@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:13:59,923 [s2@group-6EEDD614915A-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:13:59,924 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-6EEDD614915A replies to ELECTION vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-6EEDD614915A:t1, leader=null, voted=s1, raftlog=Memoized:s2@group-6EEDD614915A-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,926 [s1@group-6EEDD614915A-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-6EEDD614915A-LeaderElection13: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:13:59,926 [s1@group-6EEDD614915A-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s2#0:OK-t1
2023-03-06 08:13:59,926 [s1@group-6EEDD614915A-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-6EEDD614915A-LeaderElection13 ELECTION round 0: result PASSED
2023-03-06 08:13:59,926 [s1@group-6EEDD614915A-LeaderElection13] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-6EEDD614915A-LeaderElection13
2023-03-06 08:13:59,926 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-6EEDD614915A: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:13:59,926 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-6EEDD614915A: change Leader from null to s1 at term 1 for becomeLeader, leader elected after 245ms
2023-03-06 08:13:59,926 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:13:59,926 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:59,926 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-03-06 08:13:59,927 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:13:59,927 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:13:59,927 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:13:59,927 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:13:59,927 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:13:59,927 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:59,927 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,927 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:59,927 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:13:59,928 [s1@group-6EEDD614915A-LeaderElection13] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-6EEDD614915A-LeaderStateImpl
2023-03-06 08:13:59,929 [s1@group-6EEDD614915A-LeaderElection13] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s1@group-6EEDD614915A-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:59,937 [s1@group-6EEDD614915A-LeaderElection13] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-6EEDD614915A: set configuration 0: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,939 [s1@group-6EEDD614915A-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s1@group-6EEDD614915A-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s1/931534e8-d126-4cb9-97fb-6eedd614915a/current/log_inprogress_0
2023-03-06 08:13:59,956 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-6EEDD614915A: change Leader from null to s1 at term 1 for appendEntries, leader elected after 266ms
2023-03-06 08:13:59,958 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-6EEDD614915A: change Leader from null to s1 at term 1 for appendEntries, leader elected after 287ms
2023-03-06 08:13:59,962 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-6EEDD614915A: set configuration 0: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,962 [s2-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s2@group-6EEDD614915A-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:59,967 [s0-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-6EEDD614915A: set configuration 0: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:13:59,968 [s0-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-6EEDD614915A-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:13:59,981 [s2@group-6EEDD614915A-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s2@group-6EEDD614915A-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s2/931534e8-d126-4cb9-97fb-6eedd614915a/current/log_inprogress_0
2023-03-06 08:13:59,981 [s0@group-6EEDD614915A-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-6EEDD614915A-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc764f5b9c/s0/931534e8-d126-4cb9-97fb-6eedd614915a/current/log_inprogress_0
2023-03-06 08:14:00,179 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-6EEDD614915A:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-6EEDD614915A-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-6EEDD614915A:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-6EEDD614915A-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-6EEDD614915A:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-6EEDD614915A-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:00,180 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:00,180 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:00,206 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6667CC8EBE62->s0: receive RaftClientReply:client-6667CC8EBE62->s0@group-6EEDD614915A, cid=56, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-6EEDD614915A is not the leader s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2023-03-06 08:14:00,216 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:00,216 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:00,224 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6667CC8EBE62->s1: receive RaftClientReply:client-6667CC8EBE62->s1@group-6EEDD614915A, cid=56, SUCCESS, logIndex=0, commits[s1:c0, s0:c0, s2:c0]
2023-03-06 08:14:00,235 [s1@group-6EEDD614915A-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 57@client-6667CC8EBE62
2023-03-06 08:14:00,236 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6667CC8EBE62->s1: receive RaftClientReply:client-6667CC8EBE62->s1@group-6EEDD614915A, cid=57, SUCCESS, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2023-03-06 08:14:00,237 [s1-client-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:query(328)) - query testing
2023-03-06 08:14:00,239 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6667CC8EBE62->s1: receive RaftClientReply:client-6667CC8EBE62->s1@group-6EEDD614915A, cid=58, SUCCESS, logIndex=0, commits[s1:c1, s0:c0, s2:c0]
2023-03-06 08:14:00,244 [s2@group-6EEDD614915A-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 57@client-6667CC8EBE62
2023-03-06 08:14:00,248 [s0@group-6EEDD614915A-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 57@client-6667CC8EBE62
2023-03-06 08:14:04,242 [timer2] WARN  grpc.GrpcUtil (GrpcUtil.java:shutdownManagedChannel(223)) - Timed out gracefully shutting down connection: ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=537, target=localhost:38431}}. 
2023-03-06 08:14:04,343 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:04,343 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:04,350 [s1-client-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:query(328)) - query testing
2023-03-06 08:14:04,354 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6667CC8EBE62->s1: receive RaftClientReply:client-6667CC8EBE62->s1@group-6EEDD614915A, cid=59, SUCCESS, logIndex=0, commits[s1:c2, s0:c2, s2:c2]
2023-03-06 08:14:04,357 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:04,357 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:04,365 [null-request--thread1] INFO  server.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(284)) - Failed RaftClientRequest:client-6667CC8EBE62->s2@group-6EEDD614915A, cid=60, seq=0, Watch-ALL(0), Message:<EMPTY>, reply=RaftClientReply:client-6667CC8EBE62->s2@group-6EEDD614915A, cid=60, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s2@group-6EEDD614915A is not the leader s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s2:c2, s0:c2, s1:c2]
2023-03-06 08:14:04,374 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6667CC8EBE62->s2: receive RaftClientReply:client-6667CC8EBE62->s2@group-6EEDD614915A, cid=60, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s2@group-6EEDD614915A is not the leader s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s2:c2, s0:c2, s1:c2]
2023-03-06 08:14:04,389 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6667CC8EBE62->s1: receive RaftClientReply:client-6667CC8EBE62->s1@group-6EEDD614915A, cid=60, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-03-06 08:14:04,392 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6667CC8EBE62->s1: receive RaftClientReply:client-6667CC8EBE62->s1@group-6EEDD614915A, cid=61, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-03-06 08:14:04,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:14:04,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:14:04,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:14:04,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:14:04,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:14:04,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-6EEDD614915A:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-6EEDD614915A-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-6EEDD614915A:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-6EEDD614915A-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-6EEDD614915A:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-6EEDD614915A-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:44073|admin:localhost:45791|client:localhost:38861|dataStream:localhost:41881|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:42465|admin:localhost:44905|client:localhost:38431|dataStream:localhost:40649|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36101|admin:localhost:38507|client:localhost:40271|dataStream:localhost:36145|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:04,405 [MiniRaftCluster-15] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s0: close
2023-03-06 08:14:04,405 [MiniRaftCluster-16] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s1: close
2023-03-06 08:14:04,411 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:04,411 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:04,411 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s0@group-6EEDD614915A: shutdown
2023-03-06 08:14:04,411 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6EEDD614915A,id=s0
2023-03-06 08:14:04,411 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-6EEDD614915A-FollowerState
2023-03-06 08:14:04,411 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-6EEDD614915A-StateMachineUpdater: set stopIndex = 2
2023-03-06 08:14:04,411 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s1@group-6EEDD614915A: shutdown
2023-03-06 08:14:04,411 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6EEDD614915A,id=s1
2023-03-06 08:14:04,411 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s1: shutdown s1@group-6EEDD614915A-LeaderStateImpl
2023-03-06 08:14:04,411 [s1-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s1@group-6EEDD614915A-PendingRequests: sendNotLeaderResponses
2023-03-06 08:14:04,411 [s0@group-6EEDD614915A-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-6EEDD614915A-FollowerState was interrupted
2023-03-06 08:14:04,412 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-6EEDD614915A: applyIndex: 2
2023-03-06 08:14:04,414 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-6EEDD614915A-StateMachineUpdater: set stopIndex = 2
2023-03-06 08:14:04,414 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-6EEDD614915A: applyIndex: 2
2023-03-06 08:14:04,415 [MiniRaftCluster-17] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s2: close
2023-03-06 08:14:04,415 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s2@group-6EEDD614915A: shutdown
2023-03-06 08:14:04,415 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6EEDD614915A,id=s2
2023-03-06 08:14:04,415 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-6EEDD614915A-FollowerState
2023-03-06 08:14:04,416 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-6EEDD614915A-StateMachineUpdater: set stopIndex = 2
2023-03-06 08:14:04,416 [s2@group-6EEDD614915A-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-6EEDD614915A-FollowerState was interrupted
2023-03-06 08:14:04,416 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-6EEDD614915A: applyIndex: 2
2023-03-06 08:14:04,416 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:04,417 [grpc-default-executor-6] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s0: Completed APPEND_ENTRIES, lastRequest: s1->s0#6553-t1,previous=(t:1, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:1, i:2), METADATAENTRY(c:1)
2023-03-06 08:14:04,418 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s1@group-6EEDD614915A->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:04,418 [grpc-default-executor-1] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s1@group-6EEDD614915A->s0: decreaseNextIndex nextIndex: updateUnconditionally 3 -> 2
2023-03-06 08:14:04,418 [grpc-default-executor-6] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s0: Completed APPEND_ENTRIES, lastRequest: null
2023-03-06 08:14:04,419 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s1@group-6EEDD614915A->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:04,419 [grpc-default-executor-1] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s1@group-6EEDD614915A->s0: decreaseNextIndex nextIndex: updateUnconditionally 2 -> 1
2023-03-06 08:14:04,422 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:04,422 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:04,425 [s1@group-6EEDD614915A->s2-GrpcLogAppender-LogAppenderDaemon] ERROR leader.LogAppenderDaemon (LogAppenderDaemon.java:run(87)) - s1@group-6EEDD614915A->s2-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: s1@group-6EEDD614915A-SegmentedRaftLog is expected to be opened but it is CLOSED
	at org.apache.ratis.util.OpenCloseState.assertOpen(OpenCloseState.java:63)
	at org.apache.ratis.server.raftlog.RaftLogBase.checkLogState(RaftLogBase.java:111)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLog.getLastEntryTermIndex(SegmentedRaftLog.java:341)
	at org.apache.ratis.server.raftlog.RaftLog.getNextIndex(RaftLog.java:83)
	at org.apache.ratis.server.leader.LogAppender.hasAppendEntries(LogAppender.java:166)
	at org.apache.ratis.server.leader.LogAppender.shouldSendAppendEntries(LogAppender.java:161)
	at org.apache.ratis.server.leader.LogAppenderBase.shouldSendAppendEntries(LogAppenderBase.java:92)
	at org.apache.ratis.grpc.server.GrpcLogAppender.shouldSendAppendEntries(GrpcLogAppender.java:203)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getWaitTimeMs(GrpcLogAppender.java:171)
	at org.apache.ratis.grpc.server.GrpcLogAppender.mayWait(GrpcLogAppender.java:188)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:139)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:78)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.util.OpenCloseState$CloseTrace: Close s1@group-6EEDD614915A-SegmentedRaftLog
	at org.apache.ratis.util.OpenCloseState.lambda$close$1(OpenCloseState.java:109)
	at java.base/java.util.concurrent.atomic.AtomicReference.getAndUpdate(AtomicReference.java:187)
	at org.apache.ratis.util.OpenCloseState.close(OpenCloseState.java:109)
	at org.apache.ratis.server.raftlog.RaftLogBase.close(RaftLogBase.java:365)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLog.close(SegmentedRaftLog.java:505)
	at org.apache.ratis.server.impl.ServerState.close(ServerState.java:418)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$close$4(RaftServerImpl.java:488)
	at org.apache.ratis.util.LifeCycle.lambda$checkStateAndClose$4(LifeCycle.java:299)
	at org.apache.ratis.util.LifeCycle.checkStateAndClose(LifeCycle.java:319)
	at org.apache.ratis.util.LifeCycle.checkStateAndClose(LifeCycle.java:297)
	at org.apache.ratis.server.impl.RaftServerImpl.close(RaftServerImpl.java:465)
	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.close(RaftServerProxy.java:135)
	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.lambda$close$0(RaftServerProxy.java:122)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 more
2023-03-06 08:14:04,425 [Thread-517] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-03-06 08:14:04,440 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:04,440 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:04,442 [grpc-default-executor-1] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - s2: installSnapshot onError, lastRequest: s1->s2#4106-t1,previous=(t:1, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:1, i:2), METADATAENTRY(c:1): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-03-06 08:14:04,442 [grpc-default-executor-0] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - s2: installSnapshot onError, lastRequest: null: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-03-06 08:14:04,443 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(406)) - s1@group-6EEDD614915A->s2-GrpcLogAppender is already stopped
2023-03-06 08:14:04,445 [Thread-521] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-03-06 08:14:04,445 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:04,445 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:04,446 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:04,446 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:04,450 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(406)) - s1@group-6EEDD614915A->s2-GrpcLogAppender is already stopped
2023-03-06 08:14:04,453 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:04,454 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:04,454 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:04,458 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:04,458 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:04,461 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:04,463 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:05,239 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s1@group-6EEDD614915A-SegmentedRaftLogWorker close()
2023-03-06 08:14:05,239 [JvmPauseMonitor15] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s1: Stopped
2023-03-06 08:14:05,246 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s2@group-6EEDD614915A-SegmentedRaftLogWorker close()
2023-03-06 08:14:05,246 [JvmPauseMonitor16] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s2: Stopped
2023-03-06 08:14:05,249 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s0@group-6EEDD614915A-SegmentedRaftLogWorker close()
2023-03-06 08:14:05,249 [JvmPauseMonitor14] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s0: Stopped
2023-03-06 08:14:05,250 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:14:05,250 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:14:05,250 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:14:05,250 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:14:05,251 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/server.pem: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/server.pem
2023-03-06 08:14:05,253 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/server.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/server.crt
2023-03-06 08:14:05,291 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/ca.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/ca.crt
2023-03-06 08:14:05,294 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/client.pem: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/client.pem
2023-03-06 08:14:05,295 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/client.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/client.crt
2023-03-06 08:14:05,321 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/ca.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/ca.crt
2023-03-06 08:14:05,324 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-365CAE62711D:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]
2023-03-06 08:14:05,324 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:14:05,324 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:14:05,324 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:14:05,324 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:14:05,325 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:14:05,325 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:14:05,325 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s3, group-365CAE62711D:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:05,325 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3
2023-03-06 08:14:05,325 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3 does not exist.
2023-03-06 08:14:05,325 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3
2023-03-06 08:14:05,325 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:05,325 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:05,325 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33819 (custom)
2023-03-06 08:14:05,326 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:05,326 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 46329 (custom)
2023-03-06 08:14:05,326 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:05,326 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 39213 (custom)
2023-03-06 08:14:05,326 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,326 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,326 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,326 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:05,326 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:05,326 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:05,326 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:05,331 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:05,331 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:05,332 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:05,332 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:05,332 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:05,332 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3] (custom)
2023-03-06 08:14:05,336 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s3: addNew group-365CAE62711D:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER] returns group-365CAE62711D:java.util.concurrent.CompletableFuture@14871844[Not completed]
2023-03-06 08:14:05,336 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s4, group-365CAE62711D:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:05,336 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4
2023-03-06 08:14:05,336 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4 does not exist.
2023-03-06 08:14:05,336 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4
2023-03-06 08:14:05,337 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:05,337 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:05,337 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 41741 (custom)
2023-03-06 08:14:05,337 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:05,337 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 35783 (custom)
2023-03-06 08:14:05,337 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:05,337 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41397 (custom)
2023-03-06 08:14:05,337 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,337 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,337 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,337 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:05,337 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:05,337 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:05,337 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:05,339 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:05,339 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:05,339 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:05,339 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:05,339 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:05,340 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4] (custom)
2023-03-06 08:14:05,340 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s3: new RaftServerImpl for group-365CAE62711D:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s3@group-365CAE62711D: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:05,341 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:05,342 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:05,342 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:05,342 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:05,343 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:05,343 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:05,343 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:05,343 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:05,343 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:05,343 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s4: addNew group-365CAE62711D:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER] returns group-365CAE62711D:java.util.concurrent.CompletableFuture@601eb7aa[Not completed]
2023-03-06 08:14:05,343 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s5, group-365CAE62711D:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:05,343 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5
2023-03-06 08:14:05,344 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5 does not exist.
2023-03-06 08:14:05,344 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5
2023-03-06 08:14:05,344 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:05,344 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:05,344 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 37065 (custom)
2023-03-06 08:14:05,344 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:05,344 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 43357 (custom)
2023-03-06 08:14:05,344 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:05,344 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 45933 (custom)
2023-03-06 08:14:05,344 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,344 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,344 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,344 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:05,344 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:05,345 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:05,345 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:05,347 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:05,347 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:05,347 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:05,347 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:05,347 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:05,347 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5] (custom)
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s4: new RaftServerImpl for group-365CAE62711D:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s4@group-365CAE62711D: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:05,348 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:05,349 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:05,349 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:05,349 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:05,349 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:05,350 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:05,350 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:05,350 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:05,350 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:05,350 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:05,351 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s5: addNew group-365CAE62711D:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER] returns group-365CAE62711D:java.util.concurrent.CompletableFuture@3076333e[Not completed]
2023-03-06 08:14:05,351 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:05,351 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:05,351 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3] (custom)
2023-03-06 08:14:05,351 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3/6355c28a-aa60-4543-ba36-365cae62711d does not exist. Creating ...
2023-03-06 08:14:05,351 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3/6355c28a-aa60-4543-ba36-365cae62711d
2023-03-06 08:14:05,352 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3/6355c28a-aa60-4543-ba36-365cae62711d/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:05,353 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3/6355c28a-aa60-4543-ba36-365cae62711d/current
2023-03-06 08:14:05,353 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3/6355c28a-aa60-4543-ba36-365cae62711d/sm
2023-03-06 08:14:05,355 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:05,355 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:05,355 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:05,355 [s3-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3/6355c28a-aa60-4543-ba36-365cae62711d has been successfully formatted.
2023-03-06 08:14:05,355 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:05,355 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:05,355 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:05,355 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:05,355 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s3@group-365CAE62711D-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3/6355c28a-aa60-4543-ba36-365cae62711d
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:05,356 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:05,358 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:05,358 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,358 [s5-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s5: new RaftServerImpl for group-365CAE62711D:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:05,358 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:05,358 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:05,358 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:05,358 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:05,358 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:05,358 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:05,358 [s5-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s5@group-365CAE62711D: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:05,358 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:05,358 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:05,359 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:05,359 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:05,359 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:05,359 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:05,359 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:05,359 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:05,359 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-365CAE62711D-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:05,359 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-365CAE62711D-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:05,359 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s3@group-365CAE62711D: start as a follower, conf=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,359 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s3@group-365CAE62711D: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:05,359 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-365CAE62711D-FollowerState
2023-03-06 08:14:05,360 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:05,360 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:05,360 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:05,360 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:05,361 [s5-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:05,361 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-365CAE62711D,id=s3
2023-03-06 08:14:05,361 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:05,361 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:05,361 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:05,361 [s3@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:05,361 [s3@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:05,361 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s3: start RPC server
2023-03-06 08:14:05,362 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 46329
2023-03-06 08:14:05,362 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 39213
2023-03-06 08:14:05,363 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 33819
2023-03-06 08:14:05,363 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:05,363 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:05,364 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4] (custom)
2023-03-06 08:14:05,364 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4/6355c28a-aa60-4543-ba36-365cae62711d does not exist. Creating ...
2023-03-06 08:14:05,364 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4/6355c28a-aa60-4543-ba36-365cae62711d
2023-03-06 08:14:05,365 [JvmPauseMonitor17] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s3: Started
2023-03-06 08:14:05,365 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4/6355c28a-aa60-4543-ba36-365cae62711d/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:05,365 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4/6355c28a-aa60-4543-ba36-365cae62711d/current
2023-03-06 08:14:05,365 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4/6355c28a-aa60-4543-ba36-365cae62711d/sm
2023-03-06 08:14:05,366 [s4-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4/6355c28a-aa60-4543-ba36-365cae62711d has been successfully formatted.
2023-03-06 08:14:05,366 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:05,367 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:05,367 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:05,367 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:05,367 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,367 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:05,367 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:05,367 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:05,367 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:05,367 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:05,367 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,368 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s4@group-365CAE62711D-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4/6355c28a-aa60-4543-ba36-365cae62711d
2023-03-06 08:14:05,368 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:05,369 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:05,369 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:05,369 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:05,369 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:05,369 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:05,369 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:05,369 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:05,369 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:05,369 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,370 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:05,370 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:05,370 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:05,370 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-365CAE62711D-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:05,370 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-365CAE62711D-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:05,371 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s4@group-365CAE62711D: start as a follower, conf=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,371 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s4@group-365CAE62711D: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:05,372 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-365CAE62711D-FollowerState
2023-03-06 08:14:05,372 [s4@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:05,372 [s4@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:05,372 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-365CAE62711D,id=s4
2023-03-06 08:14:05,372 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:05,372 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:05,372 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:05,372 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s4: start RPC server
2023-03-06 08:14:05,373 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 35783
2023-03-06 08:14:05,373 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 41397
2023-03-06 08:14:05,374 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 41741
2023-03-06 08:14:05,374 [JvmPauseMonitor18] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s4: Started
2023-03-06 08:14:05,374 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:05,374 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:05,374 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5] (custom)
2023-03-06 08:14:05,374 [s5-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5/6355c28a-aa60-4543-ba36-365cae62711d does not exist. Creating ...
2023-03-06 08:14:05,374 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5/6355c28a-aa60-4543-ba36-365cae62711d
2023-03-06 08:14:05,375 [s5-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5/6355c28a-aa60-4543-ba36-365cae62711d/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:05,375 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5/6355c28a-aa60-4543-ba36-365cae62711d/current
2023-03-06 08:14:05,375 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5/6355c28a-aa60-4543-ba36-365cae62711d/sm
2023-03-06 08:14:05,376 [s5-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5/6355c28a-aa60-4543-ba36-365cae62711d has been successfully formatted.
2023-03-06 08:14:05,376 [s5-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:05,376 [s5-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:05,376 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:05,376 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:05,376 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,376 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:05,376 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:05,377 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:05,377 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:05,377 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:05,377 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,377 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s5@group-365CAE62711D-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5/6355c28a-aa60-4543-ba36-365cae62711d
2023-03-06 08:14:05,377 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:05,377 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:05,377 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:05,377 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:05,378 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:05,378 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:05,379 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:05,379 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:05,379 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:05,379 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,380 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:05,380 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:05,380 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:05,380 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s5@group-365CAE62711D-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:05,380 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s5@group-365CAE62711D-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:05,380 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s5@group-365CAE62711D: start as a follower, conf=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,380 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s5@group-365CAE62711D: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:05,380 [s5-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-365CAE62711D-FollowerState
2023-03-06 08:14:05,380 [s5@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:05,381 [s5@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:05,381 [s5-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-365CAE62711D,id=s5
2023-03-06 08:14:05,381 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:05,381 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:05,381 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:05,381 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s5: start RPC server
2023-03-06 08:14:05,382 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 43357
2023-03-06 08:14:05,382 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 45933
2023-03-06 08:14:05,382 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 37065
2023-03-06 08:14:05,384 [JvmPauseMonitor19] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s5: Started
2023-03-06 08:14:05,385 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,385 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,415 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2B9D96E88B6D->s3: receive RaftClientReply:client-2B9D96E88B6D->s3@group-365CAE62711D, cid=62, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-365CAE62711D is not the leader, logIndex=0, commits[s3:c-1]
2023-03-06 08:14:05,518 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,518 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,548 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2B9D96E88B6D->s5: receive RaftClientReply:client-2B9D96E88B6D->s5@group-365CAE62711D, cid=62, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s5@group-365CAE62711D is not the leader, logIndex=0, commits[s5:c-1]
2023-03-06 08:14:05,628 [s3@group-365CAE62711D-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s3@group-365CAE62711D-FollowerState: change to CANDIDATE, lastRpcElapsedTime:268056233ns, electionTimeout:266ms
2023-03-06 08:14:05,628 [s3@group-365CAE62711D-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-365CAE62711D-FollowerState
2023-03-06 08:14:05,628 [s3@group-365CAE62711D-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s3@group-365CAE62711D: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:14:05,628 [s3@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:14:05,628 [s3@group-365CAE62711D-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-365CAE62711D-LeaderElection14
2023-03-06 08:14:05,630 [s3@group-365CAE62711D-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s3@group-365CAE62711D-LeaderElection14 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,631 [s3@group-365CAE62711D-LeaderElection14-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s4
2023-03-06 08:14:05,632 [s3@group-365CAE62711D-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:05,633 [s3@group-365CAE62711D-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:05,633 [s3@group-365CAE62711D-LeaderElection14-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s5
2023-03-06 08:14:05,655 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,655 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,657 [s5@group-365CAE62711D-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s5@group-365CAE62711D-FollowerState: change to CANDIDATE, lastRpcElapsedTime:277131130ns, electionTimeout:274ms
2023-03-06 08:14:05,657 [s5@group-365CAE62711D-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s5: shutdown s5@group-365CAE62711D-FollowerState
2023-03-06 08:14:05,657 [s5@group-365CAE62711D-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s5@group-365CAE62711D: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:14:05,658 [s5@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:14:05,658 [s5@group-365CAE62711D-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-365CAE62711D-LeaderElection15
2023-03-06 08:14:05,660 [s4@group-365CAE62711D-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-365CAE62711D-FollowerState: change to CANDIDATE, lastRpcElapsedTime:288060045ns, electionTimeout:287ms
2023-03-06 08:14:05,660 [s4@group-365CAE62711D-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-365CAE62711D-FollowerState
2023-03-06 08:14:05,660 [s4@group-365CAE62711D-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s4@group-365CAE62711D: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:14:05,660 [s4@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:14:05,660 [s4@group-365CAE62711D-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-365CAE62711D-LeaderElection16
2023-03-06 08:14:05,669 [s5@group-365CAE62711D-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s5@group-365CAE62711D-LeaderElection15 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,673 [s5@group-365CAE62711D-LeaderElection15-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s3
2023-03-06 08:14:05,676 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:05,677 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:05,678 [s5@group-365CAE62711D-LeaderElection15-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s4
2023-03-06 08:14:05,685 [s4@group-365CAE62711D-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s4@group-365CAE62711D-LeaderElection16 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,694 [s4@group-365CAE62711D-LeaderElection16-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s3
2023-03-06 08:14:05,697 [s4@group-365CAE62711D-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:05,697 [s4@group-365CAE62711D-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:05,706 [s4@group-365CAE62711D-LeaderElection16-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s5
2023-03-06 08:14:05,708 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s4@group-365CAE62711D: receive requestVote(PRE_VOTE, s3, group-365CAE62711D, 0, (t:0, i:0))
2023-03-06 08:14:05,709 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s4@group-365CAE62711D-CANDIDATE: accept PRE_VOTE from s3: our priority 0 <= candidate's priority 0
2023-03-06 08:14:05,709 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s4@group-365CAE62711D replies to PRE_VOTE vote request: s3<-s4#0:OK-t0. Peer's state: s4@group-365CAE62711D:t0, leader=null, voted=, raftlog=Memoized:s4@group-365CAE62711D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,720 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s3@group-365CAE62711D: receive requestVote(PRE_VOTE, s5, group-365CAE62711D, 0, (t:0, i:0))
2023-03-06 08:14:05,720 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-365CAE62711D-CANDIDATE: accept PRE_VOTE from s5: our priority 0 <= candidate's priority 0
2023-03-06 08:14:05,720 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s3@group-365CAE62711D replies to PRE_VOTE vote request: s5<-s3#0:OK-t0. Peer's state: s3@group-365CAE62711D:t0, leader=null, voted=, raftlog=Memoized:s3@group-365CAE62711D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,721 [s5@group-365CAE62711D-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s5@group-365CAE62711D-LeaderElection15: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:14:05,721 [s5@group-365CAE62711D-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s5<-s3#0:OK-t0
2023-03-06 08:14:05,722 [s5@group-365CAE62711D-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s5@group-365CAE62711D-LeaderElection15 PRE_VOTE round 0: result PASSED
2023-03-06 08:14:05,723 [s5@group-365CAE62711D-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s5@group-365CAE62711D-LeaderElection15 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,732 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:05,732 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:05,734 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s3@group-365CAE62711D: receive requestVote(ELECTION, s5, group-365CAE62711D, 1, (t:0, i:0))
2023-03-06 08:14:05,734 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-365CAE62711D-CANDIDATE: accept ELECTION from s5: our priority 0 <= candidate's priority 0
2023-03-06 08:14:05,734 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s3@group-365CAE62711D: changes role from CANDIDATE to FOLLOWER at term 1 for candidate:s5
2023-03-06 08:14:05,734 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s3: shutdown s3@group-365CAE62711D-LeaderElection14
2023-03-06 08:14:05,734 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-365CAE62711D-FollowerState
2023-03-06 08:14:05,735 [s3@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:05,735 [s3@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:05,735 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s3@group-365CAE62711D replies to ELECTION vote request: s5<-s3#0:OK-t1. Peer's state: s3@group-365CAE62711D:t1, leader=null, voted=s5, raftlog=Memoized:s3@group-365CAE62711D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,736 [s5@group-365CAE62711D-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s5@group-365CAE62711D-LeaderElection15: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:14:05,736 [s5@group-365CAE62711D-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s5<-s3#0:OK-t1
2023-03-06 08:14:05,736 [s5@group-365CAE62711D-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s5@group-365CAE62711D-LeaderElection15 ELECTION round 0: result PASSED
2023-03-06 08:14:05,736 [s5@group-365CAE62711D-LeaderElection15] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s5: shutdown s5@group-365CAE62711D-LeaderElection15
2023-03-06 08:14:05,736 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s5@group-365CAE62711D: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:14:05,736 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s5@group-365CAE62711D: change Leader from null to s5 at term 1 for becomeLeader, leader elected after 377ms
2023-03-06 08:14:05,736 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:14:05,736 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-03-06 08:14:05,736 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 1MB (=1048576) (custom)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:05,737 [s5@group-365CAE62711D-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:05,738 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:14:05,738 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:05,738 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:14:05,738 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:14:05,738 [s5@group-365CAE62711D-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:14:05,738 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:05,738 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:05,738 [s5@group-365CAE62711D-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:05,738 [s5@group-365CAE62711D-LeaderElection15] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-365CAE62711D-LeaderStateImpl
2023-03-06 08:14:05,738 [s5@group-365CAE62711D-LeaderElection15] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s5@group-365CAE62711D-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:05,742 [s5@group-365CAE62711D-LeaderElection15] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s5@group-365CAE62711D: set configuration 0: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,744 [s3@group-365CAE62711D-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-365CAE62711D-LeaderElection14: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:14:05,744 [s3@group-365CAE62711D-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s3<-s4#0:OK-t0
2023-03-06 08:14:05,744 [s3@group-365CAE62711D-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s3@group-365CAE62711D-LeaderElection14 PRE_VOTE round 0: result PASSED
2023-03-06 08:14:05,748 [s5@group-365CAE62711D-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s5@group-365CAE62711D-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s5/6355c28a-aa60-4543-ba36-365cae62711d/current/log_inprogress_0
2023-03-06 08:14:05,779 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s3@group-365CAE62711D: change Leader from null to s5 at term 1 for appendEntries, leader elected after 437ms
2023-03-06 08:14:05,780 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s3@group-365CAE62711D: set configuration 0: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,780 [s3-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s3@group-365CAE62711D-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:05,790 [s3@group-365CAE62711D-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s3@group-365CAE62711D-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s3/6355c28a-aa60-4543-ba36-365cae62711d/current/log_inprogress_0
2023-03-06 08:14:05,802 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s4@group-365CAE62711D: receive requestVote(PRE_VOTE, s5, group-365CAE62711D, 0, (t:0, i:0))
2023-03-06 08:14:05,802 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s4@group-365CAE62711D-CANDIDATE: accept PRE_VOTE from s5: our priority 0 <= candidate's priority 0
2023-03-06 08:14:05,803 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s4@group-365CAE62711D replies to PRE_VOTE vote request: s5<-s4#0:OK-t0. Peer's state: s4@group-365CAE62711D:t0, leader=null, voted=, raftlog=Memoized:s4@group-365CAE62711D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,803 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s4@group-365CAE62711D: receive requestVote(ELECTION, s5, group-365CAE62711D, 1, (t:0, i:0))
2023-03-06 08:14:05,803 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s4@group-365CAE62711D-CANDIDATE: accept ELECTION from s5: our priority 0 <= candidate's priority 0
2023-03-06 08:14:05,803 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s4@group-365CAE62711D: changes role from CANDIDATE to FOLLOWER at term 1 for candidate:s5
2023-03-06 08:14:05,803 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s4: shutdown s4@group-365CAE62711D-LeaderElection16
2023-03-06 08:14:05,803 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-365CAE62711D-FollowerState
2023-03-06 08:14:05,803 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s5@group-365CAE62711D: receive requestVote(PRE_VOTE, s3, group-365CAE62711D, 0, (t:0, i:0))
2023-03-06 08:14:05,804 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s5@group-365CAE62711D-LEADER: reject PRE_VOTE from s3: this server is the leader and still has leadership
2023-03-06 08:14:05,804 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s5@group-365CAE62711D replies to PRE_VOTE vote request: s3<-s5#0:FAIL-t1. Peer's state: s5@group-365CAE62711D:t1, leader=s5, voted=s5, raftlog=Memoized:s5@group-365CAE62711D-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,814 [s4@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:05,814 [s4@group-365CAE62711D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:05,818 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s4@group-365CAE62711D replies to ELECTION vote request: s5<-s4#0:OK-t1. Peer's state: s4@group-365CAE62711D:t1, leader=null, voted=s5, raftlog=Memoized:s4@group-365CAE62711D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,822 [s4-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s4@group-365CAE62711D: change Leader from null to s5 at term 1 for appendEntries, leader elected after 473ms
2023-03-06 08:14:05,829 [s4-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s4@group-365CAE62711D: set configuration 0: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,830 [s4-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s4@group-365CAE62711D-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:05,842 [s4@group-365CAE62711D-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s4@group-365CAE62711D-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc52e7095e/s4/6355c28a-aa60-4543-ba36-365cae62711d/current/log_inprogress_0
2023-03-06 08:14:05,864 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2B9D96E88B6D->s3: receive RaftClientReply:client-2B9D96E88B6D->s3@group-365CAE62711D, cid=62, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-365CAE62711D is not the leader s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s3:c-1, s4:c-1, s5:c-1]
2023-03-06 08:14:05,876 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s3@group-365CAE62711D: receive requestVote(PRE_VOTE, s4, group-365CAE62711D, 0, (t:0, i:0))
2023-03-06 08:14:05,877 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-365CAE62711D-FOLLOWER: reject PRE_VOTE from s4: this server is a follower and still has a valid leader s5
2023-03-06 08:14:05,877 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s3@group-365CAE62711D replies to PRE_VOTE vote request: s4<-s3#0:FAIL-t1. Peer's state: s3@group-365CAE62711D:t1, leader=s5, voted=s5, raftlog=Memoized:s3@group-365CAE62711D-SegmentedRaftLog:OPENED:c-1, conf=0: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,880 [s4@group-365CAE62711D-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-365CAE62711D-LeaderElection16: PRE_VOTE DISCOVERED_A_NEW_TERM (term=1) received 1 response(s) and 0 exception(s):
2023-03-06 08:14:05,880 [s4@group-365CAE62711D-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s4<-s3#0:FAIL-t1
2023-03-06 08:14:05,880 [s4@group-365CAE62711D-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s4@group-365CAE62711D-LeaderElection16 PRE_VOTE round 0: result DISCOVERED_A_NEW_TERM (term=1)
2023-03-06 08:14:05,881 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,881 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,912 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s5@group-365CAE62711D: receive requestVote(PRE_VOTE, s4, group-365CAE62711D, 0, (t:0, i:0))
2023-03-06 08:14:05,913 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s5@group-365CAE62711D-LEADER: reject PRE_VOTE from s4: this server is the leader and still has leadership
2023-03-06 08:14:05,913 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s5@group-365CAE62711D replies to PRE_VOTE vote request: s4<-s5#0:FAIL-t1. Peer's state: s5@group-365CAE62711D:t1, leader=s5, voted=s5, raftlog=Memoized:s5@group-365CAE62711D-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:05,936 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2B9D96E88B6D->s5: receive RaftClientReply:client-2B9D96E88B6D->s5@group-365CAE62711D, cid=62, SUCCESS, logIndex=0, commits[s5:c0, s3:c0, s4:c-1]
2023-03-06 08:14:05,959 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 63@client-2B9D96E88B6D
2023-03-06 08:14:05,961 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2B9D96E88B6D->s5: receive RaftClientReply:client-2B9D96E88B6D->s5@group-365CAE62711D, cid=63, SUCCESS, logIndex=1, commits[s5:c1, s3:c0, s4:c-1]
2023-03-06 08:14:05,962 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 63@client-2B9D96E88B6D
2023-03-06 08:14:05,965 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 63@client-2B9D96E88B6D
2023-03-06 08:14:05,985 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block FLUSH_STATE_MACHINE_DATA
2023-03-06 08:14:05,986 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,986 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,991 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,991 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,993 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,995 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,996 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:05,998 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:05,999 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:06,005 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:06,012 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:06,013 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:06,023 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:06,025 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:06,027 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:06,042 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:06,063 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:06,063 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:06,074 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:06,074 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:06,082 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:06,083 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:06,192 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-5EC96F5920BF->s5: receive RaftClientReply:client-5EC96F5920BF->s5@group-365CAE62711D, cid=64, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,280 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-90D3C4C0F36C->s5: receive RaftClientReply:client-90D3C4C0F36C->s5@group-365CAE62711D, cid=66, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,291 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-92412D5F4F23->s5: receive RaftClientReply:client-92412D5F4F23->s5@group-365CAE62711D, cid=70, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,325 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-5812E44A045C->s5: receive RaftClientReply:client-5812E44A045C->s5@group-365CAE62711D, cid=76, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,337 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-86E75FAA6F9B->s5: receive RaftClientReply:client-86E75FAA6F9B->s5@group-365CAE62711D, cid=74, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,357 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-4BA1ABF341B5->s5: receive RaftClientReply:client-4BA1ABF341B5->s5@group-365CAE62711D, cid=78, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,362 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-95996D615117->s5: receive RaftClientReply:client-95996D615117->s5@group-365CAE62711D, cid=82, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,370 [grpc-default-executor-5] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-ACE3ECC10FE2->s5: receive RaftClientReply:client-ACE3ECC10FE2->s5@group-365CAE62711D, cid=72, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,374 [grpc-default-executor-6] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A606ABC170A7->s5: receive RaftClientReply:client-A606ABC170A7->s5@group-365CAE62711D, cid=84, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,374 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-B69386022158->s5: receive RaftClientReply:client-B69386022158->s5@group-365CAE62711D, cid=68, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,384 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E0FD5530C5DD->s5: receive RaftClientReply:client-E0FD5530C5DD->s5@group-365CAE62711D, cid=80, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-03-06 08:14:06,393 [grpc-default-executor-1] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=message 7
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s5@group-365CAE62711D: Failed to acquire a pending write request for RaftClientRequest:client-E0FD5530C5DD->s5@group-365CAE62711D, cid=81, seq=2, RW, Message:6d6573736167652037
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s5@group-365CAE62711D: Failed to acquire a pending write request for RaftClientRequest:client-E0FD5530C5DD->s5@group-365CAE62711D, cid=81, seq=2, RW, Message:6d6573736167652037
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:775)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:886)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:824)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:824)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:894)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:893)
		... 7 more
2023-03-06 08:14:06,395 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock FLUSH_STATE_MACHINE_DATA
2023-03-06 08:14:06,400 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:06,400 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 65@client-5EC96F5920BF
2023-03-06 08:14:06,402 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 67@client-90D3C4C0F36C
2023-03-06 08:14:06,402 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 71@client-92412D5F4F23
2023-03-06 08:14:06,402 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 6, message 5 -> (t:1, i:6), STATEMACHINELOGENTRY, 77@client-5812E44A045C
2023-03-06 08:14:06,402 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 7, message 6 -> (t:1, i:7), STATEMACHINELOGENTRY, 79@client-4BA1ABF341B5
2023-03-06 08:14:06,404 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-5812E44A045C->s5: receive RaftClientReply:client-5812E44A045C->s5@group-365CAE62711D, cid=77, SUCCESS, logIndex=6, commits[s5:c7, s3:c2, s4:c2]
2023-03-06 08:14:06,404 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-4BA1ABF341B5->s5: receive RaftClientReply:client-4BA1ABF341B5->s5@group-365CAE62711D, cid=79, SUCCESS, logIndex=7, commits[s5:c7, s3:c2, s4:c2]
2023-03-06 08:14:06,404 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-92412D5F4F23->s5: receive RaftClientReply:client-92412D5F4F23->s5@group-365CAE62711D, cid=71, SUCCESS, logIndex=5, commits[s5:c7, s3:c2, s4:c2]
2023-03-06 08:14:06,404 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-90D3C4C0F36C->s5: receive RaftClientReply:client-90D3C4C0F36C->s5@group-365CAE62711D, cid=67, SUCCESS, logIndex=4, commits[s5:c7, s3:c2, s4:c2]
2023-03-06 08:14:06,405 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 73@client-ACE3ECC10FE2
2023-03-06 08:14:06,405 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-ACE3ECC10FE2->s5: receive RaftClientReply:client-ACE3ECC10FE2->s5@group-365CAE62711D, cid=73, SUCCESS, logIndex=8, commits[s5:c8, s3:c2, s4:c2]
2023-03-06 08:14:06,406 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 9, message 1 -> (t:1, i:9), STATEMACHINELOGENTRY, 69@client-B69386022158
2023-03-06 08:14:06,406 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 10, message 4 -> (t:1, i:10), STATEMACHINELOGENTRY, 75@client-86E75FAA6F9B
2023-03-06 08:14:06,406 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 11, message 9 -> (t:1, i:11), STATEMACHINELOGENTRY, 85@client-A606ABC170A7
2023-03-06 08:14:06,406 [s5@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 83@client-95996D615117
2023-03-06 08:14:06,408 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A606ABC170A7->s5: receive RaftClientReply:client-A606ABC170A7->s5@group-365CAE62711D, cid=85, SUCCESS, logIndex=11, commits[s5:c12, s3:c2, s4:c2]
2023-03-06 08:14:06,408 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-B69386022158->s5: receive RaftClientReply:client-B69386022158->s5@group-365CAE62711D, cid=69, SUCCESS, logIndex=9, commits[s5:c12, s3:c2, s4:c2]
2023-03-06 08:14:06,408 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:06,410 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-95996D615117->s5: receive RaftClientReply:client-95996D615117->s5@group-365CAE62711D, cid=83, SUCCESS, logIndex=12, commits[s5:c12, s3:c2, s4:c2]
2023-03-06 08:14:06,410 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-86E75FAA6F9B->s5: receive RaftClientReply:client-86E75FAA6F9B->s5@group-365CAE62711D, cid=75, SUCCESS, logIndex=10, commits[s5:c12, s3:c2, s4:c2]
2023-03-06 08:14:06,410 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 65@client-5EC96F5920BF
2023-03-06 08:14:06,410 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 67@client-90D3C4C0F36C
2023-03-06 08:14:06,411 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-5EC96F5920BF->s5: receive RaftClientReply:client-5EC96F5920BF->s5@group-365CAE62711D, cid=65, SUCCESS, logIndex=3, commits[s5:c3, s3:c2, s4:c2]
2023-03-06 08:14:06,411 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 71@client-92412D5F4F23
2023-03-06 08:14:06,412 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 6, message 5 -> (t:1, i:6), STATEMACHINELOGENTRY, 77@client-5812E44A045C
2023-03-06 08:14:06,412 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 7, message 6 -> (t:1, i:7), STATEMACHINELOGENTRY, 79@client-4BA1ABF341B5
2023-03-06 08:14:06,413 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 65@client-5EC96F5920BF
2023-03-06 08:14:06,413 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 67@client-90D3C4C0F36C
2023-03-06 08:14:06,413 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 71@client-92412D5F4F23
2023-03-06 08:14:06,413 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 6, message 5 -> (t:1, i:6), STATEMACHINELOGENTRY, 77@client-5812E44A045C
2023-03-06 08:14:06,413 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 7, message 6 -> (t:1, i:7), STATEMACHINELOGENTRY, 79@client-4BA1ABF341B5
2023-03-06 08:14:06,452 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 73@client-ACE3ECC10FE2
2023-03-06 08:14:06,452 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 9, message 1 -> (t:1, i:9), STATEMACHINELOGENTRY, 69@client-B69386022158
2023-03-06 08:14:06,452 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 10, message 4 -> (t:1, i:10), STATEMACHINELOGENTRY, 75@client-86E75FAA6F9B
2023-03-06 08:14:06,452 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 11, message 9 -> (t:1, i:11), STATEMACHINELOGENTRY, 85@client-A606ABC170A7
2023-03-06 08:14:06,453 [s3@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 83@client-95996D615117
2023-03-06 08:14:06,460 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 8, message 3 -> (t:1, i:8), STATEMACHINELOGENTRY, 73@client-ACE3ECC10FE2
2023-03-06 08:14:06,460 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 9, message 1 -> (t:1, i:9), STATEMACHINELOGENTRY, 69@client-B69386022158
2023-03-06 08:14:06,460 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 10, message 4 -> (t:1, i:10), STATEMACHINELOGENTRY, 75@client-86E75FAA6F9B
2023-03-06 08:14:06,460 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 11, message 9 -> (t:1, i:11), STATEMACHINELOGENTRY, 85@client-A606ABC170A7
2023-03-06 08:14:06,460 [s4@group-365CAE62711D-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 83@client-95996D615117
2023-03-06 08:14:06,465 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-8A79214C10AB->s5: receive RaftClientReply:client-8A79214C10AB->s5@group-365CAE62711D, cid=86, SUCCESS, logIndex=16, commits[s5:c16, s3:c12, s4:c12]
2023-03-06 08:14:06,486 [grpc-default-executor-3] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=1025kb (=1049600)-message
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s5@group-365CAE62711D: Failed to acquire a pending write request for RaftClientRequest:client-8A79214C10AB->s5@group-365CAE62711D, cid=87, seq=2, RW, Message:e09a75e85686b33e6caa...(size=1049600)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s5@group-365CAE62711D: Failed to acquire a pending write request for RaftClientRequest:client-8A79214C10AB->s5@group-365CAE62711D, cid=87, seq=2, RW, Message:e09a75e85686b33e6caa...(size=1049600)
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:775)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:886)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:824)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:824)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:894)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:893)
		... 7 more
2023-03-06 08:14:06,851 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:14:06,851 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:14:06,851 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:14:06,851 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:14:06,851 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:14:06,852 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-365CAE62711D:t1, leader=s5, voted=s5, raftlog=Memoized:s3@group-365CAE62711D-SegmentedRaftLog:OPENED:c16, conf=0: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s4:  RUNNING  FOLLOWER s4@group-365CAE62711D:t1, leader=s5, voted=s5, raftlog=Memoized:s4@group-365CAE62711D-SegmentedRaftLog:OPENED:c16, conf=0: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s5:  RUNNING    LEADER s5@group-365CAE62711D:t1, leader=s5, voted=s5, raftlog=Memoized:s5@group-365CAE62711D-SegmentedRaftLog:OPENED:c16, conf=0: peers:[s3|rpc:localhost:39213|admin:localhost:33819|client:localhost:46329|dataStream:localhost:36039|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:41397|admin:localhost:41741|client:localhost:35783|dataStream:localhost:38423|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45933|admin:localhost:37065|client:localhost:43357|dataStream:localhost:42123|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:06,852 [MiniRaftCluster-18] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s3: close
2023-03-06 08:14:06,852 [MiniRaftCluster-19] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s4: close
2023-03-06 08:14:06,853 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s3@group-365CAE62711D: shutdown
2023-03-06 08:14:06,855 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s4@group-365CAE62711D: shutdown
2023-03-06 08:14:06,854 [MiniRaftCluster-20] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s5: close
2023-03-06 08:14:06,855 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-365CAE62711D,id=s4
2023-03-06 08:14:06,854 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:06,855 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-365CAE62711D-FollowerState
2023-03-06 08:14:06,855 [s4-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s4@group-365CAE62711D-StateMachineUpdater: set stopIndex = 16
2023-03-06 08:14:06,855 [s4@group-365CAE62711D-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s4@group-365CAE62711D-FollowerState was interrupted
2023-03-06 08:14:06,855 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-365CAE62711D,id=s3
2023-03-06 08:14:06,855 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-365CAE62711D-FollowerState
2023-03-06 08:14:06,855 [s3-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s3@group-365CAE62711D-StateMachineUpdater: set stopIndex = 16
2023-03-06 08:14:06,855 [s3@group-365CAE62711D-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s3@group-365CAE62711D-FollowerState was interrupted
2023-03-06 08:14:06,855 [s3-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s3@group-365CAE62711D: applyIndex: 16
2023-03-06 08:14:06,855 [s4-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s4@group-365CAE62711D: applyIndex: 16
2023-03-06 08:14:06,855 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:06,856 [Thread-638] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s3 Close channels
2023-03-06 08:14:06,858 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:06,858 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s5@group-365CAE62711D: shutdown
2023-03-06 08:14:06,858 [s5-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-365CAE62711D,id=s5
2023-03-06 08:14:06,858 [s5-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s5: shutdown s5@group-365CAE62711D-LeaderStateImpl
2023-03-06 08:14:06,858 [s5-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s5@group-365CAE62711D-PendingRequests: sendNotLeaderResponses
2023-03-06 08:14:06,858 [s5@group-365CAE62711D->s3-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(190)) - s5@group-365CAE62711D->s3-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-03-06 08:14:06,858 [s5@group-365CAE62711D->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(190)) - s5@group-365CAE62711D->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-03-06 08:14:06,858 [Thread-642] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s3 Close channels
2023-03-06 08:14:06,859 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s3: Completed APPEND_ENTRIES, lastRequest: s5->s3#8519-t1,previous=(t:1, i:14),leaderCommit=12,initializing? true,entries: size=2, first=(t:1, i:15), METADATAENTRY(c:8)
2023-03-06 08:14:06,859 [Thread-643] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s4 Close channels
2023-03-06 08:14:06,863 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s4: Completed APPEND_ENTRIES, lastRequest: s5->s4#6957-t1,previous=(t:1, i:14),leaderCommit=12,initializing? true,entries: size=2, first=(t:1, i:15), METADATAENTRY(c:8)
2023-03-06 08:14:06,864 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s5@group-365CAE62711D->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:06,864 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(128)) - s5@group-365CAE62711D->s3-GrpcLogAppender: Failed to getClient for s3
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s5 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:106)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:111)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:55)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:418)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:06,864 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s3: Completed APPEND_ENTRIES, lastRequest: null
2023-03-06 08:14:06,866 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s5@group-365CAE62711D->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:06,866 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(128)) - s5@group-365CAE62711D->s3-GrpcLogAppender: Failed to getClient for s3
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s5 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:106)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:111)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:55)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:418)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:06,867 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s5@group-365CAE62711D->s4-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:06,867 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(128)) - s5@group-365CAE62711D->s4-GrpcLogAppender: Failed to getClient for s4
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s5 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:106)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:111)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:55)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:418)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:06,867 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s4: Completed APPEND_ENTRIES, lastRequest: null
2023-03-06 08:14:06,867 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s5@group-365CAE62711D->s4-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:06,867 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(128)) - s5@group-365CAE62711D->s4-GrpcLogAppender: Failed to getClient for s4
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s5 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:106)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:111)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:55)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:418)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:06,868 [Thread-641] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s5 Close channels
2023-03-06 08:14:06,869 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:06,869 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:06,873 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:06,873 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:06,875 [Thread-639] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s4 Close channels
2023-03-06 08:14:06,876 [Thread-646] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s5 Close channels
2023-03-06 08:14:06,877 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:06,877 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:06,878 [s5-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s5@group-365CAE62711D-StateMachineUpdater: set stopIndex = 16
2023-03-06 08:14:06,878 [s5-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s5@group-365CAE62711D: applyIndex: 16
2023-03-06 08:14:06,888 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:06,888 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:06,888 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:06,888 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:06,893 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:06,894 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:06,894 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:06,894 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:06,896 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:07,409 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s5@group-365CAE62711D-SegmentedRaftLogWorker close()
2023-03-06 08:14:07,415 [JvmPauseMonitor19] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s5: Stopped
2023-03-06 08:14:07,453 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s3@group-365CAE62711D-SegmentedRaftLogWorker close()
2023-03-06 08:14:07,453 [JvmPauseMonitor17] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s3: Stopped
2023-03-06 08:14:07,461 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s4@group-365CAE62711D-SegmentedRaftLogWorker close()
2023-03-06 08:14:07,461 [JvmPauseMonitor18] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s4: Stopped
2023-03-06 08:14:07,461 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:14:07,465 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:14:07,465 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:14:07,465 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:14:07,466 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-03-06 08:14:07,466 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-D602093F21D3:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]
2023-03-06 08:14:07,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:14:07,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:14:07,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:14:07,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:14:07,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:14:07,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:14:07,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-D602093F21D3:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:07,467 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0
2023-03-06 08:14:07,467 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0 does not exist.
2023-03-06 08:14:07,467 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0
2023-03-06 08:14:07,467 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:07,467 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:07,467 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 35009 (custom)
2023-03-06 08:14:07,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:07,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 43143 (custom)
2023-03-06 08:14:07,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:07,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 42915 (custom)
2023-03-06 08:14:07,468 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,468 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,468 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,468 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:07,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:07,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:07,468 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:07,469 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:07,470 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:07,470 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:07,470 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:07,470 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:07,470 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0] (custom)
2023-03-06 08:14:07,471 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-D602093F21D3:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER] returns group-D602093F21D3:java.util.concurrent.CompletableFuture@43751f09[Not completed]
2023-03-06 08:14:07,471 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-D602093F21D3:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:07,471 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1
2023-03-06 08:14:07,471 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:07,471 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:07,471 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:07,471 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1 does not exist.
2023-03-06 08:14:07,472 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-D602093F21D3:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-D602093F21D3: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:07,472 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:07,472 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:07,472 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:07,472 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 39681 (custom)
2023-03-06 08:14:07,473 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:07,473 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 44275 (custom)
2023-03-06 08:14:07,473 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:07,473 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 34659 (custom)
2023-03-06 08:14:07,474 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,474 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,474 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,474 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:07,474 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:07,474 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:07,474 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:07,475 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:07,475 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:07,475 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:07,476 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:07,476 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:07,476 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1] (custom)
2023-03-06 08:14:07,476 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-D602093F21D3:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER] returns group-D602093F21D3:java.util.concurrent.CompletableFuture@373b9ffc[Not completed]
2023-03-06 08:14:07,476 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-D602093F21D3:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:07,476 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2
2023-03-06 08:14:07,477 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2 does not exist.
2023-03-06 08:14:07,477 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2
2023-03-06 08:14:07,477 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:07,477 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:07,477 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 38779 (custom)
2023-03-06 08:14:07,477 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:07,477 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 41487 (custom)
2023-03-06 08:14:07,477 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:07,477 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 45583 (custom)
2023-03-06 08:14:07,477 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,477 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,477 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,477 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:07,477 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:07,477 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:07,477 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:07,478 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:07,478 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:07,478 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:07,478 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:07,478 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:07,478 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2] (custom)
2023-03-06 08:14:07,479 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:07,479 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:07,479 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:07,479 [s1-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-D602093F21D3:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:07,479 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:07,479 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:07,479 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:07,480 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:07,480 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:07,480 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:07,480 [s1-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-D602093F21D3: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:07,480 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:07,480 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:07,480 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:07,480 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:07,480 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:07,482 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:07,482 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:07,482 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:07,482 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:07,482 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:07,485 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:07,486 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:07,486 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:07,486 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:07,486 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:07,486 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:07,487 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-D602093F21D3:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER] returns group-D602093F21D3:java.util.concurrent.CompletableFuture@1a8792c4[Not completed]
2023-03-06 08:14:07,487 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:07,487 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:07,487 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0] (custom)
2023-03-06 08:14:07,487 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0/fcfeced0-019c-40d3-ab25-d602093f21d3 does not exist. Creating ...
2023-03-06 08:14:07,487 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-D602093F21D3:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:07,488 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0/fcfeced0-019c-40d3-ab25-d602093f21d3
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-D602093F21D3: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:07,488 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:07,489 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:07,489 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0/fcfeced0-019c-40d3-ab25-d602093f21d3/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:07,489 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0/fcfeced0-019c-40d3-ab25-d602093f21d3/current
2023-03-06 08:14:07,489 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0/fcfeced0-019c-40d3-ab25-d602093f21d3/sm
2023-03-06 08:14:07,490 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:07,490 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:07,490 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:07,490 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:07,490 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:07,490 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0/fcfeced0-019c-40d3-ab25-d602093f21d3 has been successfully formatted.
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,491 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s0@group-D602093F21D3-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0/fcfeced0-019c-40d3-ab25-d602093f21d3
2023-03-06 08:14:07,492 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:07,492 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:07,492 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:07,492 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:07,492 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:07,492 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:07,492 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:07,492 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:07,492 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:07,492 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,493 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:07,493 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:07,493 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:07,493 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-D602093F21D3-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:07,493 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-D602093F21D3-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:07,493 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s0@group-D602093F21D3: start as a follower, conf=-1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,493 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-D602093F21D3: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:07,494 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-D602093F21D3-FollowerState
2023-03-06 08:14:07,494 [s0@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:07,494 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-D602093F21D3,id=s0
2023-03-06 08:14:07,494 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:07,494 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:07,494 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:07,497 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s0: start RPC server
2023-03-06 08:14:07,494 [s0@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:07,498 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 43143
2023-03-06 08:14:07,498 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 42915
2023-03-06 08:14:07,498 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 35009
2023-03-06 08:14:07,501 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:07,501 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:07,502 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1] (custom)
2023-03-06 08:14:07,502 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1/fcfeced0-019c-40d3-ab25-d602093f21d3 does not exist. Creating ...
2023-03-06 08:14:07,502 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1/fcfeced0-019c-40d3-ab25-d602093f21d3
2023-03-06 08:14:07,502 [JvmPauseMonitor20] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s0: Started
2023-03-06 08:14:07,503 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1/fcfeced0-019c-40d3-ab25-d602093f21d3/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:07,503 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1/fcfeced0-019c-40d3-ab25-d602093f21d3/current
2023-03-06 08:14:07,503 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1/fcfeced0-019c-40d3-ab25-d602093f21d3/sm
2023-03-06 08:14:07,504 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1/fcfeced0-019c-40d3-ab25-d602093f21d3 has been successfully formatted.
2023-03-06 08:14:07,504 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:07,504 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:07,504 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:07,504 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:07,504 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,504 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:07,504 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s1@group-D602093F21D3-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1/fcfeced0-019c-40d3-ab25-d602093f21d3
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:07,505 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,506 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:07,506 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:07,506 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:07,506 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-D602093F21D3-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:07,506 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-D602093F21D3-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:07,509 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s1@group-D602093F21D3: start as a follower, conf=-1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,509 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-D602093F21D3: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:07,509 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-D602093F21D3-FollowerState
2023-03-06 08:14:07,510 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-D602093F21D3,id=s1
2023-03-06 08:14:07,510 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:07,510 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:07,510 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:07,510 [s1@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:07,510 [s1@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:07,511 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s1: start RPC server
2023-03-06 08:14:07,511 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 44275
2023-03-06 08:14:07,511 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 34659
2023-03-06 08:14:07,512 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 39681
2023-03-06 08:14:07,513 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:07,513 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:07,514 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2] (custom)
2023-03-06 08:14:07,514 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2/fcfeced0-019c-40d3-ab25-d602093f21d3 does not exist. Creating ...
2023-03-06 08:14:07,514 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2/fcfeced0-019c-40d3-ab25-d602093f21d3
2023-03-06 08:14:07,515 [JvmPauseMonitor21] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s1: Started
2023-03-06 08:14:07,515 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2/fcfeced0-019c-40d3-ab25-d602093f21d3/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:07,516 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2/fcfeced0-019c-40d3-ab25-d602093f21d3/current
2023-03-06 08:14:07,516 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2/fcfeced0-019c-40d3-ab25-d602093f21d3/sm
2023-03-06 08:14:07,516 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2/fcfeced0-019c-40d3-ab25-d602093f21d3 has been successfully formatted.
2023-03-06 08:14:07,517 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:07,517 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:07,517 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:07,517 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:07,517 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,517 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:07,517 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s2@group-D602093F21D3-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2/fcfeced0-019c-40d3-ab25-d602093f21d3
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:07,518 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,519 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:07,519 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:07,519 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:07,519 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-D602093F21D3-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:07,519 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-D602093F21D3-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:07,519 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s2@group-D602093F21D3: start as a follower, conf=-1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,519 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-D602093F21D3: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:07,519 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-D602093F21D3-FollowerState
2023-03-06 08:14:07,521 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-D602093F21D3,id=s2
2023-03-06 08:14:07,521 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:07,521 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:07,522 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:07,522 [s2@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:07,522 [s2@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:07,525 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s2: start RPC server
2023-03-06 08:14:07,527 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 41487
2023-03-06 08:14:07,528 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 45583
2023-03-06 08:14:07,528 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 38779
2023-03-06 08:14:07,529 [JvmPauseMonitor22] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s2: Started
2023-03-06 08:14:07,529 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,529 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,536 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-705642E06645->s0: receive RaftClientReply:client-705642E06645->s0@group-D602093F21D3, cid=88, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-D602093F21D3 is not the leader, logIndex=0, commits[s0:c-1]
2023-03-06 08:14:07,638 [timer7] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,638 [timer7] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,647 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-705642E06645->s2: receive RaftClientReply:client-705642E06645->s2@group-D602093F21D3, cid=88, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s2@group-D602093F21D3 is not the leader, logIndex=0, commits[s2:c-1]
2023-03-06 08:14:07,698 [s0@group-D602093F21D3-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-D602093F21D3-FollowerState: change to CANDIDATE, lastRpcElapsedTime:204465959ns, electionTimeout:200ms
2023-03-06 08:14:07,698 [s0@group-D602093F21D3-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-D602093F21D3-FollowerState
2023-03-06 08:14:07,698 [s0@group-D602093F21D3-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-D602093F21D3: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:14:07,699 [s0@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:14:07,699 [s0@group-D602093F21D3-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-D602093F21D3-LeaderElection17
2023-03-06 08:14:07,703 [s0@group-D602093F21D3-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-D602093F21D3-LeaderElection17 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,703 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:07,703 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:07,703 [s0@group-D602093F21D3-LeaderElection17-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-03-06 08:14:07,704 [s0@group-D602093F21D3-LeaderElection17-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-03-06 08:14:07,714 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-D602093F21D3: receive requestVote(PRE_VOTE, s0, group-D602093F21D3, 0, (t:0, i:0))
2023-03-06 08:14:07,714 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-D602093F21D3-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:14:07,714 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-D602093F21D3 replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-D602093F21D3:t0, leader=null, voted=, raftlog=Memoized:s1@group-D602093F21D3-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,715 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-D602093F21D3: receive requestVote(PRE_VOTE, s0, group-D602093F21D3, 0, (t:0, i:0))
2023-03-06 08:14:07,715 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-D602093F21D3-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:14:07,715 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-D602093F21D3 replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-D602093F21D3:t0, leader=null, voted=, raftlog=Memoized:s2@group-D602093F21D3-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,716 [s0@group-D602093F21D3-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-D602093F21D3-LeaderElection17: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:14:07,716 [s0@group-D602093F21D3-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s2#0:OK-t0
2023-03-06 08:14:07,716 [s0@group-D602093F21D3-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-D602093F21D3-LeaderElection17 PRE_VOTE round 0: result PASSED
2023-03-06 08:14:07,717 [s0@group-D602093F21D3-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-D602093F21D3-LeaderElection17 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,717 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:07,717 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:07,718 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-D602093F21D3: receive requestVote(ELECTION, s0, group-D602093F21D3, 1, (t:0, i:0))
2023-03-06 08:14:07,718 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-D602093F21D3-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:14:07,718 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-D602093F21D3: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-03-06 08:14:07,719 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-D602093F21D3-FollowerState
2023-03-06 08:14:07,719 [s1@group-D602093F21D3-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-D602093F21D3-FollowerState was interrupted
2023-03-06 08:14:07,719 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-D602093F21D3: receive requestVote(ELECTION, s0, group-D602093F21D3, 1, (t:0, i:0))
2023-03-06 08:14:07,719 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-D602093F21D3-FollowerState
2023-03-06 08:14:07,719 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-D602093F21D3-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-03-06 08:14:07,719 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-D602093F21D3: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-03-06 08:14:07,719 [grpc-default-executor-8] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-D602093F21D3-FollowerState
2023-03-06 08:14:07,719 [s2@group-D602093F21D3-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-D602093F21D3-FollowerState was interrupted
2023-03-06 08:14:07,720 [s1@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:07,720 [s1@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:07,720 [grpc-default-executor-8] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-D602093F21D3-FollowerState
2023-03-06 08:14:07,720 [s2@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:07,721 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-D602093F21D3 replies to ELECTION vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-D602093F21D3:t1, leader=null, voted=s0, raftlog=Memoized:s1@group-D602093F21D3-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,722 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-D602093F21D3 replies to ELECTION vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-D602093F21D3:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-D602093F21D3-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,722 [s2@group-D602093F21D3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:07,722 [s0@group-D602093F21D3-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-D602093F21D3-LeaderElection17: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:14:07,722 [s0@group-D602093F21D3-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t1
2023-03-06 08:14:07,722 [s0@group-D602093F21D3-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-D602093F21D3-LeaderElection17 ELECTION round 0: result PASSED
2023-03-06 08:14:07,722 [s0@group-D602093F21D3-LeaderElection17] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-D602093F21D3-LeaderElection17
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-D602093F21D3: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-D602093F21D3: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 250ms
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 1MB (=1048576) (custom)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:14:07,723 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-D602093F21D3-LeaderStateImpl
2023-03-06 08:14:07,724 [s0@group-D602093F21D3-LeaderElection17] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-D602093F21D3-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:07,734 [s0@group-D602093F21D3-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-D602093F21D3-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s0/fcfeced0-019c-40d3-ab25-d602093f21d3/current/log_inprogress_0
2023-03-06 08:14:07,735 [s0@group-D602093F21D3-LeaderElection17] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-D602093F21D3: set configuration 0: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,738 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-D602093F21D3: change Leader from null to s0 at term 1 for appendEntries, leader elected after 257ms
2023-03-06 08:14:07,741 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-D602093F21D3: change Leader from null to s0 at term 1 for appendEntries, leader elected after 252ms
2023-03-06 08:14:07,749 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,749 [s1-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-D602093F21D3: set configuration 0: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,749 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,749 [s1-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s1@group-D602093F21D3-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:07,755 [s2-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-D602093F21D3: set configuration 0: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:07,755 [s2-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s2@group-D602093F21D3-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:07,766 [s2@group-D602093F21D3-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s2@group-D602093F21D3-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s2/fcfeced0-019c-40d3-ab25-d602093f21d3/current/log_inprogress_0
2023-03-06 08:14:07,770 [s1@group-D602093F21D3-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s1@group-D602093F21D3-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc74ceb848/s1/fcfeced0-019c-40d3-ab25-d602093f21d3/current/log_inprogress_0
2023-03-06 08:14:07,778 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-705642E06645->s1: receive RaftClientReply:client-705642E06645->s1@group-D602093F21D3, cid=88, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s1@group-D602093F21D3 is not the leader s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s1:c-1, s0:c-1, s2:c-1]
2023-03-06 08:14:07,786 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,786 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,791 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-705642E06645->s0: receive RaftClientReply:client-705642E06645->s0@group-D602093F21D3, cid=88, SUCCESS, logIndex=0, commits[s0:c0, s1:c-1, s2:c-1]
2023-03-06 08:14:07,795 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 89@client-705642E06645
2023-03-06 08:14:07,796 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-705642E06645->s0: receive RaftClientReply:client-705642E06645->s0@group-D602093F21D3, cid=89, SUCCESS, logIndex=1, commits[s0:c1, s1:c-1, s2:c0]
2023-03-06 08:14:07,803 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block FLUSH_STATE_MACHINE_DATA
2023-03-06 08:14:07,804 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,804 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,808 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,808 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,809 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 89@client-705642E06645
2023-03-06 08:14:07,811 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,811 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,813 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,814 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,814 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 89@client-705642E06645
2023-03-06 08:14:07,816 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-9775F5DCE807->s0: receive RaftClientReply:client-9775F5DCE807->s0@group-D602093F21D3, cid=90, SUCCESS, logIndex=1, commits[s0:c1, s1:c0, s2:c0]
2023-03-06 08:14:07,823 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-676BA7C258DA->s0: receive RaftClientReply:client-676BA7C258DA->s0@group-D602093F21D3, cid=94, SUCCESS, logIndex=2, commits[s0:c2, s1:c1, s2:c1]
2023-03-06 08:14:07,825 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-70BB2934F5EF->s0: receive RaftClientReply:client-70BB2934F5EF->s0@group-D602093F21D3, cid=92, SUCCESS, logIndex=2, commits[s0:c2, s1:c1, s2:c1]
2023-03-06 08:14:07,830 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3A277391D0BF->s0: receive RaftClientReply:client-3A277391D0BF->s0@group-D602093F21D3, cid=96, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:14:07,830 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,830 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,837 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-7055C5635EBE->s0: receive RaftClientReply:client-7055C5635EBE->s0@group-D602093F21D3, cid=98, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:14:07,838 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,838 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,843 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-F43B6AE24D74->s0: receive RaftClientReply:client-F43B6AE24D74->s0@group-D602093F21D3, cid=100, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:14:07,846 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,846 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,851 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-BBDB2C69D3CA->s0: receive RaftClientReply:client-BBDB2C69D3CA->s0@group-D602093F21D3, cid=102, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:14:07,852 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,853 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,859 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-5FEEF6FA9FFD->s0: receive RaftClientReply:client-5FEEF6FA9FFD->s0@group-D602093F21D3, cid=104, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:14:07,860 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,860 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,865 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-95481F992D22->s0: receive RaftClientReply:client-95481F992D22->s0@group-D602093F21D3, cid=106, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:14:07,867 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,868 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,872 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-0DAF2D27EF1A->s0: receive RaftClientReply:client-0DAF2D27EF1A->s0@group-D602093F21D3, cid=108, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:14:07,874 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:07,874 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:07,880 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-57858DCE03E5->s0: receive RaftClientReply:client-57858DCE03E5->s0@group-D602093F21D3, cid=110, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-03-06 08:14:07,884 [grpc-default-executor-8] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=message 9
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-D602093F21D3: Failed to acquire a pending write request for RaftClientRequest:client-57858DCE03E5->s0@group-D602093F21D3, cid=111, seq=2, RW, Message:6d6573736167652039
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-D602093F21D3: Failed to acquire a pending write request for RaftClientRequest:client-57858DCE03E5->s0@group-D602093F21D3, cid=111, seq=2, RW, Message:6d6573736167652039
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:775)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:886)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:824)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:824)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:894)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:893)
		... 7 more
2023-03-06 08:14:08,180 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock FLUSH_STATE_MACHINE_DATA
2023-03-06 08:14:08,184 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:08,184 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:08,187 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 91@client-9775F5DCE807
2023-03-06 08:14:08,188 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 4, message 1 -> (t:1, i:4), STATEMACHINELOGENTRY, 95@client-676BA7C258DA
2023-03-06 08:14:08,188 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-9775F5DCE807->s0: receive RaftClientReply:client-9775F5DCE807->s0@group-D602093F21D3, cid=91, SUCCESS, logIndex=3, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:14:08,188 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 97@client-3A277391D0BF
2023-03-06 08:14:08,188 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 6, message 3 -> (t:1, i:6), STATEMACHINELOGENTRY, 99@client-7055C5635EBE
2023-03-06 08:14:08,188 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, message 0 -> (t:1, i:7), STATEMACHINELOGENTRY, 93@client-70BB2934F5EF
2023-03-06 08:14:08,189 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 8, message 4 -> (t:1, i:8), STATEMACHINELOGENTRY, 101@client-F43B6AE24D74
2023-03-06 08:14:08,189 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 103@client-BBDB2C69D3CA
2023-03-06 08:14:08,189 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 105@client-5FEEF6FA9FFD
2023-03-06 08:14:08,189 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-676BA7C258DA->s0: receive RaftClientReply:client-676BA7C258DA->s0@group-D602093F21D3, cid=95, SUCCESS, logIndex=4, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:14:08,189 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 107@client-95481F992D22
2023-03-06 08:14:08,189 [s0@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 109@client-0DAF2D27EF1A
2023-03-06 08:14:08,190 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-F43B6AE24D74->s0: receive RaftClientReply:client-F43B6AE24D74->s0@group-D602093F21D3, cid=101, SUCCESS, logIndex=8, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:14:08,190 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-5FEEF6FA9FFD->s0: receive RaftClientReply:client-5FEEF6FA9FFD->s0@group-D602093F21D3, cid=105, SUCCESS, logIndex=10, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:14:08,190 [grpc-default-executor-0] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-0DAF2D27EF1A->s0: receive RaftClientReply:client-0DAF2D27EF1A->s0@group-D602093F21D3, cid=109, SUCCESS, logIndex=12, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:14:08,190 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-70BB2934F5EF->s0: receive RaftClientReply:client-70BB2934F5EF->s0@group-D602093F21D3, cid=93, SUCCESS, logIndex=7, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:14:08,193 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 91@client-9775F5DCE807
2023-03-06 08:14:08,193 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 4, message 1 -> (t:1, i:4), STATEMACHINELOGENTRY, 95@client-676BA7C258DA
2023-03-06 08:14:08,193 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 97@client-3A277391D0BF
2023-03-06 08:14:08,193 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 6, message 3 -> (t:1, i:6), STATEMACHINELOGENTRY, 99@client-7055C5635EBE
2023-03-06 08:14:08,194 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 7, message 0 -> (t:1, i:7), STATEMACHINELOGENTRY, 93@client-70BB2934F5EF
2023-03-06 08:14:08,194 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 8, message 4 -> (t:1, i:8), STATEMACHINELOGENTRY, 101@client-F43B6AE24D74
2023-03-06 08:14:08,194 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 103@client-BBDB2C69D3CA
2023-03-06 08:14:08,194 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 105@client-5FEEF6FA9FFD
2023-03-06 08:14:08,194 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 107@client-95481F992D22
2023-03-06 08:14:08,194 [s1@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 109@client-0DAF2D27EF1A
2023-03-06 08:14:08,192 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-95481F992D22->s0: receive RaftClientReply:client-95481F992D22->s0@group-D602093F21D3, cid=107, SUCCESS, logIndex=11, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:14:08,192 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3A277391D0BF->s0: receive RaftClientReply:client-3A277391D0BF->s0@group-D602093F21D3, cid=97, SUCCESS, logIndex=5, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:14:08,191 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-BBDB2C69D3CA->s0: receive RaftClientReply:client-BBDB2C69D3CA->s0@group-D602093F21D3, cid=103, SUCCESS, logIndex=9, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:14:08,191 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-7055C5635EBE->s0: receive RaftClientReply:client-7055C5635EBE->s0@group-D602093F21D3, cid=99, SUCCESS, logIndex=6, commits[s0:c12, s1:c2, s2:c2]
2023-03-06 08:14:08,193 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 91@client-9775F5DCE807
2023-03-06 08:14:08,198 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 4, message 1 -> (t:1, i:4), STATEMACHINELOGENTRY, 95@client-676BA7C258DA
2023-03-06 08:14:08,198 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 97@client-3A277391D0BF
2023-03-06 08:14:08,198 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 6, message 3 -> (t:1, i:6), STATEMACHINELOGENTRY, 99@client-7055C5635EBE
2023-03-06 08:14:08,198 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 7, message 0 -> (t:1, i:7), STATEMACHINELOGENTRY, 93@client-70BB2934F5EF
2023-03-06 08:14:08,198 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 8, message 4 -> (t:1, i:8), STATEMACHINELOGENTRY, 101@client-F43B6AE24D74
2023-03-06 08:14:08,198 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 103@client-BBDB2C69D3CA
2023-03-06 08:14:08,198 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 105@client-5FEEF6FA9FFD
2023-03-06 08:14:08,199 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 107@client-95481F992D22
2023-03-06 08:14:08,199 [s2@group-D602093F21D3-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 109@client-0DAF2D27EF1A
2023-03-06 08:14:08,199 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-BA5072504B0C->s0: receive RaftClientReply:client-BA5072504B0C->s0@group-D602093F21D3, cid=112, SUCCESS, logIndex=13, commits[s0:c13, s1:c12, s2:c12]
2023-03-06 08:14:08,209 [grpc-default-executor-8] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=1025kb (=1049600)-message
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-D602093F21D3: Failed to acquire a pending write request for RaftClientRequest:client-BA5072504B0C->s0@group-D602093F21D3, cid=113, seq=2, RW, Message:ff164360b82a46ec899f...(size=1049600)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-D602093F21D3: Failed to acquire a pending write request for RaftClientRequest:client-BA5072504B0C->s0@group-D602093F21D3, cid=113, seq=2, RW, Message:ff164360b82a46ec899f...(size=1049600)
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:775)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:886)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:824)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:824)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:894)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:893)
		... 7 more
2023-03-06 08:14:08,539 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:14:08,539 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:14:08,539 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:14:08,539 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:14:08,539 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:14:08,539 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-D602093F21D3:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-D602093F21D3-SegmentedRaftLog:OPENED:c13, conf=0: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-D602093F21D3:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-D602093F21D3-SegmentedRaftLog:OPENED:c13, conf=0: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-D602093F21D3:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-D602093F21D3-SegmentedRaftLog:OPENED:c13, conf=0: peers:[s0|rpc:localhost:42915|admin:localhost:35009|client:localhost:43143|dataStream:localhost:34263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:34659|admin:localhost:39681|client:localhost:44275|dataStream:localhost:35275|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:45583|admin:localhost:38779|client:localhost:41487|dataStream:localhost:35815|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:08,540 [MiniRaftCluster-21] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s0: close
2023-03-06 08:14:08,540 [MiniRaftCluster-22] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s1: close
2023-03-06 08:14:08,544 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:08,544 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s0@group-D602093F21D3: shutdown
2023-03-06 08:14:08,544 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s1@group-D602093F21D3: shutdown
2023-03-06 08:14:08,544 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-D602093F21D3,id=s1
2023-03-06 08:14:08,544 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-D602093F21D3-FollowerState
2023-03-06 08:14:08,544 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-D602093F21D3-StateMachineUpdater: set stopIndex = 13
2023-03-06 08:14:08,544 [s1@group-D602093F21D3-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-D602093F21D3-FollowerState was interrupted
2023-03-06 08:14:08,544 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-D602093F21D3: applyIndex: 13
2023-03-06 08:14:08,544 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-D602093F21D3,id=s0
2023-03-06 08:14:08,544 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-D602093F21D3-LeaderStateImpl
2023-03-06 08:14:08,544 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-D602093F21D3-PendingRequests: sendNotLeaderResponses
2023-03-06 08:14:08,545 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:08,546 [Thread-751] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-03-06 08:14:08,546 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#810-t1,previous=(t:1, i:12),leaderCommit=12,initializing? true,entries: size=1, first=(t:1, i:13), METADATAENTRY(c:12)
2023-03-06 08:14:08,546 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s2: Completed APPEND_ENTRIES, lastRequest: null
2023-03-06 08:14:08,546 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#825-t1,previous=(t:1, i:12),leaderCommit=12,initializing? true,entries: size=1, first=(t:1, i:13), METADATAENTRY(c:12)
2023-03-06 08:14:08,546 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s1: Completed APPEND_ENTRIES, lastRequest: null
2023-03-06 08:14:08,547 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-D602093F21D3->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:08,547 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(128)) - s0@group-D602093F21D3->s1-GrpcLogAppender: Failed to getClient for s1
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:106)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:111)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:55)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:418)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:08,547 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-D602093F21D3->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:08,547 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(128)) - s0@group-D602093F21D3->s1-GrpcLogAppender: Failed to getClient for s1
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:106)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:111)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:55)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:418)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:08,548 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-D602093F21D3->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:08,548 [grpc-default-executor-8] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s0@group-D602093F21D3->s2: decreaseNextIndex nextIndex: updateUnconditionally 14 -> 13
2023-03-06 08:14:08,548 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-D602093F21D3->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:08,548 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s0@group-D602093F21D3->s2: decreaseNextIndex nextIndex: updateUnconditionally 13 -> 12
2023-03-06 08:14:08,549 [Thread-752] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-03-06 08:14:08,552 [MiniRaftCluster-23] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s2: close
2023-03-06 08:14:08,556 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:08,557 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s2@group-D602093F21D3: shutdown
2023-03-06 08:14:08,557 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-D602093F21D3,id=s2
2023-03-06 08:14:08,557 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-D602093F21D3-FollowerState
2023-03-06 08:14:08,557 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-D602093F21D3-StateMachineUpdater: set stopIndex = 13
2023-03-06 08:14:08,557 [s2@group-D602093F21D3-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-D602093F21D3-FollowerState was interrupted
2023-03-06 08:14:08,557 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:08,557 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:08,556 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:08,557 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:08,557 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-D602093F21D3: applyIndex: 13
2023-03-06 08:14:08,559 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-D602093F21D3-StateMachineUpdater: set stopIndex = 13
2023-03-06 08:14:08,560 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-D602093F21D3: applyIndex: 13
2023-03-06 08:14:08,562 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:08,562 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:08,564 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:08,564 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:08,568 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:08,568 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:08,568 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:08,569 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:08,569 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:08,569 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:08,569 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:09,191 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s0@group-D602093F21D3-SegmentedRaftLogWorker close()
2023-03-06 08:14:09,192 [JvmPauseMonitor20] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s0: Stopped
2023-03-06 08:14:09,193 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s1@group-D602093F21D3-SegmentedRaftLogWorker close()
2023-03-06 08:14:09,196 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s2@group-D602093F21D3-SegmentedRaftLogWorker close()
2023-03-06 08:14:09,196 [JvmPauseMonitor21] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s1: Stopped
2023-03-06 08:14:09,197 [JvmPauseMonitor22] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s2: Stopped
2023-03-06 08:14:09,197 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:14:09,198 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:14:09,198 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:14:09,198 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:14:09,198 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-03-06 08:14:09,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-10A81FFC7E4C:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]
2023-03-06 08:14:09,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:14:09,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:14:09,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:14:09,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:14:09,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:14:09,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:14:09,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-10A81FFC7E4C:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:09,199 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0
2023-03-06 08:14:09,199 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0 does not exist.
2023-03-06 08:14:09,199 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0
2023-03-06 08:14:09,200 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:09,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:09,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 41453 (custom)
2023-03-06 08:14:09,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:09,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37731 (custom)
2023-03-06 08:14:09,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:09,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35107 (custom)
2023-03-06 08:14:09,200 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:09,200 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:09,200 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:09,200 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:09,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:09,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:09,200 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:09,201 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:09,201 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:09,201 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:09,201 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:09,201 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:09,202 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0] (custom)
2023-03-06 08:14:09,202 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-10A81FFC7E4C:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER] returns group-10A81FFC7E4C:java.util.concurrent.CompletableFuture@1f5237c[Not completed]
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-10A81FFC7E4C:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:09,202 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-10A81FFC7E4C: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:09,203 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:09,203 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:09,203 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:09,203 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:09,203 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:09,203 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:09,203 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:09,203 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:09,204 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:09,204 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:09,204 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:09,204 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:09,204 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0] (custom)
2023-03-06 08:14:09,204 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0/cede6fe7-1124-4fc6-b234-10a81ffc7e4c does not exist. Creating ...
2023-03-06 08:14:09,204 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0/cede6fe7-1124-4fc6-b234-10a81ffc7e4c
2023-03-06 08:14:09,205 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0/cede6fe7-1124-4fc6-b234-10a81ffc7e4c/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:09,205 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0/cede6fe7-1124-4fc6-b234-10a81ffc7e4c/current
2023-03-06 08:14:09,205 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0/cede6fe7-1124-4fc6-b234-10a81ffc7e4c/sm
2023-03-06 08:14:09,206 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0/cede6fe7-1124-4fc6-b234-10a81ffc7e4c has been successfully formatted.
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s0@group-10A81FFC7E4C-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0/cede6fe7-1124-4fc6-b234-10a81ffc7e4c
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:09,207 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:09,208 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:09,208 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:09,208 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:09,208 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:09,208 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:09,208 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:09,208 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:09,208 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:09,208 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:09,208 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:09,209 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-10A81FFC7E4C-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:09,209 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-10A81FFC7E4C-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:09,209 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s0@group-10A81FFC7E4C: start as a follower, conf=-1: peers:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:09,209 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-10A81FFC7E4C: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:09,209 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-10A81FFC7E4C-FollowerState
2023-03-06 08:14:09,209 [s0@group-10A81FFC7E4C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:09,209 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-10A81FFC7E4C,id=s0
2023-03-06 08:14:09,209 [s0@group-10A81FFC7E4C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:09,210 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:09,210 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:09,210 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:09,210 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s0: start RPC server
2023-03-06 08:14:09,210 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 37731
2023-03-06 08:14:09,211 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 35107
2023-03-06 08:14:09,213 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 41453
2023-03-06 08:14:09,213 [JvmPauseMonitor23] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s0: Started
2023-03-06 08:14:09,213 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:09,213 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-10A81FFC7E4C:t0, leader=null, voted=, raftlog=Memoized:s0@group-10A81FFC7E4C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:09,213 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-10A81FFC7E4C:t0, leader=null, voted=, raftlog=Memoized:s0@group-10A81FFC7E4C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-10A81FFC7E4C:t0, leader=null, voted=, raftlog=Memoized:s0@group-10A81FFC7E4C-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:155)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:09,502 [s0@group-10A81FFC7E4C-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-10A81FFC7E4C-FollowerState: change to CANDIDATE, lastRpcElapsedTime:292702091ns, electionTimeout:292ms
2023-03-06 08:14:09,502 [s0@group-10A81FFC7E4C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-10A81FFC7E4C-FollowerState
2023-03-06 08:14:09,502 [s0@group-10A81FFC7E4C-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-10A81FFC7E4C: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:14:09,502 [s0@group-10A81FFC7E4C-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:14:09,502 [s0@group-10A81FFC7E4C-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-10A81FFC7E4C-LeaderElection18
2023-03-06 08:14:09,503 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-10A81FFC7E4C-LeaderElection18 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:09,503 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-10A81FFC7E4C-LeaderElection18 PRE_VOTE round 0: result PASSED (term=0)
2023-03-06 08:14:09,504 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-10A81FFC7E4C-LeaderElection18 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:09,504 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-10A81FFC7E4C-LeaderElection18 ELECTION round 0: result PASSED (term=1)
2023-03-06 08:14:09,504 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-10A81FFC7E4C-LeaderElection18
2023-03-06 08:14:09,504 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-10A81FFC7E4C: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:14:09,504 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-10A81FFC7E4C: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 301ms
2023-03-06 08:14:09,504 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:14:09,504 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:14:09,504 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-03-06 08:14:09,505 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:14:09,505 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:14:09,505 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:14:09,505 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:14:09,505 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:14:09,505 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-10A81FFC7E4C-LeaderStateImpl
2023-03-06 08:14:09,505 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-10A81FFC7E4C-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:09,508 [s0@group-10A81FFC7E4C-LeaderElection18] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-10A81FFC7E4C: set configuration 0: peers:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:09,517 [s0@group-10A81FFC7E4C-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-10A81FFC7E4C-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc232580c9/s0/cede6fe7-1124-4fc6-b234-10a81ffc7e4c/current/log_inprogress_0
2023-03-06 08:14:09,664 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-10A81FFC7E4C:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-10A81FFC7E4C-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:09,664 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:09,664 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 41453 (custom)
2023-03-06 08:14:09,664 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:09,665 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37731 (custom)
2023-03-06 08:14:09,665 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:09,665 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35107 (custom)
2023-03-06 08:14:09,665 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:09,665 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:09,665 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:09,665 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:09,665 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:09,665 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:09,665 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:09,666 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'appendEntries'
2023-03-06 08:14:09,666 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "appendEntries" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking appendEntries call is not supported
	at org.apache.ratis.grpc.server.GrpcService.appendEntries(GrpcService.java:355)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$1(TestRaftServerWithGrpc.java:159)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:158)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:09,666 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'installSnapshot'
2023-03-06 08:14:09,666 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "installSnapshot" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking installSnapshot call is not supported
	at org.apache.ratis.grpc.server.GrpcService.installSnapshot(GrpcService.java:361)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$2(TestRaftServerWithGrpc.java:163)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:162)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:09,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:14:09,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:14:09,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:14:09,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:14:09,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:14:09,667 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-10A81FFC7E4C:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-10A81FFC7E4C-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:35107|admin:localhost:41453|client:localhost:37731|dataStream:localhost:42735|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:09,667 [MiniRaftCluster-24] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s0: close
2023-03-06 08:14:09,667 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:09,667 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s0@group-10A81FFC7E4C: shutdown
2023-03-06 08:14:09,668 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-10A81FFC7E4C,id=s0
2023-03-06 08:14:09,668 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-10A81FFC7E4C-LeaderStateImpl
2023-03-06 08:14:09,668 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-10A81FFC7E4C-PendingRequests: sendNotLeaderResponses
2023-03-06 08:14:09,668 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:09,668 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:09,668 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-10A81FFC7E4C-StateMachineUpdater: set stopIndex = 0
2023-03-06 08:14:09,668 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-10A81FFC7E4C: applyIndex: 0
2023-03-06 08:14:09,668 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:09,668 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:09,669 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:10,519 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s0@group-10A81FFC7E4C-SegmentedRaftLogWorker close()
2023-03-06 08:14:10,519 [JvmPauseMonitor23] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s0: Stopped
2023-03-06 08:14:10,519 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:14:10,520 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:14:10,520 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:14:10,520 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:14:10,520 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-03-06 08:14:10,521 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-E316FA693EB3:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]
2023-03-06 08:14:10,521 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:14:10,521 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:14:10,521 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:14:10,521 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:14:10,521 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:14:10,521 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:14:10,521 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-E316FA693EB3:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:10,521 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0
2023-03-06 08:14:10,521 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0 does not exist.
2023-03-06 08:14:10,521 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0
2023-03-06 08:14:10,522 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:10,522 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:10,522 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33681 (custom)
2023-03-06 08:14:10,522 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:10,522 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 45617 (custom)
2023-03-06 08:14:10,522 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:10,522 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37139 (custom)
2023-03-06 08:14:10,522 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:10,522 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:10,522 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:10,523 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:10,523 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:10,523 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:10,523 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:10,524 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:10,524 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:10,524 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:10,524 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:10,524 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:10,524 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0] (custom)
2023-03-06 08:14:10,525 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-E316FA693EB3:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER] returns group-E316FA693EB3:java.util.concurrent.CompletableFuture@2d88708e[Not completed]
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-E316FA693EB3:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-E316FA693EB3: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:10,525 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:10,526 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:10,526 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:10,526 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:10,526 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:10,526 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:10,527 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:10,527 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:10,527 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0] (custom)
2023-03-06 08:14:10,527 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3 does not exist. Creating ...
2023-03-06 08:14:10,527 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3
2023-03-06 08:14:10,528 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:10,528 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3/current
2023-03-06 08:14:10,529 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3/sm
2023-03-06 08:14:10,529 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3 has been successfully formatted.
2023-03-06 08:14:10,529 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s0@group-E316FA693EB3-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:10,530 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:10,531 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:10,531 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:10,531 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:10,531 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:10,531 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:10,531 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:10,531 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:10,531 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:10,531 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:10,532 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-E316FA693EB3-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:10,532 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-E316FA693EB3-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:10,532 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s0@group-E316FA693EB3: start as a follower, conf=-1: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:10,532 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-E316FA693EB3: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:10,532 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-E316FA693EB3-FollowerState
2023-03-06 08:14:10,532 [s0@group-E316FA693EB3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:10,532 [s0@group-E316FA693EB3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:10,532 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-E316FA693EB3,id=s0
2023-03-06 08:14:10,533 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:10,533 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:10,533 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:10,533 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s0: start RPC server
2023-03-06 08:14:10,534 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 45617
2023-03-06 08:14:10,534 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 37139
2023-03-06 08:14:10,534 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 33681
2023-03-06 08:14:10,534 [JvmPauseMonitor24] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s0: Started
2023-03-06 08:14:10,534 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:10,534 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-E316FA693EB3:t0, leader=null, voted=, raftlog=Memoized:s0@group-E316FA693EB3-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:10,535 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-E316FA693EB3:t0, leader=null, voted=, raftlog=Memoized:s0@group-E316FA693EB3-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-E316FA693EB3:t0, leader=null, voted=, raftlog=Memoized:s0@group-E316FA693EB3-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestServerRestartOnException(TestRaftServerWithGrpc.java:121)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testServerRestartOnException(TestRaftServerWithGrpc.java:104)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:10,795 [s0@group-E316FA693EB3-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-E316FA693EB3-FollowerState: change to CANDIDATE, lastRpcElapsedTime:262461572ns, electionTimeout:262ms
2023-03-06 08:14:10,795 [s0@group-E316FA693EB3-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-E316FA693EB3-FollowerState
2023-03-06 08:14:10,795 [s0@group-E316FA693EB3-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-E316FA693EB3: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:14:10,795 [s0@group-E316FA693EB3-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:14:10,795 [s0@group-E316FA693EB3-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-E316FA693EB3-LeaderElection19
2023-03-06 08:14:10,796 [s0@group-E316FA693EB3-LeaderElection19] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-E316FA693EB3-LeaderElection19 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:10,796 [s0@group-E316FA693EB3-LeaderElection19] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-E316FA693EB3-LeaderElection19 PRE_VOTE round 0: result PASSED (term=0)
2023-03-06 08:14:10,797 [s0@group-E316FA693EB3-LeaderElection19] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-E316FA693EB3-LeaderElection19 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:10,797 [s0@group-E316FA693EB3-LeaderElection19] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-E316FA693EB3-LeaderElection19 ELECTION round 0: result PASSED (term=1)
2023-03-06 08:14:10,797 [s0@group-E316FA693EB3-LeaderElection19] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-E316FA693EB3-LeaderElection19
2023-03-06 08:14:10,797 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-E316FA693EB3: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:14:10,797 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-E316FA693EB3: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 271ms
2023-03-06 08:14:10,797 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:14:10,797 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:14:10,797 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-03-06 08:14:10,798 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:14:10,798 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:14:10,798 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:14:10,798 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:14:10,798 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:14:10,798 [s0@group-E316FA693EB3-LeaderElection19] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-E316FA693EB3-LeaderStateImpl
2023-03-06 08:14:10,798 [s0@group-E316FA693EB3-LeaderElection19] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-E316FA693EB3-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:10,802 [s0@group-E316FA693EB3-LeaderElection19] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-E316FA693EB3: set configuration 0: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:10,809 [s0@group-E316FA693EB3-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-E316FA693EB3-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3/current/log_inprogress_0
2023-03-06 08:14:10,985 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-E316FA693EB3:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-E316FA693EB3-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:10,986 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:10,986 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:10,986 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33681 (custom)
2023-03-06 08:14:10,986 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:10,986 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 45617 (custom)
2023-03-06 08:14:10,986 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:10,986 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37139 (custom)
2023-03-06 08:14:10,986 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:10,986 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:10,986 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:10,986 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:10,986 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:10,986 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:10,986 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:10,987 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:10,988 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:10,988 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:10,988 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:10,988 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:10,988 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0] (custom)
2023-03-06 08:14:10,988 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(259)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3
2023-03-06 08:14:10,989 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-E316FA693EB3:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER] returns group-E316FA693EB3:java.util.concurrent.CompletableFuture@37cae185[Not completed]
2023-03-06 08:14:10,989 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-E316FA693EB3:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-E316FA693EB3
2023-03-06 08:14:10,989 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:10,989 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:10,989 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:10,989 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:10,989 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:10,989 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:10,989 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:10,989 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-E316FA693EB3: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:10,990 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:10,990 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:10,990 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:10,990 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:10,990 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:10,990 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:10,990 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:10,990 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:10,990 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:10,990 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:10,990 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:10,990 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:10,991 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:10,991 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:10,991 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:10,991 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'Starting a new server with the same address should fail'
2023-03-06 08:14:10,991 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:10,992 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:10,992 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33681 (custom)
2023-03-06 08:14:10,992 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:10,992 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 45617 (custom)
2023-03-06 08:14:10,992 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:10,992 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37139 (custom)
2023-03-06 08:14:10,992 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:10,992 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:10,992 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:10,992 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:10,992 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:10,992 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:10,992 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:10,993 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:10,993 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:10,993 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:10,993 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:10,993 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:10,993 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0] (custom)
2023-03-06 08:14:10,994 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(259)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3
2023-03-06 08:14:10,994 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-E316FA693EB3:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER] returns group-E316FA693EB3:java.util.concurrent.CompletableFuture@4ce8caf0[Not completed]
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-E316FA693EB3:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-E316FA693EB3
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-E316FA693EB3: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:10,994 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:10,995 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:10,995 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:10,995 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:10,995 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:10,995 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:10,995 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:10,995 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:10,995 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:10,995 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0] (custom)
2023-03-06 08:14:10,995 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:10,995 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3/in_use.lock", attempt #1/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-03-06 08:14:11,996 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:11,996 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3/in_use.lock", attempt #2/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-03-06 08:14:12,997 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:12,997 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3/in_use.lock", attempt #3/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-03-06 08:14:13,998 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:13,998 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3/in_use.lock", attempt #4/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-03-06 08:14:14,999 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:14,999 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "Starting a new server with the same address should fail" throws CompletionException
java.util.concurrent.CompletionException: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3. The directory is already locked
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$BiRelay.tryFire(CompletableFuture.java:1423)
	at java.base/java.util.concurrent.CompletableFuture$CoCompletion.tryFire(CompletableFuture.java:1144)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:191)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$4(ConcurrentUtils.java:180)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc4aad3958/s0/f2893e2d-5e1b-4b01-8188-e316fa693eb3. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)
	... 4 more
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-03-06 08:14:15,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:15,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33681 (custom)
2023-03-06 08:14:15,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:15,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 45617 (custom)
2023-03-06 08:14:15,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:15,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37139 (custom)
2023-03-06 08:14:15,000 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:15,000 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,000 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:15,000 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:15,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:15,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:15,000 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:15,001 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:14:15,001 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:14:15,001 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:14:15,001 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:14:15,001 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:14:15,002 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-E316FA693EB3:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-E316FA693EB3-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:37139|admin:localhost:33681|client:localhost:45617|dataStream:localhost:32851|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:15,002 [MiniRaftCluster-25] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s0: close
2023-03-06 08:14:15,003 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s0@group-E316FA693EB3: shutdown
2023-03-06 08:14:15,003 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-E316FA693EB3,id=s0
2023-03-06 08:14:15,003 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-E316FA693EB3-LeaderStateImpl
2023-03-06 08:14:15,003 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-E316FA693EB3-PendingRequests: sendNotLeaderResponses
2023-03-06 08:14:15,003 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-E316FA693EB3-StateMachineUpdater: set stopIndex = 0
2023-03-06 08:14:15,003 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-E316FA693EB3: applyIndex: 0
2023-03-06 08:14:15,811 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s0@group-E316FA693EB3-SegmentedRaftLogWorker close()
2023-03-06 08:14:15,812 [JvmPauseMonitor24] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s0: Stopped
2023-03-06 08:14:15,812 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-03-06 08:14:15,812 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-03-06 08:14:15,813 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-03-06 08:14:15,813 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-03-06 08:14:15,813 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-03-06 08:14:15,814 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-53BD41C593F2:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]
2023-03-06 08:14:15,814 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-03-06 08:14:15,814 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-03-06 08:14:15,814 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-03-06 08:14:15,814 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-03-06 08:14:15,814 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-03-06 08:14:15,814 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-03-06 08:14:15,814 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-53BD41C593F2:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:15,814 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0
2023-03-06 08:14:15,815 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0 does not exist.
2023-03-06 08:14:15,815 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0
2023-03-06 08:14:15,815 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:15,815 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:15,815 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 40421 (custom)
2023-03-06 08:14:15,815 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:15,815 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 38625 (custom)
2023-03-06 08:14:15,815 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:15,815 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 32975 (custom)
2023-03-06 08:14:15,815 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:15,816 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,816 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:15,816 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:15,816 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:15,816 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:15,816 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:15,817 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:15,817 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:15,817 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:15,817 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:15,817 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:15,817 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0] (custom)
2023-03-06 08:14:15,818 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-53BD41C593F2:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER] returns group-53BD41C593F2:java.util.concurrent.CompletableFuture@39f358b0[Not completed]
2023-03-06 08:14:15,818 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-53BD41C593F2:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:15,818 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1
2023-03-06 08:14:15,818 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1 does not exist.
2023-03-06 08:14:15,818 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1
2023-03-06 08:14:15,818 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:15,818 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:15,818 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 45857 (custom)
2023-03-06 08:14:15,818 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:15,819 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 35569 (custom)
2023-03-06 08:14:15,819 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:15,819 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 33115 (custom)
2023-03-06 08:14:15,819 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:15,819 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,819 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:15,819 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:15,819 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:15,819 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:15,819 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:15,820 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:15,820 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:15,820 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:15,820 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:15,820 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:15,820 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1] (custom)
2023-03-06 08:14:15,820 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:15,820 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:15,820 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-53BD41C593F2:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-53BD41C593F2: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:15,821 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:15,822 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:15,822 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:15,822 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:15,822 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:15,822 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:15,831 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-53BD41C593F2:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER] returns group-53BD41C593F2:java.util.concurrent.CompletableFuture@4dc72bd4[Not completed]
2023-03-06 08:14:15,831 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:15,831 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-53BD41C593F2:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER], format? true
2023-03-06 08:14:15,831 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2
2023-03-06 08:14:15,832 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2 does not exist.
2023-03-06 08:14:15,832 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2
2023-03-06 08:14:15,832 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-06 08:14:15,832 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:15,832 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 45477 (custom)
2023-03-06 08:14:15,832 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-06 08:14:15,832 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 39289 (custom)
2023-03-06 08:14:15,832 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-06 08:14:15,832 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 38181 (custom)
2023-03-06 08:14:15,831 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:15,832 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:15,832 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:15,832 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,832 [s1-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-53BD41C593F2:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:15,832 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:15,832 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:15,833 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:15,833 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:15,833 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-53BD41C593F2: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:15,833 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:15,833 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:15,834 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:15,834 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:15,834 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:15,834 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-06 08:14:15,834 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:15,834 [s1-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:15,834 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-06 08:14:15,834 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-06 08:14:15,835 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:15,835 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:15,835 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2] (custom)
2023-03-06 08:14:15,836 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-53BD41C593F2:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER] returns group-53BD41C593F2:java.util.concurrent.CompletableFuture@797137f9[Not completed]
2023-03-06 08:14:15,836 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:15,836 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:15,836 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0] (custom)
2023-03-06 08:14:15,836 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2 does not exist. Creating ...
2023-03-06 08:14:15,837 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2
2023-03-06 08:14:15,837 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:15,837 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:15,837 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:15,837 [s2-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-53BD41C593F2:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:15,837 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-06 08:14:15,838 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-06 08:14:15,838 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2/current
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-53BD41C593F2: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-06 08:14:15,838 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2/sm
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-06 08:14:15,838 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-03-06 08:14:15,839 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2 has been successfully formatted.
2023-03-06 08:14:15,839 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:15,839 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-06 08:14:15,839 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-06 08:14:15,839 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:15,839 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-06 08:14:15,839 [s2-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-06 08:14:15,839 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:15,839 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:15,839 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:15,839 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,839 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:15,839 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s0@group-53BD41C593F2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:15,840 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,841 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:15,841 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:15,841 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:15,841 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-53BD41C593F2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:15,841 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-53BD41C593F2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:15,841 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s0@group-53BD41C593F2: start as a follower, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:15,842 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-53BD41C593F2: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:15,842 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-53BD41C593F2-FollowerState
2023-03-06 08:14:15,842 [s0@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:15,842 [s0@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:15,842 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-53BD41C593F2,id=s0
2023-03-06 08:14:15,842 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:15,842 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:15,842 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:15,842 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s0: start RPC server
2023-03-06 08:14:15,843 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 38625
2023-03-06 08:14:15,843 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 32975
2023-03-06 08:14:15,843 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 40421
2023-03-06 08:14:15,844 [JvmPauseMonitor25] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s0: Started
2023-03-06 08:14:15,844 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:15,844 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:15,844 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1] (custom)
2023-03-06 08:14:15,844 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2 does not exist. Creating ...
2023-03-06 08:14:15,844 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2
2023-03-06 08:14:15,845 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:15,845 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2/current
2023-03-06 08:14:15,845 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2/sm
2023-03-06 08:14:15,846 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2 has been successfully formatted.
2023-03-06 08:14:15,846 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:15,846 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:15,846 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:15,846 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:15,846 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s1@group-53BD41C593F2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:15,847 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:15,849 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:15,849 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:15,850 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:15,850 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,850 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:15,850 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:15,850 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:15,851 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-53BD41C593F2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:15,851 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-53BD41C593F2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:15,851 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s1@group-53BD41C593F2: start as a follower, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:15,852 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-53BD41C593F2: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:15,852 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-53BD41C593F2-FollowerState
2023-03-06 08:14:15,852 [s1@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:15,852 [s1@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:15,852 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-53BD41C593F2,id=s1
2023-03-06 08:14:15,853 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:15,853 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:15,853 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:15,853 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s1: start RPC server
2023-03-06 08:14:15,854 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 35569
2023-03-06 08:14:15,854 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 33115
2023-03-06 08:14:15,855 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 45857
2023-03-06 08:14:15,855 [JvmPauseMonitor26] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s1: Started
2023-03-06 08:14:15,855 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-06 08:14:15,855 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-06 08:14:15,855 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2] (custom)
2023-03-06 08:14:15,856 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2 does not exist. Creating ...
2023-03-06 08:14:15,856 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2
2023-03-06 08:14:15,857 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2/in_use.lock acquired by nodename 17343@fv-az246-120
2023-03-06 08:14:15,857 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2/current
2023-03-06 08:14:15,857 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2/sm
2023-03-06 08:14:15,858 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2 has been successfully formatted.
2023-03-06 08:14:15,858 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-03-06 08:14:15,858 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-03-06 08:14:15,858 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-06 08:14:15,858 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-03-06 08:14:15,858 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,859 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-06 08:14:15,859 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-06 08:14:15,859 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:15,859 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-03-06 08:14:15,859 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-06 08:14:15,859 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,859 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(183)) - new s2@group-53BD41C593F2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2
2023-03-06 08:14:15,859 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-06 08:14:15,860 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-06 08:14:15,860 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-03-06 08:14:15,860 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-03-06 08:14:15,860 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-06 08:14:15,860 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-06 08:14:15,860 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-06 08:14:15,860 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-06 08:14:15,860 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-06 08:14:15,860 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:15,861 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-06 08:14:15,861 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-06 08:14:15,861 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-06 08:14:15,861 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:15,861 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-06 08:14:15,861 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(342)) - s2@group-53BD41C593F2: start as a follower, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:15,861 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-53BD41C593F2: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-06 08:14:15,862 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-53BD41C593F2-FollowerState
2023-03-06 08:14:15,862 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-53BD41C593F2,id=s2
2023-03-06 08:14:15,862 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-03-06 08:14:15,862 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-06 08:14:15,862 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-06 08:14:15,862 [s2@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:15,862 [s2@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:15,862 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(401)) - s2: start RPC server
2023-03-06 08:14:15,869 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 39289
2023-03-06 08:14:15,870 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 38181
2023-03-06 08:14:15,870 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 45477
2023-03-06 08:14:15,873 [JvmPauseMonitor27] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(103)) - JvmPauseMonitor-s2: Started
2023-03-06 08:14:15,877 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:15,877 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:15,878 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:173)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:16,023 [s2@group-53BD41C593F2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-53BD41C593F2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:161743332ns, electionTimeout:161ms
2023-03-06 08:14:16,023 [s2@group-53BD41C593F2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,024 [s2@group-53BD41C593F2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-53BD41C593F2: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-06 08:14:16,024 [s2@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:14:16,024 [s2@group-53BD41C593F2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-53BD41C593F2-LeaderElection20
2023-03-06 08:14:16,024 [s2@group-53BD41C593F2-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-53BD41C593F2-LeaderElection20 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,025 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:16,025 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:16,025 [s2@group-53BD41C593F2-LeaderElection20-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-03-06 08:14:16,025 [s2@group-53BD41C593F2-LeaderElection20-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-03-06 08:14:16,034 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-53BD41C593F2: receive requestVote(PRE_VOTE, s2, group-53BD41C593F2, 0, (t:0, i:0))
2023-03-06 08:14:16,034 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-53BD41C593F2-FOLLOWER: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-03-06 08:14:16,034 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-53BD41C593F2 replies to PRE_VOTE vote request: s2<-s1#0:OK-t0. Peer's state: s1@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,034 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-53BD41C593F2: receive requestVote(PRE_VOTE, s2, group-53BD41C593F2, 0, (t:0, i:0))
2023-03-06 08:14:16,035 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-53BD41C593F2-FOLLOWER: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-03-06 08:14:16,035 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-53BD41C593F2 replies to PRE_VOTE vote request: s2<-s0#0:OK-t0. Peer's state: s0@group-53BD41C593F2:t0, leader=null, voted=, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,035 [s2@group-53BD41C593F2-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-53BD41C593F2-LeaderElection20: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:14:16,035 [s2@group-53BD41C593F2-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s1#0:OK-t0
2023-03-06 08:14:16,035 [s2@group-53BD41C593F2-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-53BD41C593F2-LeaderElection20 PRE_VOTE round 0: result PASSED
2023-03-06 08:14:16,036 [s2@group-53BD41C593F2-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-53BD41C593F2-LeaderElection20 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,037 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:16,037 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:16,039 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-53BD41C593F2: receive requestVote(ELECTION, s2, group-53BD41C593F2, 1, (t:0, i:0))
2023-03-06 08:14:16,040 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-53BD41C593F2-FOLLOWER: accept ELECTION from s2: our priority 0 <= candidate's priority 0
2023-03-06 08:14:16,040 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-53BD41C593F2: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s2
2023-03-06 08:14:16,040 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,040 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-53BD41C593F2: receive requestVote(ELECTION, s2, group-53BD41C593F2, 1, (t:0, i:0))
2023-03-06 08:14:16,040 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,040 [s0@group-53BD41C593F2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-53BD41C593F2-FollowerState was interrupted
2023-03-06 08:14:16,041 [s0@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:16,041 [s0@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:16,041 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-53BD41C593F2-FOLLOWER: accept ELECTION from s2: our priority 0 <= candidate's priority 0
2023-03-06 08:14:16,041 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-53BD41C593F2: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s2
2023-03-06 08:14:16,041 [grpc-default-executor-8] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,041 [s1@group-53BD41C593F2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-53BD41C593F2-FollowerState was interrupted
2023-03-06 08:14:16,042 [grpc-default-executor-8] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,048 [s1@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-03-06 08:14:16,048 [s1@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-03-06 08:14:16,049 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-53BD41C593F2 replies to ELECTION vote request: s2<-s0#0:OK-t1. Peer's state: s0@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,050 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-53BD41C593F2 replies to ELECTION vote request: s2<-s1#0:OK-t1. Peer's state: s1@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,050 [s2@group-53BD41C593F2-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-53BD41C593F2-LeaderElection20: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:14:16,050 [s2@group-53BD41C593F2-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s0#0:OK-t1
2023-03-06 08:14:16,050 [s2@group-53BD41C593F2-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-53BD41C593F2-LeaderElection20 ELECTION round 0: result PASSED
2023-03-06 08:14:16,050 [s2@group-53BD41C593F2-LeaderElection20] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-53BD41C593F2-LeaderElection20
2023-03-06 08:14:16,050 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-53BD41C593F2: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-06 08:14:16,050 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-53BD41C593F2: change Leader from null to s2 at term 1 for becomeLeader, leader elected after 212ms
2023-03-06 08:14:16,050 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:14:16,051 [s2@group-53BD41C593F2-LeaderElection20] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-53BD41C593F2-LeaderStateImpl
2023-03-06 08:14:16,052 [s2@group-53BD41C593F2-LeaderElection20] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:16,058 [s2@group-53BD41C593F2-LeaderElection20] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-53BD41C593F2: set configuration 0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,069 [s2@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_0
2023-03-06 08:14:16,072 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-53BD41C593F2: change Leader from null to s2 at term 1 for appendEntries, leader elected after 250ms
2023-03-06 08:14:16,072 [s1-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-53BD41C593F2: change Leader from null to s2 at term 1 for appendEntries, leader elected after 238ms
2023-03-06 08:14:16,074 [s1-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-53BD41C593F2: set configuration 0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,074 [s1-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s1@group-53BD41C593F2-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:16,077 [s0-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-53BD41C593F2: set configuration 0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,078 [s0-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s0@group-53BD41C593F2-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-06 08:14:16,095 [s0@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-53BD41C593F2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_0
2023-03-06 08:14:16,095 [s1@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s1@group-53BD41C593F2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_0
2023-03-06 08:14:16,328 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:16,329 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:16,329 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:16,335 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-37001CF4F2D1->s0: receive RaftClientReply:client-37001CF4F2D1->s0@group-53BD41C593F2, cid=114, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-53BD41C593F2 is not the leader s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2023-03-06 08:14:16,339 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:16,339 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:16,343 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-37001CF4F2D1->s2: receive RaftClientReply:client-37001CF4F2D1->s2@group-53BD41C593F2, cid=114, SUCCESS, logIndex=0, commits[s2:c0, s0:c0, s1:c0]
2023-03-06 08:14:16,347 [s2@group-53BD41C593F2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 115@client-37001CF4F2D1
2023-03-06 08:14:16,348 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-37001CF4F2D1->s2: receive RaftClientReply:client-37001CF4F2D1->s2@group-53BD41C593F2, cid=115, SUCCESS, logIndex=1, commits[s2:c1, s0:c0, s1:c0]
2023-03-06 08:14:16,359 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:16,359 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:16,362 [s0@group-53BD41C593F2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 115@client-37001CF4F2D1
2023-03-06 08:14:16,364 [s1@group-53BD41C593F2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 115@client-37001CF4F2D1
2023-03-06 08:14:16,367 [s2@group-53BD41C593F2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-87192ADDAB46
2023-03-06 08:14:16,368 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-87192ADDAB46->s2: receive RaftClientReply:client-87192ADDAB46->s2@group-53BD41C593F2, cid=1, SUCCESS, logIndex=3, commits[s2:c3, s0:c2, s1:c1]
2023-03-06 08:14:16,369 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block START_TRANSACTION
2023-03-06 08:14:16,369 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:blockRequestor(49)) - Block requestor s2
2023-03-06 08:14:16,369 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:16,369 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:16,369 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:16,370 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #1/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:16,372 [s1-server-thread1] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s1: Block request from s2
2023-03-06 08:14:16,377 [s0-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s0: Block request from s2
2023-03-06 08:14:16,441 [s1-server-thread3] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s1: Block request from s2
2023-03-06 08:14:16,442 [s0-server-thread3] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s0: Block request from s2
2023-03-06 08:14:16,470 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:16,470 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:16,470 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:16,470 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #2/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:16,571 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:16,571 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:16,571 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:16,571 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #3/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:16,609 [s1@group-53BD41C593F2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-53BD41C593F2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:245106572ns, electionTimeout:175ms
2023-03-06 08:14:16,609 [s1@group-53BD41C593F2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,609 [s1@group-53BD41C593F2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-53BD41C593F2: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-03-06 08:14:16,609 [s1@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:14:16,609 [s1@group-53BD41C593F2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-53BD41C593F2-LeaderElection21
2023-03-06 08:14:16,621 [s1@group-53BD41C593F2-LeaderElection21] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-53BD41C593F2: change Leader from s2 to null at term 1 for PRE_VOTE
2023-03-06 08:14:16,622 [s1@group-53BD41C593F2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-53BD41C593F2-LeaderElection21 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,627 [s1@group-53BD41C593F2-LeaderElection21-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-03-06 08:14:16,630 [s1@group-53BD41C593F2-LeaderElection21-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-03-06 08:14:16,633 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s0@group-53BD41C593F2: receive requestVote(PRE_VOTE, s1, group-53BD41C593F2, 1, (t:1, i:2))
2023-03-06 08:14:16,633 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-53BD41C593F2-FOLLOWER: reject PRE_VOTE from s1: our last entry (t:1, i:3) > candidate's last entry (t:1, i:2)
2023-03-06 08:14:16,634 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s0@group-53BD41C593F2 replies to PRE_VOTE vote request: s1<-s0#0:FAIL-t1. Peer's state: s0@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,639 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-53BD41C593F2: receive requestVote(PRE_VOTE, s1, group-53BD41C593F2, 1, (t:1, i:2))
2023-03-06 08:14:16,639 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-53BD41C593F2-LEADER: reject PRE_VOTE from s1: this server is the leader and still has leadership
2023-03-06 08:14:16,639 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-53BD41C593F2 replies to PRE_VOTE vote request: s1<-s2#0:FAIL-t1. Peer's state: s2@group-53BD41C593F2:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,640 [s1@group-53BD41C593F2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-53BD41C593F2-LeaderElection21: PRE_VOTE REJECTED received 2 response(s) and 0 exception(s):
2023-03-06 08:14:16,640 [s1@group-53BD41C593F2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:FAIL-t1
2023-03-06 08:14:16,640 [s1@group-53BD41C593F2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s1<-s2#0:FAIL-t1
2023-03-06 08:14:16,640 [s1@group-53BD41C593F2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-53BD41C593F2-LeaderElection21 PRE_VOTE round 0: result REJECTED
2023-03-06 08:14:16,640 [s1@group-53BD41C593F2-LeaderElection21] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-53BD41C593F2: changes role from CANDIDATE to FOLLOWER at term 1 for REJECTED
2023-03-06 08:14:16,640 [s1@group-53BD41C593F2-LeaderElection21] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-53BD41C593F2-LeaderElection21
2023-03-06 08:14:16,640 [s1@group-53BD41C593F2-LeaderElection21] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,663 [s0@group-53BD41C593F2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-53BD41C593F2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:296509391ns, electionTimeout:165ms
2023-03-06 08:14:16,663 [s0@group-53BD41C593F2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,664 [s0@group-53BD41C593F2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-53BD41C593F2: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-03-06 08:14:16,664 [s0@group-53BD41C593F2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-06 08:14:16,664 [s0@group-53BD41C593F2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-53BD41C593F2-LeaderElection22
2023-03-06 08:14:16,665 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-53BD41C593F2: change Leader from s2 to null at term 1 for PRE_VOTE
2023-03-06 08:14:16,665 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-53BD41C593F2-LeaderElection22 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,666 [s0@group-53BD41C593F2-LeaderElection22-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-03-06 08:14:16,667 [s0@group-53BD41C593F2-LeaderElection22-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-03-06 08:14:16,668 [s2@group-53BD41C593F2-LeaderStateImpl] WARN  server.RaftServer$Division (LeaderStateImpl.java:checkLeadership(1098)) - s2@group-53BD41C593F2-LeaderStateImpl: Lost leadership on term: 1. Election timeout: 300ms. In charge for: 617ms. Conf: 0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,668 [s2@group-53BD41C593F2-LeaderStateImpl] WARN  server.RaftServer$Division (LeaderStateImpl.java:lambda$checkLeadership$20(1102)) - Follower s2@group-53BD41C593F2->s0(c2,m3,n5, attendVote=true, lastRpcSendTime=1, lastRpcResponseTime=301)
2023-03-06 08:14:16,668 [s2@group-53BD41C593F2-LeaderStateImpl] WARN  server.RaftServer$Division (LeaderStateImpl.java:lambda$checkLeadership$20(1102)) - Follower s2@group-53BD41C593F2->s1(c1,m2,n5, attendVote=true, lastRpcSendTime=3, lastRpcResponseTime=303)
2023-03-06 08:14:16,668 [s2@group-53BD41C593F2-LeaderStateImpl] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-53BD41C593F2: changes role from    LEADER to FOLLOWER at term 1 for StepDownReason:LOST_MAJORITY_HEARTBEATS
2023-03-06 08:14:16,669 [s2@group-53BD41C593F2-LeaderStateImpl] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s2: shutdown s2@group-53BD41C593F2-LeaderStateImpl
2023-03-06 08:14:16,669 [s2@group-53BD41C593F2-LeaderStateImpl] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s2@group-53BD41C593F2-PendingRequests: sendNotLeaderResponses
2023-03-06 08:14:16,669 [s2@group-53BD41C593F2->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(190)) - s2@group-53BD41C593F2->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-03-06 08:14:16,670 [s2@group-53BD41C593F2-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-53BD41C593F2: change Leader from s2 to null at term 1 for StepDownReason:LOST_MAJORITY_HEARTBEATS
2023-03-06 08:14:16,670 [s2@group-53BD41C593F2-LeaderStateImpl] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,674 [s2@group-53BD41C593F2->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(190)) - s2@group-53BD41C593F2->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-03-06 08:14:16,677 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-03-06 08:14:16,677 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:16,677 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:431)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:16,678 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-53BD41C593F2: receive requestVote(PRE_VOTE, s0, group-53BD41C593F2, 1, (t:1, i:3))
2023-03-06 08:14:16,678 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-53BD41C593F2-FOLLOWER: accept PRE_VOTE from s0: our last entry (t:1, i:2) < candidate's last entry (t:1, i:3)
2023-03-06 08:14:16,678 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-53BD41C593F2 replies to PRE_VOTE vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,680 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-53BD41C593F2-LeaderElection22: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-03-06 08:14:16,680 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t1
2023-03-06 08:14:16,680 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-53BD41C593F2-LeaderElection22 PRE_VOTE round 0: result PASSED
2023-03-06 08:14:16,682 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-53BD41C593F2-LeaderElection22 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,685 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-53BD41C593F2: receive requestVote(PRE_VOTE, s0, group-53BD41C593F2, 1, (t:1, i:3))
2023-03-06 08:14:16,685 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-53BD41C593F2-FOLLOWER: reject PRE_VOTE from s0: our last entry (t:1, i:4) > candidate's last entry (t:1, i:3)
2023-03-06 08:14:16,685 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-53BD41C593F2 replies to PRE_VOTE vote request: s0<-s2#0:FAIL-t1. Peer's state: s2@group-53BD41C593F2:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,690 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s2@group-53BD41C593F2: receive requestVote(ELECTION, s0, group-53BD41C593F2, 2, (t:1, i:3))
2023-03-06 08:14:16,690 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-53BD41C593F2-FOLLOWER: reject ELECTION from s0: our last entry (t:1, i:4) > candidate's last entry (t:1, i:3)
2023-03-06 08:14:16,690 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s2@group-53BD41C593F2: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s0
2023-03-06 08:14:16,690 [grpc-default-executor-5] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,690 [grpc-default-executor-5] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,691 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1302)) - s1@group-53BD41C593F2: receive requestVote(ELECTION, s0, group-53BD41C593F2, 2, (t:1, i:3))
2023-03-06 08:14:16,691 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-53BD41C593F2-FOLLOWER: accept ELECTION from s0: our last entry (t:1, i:2) < candidate's last entry (t:1, i:3)
2023-03-06 08:14:16,691 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s1@group-53BD41C593F2: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s0
2023-03-06 08:14:16,691 [grpc-default-executor-6] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,691 [grpc-default-executor-6] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-53BD41C593F2-FollowerState
2023-03-06 08:14:16,691 [s1@group-53BD41C593F2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-53BD41C593F2-FollowerState was interrupted
2023-03-06 08:14:16,692 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s2@group-53BD41C593F2 replies to ELECTION vote request: s0<-s2#0:FAIL-t2. Peer's state: s2@group-53BD41C593F2:t2, leader=null, voted=null, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,692 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1335)) - s1@group-53BD41C593F2 replies to ELECTION vote request: s0<-s1#0:OK-t2. Peer's state: s1@group-53BD41C593F2:t2, leader=null, voted=s0, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,693 [s2@group-53BD41C593F2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-53BD41C593F2-FollowerState was interrupted
2023-03-06 08:14:16,693 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-53BD41C593F2-LeaderElection22: ELECTION PASSED received 2 response(s) and 0 exception(s):
2023-03-06 08:14:16,693 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t2
2023-03-06 08:14:16,693 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s0<-s2#0:FAIL-t2
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-53BD41C593F2-LeaderElection22 ELECTION round 0: result PASSED
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-53BD41C593F2-LeaderElection22
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(329)) - s0@group-53BD41C593F2: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-53BD41C593F2: change Leader from null to s0 at term 2 for becomeLeader, leader elected after 28ms
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:14:16,694 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-53BD41C593F2-LeaderStateImpl
2023-03-06 08:14:16,695 [s0@group-53BD41C593F2-LeaderElection22] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(431)) - s0@group-53BD41C593F2-SegmentedRaftLogWorker: Rolling segment log-0_3 to index:3
2023-03-06 08:14:16,696 [s0@group-53BD41C593F2-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_0-3
2023-03-06 08:14:16,696 [s0@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(587)) - s0@group-53BD41C593F2-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_0-3
2023-03-06 08:14:16,700 [s0@group-53BD41C593F2-LeaderElection22] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-53BD41C593F2: set configuration 4: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,708 [s1-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-53BD41C593F2: change Leader from null to s0 at term 2 for appendEntries, leader elected after 86ms
2023-03-06 08:14:16,708 [s0@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s0@group-53BD41C593F2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s0/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_4
2023-03-06 08:14:16,708 [s1-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1609)) - s1@group-53BD41C593F2: Failed appendEntries as previous log entry ((t:1, i:3)) is not found
2023-03-06 08:14:16,708 [s1-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1579)) - s1@group-53BD41C593F2: inconsistency entries. Reply:s0<-s1#0:FAIL-t2,INCONSISTENCY,nextIndex=3,followerCommit=1,matchIndex=-1
2023-03-06 08:14:16,710 [grpc-default-executor-6] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(390)) - s0@group-53BD41C593F2->s1-AppendLogResponseHandler: received INCONSISTENCY reply with nextIndex 3
2023-03-06 08:14:16,710 [grpc-default-executor-6] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s0@group-53BD41C593F2->s1: setNextIndex nextIndex: updateUnconditionally 4 -> 3
2023-03-06 08:14:16,717 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-53BD41C593F2: change Leader from null to s0 at term 2 for appendEntries, leader elected after 46ms
2023-03-06 08:14:16,717 [s2-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-53BD41C593F2: set configuration 4: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,717 [s2-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:truncate(442)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker: Truncating segments toTruncate: (0, 4) isOpen? true, length=377, newEndIndex=3
  toDelete: [], start index 4
2023-03-06 08:14:16,718 [s2@group-53BD41C593F2-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran FileOutputStream.getChannel().truncate /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_0 length: 356 -> 377
2023-03-06 08:14:16,718 [s2@group-53BD41C593F2-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_0-3
2023-03-06 08:14:16,718 [s2@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(670)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker: Truncated log file /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_0 to length 377 and moved it to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_0-3
2023-03-06 08:14:16,718 [s2@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 4 -> 3
2023-03-06 08:14:16,718 [s2@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally -1 -> 3
2023-03-06 08:14:16,719 [s2-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(426)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker: Starting segment from index:4
2023-03-06 08:14:16,720 [s1-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-53BD41C593F2: set configuration 4: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-06 08:14:16,720 [s1-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(431)) - s1@group-53BD41C593F2-SegmentedRaftLogWorker: Rolling segment log-0_3 to index:3
2023-03-06 08:14:16,721 [s1@group-53BD41C593F2-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_0-3
2023-03-06 08:14:16,722 [s1@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(587)) - s1@group-53BD41C593F2-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_0-3
2023-03-06 08:14:16,738 [s1@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s1@group-53BD41C593F2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s1/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_4
2023-03-06 08:14:16,738 [s2@group-53BD41C593F2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(630)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/2ac2c1d0/MiniRaftClusterWithGrpc558b7539/s2/f40fb67c-3d44-40d2-b365-53bd41c593f2/current/log_inprogress_4
2023-03-06 08:14:16,745 [s0@group-53BD41C593F2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-87192ADDAB46
2023-03-06 08:14:16,747 [s1@group-53BD41C593F2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-87192ADDAB46
2023-03-06 08:14:17,128 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-53BD41C593F2:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t2, leader=s0, voted=s0, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-53BD41C593F2:t2, leader=s0, voted=null, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:17,128 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:lambda$changeLeader$6(435)) - Changed leader from s2 to s0
2023-03-06 08:14:17,128 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:unblockRequestor(54)) - UnBlock requestor s2
2023-03-06 08:14:17,128 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should fail'
2023-03-06 08:14:17,128 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should fail" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-87192ADDAB46->s2: Stream completed: no reply for async request cid=2
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:203)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-87192ADDAB46->s2: Stream completed: no reply for async request cid=2
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:396)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onCompleted(GrpcClientProtocolClient.java:336)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 more
2023-03-06 08:14:17,130 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock START_TRANSACTION
2023-03-06 08:14:17,131 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-06 08:14:17,131 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-03-06 08:14:17,134 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should timeout'
2023-03-06 08:14:17,276 [s1-server-thread1] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s1: unBlock request from s2
2023-03-06 08:14:17,277 [grpc-default-executor-4] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,277 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s1: Completed APPEND_ENTRIES, lastRequest: s2->s1#5785-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2023-03-06 08:14:17,277 [s0-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s0: unBlock request from s2
2023-03-06 08:14:17,278 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s0: Completed APPEND_ENTRIES, lastRequest: s2->s0#5339-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2023-03-06 08:14:17,279 [grpc-default-executor-6] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s0-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,279 [grpc-default-executor-6] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s2@group-53BD41C593F2->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:17,279 [grpc-default-executor-6] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s2@group-53BD41C593F2->s0: decreaseNextIndex nextIndex: updateUnconditionally 5 -> 4
2023-03-06 08:14:17,279 [grpc-default-executor-4] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,279 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:17,279 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s2@group-53BD41C593F2->s1: decreaseNextIndex nextIndex: updateUnconditionally 5 -> 3
2023-03-06 08:14:17,341 [s1-server-thread3] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s1: unBlock request from s2
2023-03-06 08:14:17,342 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,342 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,342 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,344 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,344 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,345 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,345 [s0-server-thread3] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s0: unBlock request from s2
2023-03-06 08:14:17,345 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s1: Completed APPEND_ENTRIES, lastRequest: null
2023-03-06 08:14:17,345 [grpc-default-executor-7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s0-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,346 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,346 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s2@group-53BD41C593F2->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:17,346 [grpc-default-executor-8] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s2@group-53BD41C593F2->s1: decreaseNextIndex nextIndex: updateUnconditionally 3 -> 2
2023-03-06 08:14:17,346 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s0-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,346 [grpc-default-executor-7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s0-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,347 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s0-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,347 [grpc-default-executor-7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s0-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,347 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s0: Completed APPEND_ENTRIES, lastRequest: null
2023-03-06 08:14:17,348 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s0-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,348 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:onNextImpl(383)) - s2@group-53BD41C593F2->s0-AppendLogResponseHandler: received NOT_LEADER reply with term 2
2023-03-06 08:14:17,348 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s2@group-53BD41C593F2->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:17,348 [grpc-default-executor-8] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(52)) - s2@group-53BD41C593F2->s0: decreaseNextIndex nextIndex: updateUnconditionally 4 -> 3
2023-03-06 08:14:18,134 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should timeout" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-87192ADDAB46->s2 request #3 timeout 1s
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:211)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-87192ADDAB46->s2 request #3 timeout 1s
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$timeoutCheck$5(GrpcClientProtocolClient.java:374)
	at java.base/java.util.Optional.ifPresent(Optional.java:183)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.handleReplyFuture(GrpcClientProtocolClient.java:378)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.timeoutCheck(GrpcClientProtocolClient.java:373)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$onNext$3(GrpcClientProtocolClient.java:366)
	at org.apache.ratis.util.TimeoutTimer.lambda$onTimeout$2(TimeoutTimer.java:101)
	at org.apache.ratis.util.LogUtils.runAndLog(LogUtils.java:38)
	at org.apache.ratis.util.LogUtils$1.run(LogUtils.java:79)
	at org.apache.ratis.util.TimeoutTimer$Task.run(TimeoutTimer.java:55)
	at java.base/java.util.TimerThread.mainLoop(Timer.java:556)
	at java.base/java.util.TimerThread.run(Timer.java:506)
2023-03-06 08:14:18,138 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-87192ADDAB46->s2: receive RaftClientReply:client-87192ADDAB46->s2@group-53BD41C593F2, cid=3, FAILED org.apache.ratis.protocol.exceptions.AlreadyClosedException: SlidingWindow$Server:2-OrderedRequestStreamObserver2 is closing: seq = 3 > nextToProcess = -1 will NEVER be processed; request = 3:null, logIndex=0, commits[]
2023-03-06 08:14:21,137 [Thread-874] WARN  grpc.GrpcUtil (GrpcUtil.java:shutdownManagedChannel(223)) - Timed out gracefully shutting down connection: ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=1048, target=localhost:39289}}. 
2023-03-06 08:14:21,142 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-03-06 08:14:21,142 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-03-06 08:14:21,142 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-03-06 08:14:21,142 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-03-06 08:14:21,142 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-03-06 08:14:21,142 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-53BD41C593F2:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-53BD41C593F2-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-53BD41C593F2:t2, leader=s0, voted=s0, raftlog=Memoized:s1@group-53BD41C593F2-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-53BD41C593F2:t2, leader=s0, voted=null, raftlog=Memoized:s2@group-53BD41C593F2-SegmentedRaftLog:OPENED:c5, conf=4: peers:[s0|rpc:localhost:32975|admin:localhost:40421|client:localhost:38625|dataStream:localhost:37009|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33115|admin:localhost:45857|client:localhost:35569|dataStream:localhost:33539|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38181|admin:localhost:45477|client:localhost:39289|dataStream:localhost:34131|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-03-06 08:14:21,149 [MiniRaftCluster-26] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s0: close
2023-03-06 08:14:21,153 [MiniRaftCluster-27] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s1: close
2023-03-06 08:14:21,165 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:21,165 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s0@group-53BD41C593F2: shutdown
2023-03-06 08:14:21,165 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s1@group-53BD41C593F2: shutdown
2023-03-06 08:14:21,165 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-53BD41C593F2,id=s0
2023-03-06 08:14:21,165 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-53BD41C593F2,id=s1
2023-03-06 08:14:21,165 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-53BD41C593F2-LeaderStateImpl
2023-03-06 08:14:21,165 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-53BD41C593F2-PendingRequests: sendNotLeaderResponses
2023-03-06 08:14:21,165 [MiniRaftCluster-28] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(417)) - s2: close
2023-03-06 08:14:21,166 [Thread-879] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-03-06 08:14:21,166 [Thread-880] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-03-06 08:14:21,165 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:21,165 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-53BD41C593F2-FollowerState
2023-03-06 08:14:21,166 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-53BD41C593F2-StateMachineUpdater: set stopIndex = 5
2023-03-06 08:14:21,168 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#570-t2,previous=(t:2, i:4),leaderCommit=4,initializing? true,entries: size=1, first=(t:2, i:5), METADATAENTRY(c:4)
2023-03-06 08:14:21,168 [grpc-default-executor-7] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#2-t2,previous=(t:2, i:4),leaderCommit=4,initializing? true,entries: size=1, first=(t:2, i:5), METADATAENTRY(c:4)
2023-03-06 08:14:21,168 [s1@group-53BD41C593F2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-53BD41C593F2-FollowerState was interrupted
2023-03-06 08:14:21,168 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-53BD41C593F2: applyIndex: 5
2023-03-06 08:14:21,168 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s1: Completed APPEND_ENTRIES, lastRequest: null
2023-03-06 08:14:21,169 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-53BD41C593F2-StateMachineUpdater: set stopIndex = 5
2023-03-06 08:14:21,169 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-03-06 08:14:21,169 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(466)) - s2@group-53BD41C593F2: shutdown
2023-03-06 08:14:21,169 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-53BD41C593F2,id=s2
2023-03-06 08:14:21,169 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-53BD41C593F2-FollowerState
2023-03-06 08:14:21,169 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-53BD41C593F2-StateMachineUpdater: set stopIndex = 5
2023-03-06 08:14:21,169 [grpc-default-executor-7] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(145)) - s2: Completed APPEND_ENTRIES, lastRequest: null
2023-03-06 08:14:21,170 [Thread-881] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-03-06 08:14:21,170 [grpc-default-executor-7] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-53BD41C593F2->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:21,170 [grpc-default-executor-7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(128)) - s0@group-53BD41C593F2->s1-GrpcLogAppender: Failed to getClient for s1
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:106)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:111)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:55)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:418)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:21,170 [s2@group-53BD41C593F2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-53BD41C593F2-FollowerState was interrupted
2023-03-06 08:14:21,170 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-53BD41C593F2: applyIndex: 5
2023-03-06 08:14:21,170 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-53BD41C593F2->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:21,170 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(128)) - s0@group-53BD41C593F2->s1-GrpcLogAppender: Failed to getClient for s1
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:106)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:111)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:55)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:418)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:21,171 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-53BD41C593F2->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:21,171 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(128)) - s0@group-53BD41C593F2->s2-GrpcLogAppender: Failed to getClient for s2
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:106)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:111)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:55)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:418)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:21,171 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(417)) - s0@group-53BD41C593F2->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-06 08:14:21,172 [grpc-default-executor-8] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(128)) - s0@group-53BD41C593F2->s2-GrpcLogAppender: Failed to getClient for s2
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:106)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:111)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:55)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:418)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-03-06 08:14:21,172 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-53BD41C593F2: applyIndex: 5
2023-03-06 08:14:21,172 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:21,172 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:21,174 [Thread-882] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-03-06 08:14:21,174 [Thread-886] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-03-06 08:14:21,179 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:21,179 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:21,179 [Thread-884] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-03-06 08:14:21,179 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:21,179 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:21,180 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-03-06 08:14:21,180 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-03-06 08:14:21,180 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:21,180 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:21,180 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:21,181 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-03-06 08:14:21,181 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-03-06 08:14:21,182 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:21,182 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-03-06 08:14:21,743 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s0@group-53BD41C593F2-SegmentedRaftLogWorker close()
2023-03-06 08:14:21,744 [JvmPauseMonitor25] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s0: Stopped
2023-03-06 08:14:21,748 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s1@group-53BD41C593F2-SegmentedRaftLogWorker close()
2023-03-06 08:14:21,749 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(242)) - s2@group-53BD41C593F2-SegmentedRaftLogWorker close()
2023-03-06 08:14:21,749 [JvmPauseMonitor27] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s2: Stopped
2023-03-06 08:14:21,749 [JvmPauseMonitor26] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(109)) - JvmPauseMonitor-s1: Stopped
2023-03-06 08:14:21,749 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
