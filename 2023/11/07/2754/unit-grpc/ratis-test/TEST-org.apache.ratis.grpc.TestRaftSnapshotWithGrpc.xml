<?xml version="1.0" encoding="UTF-8"?>
<testsuite xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report-3.0.xsd" version="3.0" name="org.apache.ratis.grpc.TestRaftSnapshotWithGrpc" time="107.861" tests="3" errors="1" skipped="0" failures="0">
  <properties>
    <property name="awt.toolkit" value="sun.awt.X11.XToolkit"/>
    <property name="java.specification.version" value="11"/>
    <property name="sun.cpu.isalist" value=""/>
    <property name="sun.jnu.encoding" value="UTF-8"/>
    <property name="java.class.path" value="/home/runner/work/ratis/ratis/ratis-test/target/test-classes:/home/runner/work/ratis/ratis/ratis-test/target/classes:/home/runner/work/ratis/ratis/ratis-common/target/classes:/home/runner/.m2/repository/org/apache/ratis/ratis-thirdparty-misc/1.0.5/ratis-thirdparty-misc-1.0.5.jar:/home/runner/work/ratis/ratis/ratis-proto/target/ratis-proto-3.0.0-SNAPSHOT.jar:/home/runner/work/ratis/ratis/ratis-common/target/test-classes:/home/runner/work/ratis/ratis/ratis-client/target/classes:/home/runner/work/ratis/ratis/ratis-server/target/classes:/home/runner/work/ratis/ratis/ratis-server-api/target/classes:/home/runner/work/ratis/ratis/ratis-metrics-api/target/classes:/home/runner/work/ratis/ratis/ratis-server/target/test-classes:/home/runner/work/ratis/ratis/ratis-metrics-default/target/classes:/home/runner/work/ratis/ratis/ratis-netty/target/classes:/home/runner/work/ratis/ratis/ratis-netty/target/test-classes:/home/runner/work/ratis/ratis/ratis-grpc/target/classes:/home/runner/work/ratis/ratis/ratis-grpc/target/test-classes:/home/runner/work/ratis/ratis/ratis-shell/target/classes:/home/runner/.m2/repository/commons-cli/commons-cli/1.5.0/commons-cli-1.5.0.jar:/home/runner/.m2/repository/org/reflections/reflections/0.10.2/reflections-0.10.2.jar:/home/runner/.m2/repository/org/javassist/javassist/3.28.0-GA/javassist-3.28.0-GA.jar:/home/runner/.m2/repository/com/google/code/findbugs/jsr305/3.0.2/jsr305-3.0.2.jar:/home/runner/.m2/repository/org/bouncycastle/bcprov-jdk18on/1.76/bcprov-jdk18on-1.76.jar:/home/runner/.m2/repository/org/bouncycastle/bcpkix-jdk18on/1.76/bcpkix-jdk18on-1.76.jar:/home/runner/.m2/repository/org/bouncycastle/bcutil-jdk18on/1.76/bcutil-jdk18on-1.76.jar:/home/runner/.m2/repository/org/slf4j/slf4j-api/2.0.7/slf4j-api-2.0.7.jar:/home/runner/.m2/repository/org/slf4j/slf4j-reload4j/2.0.7/slf4j-reload4j-2.0.7.jar:/home/runner/.m2/repository/ch/qos/reload4j/reload4j/1.2.22/reload4j-1.2.22.jar:/home/runner/.m2/repository/junit/junit/4.13.2/junit-4.13.2.jar:/home/runner/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/runner/.m2/repository/org/mockito/mockito-core/4.3.1/mockito-core-4.3.1.jar:/home/runner/.m2/repository/net/bytebuddy/byte-buddy/1.12.7/byte-buddy-1.12.7.jar:/home/runner/.m2/repository/net/bytebuddy/byte-buddy-agent/1.12.7/byte-buddy-agent-1.12.7.jar:/home/runner/.m2/repository/org/objenesis/objenesis/3.2/objenesis-3.2.jar:"/>
    <property name="java.vm.vendor" value="Eclipse Adoptium"/>
    <property name="sun.arch.data.model" value="64"/>
    <property name="java.vendor.url" value="https://adoptium.net/"/>
    <property name="user.timezone" value=""/>
    <property name="java.vm.specification.version" value="11"/>
    <property name="os.name" value="Linux"/>
    <property name="sun.java.launcher" value="SUN_STANDARD"/>
    <property name="sun.boot.library.path" value="/usr/lib/jvm/temurin-11-jdk-amd64/lib"/>
    <property name="sun.java.command" value="/home/runner/work/ratis/ratis/ratis-test/target/surefire/surefirebooter-20231107012354569_249.jar /home/runner/work/ratis/ratis/ratis-test/target/surefire 2023-11-07T01-23-01_032-jvmRun1 surefire-20231107012354569_247tmp surefire_28-20231107012354569_248tmp"/>
    <property name="jdk.debug" value="release"/>
    <property name="surefire.test.class.path" value="/home/runner/work/ratis/ratis/ratis-test/target/test-classes:/home/runner/work/ratis/ratis/ratis-test/target/classes:/home/runner/work/ratis/ratis/ratis-common/target/classes:/home/runner/.m2/repository/org/apache/ratis/ratis-thirdparty-misc/1.0.5/ratis-thirdparty-misc-1.0.5.jar:/home/runner/work/ratis/ratis/ratis-proto/target/ratis-proto-3.0.0-SNAPSHOT.jar:/home/runner/work/ratis/ratis/ratis-common/target/test-classes:/home/runner/work/ratis/ratis/ratis-client/target/classes:/home/runner/work/ratis/ratis/ratis-server/target/classes:/home/runner/work/ratis/ratis/ratis-server-api/target/classes:/home/runner/work/ratis/ratis/ratis-metrics-api/target/classes:/home/runner/work/ratis/ratis/ratis-server/target/test-classes:/home/runner/work/ratis/ratis/ratis-metrics-default/target/classes:/home/runner/work/ratis/ratis/ratis-netty/target/classes:/home/runner/work/ratis/ratis/ratis-netty/target/test-classes:/home/runner/work/ratis/ratis/ratis-grpc/target/classes:/home/runner/work/ratis/ratis/ratis-grpc/target/test-classes:/home/runner/work/ratis/ratis/ratis-shell/target/classes:/home/runner/.m2/repository/commons-cli/commons-cli/1.5.0/commons-cli-1.5.0.jar:/home/runner/.m2/repository/org/reflections/reflections/0.10.2/reflections-0.10.2.jar:/home/runner/.m2/repository/org/javassist/javassist/3.28.0-GA/javassist-3.28.0-GA.jar:/home/runner/.m2/repository/com/google/code/findbugs/jsr305/3.0.2/jsr305-3.0.2.jar:/home/runner/.m2/repository/org/bouncycastle/bcprov-jdk18on/1.76/bcprov-jdk18on-1.76.jar:/home/runner/.m2/repository/org/bouncycastle/bcpkix-jdk18on/1.76/bcpkix-jdk18on-1.76.jar:/home/runner/.m2/repository/org/bouncycastle/bcutil-jdk18on/1.76/bcutil-jdk18on-1.76.jar:/home/runner/.m2/repository/org/slf4j/slf4j-api/2.0.7/slf4j-api-2.0.7.jar:/home/runner/.m2/repository/org/slf4j/slf4j-reload4j/2.0.7/slf4j-reload4j-2.0.7.jar:/home/runner/.m2/repository/ch/qos/reload4j/reload4j/1.2.22/reload4j-1.2.22.jar:/home/runner/.m2/repository/junit/junit/4.13.2/junit-4.13.2.jar:/home/runner/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/runner/.m2/repository/org/mockito/mockito-core/4.3.1/mockito-core-4.3.1.jar:/home/runner/.m2/repository/net/bytebuddy/byte-buddy/1.12.7/byte-buddy-1.12.7.jar:/home/runner/.m2/repository/net/bytebuddy/byte-buddy-agent/1.12.7/byte-buddy-agent-1.12.7.jar:/home/runner/.m2/repository/org/objenesis/objenesis/3.2/objenesis-3.2.jar:"/>
    <property name="sun.cpu.endian" value="little"/>
    <property name="user.home" value="/home/runner"/>
    <property name="user.language" value="en"/>
    <property name="java.specification.vendor" value="Oracle Corporation"/>
    <property name="java.version.date" value="2023-10-17"/>
    <property name="java.home" value="/usr/lib/jvm/temurin-11-jdk-amd64"/>
    <property name="file.separator" value="/"/>
    <property name="basedir" value="/home/runner/work/ratis/ratis/ratis-test"/>
    <property name="java.vm.compressedOopsMode" value="32-bit"/>
    <property name="line.separator" value="&#10;"/>
    <property name="java.specification.name" value="Java Platform API Specification"/>
    <property name="java.vm.specification.vendor" value="Oracle Corporation"/>
    <property name="java.awt.graphicsenv" value="sun.awt.X11GraphicsEnvironment"/>
    <property name="surefire.real.class.path" value="/home/runner/work/ratis/ratis/ratis-test/target/surefire/surefirebooter-20231107012354569_249.jar"/>
    <property name="sun.management.compiler" value="HotSpot 64-Bit Tiered Compilers"/>
    <property name="java.runtime.version" value="11.0.21+9"/>
    <property name="user.name" value="runner"/>
    <property name="java.net.preferIPv4Stack" value="true"/>
    <property name="path.separator" value=":"/>
    <property name="os.version" value="5.15.0-1050-azure"/>
    <property name="java.runtime.name" value="OpenJDK Runtime Environment"/>
    <property name="file.encoding" value="UTF-8"/>
    <property name="java.vm.name" value="OpenJDK 64-Bit Server VM"/>
    <property name="java.vendor.version" value="Temurin-11.0.21+9"/>
    <property name="localRepository" value="/home/runner/.m2/repository"/>
    <property name="java.vendor.url.bug" value="https://github.com/adoptium/adoptium-support/issues"/>
    <property name="java.io.tmpdir" value="/tmp"/>
    <property name="java.version" value="11.0.21"/>
    <property name="user.dir" value="/home/runner/work/ratis/ratis/ratis-test"/>
    <property name="os.arch" value="amd64"/>
    <property name="ratis.tmp.dir" value="/home/runner/work/ratis/ratis/ratis-test/target/tmp"/>
    <property name="java.vm.specification.name" value="Java Virtual Machine Specification"/>
    <property name="java.awt.printerjob" value="sun.print.PSPrinterJob"/>
    <property name="ratis.log.dir" value="/home/runner/work/ratis/ratis/ratis-test/target/log"/>
    <property name="sun.os.patch.level" value="unknown"/>
    <property name="java.library.path" value="/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib"/>
    <property name="java.vm.info" value="mixed mode"/>
    <property name="java.vendor" value="Eclipse Adoptium"/>
    <property name="java.vm.version" value="11.0.21+9"/>
    <property name="java.specification.maintenance.version" value="2"/>
    <property name="sun.io.unicode.encoding" value="UnicodeLittle"/>
    <property name="java.class.version" value="55.0"/>
  </properties>
  <testcase name="testInstallSnapshotDuringBootstrap" classname="org.apache.ratis.grpc.TestRaftSnapshotWithGrpc" time="100.17">
    <error message="test timed out after 100 seconds" type="org.junit.runners.model.TestTimedOutException"><![CDATA[org.junit.runners.model.TestTimedOutException: test timed out after 100 seconds
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)
	at app//org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:717)
	at app//org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:159)
	at app//org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$AdminProtocolServiceBlockingStub.setConfiguration(AdminProtocolServiceGrpc.java:451)
	at app//org.apache.ratis.grpc.client.GrpcClientProtocolClient.lambda$setConfiguration$6(GrpcClientProtocolClient.java:191)
	at app//org.apache.ratis.grpc.client.GrpcClientProtocolClient$$Lambda$633/0x0000000100430840.get(Unknown Source)
	at app//org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:221)
	at app//org.apache.ratis.grpc.client.GrpcClientProtocolClient.setConfiguration(GrpcClientProtocolClient.java:189)
	at app//org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at app//org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at app//org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at app//org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at app//org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at app//org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at app//org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at app//org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at app//org.apache.ratis.statemachine.RaftSnapshotBaseTest$$Lambda$620/0x0000000100434440.accept(Unknown Source)
	at app//org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at app//org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base@11.0.21/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base@11.0.21/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base@11.0.21/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base@11.0.21/java.lang.reflect.Method.invoke(Method.java:566)
	at app//org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at app//org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at app//org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at app//org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at app//org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at app//org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at app//org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at app//org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base@11.0.21/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base@11.0.21/java.lang.Thread.run(Thread.java:829)
]]></error>
    <system-out><![CDATA[2023-11-07 01:36:25,492 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-11-07 01:36:25,495 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-11-07 01:36:25,500 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.RaftServer$Division log level to DEBUG
2023-11-07 01:36:25,500 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.raftlog.RaftLog log level to DEBUG
2023-11-07 01:36:25,501 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.client.RaftClient log level to DEBUG
2023-11-07 01:36:25,675 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-252D3078B158:[s0|localhost:42863]
2023-11-07 01:36:25,675 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-11-07 01:36:25,676 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-11-07 01:36:25,676 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-11-07 01:36:25,676 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-11-07 01:36:25,676 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-11-07 01:36:25,676 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-11-07 01:36:25,682 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-252D3078B158:[s0|localhost:42863], format? true
2023-11-07 01:36:25,684 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0
2023-11-07 01:36:25,684 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0 does not exist.
2023-11-07 01:36:25,684 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0
2023-11-07 01:36:25,721 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:36:25,807 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:36:25,810 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 42967 (custom)
2023-11-07 01:36:25,811 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:36:25,812 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 42555 (custom)
2023-11-07 01:36:25,813 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-11-07 01:36:25,813 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 42863 (custom)
2023-11-07 01:36:25,819 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-11-07 01:36:25,824 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:25,824 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-11-07 01:36:25,829 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:25,853 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:25,865 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-11-07 01:36:25,867 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-11-07 01:36:26,097 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-11-07 01:36:26,100 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:36:26,100 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2023-11-07 01:36:26,101 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:36:26,121 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0] (custom)
2023-11-07 01:36:26,123 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-11-07 01:36:26,123 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-11-07 01:36:26,135 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(100)) - s0: addNew group-252D3078B158:[s0|localhost:42863] returns group-252D3078B158:java.util.concurrent.CompletableFuture@428bae9d[Not completed]
2023-11-07 01:36:26,149 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:36:26,149 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:36:26,150 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:36:26,153 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(255)) - s0: new RaftServerImpl for group-252D3078B158:[s0|localhost:42863] with SimpleStateMachine4Testing:uninitialized
2023-11-07 01:36:26,155 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:36:26,155 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:36:26,155 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-11-07 01:36:26,155 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-11-07 01:36:26,156 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:36:26,156 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:36:26,161 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-252D3078B158: ConfigurationManager, init=-1: peers:[s0|localhost:42863]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-11-07 01:36:26,167 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-11-07 01:36:26,170 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-11-07 01:36:26,173 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-11-07 01:36:26,174 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2023-11-07 01:36:26,181 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-11-07 01:36:26,181 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2023-11-07 01:36:26,188 [s0-groupManagement] INFO  metrics.MetricRegistries (MetricRegistriesLoader.java:load(64)) - Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2023-11-07 01:36:26,305 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:26,307 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:26,308 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-11-07 01:36:26,308 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-11-07 01:36:26,309 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-11-07 01:36:26,309 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-11-07 01:36:26,311 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-11-07 01:36:26,311 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-11-07 01:36:26,311 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0] (custom)
2023-11-07 01:36:26,322 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158 does not exist. Creating ...
2023-11-07 01:36:26,323 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158
2023-11-07 01:36:26,328 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/in_use.lock acquired by nodename 23589@fv-az1231-351
2023-11-07 01:36:26,329 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/current
2023-11-07 01:36:26,329 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm
2023-11-07 01:36:26,334 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3c9cfdc2
2023-11-07 01:36:26,353 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:36:26,354 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(97)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158 has been successfully formatted.
2023-11-07 01:36:26,355 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-11-07 01:36:26,357 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2023-11-07 01:36:26,358 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-11-07 01:36:26,366 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-11-07 01:36:26,366 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:26,368 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-11-07 01:36:26,369 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-11-07 01:36:26,376 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:36:26,383 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-11-07 01:36:26,385 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-11-07 01:36:26,385 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:26,388 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-252D3078B158-cacheEviction-AwaitToRun,5,main] started
2023-11-07 01:36:26,391 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-252D3078B158-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158
2023-11-07 01:36:26,393 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:36:26,394 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-11-07 01:36:26,395 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:36:26,397 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:36:26,397 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-11-07 01:36:26,398 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-11-07 01:36:26,399 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-11-07 01:36:26,399 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-11-07 01:36:26,401 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:36:26,402 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:26,404 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-11-07 01:36:26,404 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-11-07 01:36:26,405 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-11-07 01:36:26,419 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-252D3078B158-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-11-07 01:36:26,419 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-252D3078B158-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-11-07 01:36:26,424 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(390)) - s0@group-252D3078B158: start as a follower, conf=-1: peers:[s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:26,424 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-252D3078B158: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-11-07 01:36:26,425 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-252D3078B158-FollowerState
2023-11-07 01:36:26,434 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-252D3078B158,id=s0
2023-11-07 01:36:26,436 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2023-11-07 01:36:26,437 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-11-07 01:36:26,437 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2023-11-07 01:36:26,438 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-11-07 01:36:26,438 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-11-07 01:36:26,442 [s0@group-252D3078B158-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:36:26,446 [s0@group-252D3078B158-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:36:26,447 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(406)) - s0: start RPC server
2023-11-07 01:36:26,493 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 42555
2023-11-07 01:36:26,495 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 42863
2023-11-07 01:36:26,496 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 42967
2023-11-07 01:36:26,499 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2023-11-07 01:36:26,504 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:36:26,506 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:36:26,512 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(223)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:42863]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:42863]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:217)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:203)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:280)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:26,677 [s0@group-252D3078B158-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-252D3078B158-FollowerState: change to CANDIDATE, lastRpcElapsedTime:251695925ns, electionTimeout:229ms
2023-11-07 01:36:26,677 [s0@group-252D3078B158-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-252D3078B158-FollowerState
2023-11-07 01:36:26,678 [s0@group-252D3078B158-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-252D3078B158: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-11-07 01:36:26,680 [s0@group-252D3078B158-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:36:26,680 [s0@group-252D3078B158-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-252D3078B158-LeaderElection1
2023-11-07 01:36:26,687 [s0@group-252D3078B158-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-252D3078B158-LeaderElection1 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:26,688 [s0@group-252D3078B158-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s0@group-252D3078B158-LeaderElection1 PRE_VOTE round 0: result PASSED (term=0)
2023-11-07 01:36:26,689 [s0@group-252D3078B158-LeaderElection1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@573b1fb4
2023-11-07 01:36:26,692 [s0@group-252D3078B158-LeaderElection1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:36:26,693 [s0@group-252D3078B158-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-252D3078B158-LeaderElection1 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:26,693 [s0@group-252D3078B158-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s0@group-252D3078B158-LeaderElection1 ELECTION round 0: result PASSED (term=1)
2023-11-07 01:36:26,693 [s0@group-252D3078B158-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-252D3078B158-LeaderElection1
2023-11-07 01:36:26,694 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-252D3078B158: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-11-07 01:36:26,699 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-11-07 01:36:26,702 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:36:26,703 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:36:26,706 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-11-07 01:36:26,706 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-11-07 01:36:26,707 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-11-07 01:36:26,713 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2023-11-07 01:36:26,715 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2023-11-07 01:36:26,715 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:36:26,716 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:36:26,716 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-11-07 01:36:26,718 [s0@group-252D3078B158-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-252D3078B158-LeaderStateImpl
2023-11-07 01:36:26,719 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(562)) - s0@group-252D3078B158: set firstElectionSinceStartup to false for becomeLeader
2023-11-07 01:36:26,719 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s0@group-252D3078B158: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 552ms
2023-11-07 01:36:26,742 [s0@group-252D3078B158-LeaderElection1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(428)) - s0@group-252D3078B158-SegmentedRaftLogWorker: Starting segment from index:0
2023-11-07 01:36:26,760 [s0@group-252D3078B158-LeaderElection1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-252D3078B158: set configuration 0: peers:[s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:26,819 [s0@group-252D3078B158-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(632)) - s0@group-252D3078B158-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/current/log_inprogress_0
2023-11-07 01:36:26,828 [s0@group-252D3078B158-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(316)) - leader is ready since appliedIndex == 0 >= startIndex == 0
2023-11-07 01:36:26,966 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:36:26,970 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:36:26,991 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 1 returns []
2023-11-07 01:36:27,328 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=1, seq=null, RW, Message:6d30)
2023-11-07 01:36:27,344 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=1, seq=null, RW, Message:6d30, entry=(t:1, i:1), STATEMACHINELOGENTRY, 1@client-4D63E6E43542
2023-11-07 01:36:27,349 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 1
2023-11-07 01:36:27,350 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 1@client-4D63E6E43542
2023-11-07 01:36:27,383 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 1
2023-11-07 01:36:27,383 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 2 returns [1]
2023-11-07 01:36:27,395 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=2, seq=null, RW, Message:6d31)
2023-11-07 01:36:27,402 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=2, seq=null, RW, Message:6d31, entry=(t:1, i:3), STATEMACHINELOGENTRY, 2@client-4D63E6E43542
2023-11-07 01:36:27,403 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 3
2023-11-07 01:36:27,403 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 2@client-4D63E6E43542
2023-11-07 01:36:27,412 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 2
2023-11-07 01:36:27,412 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 3 returns [2]
2023-11-07 01:36:27,417 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=3, seq=null, RW, Message:6d32)
2023-11-07 01:36:27,418 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=3, seq=null, RW, Message:6d32, entry=(t:1, i:5), STATEMACHINELOGENTRY, 3@client-4D63E6E43542
2023-11-07 01:36:27,419 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 5
2023-11-07 01:36:27,419 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 3@client-4D63E6E43542
2023-11-07 01:36:27,424 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 3
2023-11-07 01:36:27,424 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 4 returns [3]
2023-11-07 01:36:27,432 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=4, seq=null, RW, Message:6d33)
2023-11-07 01:36:27,433 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=4, seq=null, RW, Message:6d33, entry=(t:1, i:7), STATEMACHINELOGENTRY, 4@client-4D63E6E43542
2023-11-07 01:36:27,434 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 7
2023-11-07 01:36:27,435 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 4@client-4D63E6E43542
2023-11-07 01:36:27,443 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 4
2023-11-07 01:36:27,443 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 5 returns [4]
2023-11-07 01:36:27,449 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=5, seq=null, RW, Message:6d34)
2023-11-07 01:36:27,450 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=5, seq=null, RW, Message:6d34, entry=(t:1, i:9), STATEMACHINELOGENTRY, 5@client-4D63E6E43542
2023-11-07 01:36:27,451 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 9
2023-11-07 01:36:27,451 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 5@client-4D63E6E43542
2023-11-07 01:36:27,461 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 5
2023-11-07 01:36:27,461 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 6 returns [5]
2023-11-07 01:36:27,471 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=6, seq=null, RW, Message:6d35)
2023-11-07 01:36:27,471 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_9 with options [READ]: sun.nio.ch.FileChannelImpl@4f98bfa3
2023-11-07 01:36:27,472 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=6, seq=null, RW, Message:6d35, entry=(t:1, i:11), STATEMACHINELOGENTRY, 6@client-4D63E6E43542
2023-11-07 01:36:27,473 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_9.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@396356b7
2023-11-07 01:36:27,476 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_9.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_9.md5 with options [REPLACE_EXISTING]
2023-11-07 01:36:27,478 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-252D3078B158-StateMachineUpdater: Took a snapshot at index 9
2023-11-07 01:36:27,478 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-252D3078B158-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 9
2023-11-07 01:36:27,482 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 11
2023-11-07 01:36:27,483 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 6@client-4D63E6E43542
2023-11-07 01:36:27,489 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 6
2023-11-07 01:36:27,489 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 7 returns [6]
2023-11-07 01:36:27,494 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=7, seq=null, RW, Message:6d36)
2023-11-07 01:36:27,494 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=7, seq=null, RW, Message:6d36, entry=(t:1, i:13), STATEMACHINELOGENTRY, 7@client-4D63E6E43542
2023-11-07 01:36:27,498 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 13
2023-11-07 01:36:27,498 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 7@client-4D63E6E43542
2023-11-07 01:36:27,500 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 7
2023-11-07 01:36:27,501 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 8 returns [7]
2023-11-07 01:36:27,509 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=8, seq=null, RW, Message:6d37)
2023-11-07 01:36:27,510 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=8, seq=null, RW, Message:6d37, entry=(t:1, i:15), STATEMACHINELOGENTRY, 8@client-4D63E6E43542
2023-11-07 01:36:27,513 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 15
2023-11-07 01:36:27,513 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 8@client-4D63E6E43542
2023-11-07 01:36:27,516 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 8
2023-11-07 01:36:27,516 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 9 returns [8]
2023-11-07 01:36:27,521 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=9, seq=null, RW, Message:6d38)
2023-11-07 01:36:27,522 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=9, seq=null, RW, Message:6d38, entry=(t:1, i:17), STATEMACHINELOGENTRY, 9@client-4D63E6E43542
2023-11-07 01:36:27,523 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 17
2023-11-07 01:36:27,523 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 9@client-4D63E6E43542
2023-11-07 01:36:27,526 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 9
2023-11-07 01:36:27,526 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 10 returns [9]
2023-11-07 01:36:27,530 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=10, seq=null, RW, Message:6d39)
2023-11-07 01:36:27,531 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=10, seq=null, RW, Message:6d39, entry=(t:1, i:19), STATEMACHINELOGENTRY, 10@client-4D63E6E43542
2023-11-07 01:36:27,532 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 19
2023-11-07 01:36:27,532 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 10@client-4D63E6E43542
2023-11-07 01:36:27,544 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 10
2023-11-07 01:36:27,544 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 11 returns [10]
2023-11-07 01:36:27,550 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=11, seq=null, RW, Message:6d3130)
2023-11-07 01:36:27,551 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=11, seq=null, RW, Message:6d3130, entry=(t:1, i:21), STATEMACHINELOGENTRY, 11@client-4D63E6E43542
2023-11-07 01:36:27,552 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_19 with options [READ]: sun.nio.ch.FileChannelImpl@234a749d
2023-11-07 01:36:27,553 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_19.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@55357d8b
2023-11-07 01:36:27,556 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_19.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_19.md5 with options [REPLACE_EXISTING]
2023-11-07 01:36:27,557 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-252D3078B158-StateMachineUpdater: Took a snapshot at index 19
2023-11-07 01:36:27,557 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-252D3078B158-StateMachineUpdater: snapshotIndex: updateIncreasingly 9 -> 19
2023-11-07 01:36:27,557 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 21
2023-11-07 01:36:27,557 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 11@client-4D63E6E43542
2023-11-07 01:36:27,561 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 11
2023-11-07 01:36:27,565 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 12 returns [11]
2023-11-07 01:36:27,570 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=12, seq=null, RW, Message:6d3131)
2023-11-07 01:36:27,571 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=12, seq=null, RW, Message:6d3131, entry=(t:1, i:23), STATEMACHINELOGENTRY, 12@client-4D63E6E43542
2023-11-07 01:36:27,571 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 23
2023-11-07 01:36:27,572 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 12@client-4D63E6E43542
2023-11-07 01:36:27,576 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 12
2023-11-07 01:36:27,576 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 13 returns [12]
2023-11-07 01:36:27,585 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=13, seq=null, RW, Message:6d3132)
2023-11-07 01:36:27,586 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=13, seq=null, RW, Message:6d3132, entry=(t:1, i:25), STATEMACHINELOGENTRY, 13@client-4D63E6E43542
2023-11-07 01:36:27,587 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 25
2023-11-07 01:36:27,587 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 13@client-4D63E6E43542
2023-11-07 01:36:27,590 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 13
2023-11-07 01:36:27,590 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 14 returns [13]
2023-11-07 01:36:27,592 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=14, seq=null, RW, Message:6d3133)
2023-11-07 01:36:27,593 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=14, seq=null, RW, Message:6d3133, entry=(t:1, i:27), STATEMACHINELOGENTRY, 14@client-4D63E6E43542
2023-11-07 01:36:27,594 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 27
2023-11-07 01:36:27,594 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 14@client-4D63E6E43542
2023-11-07 01:36:27,597 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 14
2023-11-07 01:36:27,597 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 15 returns [14]
2023-11-07 01:36:27,599 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=15, seq=null, RW, Message:6d3134)
2023-11-07 01:36:27,600 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=15, seq=null, RW, Message:6d3134, entry=(t:1, i:29), STATEMACHINELOGENTRY, 15@client-4D63E6E43542
2023-11-07 01:36:27,601 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 29
2023-11-07 01:36:27,601 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 15@client-4D63E6E43542
2023-11-07 01:36:27,607 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 15
2023-11-07 01:36:27,607 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 16 returns [15]
2023-11-07 01:36:27,609 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=16, seq=null, RW, Message:6d3135)
2023-11-07 01:36:27,611 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=16, seq=null, RW, Message:6d3135, entry=(t:1, i:31), STATEMACHINELOGENTRY, 16@client-4D63E6E43542
2023-11-07 01:36:27,615 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_29 with options [READ]: sun.nio.ch.FileChannelImpl@55b04c1c
2023-11-07 01:36:27,616 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_29.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@7e804c5f
2023-11-07 01:36:27,617 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_29.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_29.md5 with options [REPLACE_EXISTING]
2023-11-07 01:36:27,617 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-252D3078B158-StateMachineUpdater: Took a snapshot at index 29
2023-11-07 01:36:27,617 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-252D3078B158-StateMachineUpdater: snapshotIndex: updateIncreasingly 19 -> 29
2023-11-07 01:36:27,618 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 31
2023-11-07 01:36:27,618 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 16@client-4D63E6E43542
2023-11-07 01:36:27,620 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 16
2023-11-07 01:36:27,620 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 17 returns [16]
2023-11-07 01:36:27,622 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=17, seq=null, RW, Message:6d3136)
2023-11-07 01:36:27,623 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=17, seq=null, RW, Message:6d3136, entry=(t:1, i:33), STATEMACHINELOGENTRY, 17@client-4D63E6E43542
2023-11-07 01:36:27,624 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 33
2023-11-07 01:36:27,624 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 17@client-4D63E6E43542
2023-11-07 01:36:27,626 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 17
2023-11-07 01:36:27,627 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 18 returns [17]
2023-11-07 01:36:27,629 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=18, seq=null, RW, Message:6d3137)
2023-11-07 01:36:27,630 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=18, seq=null, RW, Message:6d3137, entry=(t:1, i:35), STATEMACHINELOGENTRY, 18@client-4D63E6E43542
2023-11-07 01:36:27,631 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 35
2023-11-07 01:36:27,631 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 18@client-4D63E6E43542
2023-11-07 01:36:27,633 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 18
2023-11-07 01:36:27,633 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-4D63E6E43542: get 19 returns [18]
2023-11-07 01:36:27,639 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-252D3078B158: receive client request(RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=19, seq=null, RW, Message:6d3138)
2023-11-07 01:36:27,640 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-252D3078B158-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-4D63E6E43542->s0@group-252D3078B158, cid=19, seq=null, RW, Message:6d3138, entry=(t:1, i:37), STATEMACHINELOGENTRY, 19@client-4D63E6E43542
2023-11-07 01:36:27,643 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 37
2023-11-07 01:36:27,643 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 19@client-4D63E6E43542
2023-11-07 01:36:27,646 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-4D63E6E43542: add replied callId 19
2023-11-07 01:36:27,660 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:testInstallSnapshotDuringBootstrap(292)) - nextIndex = 39
2023-11-07 01:36:27,662 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:exists(183)) - File exists: /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_29
2023-11-07 01:36:27,662 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:36:27,663 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:36:27,663 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:36:27,773 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 0) 0 term: 1, index: 1, stateMachineLogEntry {,   logData: "m0",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 1, }, 
2023-11-07 01:36:27,775 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 1) 1 term: 1, index: 3, stateMachineLogEntry {,   logData: "m1",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 2, }, 
2023-11-07 01:36:27,776 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 2) 2 term: 1, index: 5, stateMachineLogEntry {,   logData: "m2",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 3, }, 
2023-11-07 01:36:27,777 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 3) 3 term: 1, index: 7, stateMachineLogEntry {,   logData: "m3",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 4, }, 
2023-11-07 01:36:27,778 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 4) 4 term: 1, index: 9, stateMachineLogEntry {,   logData: "m4",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 5, }, 
2023-11-07 01:36:27,778 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 5) 5 term: 1, index: 11, stateMachineLogEntry {,   logData: "m5",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 6, }, 
2023-11-07 01:36:27,779 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 6) 6 term: 1, index: 13, stateMachineLogEntry {,   logData: "m6",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 7, }, 
2023-11-07 01:36:27,783 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 7) 7 term: 1, index: 15, stateMachineLogEntry {,   logData: "m7",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 8, }, 
2023-11-07 01:36:27,784 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 8) 8 term: 1, index: 17, stateMachineLogEntry {,   logData: "m8",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 9, }, 
2023-11-07 01:36:27,785 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 9) 9 term: 1, index: 19, stateMachineLogEntry {,   logData: "m9",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 10, }, 
2023-11-07 01:36:27,789 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 10) 10 term: 1, index: 21, stateMachineLogEntry {,   logData: "m10",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 11, }, 
2023-11-07 01:36:27,790 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 11) 11 term: 1, index: 23, stateMachineLogEntry {,   logData: "m11",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 12, }, 
2023-11-07 01:36:27,790 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 12) 12 term: 1, index: 25, stateMachineLogEntry {,   logData: "m12",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 13, }, 
2023-11-07 01:36:27,791 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 13) 13 term: 1, index: 27, stateMachineLogEntry {,   logData: "m13",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 14, }, 
2023-11-07 01:36:27,791 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 14) 14 term: 1, index: 29, stateMachineLogEntry {,   logData: "m14",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 15, }, 
2023-11-07 01:36:27,795 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 15) 15 term: 1, index: 31, stateMachineLogEntry {,   logData: "m15",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 16, }, 
2023-11-07 01:36:27,796 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 16) 16 term: 1, index: 33, stateMachineLogEntry {,   logData: "m16",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 17, }, 
2023-11-07 01:36:27,797 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 17) 17 term: 1, index: 35, stateMachineLogEntry {,   logData: "m17",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 18, }, 
2023-11-07 01:36:27,797 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 18) 18 term: 1, index: 37, stateMachineLogEntry {,   logData: "m18",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "n4B\'\317\343@l\200=Mc\346\3445B",   callId: 19, }, 
2023-11-07 01:36:27,797 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:addNewPeers(464)) - Add new peers [s3, s4]
2023-11-07 01:36:27,798 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s3, group-252D3078B158:[s3, s4, s0|localhost:42863], format? true
2023-11-07 01:36:27,798 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3
2023-11-07 01:36:27,799 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3 does not exist.
2023-11-07 01:36:27,799 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3
2023-11-07 01:36:27,801 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:36:27,801 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:36:27,803 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.port = 45279 (fallback to raft.grpc.server.port)
2023-11-07 01:36:27,803 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:36:27,804 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.port = 45279 (fallback to raft.grpc.server.port)
2023-11-07 01:36:27,804 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-11-07 01:36:27,804 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 45279 (custom)
2023-11-07 01:36:27,804 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-11-07 01:36:27,804 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:27,804 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-11-07 01:36:27,805 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:27,805 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:27,805 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-11-07 01:36:27,805 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-11-07 01:36:27,806 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-11-07 01:36:27,806 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:36:27,807 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2023-11-07 01:36:27,807 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:36:27,808 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3] (custom)
2023-11-07 01:36:27,809 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-11-07 01:36:27,809 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-11-07 01:36:27,814 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(100)) - s3: addNew group-252D3078B158:[s3, s4, s0|localhost:42863] returns group-252D3078B158:java.util.concurrent.CompletableFuture@68300e33[Not completed]
2023-11-07 01:36:27,815 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s4, group-252D3078B158:[s3, s4, s0|localhost:42863], format? true
2023-11-07 01:36:27,815 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4
2023-11-07 01:36:27,815 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4 does not exist.
2023-11-07 01:36:27,815 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4
2023-11-07 01:36:27,816 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:36:27,816 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:36:27,816 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.port = 45797 (fallback to raft.grpc.server.port)
2023-11-07 01:36:27,816 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:36:27,816 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.port = 45797 (fallback to raft.grpc.server.port)
2023-11-07 01:36:27,817 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-11-07 01:36:27,817 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 45797 (custom)
2023-11-07 01:36:27,817 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-11-07 01:36:27,817 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:27,817 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-11-07 01:36:27,817 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:27,818 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:27,818 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-11-07 01:36:27,818 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-11-07 01:36:27,819 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-11-07 01:36:27,819 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:36:27,819 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2023-11-07 01:36:27,819 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:36:27,820 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4] (custom)
2023-11-07 01:36:27,820 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-11-07 01:36:27,820 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-11-07 01:36:27,822 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:36:27,822 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:36:27,822 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:36:27,822 [s3-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(255)) - s3: new RaftServerImpl for group-252D3078B158:[s3, s4, s0|localhost:42863] with SimpleStateMachine4Testing:uninitialized
2023-11-07 01:36:27,823 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:36:27,823 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:36:27,823 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-11-07 01:36:27,823 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-11-07 01:36:27,823 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:36:27,823 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:36:27,824 [s3-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s3@group-252D3078B158: ConfigurationManager, init=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-11-07 01:36:27,824 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-11-07 01:36:27,824 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-11-07 01:36:27,824 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-11-07 01:36:27,824 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2023-11-07 01:36:27,824 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-11-07 01:36:27,825 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2023-11-07 01:36:27,827 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:27,827 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:27,828 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-11-07 01:36:27,828 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-11-07 01:36:27,828 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-11-07 01:36:27,828 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-11-07 01:36:27,829 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(100)) - s4: addNew group-252D3078B158:[s3, s4, s0|localhost:42863] returns group-252D3078B158:java.util.concurrent.CompletableFuture@30f4b6cb[Not completed]
2023-11-07 01:36:27,829 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-11-07 01:36:27,829 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-11-07 01:36:27,829 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3] (custom)
2023-11-07 01:36:27,830 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158 does not exist. Creating ...
2023-11-07 01:36:27,831 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158
2023-11-07 01:36:27,832 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/in_use.lock acquired by nodename 23589@fv-az1231-351
2023-11-07 01:36:27,832 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/current
2023-11-07 01:36:27,833 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm
2023-11-07 01:36:27,833 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@39981169
2023-11-07 01:36:27,834 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:36:27,835 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:36:27,835 [s3-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(97)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158 has been successfully formatted.
2023-11-07 01:36:27,835 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-11-07 01:36:27,835 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2023-11-07 01:36:27,836 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-11-07 01:36:27,836 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-11-07 01:36:27,836 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:27,836 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-11-07 01:36:27,836 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-11-07 01:36:27,838 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:36:27,838 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-11-07 01:36:27,838 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-11-07 01:36:27,838 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:27,838 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:36:27,839 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:36:27,839 [s3-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s3@group-252D3078B158-cacheEviction-AwaitToRun,5,main] started
2023-11-07 01:36:27,844 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s3@group-252D3078B158-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158
2023-11-07 01:36:27,845 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:36:27,845 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-11-07 01:36:27,845 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:36:27,845 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:36:27,845 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-11-07 01:36:27,845 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-11-07 01:36:27,845 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-11-07 01:36:27,845 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-11-07 01:36:27,846 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:36:27,846 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:27,848 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-11-07 01:36:27,848 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-11-07 01:36:27,849 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-11-07 01:36:27,849 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s3@group-252D3078B158-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-11-07 01:36:27,849 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s3@group-252D3078B158-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-11-07 01:36:27,850 [s4-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(255)) - s4: new RaftServerImpl for group-252D3078B158:[s3, s4, s0|localhost:42863] with SimpleStateMachine4Testing:uninitialized
2023-11-07 01:36:27,850 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:36:27,850 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:36:27,850 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-11-07 01:36:27,851 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-11-07 01:36:27,851 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:36:27,851 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:36:27,851 [s4-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s4@group-252D3078B158: ConfigurationManager, init=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-11-07 01:36:27,851 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-11-07 01:36:27,851 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-11-07 01:36:27,851 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-11-07 01:36:27,851 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2023-11-07 01:36:27,852 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-11-07 01:36:27,852 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2023-11-07 01:36:27,855 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(390)) - s3@group-252D3078B158: start as a follower, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:27,855 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-252D3078B158: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-11-07 01:36:27,855 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-252D3078B158-FollowerState
2023-11-07 01:36:27,857 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:27,859 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:27,860 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-11-07 01:36:27,860 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-11-07 01:36:27,860 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-11-07 01:36:27,860 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-11-07 01:36:27,861 [s3@group-252D3078B158-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:36:27,861 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-252D3078B158,id=s3
2023-11-07 01:36:27,861 [s3@group-252D3078B158-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:36:27,861 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2023-11-07 01:36:27,861 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-11-07 01:36:27,862 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2023-11-07 01:36:27,862 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-11-07 01:36:27,862 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-11-07 01:36:27,863 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(406)) - s3: start RPC server
2023-11-07 01:36:27,864 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 45279
2023-11-07 01:36:27,864 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-11-07 01:36:27,865 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-11-07 01:36:27,865 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4] (custom)
2023-11-07 01:36:27,865 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4/681bb86f-03d3-48b5-8cbf-252d3078b158 does not exist. Creating ...
2023-11-07 01:36:27,866 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4/681bb86f-03d3-48b5-8cbf-252d3078b158
2023-11-07 01:36:27,866 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s3: Started
2023-11-07 01:36:27,867 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4/681bb86f-03d3-48b5-8cbf-252d3078b158/in_use.lock acquired by nodename 23589@fv-az1231-351
2023-11-07 01:36:27,867 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4/681bb86f-03d3-48b5-8cbf-252d3078b158/current
2023-11-07 01:36:27,868 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4/681bb86f-03d3-48b5-8cbf-252d3078b158/sm
2023-11-07 01:36:27,868 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@348b856e
2023-11-07 01:36:27,871 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:36:27,871 [s4-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(97)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4/681bb86f-03d3-48b5-8cbf-252d3078b158 has been successfully formatted.
2023-11-07 01:36:27,872 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-11-07 01:36:27,872 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2023-11-07 01:36:27,872 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-11-07 01:36:27,872 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-11-07 01:36:27,872 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:27,873 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-11-07 01:36:27,873 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-11-07 01:36:27,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:36:27,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-11-07 01:36:27,874 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-11-07 01:36:27,876 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:27,878 [s4-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s4@group-252D3078B158-cacheEviction-AwaitToRun,5,main] started
2023-11-07 01:36:27,879 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s4@group-252D3078B158-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s4/681bb86f-03d3-48b5-8cbf-252d3078b158
2023-11-07 01:36:27,879 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:36:27,879 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-11-07 01:36:27,880 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:36:27,880 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:36:27,880 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-11-07 01:36:27,880 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-11-07 01:36:27,880 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-11-07 01:36:27,880 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-11-07 01:36:27,880 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:36:27,881 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:27,885 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-11-07 01:36:27,888 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-11-07 01:36:27,888 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-11-07 01:36:27,888 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s4@group-252D3078B158-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-11-07 01:36:27,888 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s4@group-252D3078B158-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-11-07 01:36:27,895 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(390)) - s4@group-252D3078B158: start as a follower, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:27,895 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-252D3078B158: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-11-07 01:36:27,895 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-252D3078B158-FollowerState
2023-11-07 01:36:27,896 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-252D3078B158,id=s4
2023-11-07 01:36:27,896 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2023-11-07 01:36:27,896 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-11-07 01:36:27,896 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2023-11-07 01:36:27,896 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-11-07 01:36:27,896 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-11-07 01:36:27,898 [s4@group-252D3078B158-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:36:27,898 [s4@group-252D3078B158-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:36:27,899 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(406)) - s4: start RPC server
2023-11-07 01:36:27,900 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 45797
2023-11-07 01:36:27,905 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:36:27,906 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:setConfiguration(819)) - Start changing the configuration: [s3|0.0.0.0:45279, s0|localhost:42863]
2023-11-07 01:36:27,906 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s4: Started
2023-11-07 01:36:27,931 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-B686BAF62AAC->s0@group-252D3078B158, cid=20, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s0|localhost:42863], listeners:[]
2023-11-07 01:36:27,931 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-B686BAF62AAC->s0@group-252D3078B158, cid=20, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s0|localhost:42863], listeners:[]
2023-11-07 01:36:27,942 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:27,943 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:27,944 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:27,948 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:27,949 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:27,950 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:27,951 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:27,951 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:27,951 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:27,951 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:27,963 [s0@group-252D3078B158->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s3-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:29):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_29] to follower
2023-11-07 01:36:27,965 [s0@group-252D3078B158->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s3
2023-11-07 01:36:27,998 [grpc-default-executor-1] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(89)) - s3@group-252D3078B158: receive installSnapshot: s0->s3#0-t1,chunk:e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f,0
2023-11-07 01:36:27,999 [grpc-default-executor-1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3b865569
2023-11-07 01:36:28,001 [grpc-default-executor-1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:36:28,001 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(562)) - s3@group-252D3078B158: set firstElectionSinceStartup to false for installSnapshot
2023-11-07 01:36:28,001 [grpc-default-executor-1] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s3@group-252D3078B158: change Leader from null to s0 at term 1 for installSnapshot, leader elected after 177ms
2023-11-07 01:36:28,004 [grpc-default-executor-1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/tmp/snapshot-e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f
2023-11-07 01:36:28,004 [grpc-default-executor-1] INFO  storage.SnapshotManager (SnapshotManager.java:installSnapshot(89)) - Installing snapshot:s0->s3#0-t1,chunk:e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f,0, to tmp dir:/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/tmp/snapshot-e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f
2023-11-07 01:36:28,005 [grpc-default-executor-1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/tmp/snapshot-e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f
2023-11-07 01:36:28,006 [grpc-default-executor-1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/tmp/snapshot-e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f/snapshot.1_29.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@2af8b966
2023-11-07 01:36:28,007 [grpc-default-executor-1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/tmp/snapshot-e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f/snapshot.1_29.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/tmp/snapshot-e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f/snapshot.1_29.md5 with options [REPLACE_EXISTING]
2023-11-07 01:36:28,008 [grpc-default-executor-1] INFO  storage.SnapshotManager (SnapshotManager.java:rename(168)) - Installed snapshot, renaming temporary dir /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/tmp/snapshot-e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm
2023-11-07 01:36:28,011 [grpc-default-executor-1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm.tmp20231107-013628_009
2023-11-07 01:36:28,011 [grpc-default-executor-1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/tmp/snapshot-e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm
2023-11-07 01:36:28,011 [grpc-default-executor-1] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm.tmp20231107-013628_009
2023-11-07 01:36:28,013 [grpc-default-executor-1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.delete /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm.tmp20231107-013628_009
2023-11-07 01:36:28,013 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:reinitialize(236)) - Reinitializing SimpleStateMachine4Testing:s3:group-252D3078B158
2023-11-07 01:36:28,014 [s3@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_29.md5 with options []: sun.nio.ch.ChannelInputStream@274db8c
2023-11-07 01:36:28,014 [grpc-default-executor-1] INFO  raftlog.RaftLog (RaftLogBase.java:lambda$new$0(54)) - s3@group-252D3078B158-SegmentedRaftLog: snapshotIndex: updateIncreasingly -1 -> 29
2023-11-07 01:36:28,015 [grpc-default-executor-1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s3@group-252D3078B158-SegmentedRaftLogWorker: flushIndex: setUnconditionally -1 -> 29
2023-11-07 01:36:28,015 [grpc-default-executor-1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s3@group-252D3078B158-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally -1 -> 29
2023-11-07 01:36:28,015 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:1, i:29):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_29]
2023-11-07 01:36:28,015 [grpc-default-executor-1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:purgeImpl(379)) - purging segments:null
2023-11-07 01:36:28,015 [grpc-default-executor-1] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:checkAndInstallSnapshot(194)) - s3@group-252D3078B158: successfully install the entire snapshot-29
2023-11-07 01:36:28,018 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 1@client-4D63E6E43542
2023-11-07 01:36:28,018 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 2@client-4D63E6E43542
2023-11-07 01:36:28,018 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 3@client-4D63E6E43542
2023-11-07 01:36:28,019 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 4@client-4D63E6E43542
2023-11-07 01:36:28,019 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 5@client-4D63E6E43542
2023-11-07 01:36:28,019 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 6@client-4D63E6E43542
2023-11-07 01:36:28,020 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 7@client-4D63E6E43542
2023-11-07 01:36:28,020 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 8@client-4D63E6E43542
2023-11-07 01:36:28,020 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 9@client-4D63E6E43542
2023-11-07 01:36:28,020 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 10@client-4D63E6E43542
2023-11-07 01:36:28,021 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 11@client-4D63E6E43542
2023-11-07 01:36:28,022 [grpc-default-executor-1] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshotImpl(134)) - s3@group-252D3078B158: set new configuration configurationEntry {
  peers {
    id: "s0"
    address: "localhost:42863"
    dataStreamAddress: "localhost:46249"
    clientAddress: "localhost:42555"
    adminAddress: "localhost:42967"
    startupRole: FOLLOWER
  }
}
 from snapshot
2023-11-07 01:36:28,027 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 12@client-4D63E6E43542
2023-11-07 01:36:28,028 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 13@client-4D63E6E43542
2023-11-07 01:36:28,028 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 14@client-4D63E6E43542
2023-11-07 01:36:28,028 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 15@client-4D63E6E43542
2023-11-07 01:36:28,030 [grpc-default-executor-1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s3@group-252D3078B158: set configuration 0: peers:[s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:28,031 [grpc-default-executor-1] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(100)) - s3@group-252D3078B158: reply installSnapshot: s0<-s3#0:OK-t0,SUCCESS,requestIndex=0
2023-11-07 01:36:28,029 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-252D3078B158-StateMachineUpdater: snapshotIndex: setUnconditionally -1 -> 29
2023-11-07 01:36:28,032 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-252D3078B158-StateMachineUpdater: appliedIndex: setUnconditionally -1 -> 29
2023-11-07 01:36:28,034 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(549)) - s0@group-252D3078B158->s3-InstallSnapshotResponseHandler: received the first reply s0<-s3#0:OK-t0,SUCCESS,requestIndex=0
2023-11-07 01:36:28,036 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(563)) - s0@group-252D3078B158->s3-InstallSnapshotResponseHandler: Completed InstallSnapshot. Reply: serverReply {
  requestorId: "s0"
  replyId: "s3"
  raftGroupId {
    id: "h\033\270o\003\323H\265\214\277%-0x\261X"
  }
  success: true
}
requestIndex: 0

2023-11-07 01:36:28,037 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:setAttemptedToInstallSnapshot(154)) - Follower s0@group-252D3078B158->s3 acknowledged installing snapshot
2023-11-07 01:36:28,038 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(157)) - s3: Completed INSTALL_SNAPSHOT, lastRequest: s0->s3#0-t1,chunk:e18b9b72-6f65-41ee-8e2e-a7c2c89bf56f,0
2023-11-07 01:36:28,038 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$5(159)) - s3: Completed INSTALL_SNAPSHOT, lastReply: null
2023-11-07 01:36:28,042 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(629)) - s0@group-252D3078B158->s3-InstallSnapshotResponseHandler: follower responded installSnapshot COMPLETED
2023-11-07 01:36:28,043 [s0@group-252D3078B158->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-252D3078B158->s3: snapshotIndex: setUnconditionally 0 -> 29
2023-11-07 01:36:28,043 [s0@group-252D3078B158->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-252D3078B158->s3: matchIndex: setUnconditionally -1 -> 29
2023-11-07 01:36:28,044 [s0@group-252D3078B158->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-252D3078B158->s3: nextIndex: setUnconditionally 0 -> 30
2023-11-07 01:36:28,044 [s0@group-252D3078B158->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(685)) - s0@group-252D3078B158->s3-GrpcLogAppender: installed snapshot SingleFileSnapshotInfo(t:1, i:29):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_29] successfully
2023-11-07 01:36:28,076 [s4@group-252D3078B158-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-252D3078B158-FollowerState: change to CANDIDATE, lastRpcElapsedTime:180820578ns, electionTimeout:177ms
2023-11-07 01:36:28,079 [s4@group-252D3078B158-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-252D3078B158-FollowerState
2023-11-07 01:36:28,079 [s4@group-252D3078B158-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-252D3078B158: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-11-07 01:36:28,085 [s4@group-252D3078B158-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:36:28,086 [s4@group-252D3078B158-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-252D3078B158-LeaderElection2
2023-11-07 01:36:28,087 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-252D3078B158: receive appendEntries(s0, 1, (t:1, i:29), 38, false, commits:[s0:c38, s3:c-1], cId:1, entries: [(t:1, i:30), METADATAENTRY(c:29), (t:1, i:31), STATEMACHINELOGENTRY, 16@client-4D63E6E43542, (t:1, i:32), METADATAENTRY(c:31), (t:1, i:33), STATEMACHINELOGENTRY, 17@client-4D63E6E43542, (t:1, i:34), METADATAENTRY(c:33), (t:1, i:35), STATEMACHINELOGENTRY, 18@client-4D63E6E43542, (t:1, i:36), METADATAENTRY(c:35), (t:1, i:37), STATEMACHINELOGENTRY, 19@client-4D63E6E43542, (t:1, i:38), METADATAENTRY(c:37)]
2023-11-07 01:36:28,089 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:36:28,093 [s3-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(428)) - s3@group-252D3078B158-SegmentedRaftLogWorker: Starting segment from index:30
2023-11-07 01:36:28,105 [s3@group-252D3078B158-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(632)) - s3@group-252D3078B158-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/current/log_inprogress_30
2023-11-07 01:36:28,103 [s4@group-252D3078B158-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s4@group-252D3078B158-LeaderElection2 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:28,114 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 31
2023-11-07 01:36:28,114 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 16@client-4D63E6E43542
2023-11-07 01:36:28,116 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 33
2023-11-07 01:36:28,116 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 17@client-4D63E6E43542
2023-11-07 01:36:28,117 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 35
2023-11-07 01:36:28,117 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 18@client-4D63E6E43542
2023-11-07 01:36:28,117 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 37
2023-11-07 01:36:28,117 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 19@client-4D63E6E43542
2023-11-07 01:36:28,118 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-252D3078B158: succeeded to handle AppendEntries. Reply: s0<-s3#1:OK-t1,SUCCESS,nextIndex=39,followerCommit=38,matchIndex=38
2023-11-07 01:36:28,121 [s0@group-252D3078B158-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-252D3078B158: set configuration 39: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=peers:[s0|localhost:42863]|listeners:[]
2023-11-07 01:36:28,126 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-252D3078B158: receive appendEntries(s0, 1, (t:1, i:38), 38, true, commits:[s0:c38, s3:c38], cId:4, entries: [(t:1, i:39), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:45279"
clientAddress: "0.0.0.0:45279"
adminAddress: "0.0.0.0:45279"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:42863"
dataStreamAddress: "localhost:46249"
clientAddress: "localhost:42555"
adminAddress: "localhost:42967"
startupRole: FOLLOWER
, old:id: "s0"
address: "localhost:42863"
dataStreamAddress: "localhost:46249"
clientAddress: "localhost:42555"
adminAddress: "localhost:42967"
startupRole: FOLLOWER
)]
2023-11-07 01:36:28,126 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s3@group-252D3078B158: set configuration 39: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=peers:[s0|localhost:42863]|listeners:[]
2023-11-07 01:36:28,127 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:36:28,127 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-252D3078B158: succeeded to handle AppendEntries. Reply: s0<-s3#4:OK-t1,SUCCESS,nextIndex=40,followerCommit=38,matchIndex=39
2023-11-07 01:36:28,138 [s0@group-252D3078B158-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-252D3078B158: set configuration 41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:28,141 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-252D3078B158: receive appendEntries(s0, 1, (t:1, i:39), 39, true, commits:[s0:c39, s3:c38], cId:5, entries: [(t:1, i:40), METADATAENTRY(c:39), (t:1, i:41), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:45279"
clientAddress: "0.0.0.0:45279"
adminAddress: "0.0.0.0:45279"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:42863"
dataStreamAddress: "localhost:46249"
clientAddress: "localhost:42555"
adminAddress: "localhost:42967"
startupRole: FOLLOWER
, old:)]
2023-11-07 01:36:28,143 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s3@group-252D3078B158: set configuration 41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:28,143 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:36:28,143 [s4@group-252D3078B158-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:36:28,147 [s4@group-252D3078B158-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:36:28,149 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-252D3078B158: succeeded to handle AppendEntries. Reply: s0<-s3#5:OK-t1,SUCCESS,nextIndex=42,followerCommit=39,matchIndex=41
2023-11-07 01:36:28,149 [s4@group-252D3078B158-LeaderElection2-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s3
2023-11-07 01:36:28,156 [s4@group-252D3078B158-LeaderElection2-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s0
2023-11-07 01:36:28,161 [s4@group-252D3078B158-LeaderElection2] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-252D3078B158-LeaderElection2 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.NullPointerException: target
2023-11-07 01:36:28,165 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39 with options [READ]: sun.nio.ch.FileChannelImpl@e9e318e
2023-11-07 01:36:28,166 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@70b9dcf3
2023-11-07 01:36:28,167 [s3@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39 with options [READ]: sun.nio.ch.FileChannelImpl@5d91b7bf
2023-11-07 01:36:28,170 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39.md5 with options [REPLACE_EXISTING]
2023-11-07 01:36:28,170 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-252D3078B158-StateMachineUpdater: Took a snapshot at index 39
2023-11-07 01:36:28,170 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-252D3078B158-StateMachineUpdater: snapshotIndex: updateIncreasingly 29 -> 39
2023-11-07 01:36:28,170 [s3@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@6aa6a47a
2023-11-07 01:36:28,176 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-B686BAF62AAC: add replied callId 20
2023-11-07 01:36:28,177 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-252D3078B158: receive appendEntries(s0, 1, (t:1, i:41), 41, true, commits:[s0:c41, s3:c39], cId:6, entries: [(t:1, i:42), METADATAENTRY(c:41)]
2023-11-07 01:36:28,178 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:36:28,176 [s3@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39.md5 with options [REPLACE_EXISTING]
2023-11-07 01:36:28,178 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s3@group-252D3078B158-StateMachineUpdater: Took a snapshot at index 39
2023-11-07 01:36:28,179 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-252D3078B158-StateMachineUpdater: snapshotIndex: updateIncreasingly 29 -> 39
2023-11-07 01:36:28,179 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-252D3078B158: succeeded to handle AppendEntries. Reply: s0<-s3#6:OK-t1,SUCCESS,nextIndex=43,followerCommit=41,matchIndex=42
2023-11-07 01:36:28,191 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1372)) - s0@group-252D3078B158: receive requestVote(PRE_VOTE, s4, group-252D3078B158, 0, (t:0, i:0))
2023-11-07 01:36:28,192 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-252D3078B158-LEADER: reject PRE_VOTE from s4: s4 is not in current conf [s3|0.0.0.0:45279, s0|localhost:42863]
2023-11-07 01:36:28,196 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1405)) - s0@group-252D3078B158 replies to PRE_VOTE vote request: s4<-s0#0:FAIL-t1. Peer's state: s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null
2023-11-07 01:36:28,200 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:36:28,200 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:setConfiguration(819)) - Start changing the configuration: [s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]
2023-11-07 01:36:28,212 [s4@group-252D3078B158-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-252D3078B158-LeaderElection2: PRE_VOTE SHUTDOWN received 1 response(s) and 1 exception(s):
2023-11-07 01:36:28,212 [s4@group-252D3078B158-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s4<-s0#0:FAIL-t1
2023-11-07 01:36:28,212 [s4@group-252D3078B158-LeaderElection2] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: java.lang.NullPointerException: target
2023-11-07 01:36:28,212 [s4@group-252D3078B158-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s4@group-252D3078B158-LeaderElection2 PRE_VOTE round 0: result SHUTDOWN
2023-11-07 01:36:28,213 [s4@group-252D3078B158-LeaderElection2] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(416)) - s4: close
2023-11-07 01:36:28,214 [s4@group-252D3078B158-LeaderElection2] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server GrpcServerProtocolService now
2023-11-07 01:36:28,215 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$3(514)) - s4@group-252D3078B158: shutdown
2023-11-07 01:36:28,215 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-252D3078B158,id=s4
2023-11-07 01:36:28,215 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s4: shutdown s4@group-252D3078B158-LeaderElection2
2023-11-07 01:36:28,220 [s4-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s4@group-252D3078B158-StateMachineUpdater: set stopIndex = -1
2023-11-07 01:36:28,220 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:28,220 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:28,220 [s4-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(423)) - s4@group-252D3078B158: applyIndex: -1
2023-11-07 01:36:28,221 [s4@group-252D3078B158-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s4@group-252D3078B158-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2023-11-07 01:36:28,221 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:28,221 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:28,221 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:28,221 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:28,222 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:28,222 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:28,222 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:28,222 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:28,222 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:28,222 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:28,231 [Thread-50] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s0 Close channels
2023-11-07 01:36:28,231 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:28,233 [s4@group-252D3078B158-LeaderElection2] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server GrpcServerProtocolService successfully
2023-11-07 01:36:28,233 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s4
2023-11-07 01:36:28,244 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,246 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,248 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,248 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,250 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,252 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,253 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:28,253 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,254 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,254 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,255 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,256 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,256 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,260 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:28,261 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,262 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,264 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,266 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,266 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,266 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,267 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:28,268 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,268 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,269 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,269 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,269 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,269 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,270 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:28,271 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,271 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,271 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,271 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,271 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:28,271 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:28,896 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(243)) - s4@group-252D3078B158-SegmentedRaftLogWorker close()
2023-11-07 01:36:28,897 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s4: Stopped
2023-11-07 01:36:29,088 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=817, lastRpcResponseTime=1167) timeout (1167ms) for bootstrapping
2023-11-07 01:36:29,088 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:29,089 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:29,111 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:29,112 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:29,112 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:29,224 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:29,229 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:29,229 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:29,229 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:29,339 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:29,340 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:29,340 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:29,340 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:29,340 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:29,340 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:29,340 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:29,340 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:29,340 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:29,341 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:29,341 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:29,341 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:29,342 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:29,342 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,343 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,346 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,346 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,347 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,347 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,352 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:29,353 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,354 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,355 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,355 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,356 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,356 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,358 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:29,359 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,360 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,363 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,363 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,367 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,368 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,369 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:29,370 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,370 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,371 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,372 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:29,372 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:29,372 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,015 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=643, lastRpcResponseTime=975) timeout (975ms) for bootstrapping
2023-11-07 01:36:30,016 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:30,016 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:30,021 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:30,021 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:30,021 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:30,133 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:30,136 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:30,136 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:30,136 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:30,252 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:30,252 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:30,252 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:30,252 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:30,253 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:30,253 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:30,253 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:30,253 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:30,253 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:30,253 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:30,253 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:30,255 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:30,256 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:30,258 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,258 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,260 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,260 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,261 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,261 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,264 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:30,264 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,265 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,266 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,267 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,268 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,270 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,270 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:30,271 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,271 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,272 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,275 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,276 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,276 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,277 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:30,278 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,279 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,279 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,280 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:30,280 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,281 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:30,918 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=639, lastRpcResponseTime=965) timeout (965ms) for bootstrapping
2023-11-07 01:36:30,918 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:30,918 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:30,925 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:30,926 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:30,926 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:31,036 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:31,038 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:31,039 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:31,039 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:31,147 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:31,148 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:31,148 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:31,148 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:31,148 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:31,148 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:31,149 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:31,149 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:31,149 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:31,149 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:31,149 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:31,149 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:31,150 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:31,150 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,151 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,151 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,151 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,152 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,153 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,154 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:31,154 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,155 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,156 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,156 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,157 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,157 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,158 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:31,158 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,159 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,159 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,160 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,160 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,162 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,163 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:31,166 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,167 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,168 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,168 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:31,168 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,169 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:31,820 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=653, lastRpcResponseTime=972) timeout (972ms) for bootstrapping
2023-11-07 01:36:31,820 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:31,821 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:31,828 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:31,829 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:31,829 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:31,938 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:31,940 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:31,940 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:31,940 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:32,048 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:32,048 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:32,049 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:32,049 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:32,049 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:32,049 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:32,049 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:32,049 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:32,049 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:32,049 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:32,049 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:32,049 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:32,050 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:32,051 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,052 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,053 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,053 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,053 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,054 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,056 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:32,057 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,057 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,058 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,058 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,059 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,059 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,064 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:32,064 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,065 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,066 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,066 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,066 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,066 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,069 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:32,069 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,069 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,071 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,072 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,072 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,073 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,724 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=652, lastRpcResponseTime=975) timeout (975ms) for bootstrapping
2023-11-07 01:36:32,724 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:32,725 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:32,731 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:32,732 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:32,732 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:32,843 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:32,845 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:32,845 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:32,845 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:32,954 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:32,954 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:32,954 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:32,954 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:32,954 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:32,954 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:32,955 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:32,955 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:32,955 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:32,955 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:32,955 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:32,955 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:32,956 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:32,956 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,957 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,958 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,958 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,959 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,959 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,960 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:32,960 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,961 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,962 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,962 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,963 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,964 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,965 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:32,966 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,966 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,967 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,967 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,968 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,968 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,968 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:32,969 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,969 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,969 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,970 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:32,970 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:32,970 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,628 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=659, lastRpcResponseTime=974) timeout (974ms) for bootstrapping
2023-11-07 01:36:33,628 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:33,629 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:33,634 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:33,635 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:33,635 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:33,742 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:33,744 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:33,745 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:33,745 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:33,854 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:33,855 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:33,856 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:33,857 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,858 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,860 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,860 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,860 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,861 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,862 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:33,863 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,864 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,864 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,864 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,865 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,865 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,866 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:33,866 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,867 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,868 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,868 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,870 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,870 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,871 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:33,872 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,872 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,873 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,874 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:33,874 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:33,875 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,531 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=658, lastRpcResponseTime=976) timeout (976ms) for bootstrapping
2023-11-07 01:36:34,531 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:34,532 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:34,536 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:34,536 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:34,536 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:34,643 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:34,645 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:34,645 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:34,645 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:34,755 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:34,755 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:34,755 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:34,755 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:34,756 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:34,756 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:34,756 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:34,756 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:34,756 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:34,756 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:34,756 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:34,756 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:34,757 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:34,758 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,759 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,761 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,761 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,761 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,762 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,763 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:34,763 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,763 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,765 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,765 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,766 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,766 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,767 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:34,767 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,768 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,769 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,769 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,770 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,770 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,772 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:34,773 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,773 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,774 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,775 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:34,775 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:34,776 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,433 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=660, lastRpcResponseTime=978) timeout (978ms) for bootstrapping
2023-11-07 01:36:35,434 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:35,434 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:35,440 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:35,440 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:35,440 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:35,549 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:35,551 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:35,552 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:35,552 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:35,668 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:35,669 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:35,669 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:35,669 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:35,669 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:35,669 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:35,669 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:35,669 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:35,670 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:35,670 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:35,670 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:35,670 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:35,674 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:35,674 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,675 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,676 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,677 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,677 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,677 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,681 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:35,681 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,682 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,691 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,691 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,692 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,693 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:35,693 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,694 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,695 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,696 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,696 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,696 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,697 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,698 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:35,698 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,699 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,700 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,700 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:35,701 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:35,701 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,257 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:36,257 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,259 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,259 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,260 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,260 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,260 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,337 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=76, lastRpcResponseTime=967) timeout (967ms) for bootstrapping
2023-11-07 01:36:36,337 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:36,338 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:36,341 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:36,341 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:36,341 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:36,450 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:36,453 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:36,454 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:36,454 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:36,504 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$start$6(349)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:36:36,564 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:36,565 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:36,565 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:36,565 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:36,565 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:36,565 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:36,565 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:36,565 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:36,565 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:36,565 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:36,566 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:36,566 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:36,567 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:36,567 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,568 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,570 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,570 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,571 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,571 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,573 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:36,573 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,573 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,574 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,575 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,575 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,577 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,577 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:36,577 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,578 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,578 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,578 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,579 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,580 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,581 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:36,581 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,582 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,583 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,583 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:36,583 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:36,584 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,239 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=654, lastRpcResponseTime=974) timeout (974ms) for bootstrapping
2023-11-07 01:36:37,239 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:37,239 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:37,244 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:37,244 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:37,244 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:37,352 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:37,354 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:37,354 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:37,354 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:37,461 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:37,462 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:37,462 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:37,462 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:37,462 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:37,462 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:37,462 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:37,462 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:37,462 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:37,463 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:37,463 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:37,463 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:37,463 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:37,464 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,465 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,465 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,466 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,466 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,466 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,469 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:37,469 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,469 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,470 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,471 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,471 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,472 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,473 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:37,473 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,474 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,475 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,476 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,476 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,476 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,477 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:37,478 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,479 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,480 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,480 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,481 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,481 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,985 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:37,986 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,987 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,987 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,987 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:37,988 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:37,988 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,142 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=152, lastRpcResponseTime=980) timeout (980ms) for bootstrapping
2023-11-07 01:36:38,142 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:38,143 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:38,147 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:38,148 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:38,148 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:38,255 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:38,257 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:38,257 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:38,257 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:38,364 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:38,365 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:38,366 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:38,367 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,368 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,369 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,369 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,370 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,371 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,371 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:38,371 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,372 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,372 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,372 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,373 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,374 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,375 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:38,376 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,376 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,377 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,377 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,379 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,379 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,382 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:38,382 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,384 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,384 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,386 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:38,387 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:38,388 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,045 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=661, lastRpcResponseTime=980) timeout (980ms) for bootstrapping
2023-11-07 01:36:39,045 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:39,046 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:39,049 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:39,050 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:39,050 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:39,158 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:39,160 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:39,160 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:39,160 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:39,267 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:39,267 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:39,267 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:39,268 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:39,268 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:39,268 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:39,268 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:39,268 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:39,268 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:39,268 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:39,268 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:39,268 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:39,269 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:39,269 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,270 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,273 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,273 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,273 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,276 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:39,276 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,276 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,277 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,278 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,278 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,279 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,280 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,280 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:39,280 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,281 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,282 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,282 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,284 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,285 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,287 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:39,288 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,291 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,291 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,291 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:39,294 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,294 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:39,947 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=652, lastRpcResponseTime=979) timeout (979ms) for bootstrapping
2023-11-07 01:36:39,947 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:39,948 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:39,952 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:39,952 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:39,952 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:40,057 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:40,059 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:40,060 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:40,060 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:40,168 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:40,169 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:40,169 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:40,169 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:40,169 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:40,169 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:40,169 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:40,169 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:40,170 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:40,170 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:40,170 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:40,170 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:40,171 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:40,171 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,172 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,173 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,173 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,174 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,175 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,176 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:40,176 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,176 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,177 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,177 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,178 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,180 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,180 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:40,181 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,182 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,184 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,186 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,186 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,187 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,189 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:40,189 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,190 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,200 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,201 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,201 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,202 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,817 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:40,818 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,819 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,820 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,821 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,821 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:40,821 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:40,850 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=28, lastRpcResponseTime=981) timeout (981ms) for bootstrapping
2023-11-07 01:36:40,850 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:40,851 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:40,853 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:40,854 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:40,854 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:40,960 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:40,962 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:40,962 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:40,962 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:41,072 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:41,072 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:41,073 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:41,073 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:41,073 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:41,073 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:41,073 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:41,073 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:41,074 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:41,074 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:41,074 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:41,074 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:41,075 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:41,076 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,076 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,077 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,078 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,078 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,078 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,080 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:41,080 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,081 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,082 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,082 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,083 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,084 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:41,084 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,085 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,085 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,086 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,086 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,087 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,087 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,087 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:41,088 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,088 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,092 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,092 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,093 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,093 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,752 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=663, lastRpcResponseTime=978) timeout (978ms) for bootstrapping
2023-11-07 01:36:41,752 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:41,752 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:41,756 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:41,756 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:41,756 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:41,862 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:41,863 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:41,864 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:41,864 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:41,973 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:41,973 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:41,974 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:41,974 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:41,974 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:41,974 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:41,974 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:41,974 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:41,974 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:41,974 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:41,974 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:41,975 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:41,975 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:41,976 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,977 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,979 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,979 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,979 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,981 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,982 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:41,983 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,983 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,983 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,983 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,984 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,985 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,985 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:41,985 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,986 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,987 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,988 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,989 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,989 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:41,989 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,989 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,989 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,990 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,992 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:41,992 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:41,995 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,654 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=660, lastRpcResponseTime=980) timeout (980ms) for bootstrapping
2023-11-07 01:36:42,654 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:42,654 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:42,659 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:42,659 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:42,659 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:42,767 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:42,768 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:42,769 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:42,769 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:42,877 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:42,877 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:42,878 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:42,878 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:42,878 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:42,878 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:42,878 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:42,878 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:42,878 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:42,878 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:42,878 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:42,878 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:42,879 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:42,880 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,880 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,884 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,884 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,884 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,886 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,888 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:42,888 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,889 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,890 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,890 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,891 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,891 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,894 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:42,894 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,895 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,896 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,896 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,896 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,896 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,897 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:42,898 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,898 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,899 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,899 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:42,899 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:42,900 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,557 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=658, lastRpcResponseTime=979) timeout (979ms) for bootstrapping
2023-11-07 01:36:43,557 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:43,557 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:43,560 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:43,561 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:43,561 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:43,667 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:43,668 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:43,669 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:43,669 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:43,776 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:43,776 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:43,776 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:43,777 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:43,777 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:43,777 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:43,777 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:43,777 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:43,777 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:43,777 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:43,777 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:43,777 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:43,778 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:43,778 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,779 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,780 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,780 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,780 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,781 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,782 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:43,782 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,783 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,783 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,783 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,784 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,784 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,788 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:43,788 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,789 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,789 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,789 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,790 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,790 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:43,790 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,790 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,792 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,792 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,792 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:43,793 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:43,794 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,459 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=668, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2023-11-07 01:36:44,459 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:44,460 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:44,463 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:44,463 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:44,463 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:44,569 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:44,571 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:44,571 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:44,571 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:44,678 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:44,678 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:44,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:44,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:44,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:44,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:44,679 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:44,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:44,679 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:44,679 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:44,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:44,679 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:44,680 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:44,681 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,681 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,682 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,682 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,683 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,683 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,683 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:44,684 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,684 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,685 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,685 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,685 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,686 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,688 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:44,688 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,689 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,689 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,689 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,690 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,690 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,693 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:44,693 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,693 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,695 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,695 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:44,695 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:44,696 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,361 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=666, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2023-11-07 01:36:45,362 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:45,362 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:45,366 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:45,366 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:45,366 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:45,477 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:45,483 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:45,484 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:45,484 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:45,590 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:45,591 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:45,591 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:45,591 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:45,591 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:45,591 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:45,592 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:45,592 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:45,592 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:45,592 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:45,592 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:45,592 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:45,593 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:45,593 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,594 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,595 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,595 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,596 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,596 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,597 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:45,598 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,598 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,599 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,599 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,600 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,600 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,602 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:45,603 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,603 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,604 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,604 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,605 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,605 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,608 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:45,609 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,609 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,610 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,610 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:45,610 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:45,611 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,264 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=654, lastRpcResponseTime=972) timeout (972ms) for bootstrapping
2023-11-07 01:36:46,264 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:46,264 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:46,268 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:46,269 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:46,269 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:46,376 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:46,378 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:46,379 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:46,379 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:46,485 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:46,486 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:46,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:46,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:46,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:46,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:46,486 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:46,486 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:46,486 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:46,486 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:46,487 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:46,487 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:46,487 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:46,488 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,488 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,490 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,491 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,491 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,491 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,492 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:46,496 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,497 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,501 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,501 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,501 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,501 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,503 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:46,503 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,504 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,504 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$start$6(349)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:36:46,506 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,506 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,508 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,508 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,508 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:46,509 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,509 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,510 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,510 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:46,510 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:46,510 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,167 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=657, lastRpcResponseTime=981) timeout (981ms) for bootstrapping
2023-11-07 01:36:47,167 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:47,167 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:47,170 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:47,171 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:47,171 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:47,277 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:47,280 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:47,280 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:47,280 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:47,387 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:47,387 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:47,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:47,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:47,388 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:47,388 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:47,388 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:47,388 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:47,388 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:47,388 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:47,388 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:47,388 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:47,389 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:47,389 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,390 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,390 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,391 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,391 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,392 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,392 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:47,393 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,393 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,393 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,393 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,395 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,395 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,396 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:47,396 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,396 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,397 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,398 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,398 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,399 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:47,399 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,400 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,401 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,401 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,403 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:47,403 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:47,403 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,069 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=669, lastRpcResponseTime=981) timeout (981ms) for bootstrapping
2023-11-07 01:36:48,069 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:48,069 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:48,073 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:48,073 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:48,073 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:48,179 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:48,181 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:48,181 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:48,181 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:48,290 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:48,290 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:48,290 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:48,290 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:48,290 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:48,291 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:48,291 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:48,291 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:48,291 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:48,291 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:48,291 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:48,291 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:48,292 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:48,292 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,293 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,294 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,294 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,294 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,294 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,295 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:48,295 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,295 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,298 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,298 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,298 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,299 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,300 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:48,301 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,302 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,302 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,302 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,303 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,304 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,305 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:48,306 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,307 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,307 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,307 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:48,308 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,309 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:48,971 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=665, lastRpcResponseTime=980) timeout (980ms) for bootstrapping
2023-11-07 01:36:48,971 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:48,972 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:48,976 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:48,976 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:48,976 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:49,082 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:49,083 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:49,083 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:49,083 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:49,190 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:49,190 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:49,190 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:49,190 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:49,190 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:49,190 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:49,190 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:49,191 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:49,191 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:49,191 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:49,191 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:49,191 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:49,192 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:49,192 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,193 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,194 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,194 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,195 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,195 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,197 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:49,197 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,197 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,198 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,198 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,199 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,199 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,200 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:49,200 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,200 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,201 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,201 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,202 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,202 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,203 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:49,203 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,203 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,204 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,205 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:49,205 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,205 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:49,873 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=669, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:36:49,873 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:49,874 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:49,877 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:49,877 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:49,877 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:49,983 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:49,985 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:49,985 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:49,985 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:50,091 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:50,091 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:50,092 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:50,092 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:50,092 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:50,092 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:50,092 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:50,092 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:50,092 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:50,092 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:50,092 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:50,092 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:50,093 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:50,094 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,094 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,095 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,095 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,095 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,096 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,097 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:50,097 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,098 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,098 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,099 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,099 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,099 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,100 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:50,100 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,100 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,102 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,102 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,103 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,103 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,104 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:50,104 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,105 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,106 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,106 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,106 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,107 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,635 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:50,636 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,637 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,637 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,637 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,638 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,639 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,775 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=136, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:36:50,776 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:50,776 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:50,779 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:50,779 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:50,779 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:50,885 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:50,887 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:50,887 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:50,887 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:50,994 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:50,994 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:50,994 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:50,994 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:50,994 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:50,994 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:50,995 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:50,995 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:50,995 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:50,995 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:50,995 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:50,995 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:50,996 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:50,996 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,997 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,997 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,997 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:50,998 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,998 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:50,999 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:50,999 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,000 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,000 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,000 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,001 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,001 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,003 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:51,003 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,003 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,006 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,006 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,006 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,006 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,008 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:51,008 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,009 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,009 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,009 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,010 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,010 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,678 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=669, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:36:51,678 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:51,678 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:51,681 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:51,682 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:51,682 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:51,788 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:51,789 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:51,789 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:51,789 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:51,896 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:51,896 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:51,896 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:51,896 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:51,897 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:51,897 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:51,897 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:51,897 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:51,897 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:51,897 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:51,897 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:51,897 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:51,898 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:51,898 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,899 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,899 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,899 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,900 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,900 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,902 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:51,902 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,902 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,903 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,903 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,903 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,904 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:51,904 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,904 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,905 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,905 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,906 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,906 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,906 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,907 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:51,908 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,909 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,909 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,909 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:51,909 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:51,910 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,501 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:52,501 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,502 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,503 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,503 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,503 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,503 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,580 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=76, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:36:52,580 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:52,581 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:52,584 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:52,584 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:52,584 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:52,691 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:52,693 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:52,694 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:52,694 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:52,803 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:52,804 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:52,804 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:52,804 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:52,804 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:52,804 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:52,804 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:52,805 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:52,805 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:52,805 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:52,805 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:52,805 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:52,806 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:52,806 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,806 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,808 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,808 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,808 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,808 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,810 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:52,811 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,811 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,812 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,812 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,812 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,813 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,820 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:52,820 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,821 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,822 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,822 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,822 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,822 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,823 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:52,823 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,823 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,824 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,824 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:52,825 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:52,825 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,482 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=658, lastRpcResponseTime=977) timeout (977ms) for bootstrapping
2023-11-07 01:36:53,482 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:53,482 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:53,485 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:53,485 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:53,485 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:53,591 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:53,593 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:53,593 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:53,593 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:53,700 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:53,701 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:53,701 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:53,701 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:53,701 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:53,701 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:53,701 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:53,701 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:53,702 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:53,702 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:53,702 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:53,702 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:53,703 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:53,703 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,704 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,704 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,705 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,705 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,705 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,706 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:53,706 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,707 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,707 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,708 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,708 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,709 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,709 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:53,711 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,711 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,712 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,712 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,713 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,713 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,715 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:53,715 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,715 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,716 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,716 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:53,716 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:53,716 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,384 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=668, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:36:54,384 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:54,385 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:54,387 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:54,387 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:54,387 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:54,493 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:54,494 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:54,494 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:54,494 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:54,601 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:54,601 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:54,602 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:54,602 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:54,602 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:54,602 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:54,602 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:54,602 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:54,602 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:54,602 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:54,602 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:54,602 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:54,603 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:54,603 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,604 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,604 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,604 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,606 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,606 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,608 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:54,608 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,609 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,609 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,610 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,611 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,611 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,613 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:54,613 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,614 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,614 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,615 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,616 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,617 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,617 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:54,617 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,618 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,618 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,620 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:54,621 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:54,622 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,286 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=667, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:36:55,286 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:55,287 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:55,290 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:55,290 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:55,290 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:55,398 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:55,400 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:55,400 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:55,400 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:55,507 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:55,507 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:55,507 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:55,508 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:55,508 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:55,508 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:55,508 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:55,508 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:55,508 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:55,508 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:55,508 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:55,508 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:55,509 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:55,509 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,510 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,510 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,511 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,511 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,512 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,513 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:55,513 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,514 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,514 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,515 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,515 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,516 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:55,516 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,516 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,518 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,519 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,519 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,519 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,520 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,522 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:55,522 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,522 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,523 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,523 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:55,524 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:55,524 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,188 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=666, lastRpcResponseTime=980) timeout (980ms) for bootstrapping
2023-11-07 01:36:56,189 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:56,189 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:56,192 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:56,192 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:56,192 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:56,298 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:56,299 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:56,300 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:56,300 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:56,406 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:56,406 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:56,407 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:56,407 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:56,407 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:56,407 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:56,407 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:56,407 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:56,407 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:56,407 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:56,407 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:56,407 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:56,408 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:56,408 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,409 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,410 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,410 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,411 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,411 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,412 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:56,412 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,413 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,413 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,414 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,414 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,415 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,416 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:56,416 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,417 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,418 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,418 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,418 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,419 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,419 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:56,419 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,420 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,420 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,420 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:56,421 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,421 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:56,504 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$start$6(349)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:36:57,091 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=671, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:36:57,091 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:57,091 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:57,094 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:57,094 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:57,094 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:57,200 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:57,201 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:57,202 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:57,202 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:57,308 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:57,308 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:57,308 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:57,308 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:57,308 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:57,308 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:57,309 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:57,309 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:57,309 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:57,309 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:57,309 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:57,309 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:57,310 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:57,310 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,310 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,311 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,311 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,311 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,311 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,312 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:57,312 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,313 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,313 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,314 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,314 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,314 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,315 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:57,316 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,316 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,318 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,318 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,318 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,319 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,320 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:57,321 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,321 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,322 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,322 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:57,323 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,323 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:57,993 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=670, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:36:57,993 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:57,993 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:57,997 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:57,997 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:57,997 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:58,103 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:58,106 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:58,107 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:58,107 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:58,216 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:58,216 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:58,216 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:58,216 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:58,216 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:58,216 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:58,216 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:58,216 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:58,217 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:58,217 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:58,217 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:58,217 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:58,217 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:58,218 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,218 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,219 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,219 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,220 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,221 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,222 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:58,223 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,224 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,224 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,224 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,225 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,226 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,227 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:58,228 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,228 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,233 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,233 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,235 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,236 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,237 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:58,238 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,239 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,239 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,239 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:58,240 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,240 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:58,896 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=655, lastRpcResponseTime=979) timeout (979ms) for bootstrapping
2023-11-07 01:36:58,896 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:58,896 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:58,899 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:58,899 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:58,899 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:59,005 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:59,008 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:59,008 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:59,008 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:59,117 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:59,117 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:59,117 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:36:59,117 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:36:59,117 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:36:59,117 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:36:59,117 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:36:59,118 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:36:59,118 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:36:59,118 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:36:59,118 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:36:59,118 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:36:59,118 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:59,119 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,120 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,121 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,121 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,121 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,122 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,122 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:59,123 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,124 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,124 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,124 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,124 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,125 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,125 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:59,125 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,126 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,126 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,126 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,127 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,127 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,131 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:36:59,131 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,131 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,131 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,132 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,132 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:36:59,133 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:36:59,797 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=666, lastRpcResponseTime=980) timeout (980ms) for bootstrapping
2023-11-07 01:36:59,798 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:36:59,798 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:36:59,800 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:59,801 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:36:59,801 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:36:59,907 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:36:59,909 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:36:59,909 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:36:59,909 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:00,017 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:00,017 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:00,017 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:00,017 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:00,017 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:00,017 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:00,017 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:00,018 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:00,018 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:00,018 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:00,018 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:00,018 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:00,019 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:00,019 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,019 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,020 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,020 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,020 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,021 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,022 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:00,023 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,023 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,024 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,024 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,024 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,024 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,026 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:00,026 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,027 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,027 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,027 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,027 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,027 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,028 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:00,028 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,028 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,029 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,029 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,029 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,029 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,699 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=671, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2023-11-07 01:37:00,700 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:00,700 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:00,702 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:00,703 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:00,703 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:00,809 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:00,810 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:00,811 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:00,811 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:00,918 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:00,918 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:00,919 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:00,919 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:00,919 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:00,919 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:00,919 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:00,919 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:00,919 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:00,919 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:00,919 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:00,919 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:00,920 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:00,920 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,921 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,921 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,921 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,922 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,922 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,923 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:00,923 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,923 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,924 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,925 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,927 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:00,927 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,927 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,927 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,927 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,928 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,928 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,929 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,929 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,931 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:00,932 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,932 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,933 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,933 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:00,934 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:00,934 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,601 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=668, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2023-11-07 01:37:01,601 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:01,602 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:01,604 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:01,604 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:01,604 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:01,710 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:01,711 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:01,712 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:01,712 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:01,818 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:01,818 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:01,818 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:01,819 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:01,819 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:01,819 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:01,819 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:01,819 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:01,819 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:01,819 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:01,819 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:01,819 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:01,820 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:01,820 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,821 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,821 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,821 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,822 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,822 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,823 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:01,823 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,823 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,824 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,824 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,825 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:01,825 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,826 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,826 [grpc-default-executor-0] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,827 [grpc-default-executor-0] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,827 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,827 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,827 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,827 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,828 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:01,829 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,829 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,833 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,833 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:01,833 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:01,833 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,492 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:02,493 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,493 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,494 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,494 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,494 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,495 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,503 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=9, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:02,503 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:02,504 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:02,506 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:02,506 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:02,506 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:02,613 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:02,615 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:02,615 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:02,615 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:02,721 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:02,721 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:02,722 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:02,722 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:02,722 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:02,722 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:02,722 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:02,722 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:02,722 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:02,722 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:02,723 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:02,723 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:02,724 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:02,724 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,724 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,725 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,725 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,725 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,725 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,727 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:02,728 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,728 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,729 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,729 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,729 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,730 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,731 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:02,731 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,732 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,732 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,732 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,733 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,733 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,733 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:02,734 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,734 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,734 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,735 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:02,735 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:02,735 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,405 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=670, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:03,405 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:03,406 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:03,408 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:03,408 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:03,408 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:03,513 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:03,515 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:03,515 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:03,515 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:03,623 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:03,624 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:03,624 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:03,624 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:03,624 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:03,624 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:03,624 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:03,624 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:03,624 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:03,625 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:03,625 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:03,625 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:03,625 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:03,626 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,626 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,627 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,627 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,627 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,627 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,628 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:03,628 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,629 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,630 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,630 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,630 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,630 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,632 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:03,632 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,633 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,633 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,635 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,635 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,635 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,637 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:03,637 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,637 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,638 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,639 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:03,639 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:03,639 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,283 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:04,284 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,284 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,285 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,285 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,285 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,285 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,307 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=23, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:04,307 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:04,307 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:04,310 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:04,310 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:04,310 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:04,416 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:04,417 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:04,418 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:04,418 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:04,524 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:04,524 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:04,525 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:04,525 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:04,525 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:04,525 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:04,525 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:04,525 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:04,525 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:04,525 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:04,525 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:04,525 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:04,526 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:04,526 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,527 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,527 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,528 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,528 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,528 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,530 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:04,530 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,530 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,532 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,532 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,533 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,533 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,539 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:04,539 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,540 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,540 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,541 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,541 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,541 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,542 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:04,542 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,542 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,543 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,543 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:04,543 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:04,544 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,209 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=666, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:05,209 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:05,210 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:05,212 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:05,212 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:05,212 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:05,318 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:05,319 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:05,319 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:05,319 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:05,425 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:05,425 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:05,425 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:05,425 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:05,425 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:05,426 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:05,426 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:05,426 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:05,426 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:05,426 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:05,426 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:05,426 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:05,427 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:05,427 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,428 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,428 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,428 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,428 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,429 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,431 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:05,431 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,431 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,432 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,432 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,432 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,432 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:05,432 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,432 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,433 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,433 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,433 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,433 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,433 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,436 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:05,436 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,436 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,437 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,437 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:05,437 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:05,437 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,111 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=674, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:06,111 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:06,112 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:06,115 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:06,115 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:06,115 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:06,220 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:06,221 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:06,221 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:06,221 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:06,328 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:06,328 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:06,328 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:06,328 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:06,328 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:06,328 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:06,328 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:06,328 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:06,328 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:06,329 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:06,329 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:06,329 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:06,330 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:06,330 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,330 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,331 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,331 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,332 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,332 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,332 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:06,333 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,333 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,334 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,334 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,334 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,334 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,336 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:06,336 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,337 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,337 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,338 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,338 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,338 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,338 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:06,339 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,339 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,340 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,340 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:06,340 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,340 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:06,504 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$start$6(349)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:37:07,013 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=673, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:07,013 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:07,013 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:07,016 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:07,016 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:07,016 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:07,121 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:07,123 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:07,123 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:07,123 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:07,231 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:07,231 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:07,231 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:07,231 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:07,231 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:07,232 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:07,232 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:07,232 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:07,232 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:07,232 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:07,232 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:07,232 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:07,233 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:07,233 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,233 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,234 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,234 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,234 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,234 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,235 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:07,235 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,235 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,236 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,236 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,236 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,236 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,238 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:07,238 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,238 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,239 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,240 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,240 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,240 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,241 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:07,242 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,243 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,243 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,243 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,244 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,244 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,905 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:07,905 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,906 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,907 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,907 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:07,907 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,907 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:07,915 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=9, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:07,915 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:07,915 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:07,918 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:07,918 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:07,918 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:08,023 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:08,024 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:08,025 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:08,025 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:08,131 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:08,131 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:08,131 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:08,132 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:08,132 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:08,132 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:08,132 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:08,132 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:08,132 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:08,132 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:08,132 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:08,132 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:08,133 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:08,133 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,133 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,134 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,134 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,134 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,134 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,136 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:08,136 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,137 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,137 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,138 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,138 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,138 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,140 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:08,141 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,141 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,141 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,141 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,141 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,142 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,144 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:08,144 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,144 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,144 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,145 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:08,145 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,145 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:08,817 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=672, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:08,817 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:08,819 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:08,820 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:08,820 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:08,820 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:08,932 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:08,934 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:08,934 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:08,934 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:09,040 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:09,040 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:09,040 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:09,040 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:09,040 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:09,040 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:09,040 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:09,041 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:09,041 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:09,041 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:09,041 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:09,041 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:09,042 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:09,042 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,042 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,043 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,043 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,043 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,043 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,045 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:09,045 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,046 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,047 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,048 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,048 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,048 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,049 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:09,049 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,049 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,050 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,050 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,050 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,050 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,051 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:09,052 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,052 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,053 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,053 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,053 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,054 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,719 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=665, lastRpcResponseTime=978) timeout (978ms) for bootstrapping
2023-11-07 01:37:09,719 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:09,719 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:09,722 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:09,722 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:09,722 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:09,828 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:09,830 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:09,830 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:09,830 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:09,936 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:09,937 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:09,937 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:09,937 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:09,937 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:09,937 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:09,937 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:09,937 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:09,937 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:09,938 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:09,938 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:09,938 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:09,938 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:09,938 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,939 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,939 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,939 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,939 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,940 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,941 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:09,941 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,941 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,942 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,942 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,942 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,942 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,944 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:09,944 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,945 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,945 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,945 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,945 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,947 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,947 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:09,948 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,948 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,948 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,948 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:09,949 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:09,949 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,620 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=672, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:10,621 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:10,621 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:10,623 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:10,624 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:10,624 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:10,730 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:10,731 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:10,731 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:10,731 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:10,837 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:10,837 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:10,837 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:10,837 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:10,838 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:10,838 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:10,838 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:10,838 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:10,838 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:10,838 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:10,838 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:10,838 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:10,839 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:10,839 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,839 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,840 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,840 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,841 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,842 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,843 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:10,843 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,844 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,844 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,844 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,844 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,845 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,846 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:10,847 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,847 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,848 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,848 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,848 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,848 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,850 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:10,850 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,850 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,851 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,851 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:10,851 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:10,851 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,522 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=671, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:11,522 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:11,523 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:11,525 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:11,525 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:11,525 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:11,632 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:11,633 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:11,633 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:11,633 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:11,739 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:11,739 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:11,740 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:11,740 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:11,740 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:11,740 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:11,740 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:11,740 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:11,740 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:11,740 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:11,740 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:11,740 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:11,741 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:11,741 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,742 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,742 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,742 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,743 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,743 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,743 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:11,744 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,744 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,744 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,744 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,745 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,745 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,745 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:11,746 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,746 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,746 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,746 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,746 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,747 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,747 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:11,747 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,748 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,748 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,748 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:11,748 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:11,748 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,424 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:12,424 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:12,424 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:12,427 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:12,427 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:12,427 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:12,533 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:12,535 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:12,535 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:12,535 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:12,643 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:12,644 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:12,644 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:12,644 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:12,644 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:12,644 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:12,644 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:12,644 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:12,644 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:12,645 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:12,645 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:12,645 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:12,646 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:12,646 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,646 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,647 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,647 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,647 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,647 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,649 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:12,649 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,650 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,650 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,651 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,651 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,651 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:12,651 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,652 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,652 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,652 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,652 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,653 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,653 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,654 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:12,655 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,655 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,658 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,659 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:12,659 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:12,659 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,326 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=670, lastRpcResponseTime=981) timeout (981ms) for bootstrapping
2023-11-07 01:37:13,326 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:13,326 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:13,329 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:13,329 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:13,329 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:13,436 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:13,438 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:13,438 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:13,438 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:13,545 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:13,546 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:13,546 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:13,546 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:13,546 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:13,546 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:13,546 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:13,546 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:13,546 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:13,546 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:13,546 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:13,547 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:13,547 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:13,548 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,548 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,549 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,549 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,550 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,550 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:13,550 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,550 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,550 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,550 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,551 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,551 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,551 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,552 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:13,553 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,553 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,554 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,554 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,554 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,554 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,557 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:13,557 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,557 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,558 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,558 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:13,559 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:13,559 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,228 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=669, lastRpcResponseTime=981) timeout (981ms) for bootstrapping
2023-11-07 01:37:14,228 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:14,228 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:14,230 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:14,230 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:14,230 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:14,336 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:14,338 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:14,338 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:14,339 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:14,447 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:14,447 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:14,447 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:14,447 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:14,447 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:14,447 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:14,447 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:14,447 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:14,448 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:14,448 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:14,448 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:14,448 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:14,448 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:14,449 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,449 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,450 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,450 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,450 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,450 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,451 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:14,451 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,451 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,452 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,452 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,452 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,452 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,454 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:14,454 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,454 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,455 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,455 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,455 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,455 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,456 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:14,456 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,456 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,457 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,457 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:14,457 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:14,458 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,129 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=671, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2023-11-07 01:37:15,130 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:15,130 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:15,133 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:15,133 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:15,133 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:15,242 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:15,244 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:15,244 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:15,244 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:15,349 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:15,349 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:15,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:15,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:15,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:15,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:15,350 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:15,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:15,350 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:15,350 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:15,350 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:15,350 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:15,351 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:15,351 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,351 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,352 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,352 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,352 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,352 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,354 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:15,354 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,355 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,355 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,355 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,355 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,356 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,356 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:15,356 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,357 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,357 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,357 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,358 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,358 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,359 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:15,359 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,360 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,360 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,360 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:15,360 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:15,360 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,031 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=671, lastRpcResponseTime=981) timeout (981ms) for bootstrapping
2023-11-07 01:37:16,031 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:16,032 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:16,034 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:16,034 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:16,034 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:16,141 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:16,143 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:16,143 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:16,143 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:16,249 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:16,249 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:16,249 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:16,249 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:16,249 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:16,250 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:16,250 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:16,250 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:16,250 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:16,250 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:16,250 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:16,250 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:16,251 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:16,251 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,251 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,252 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,252 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,252 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,252 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,254 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:16,254 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,255 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,255 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,255 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,255 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,255 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,257 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:16,257 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,258 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,259 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,259 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,259 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,259 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,261 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:16,261 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,261 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,262 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,262 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:16,263 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,263 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:16,504 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$start$6(349)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:37:16,933 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=670, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:16,933 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:16,934 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:16,936 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:16,936 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:16,937 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:17,042 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:17,044 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:17,044 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:17,044 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:17,150 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:17,150 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:17,150 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:17,150 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:17,150 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:17,150 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:17,150 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:17,150 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:17,151 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:17,151 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:17,151 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:17,151 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:17,151 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:17,152 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,152 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,153 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,153 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,153 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,153 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,155 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:17,155 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,156 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,156 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,156 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,156 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,156 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,157 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:17,157 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,157 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,158 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,159 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,159 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:17,159 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,159 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,160 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,160 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,160 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:17,161 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,161 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,161 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:17,835 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=675, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:17,836 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:17,836 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:17,838 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:17,838 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:17,838 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:17,943 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:17,944 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:17,945 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:17,945 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:18,053 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:18,053 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:18,053 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:18,054 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:18,054 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:18,054 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:18,054 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:18,054 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:18,054 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:18,054 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:18,054 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:18,054 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:18,055 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:18,056 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,056 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,056 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,056 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,057 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,057 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,059 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:18,059 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,059 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,060 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,060 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,060 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,060 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,064 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:18,065 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,065 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,066 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,066 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,066 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,066 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,068 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:18,068 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,069 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,069 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,069 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,069 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,069 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,737 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=668, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:18,737 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:18,737 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:18,740 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:18,740 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:18,740 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:18,846 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:18,847 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:18,847 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:18,848 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:18,953 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:18,953 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:18,953 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:18,954 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:18,954 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:18,954 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:18,954 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:18,954 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:18,954 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:18,954 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:18,954 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:18,954 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:18,955 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:18,955 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,956 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,956 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,956 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,957 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,957 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,957 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:18,957 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,958 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,958 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,958 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,959 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,959 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,959 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:18,960 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,960 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,960 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,961 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,961 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,962 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,963 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:18,963 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,963 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,964 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,964 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:18,964 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:18,965 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,639 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=675, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:19,639 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:19,639 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:19,642 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:19,643 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:19,643 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:19,748 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:19,749 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:19,750 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:19,750 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:19,857 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:19,858 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:19,858 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:19,858 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:19,858 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:19,858 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:19,858 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:19,858 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:19,858 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:19,858 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:19,858 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:19,859 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:19,859 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:19,860 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,860 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,861 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,861 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,861 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,861 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,862 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:19,862 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,862 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,862 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,862 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,863 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,863 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,864 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:19,864 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,864 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,865 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,865 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,865 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,866 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,868 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:19,868 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,869 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,869 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,869 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:19,870 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:19,870 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,541 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=672, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2023-11-07 01:37:20,541 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:20,542 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:20,543 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:20,543 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:20,543 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:20,648 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:20,650 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:20,650 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:20,650 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:20,757 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:20,758 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:20,759 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:20,760 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,760 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,761 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,761 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,761 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,761 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,762 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:20,762 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,763 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,763 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,763 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,765 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,765 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,766 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:20,766 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,767 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,767 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,767 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,767 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,767 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,768 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:20,769 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,769 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,771 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,771 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:20,771 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:20,771 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,442 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=670, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:21,443 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:21,443 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:21,445 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:21,445 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:21,445 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:21,551 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:21,552 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:21,552 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:21,552 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:21,659 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:21,659 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:21,659 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:21,660 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:21,660 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:21,660 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:21,660 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:21,660 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:21,660 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:21,660 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:21,660 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:21,660 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:21,661 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:21,662 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,662 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,664 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,664 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,664 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,665 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,666 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:21,666 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,666 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,667 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,667 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,667 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,667 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,669 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:21,670 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,670 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,671 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,671 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,671 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,671 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,672 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:21,672 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,673 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,673 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,673 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:21,673 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:21,673 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,344 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=671, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:22,344 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:22,345 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:22,347 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:22,347 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:22,348 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:22,453 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:22,455 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:22,455 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:22,455 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:22,561 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:22,561 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:22,561 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:22,561 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:22,561 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:22,561 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:22,562 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:22,562 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:22,562 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:22,562 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:22,562 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:22,562 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:22,562 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:22,563 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,563 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,564 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,564 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,564 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,565 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,565 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:22,565 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,565 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,566 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,566 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,566 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,566 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,568 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:22,568 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,569 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,572 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,573 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,573 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,574 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,576 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:22,576 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,576 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,578 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,579 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:22,579 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:22,579 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,159 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:23,159 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,160 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,161 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,161 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,161 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,161 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,246 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=85, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:23,246 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:23,247 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:23,249 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:23,249 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:23,249 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:23,356 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:23,357 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:23,358 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:23,358 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:23,464 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:23,464 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:23,465 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:23,465 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:23,465 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:23,465 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:23,465 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:23,465 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:23,465 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:23,465 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:23,465 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:23,465 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:23,466 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:23,467 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,467 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,468 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,468 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,468 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:23,469 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,469 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,470 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,470 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,470 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,470 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,470 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,471 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,473 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:23,474 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,474 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,474 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,474 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,475 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,475 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,475 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:23,476 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,476 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,476 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,476 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:23,477 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:23,477 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,148 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=672, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:24,148 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:24,149 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:24,151 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:24,151 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:24,151 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:24,257 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:24,258 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:24,258 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:24,259 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:24,363 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:24,364 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:24,364 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:24,364 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:24,364 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:24,364 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:24,364 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:24,364 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:24,365 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:24,365 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:24,365 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:24,365 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:24,365 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:24,366 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,366 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,367 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,367 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,367 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,367 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,368 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:24,368 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,368 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,369 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,369 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,369 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,369 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,370 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:24,370 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,370 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,371 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,371 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,371 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,371 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,373 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:24,373 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,373 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,374 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,374 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:24,374 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:24,374 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,050 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2023-11-07 01:37:25,050 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:25,051 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:25,052 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:25,053 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:25,053 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:25,158 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:25,159 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:25,159 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:25,159 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:25,265 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:25,265 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:25,265 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:25,266 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:25,266 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:25,266 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:25,266 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:25,266 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:25,266 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:25,266 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:25,266 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:25,266 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:25,267 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:25,267 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,268 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,268 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,268 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,268 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,269 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,270 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:25,271 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,271 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,271 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,271 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,271 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,272 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,273 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:25,274 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,274 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,274 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,274 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,274 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,275 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,276 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:25,276 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,276 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,276 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,277 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,277 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:25,278 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:25,952 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2023-11-07 01:37:25,952 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:25,952 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:25,955 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:25,955 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:25,955 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:26,060 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:26,061 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:26,061 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:26,061 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:26,167 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:26,167 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:26,167 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:26,167 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:26,167 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:26,167 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:26,168 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:26,168 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:26,168 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:26,168 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:26,168 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:26,168 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:26,169 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:26,169 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,169 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,170 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,170 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,170 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,170 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,172 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:26,172 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,173 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,173 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,173 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,173 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,173 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,175 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:26,176 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,176 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,176 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,176 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,176 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,177 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,177 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:26,177 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,178 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,178 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,178 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,178 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:26,179 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:26,504 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$start$6(349)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:37:26,854 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2023-11-07 01:37:26,854 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:26,854 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:26,858 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:26,858 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:26,858 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:26,964 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:26,965 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:26,965 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:26,965 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:27,071 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:27,071 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:27,072 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:27,072 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:27,072 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:27,072 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:27,072 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:27,072 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:27,072 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:27,072 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:27,072 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:27,072 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:27,074 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:27,075 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,075 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,075 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,075 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,075 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,076 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,078 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:27,078 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,078 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,078 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,078 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,079 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,079 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,080 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:27,080 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,080 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,081 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,081 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,081 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,081 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,083 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:27,083 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,083 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,084 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,084 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,084 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,084 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,691 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:27,692 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,692 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,692 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,692 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,692 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,692 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,756 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=64, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:27,756 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:27,756 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:27,759 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:27,759 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:27,760 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:27,866 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:27,869 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:27,869 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:27,869 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:27,974 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:27,974 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:27,975 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:27,975 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:27,975 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:27,975 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:27,975 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:27,975 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:27,975 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:27,975 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:27,975 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:27,975 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:27,976 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:27,976 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,976 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,977 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,978 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,978 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,979 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,980 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:27,980 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,981 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,981 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,981 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,982 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,982 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,983 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:27,984 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,984 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,985 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,985 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,985 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,986 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,986 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:27,986 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,987 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,987 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,987 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:27,988 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:27,988 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,658 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=670, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:28,658 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:28,659 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:28,661 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:28,661 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:28,661 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:28,767 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:28,768 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:28,768 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:28,768 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:28,874 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:28,874 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:28,874 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:28,874 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:28,874 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:28,875 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:28,875 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:28,875 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:28,875 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:28,875 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:28,875 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:28,875 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:28,875 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:28,876 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,876 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,877 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,877 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,877 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,878 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,878 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:28,879 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,879 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,879 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,880 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,882 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,882 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,883 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:28,883 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,883 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,884 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,884 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,885 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,885 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,886 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:28,886 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,887 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,887 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,888 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:28,888 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:28,888 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,560 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=672, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:29,560 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:29,561 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:29,563 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:29,563 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:29,563 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:29,668 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:29,669 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:29,670 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:29,670 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:29,776 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:29,776 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:29,776 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:29,776 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:29,776 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:29,776 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:29,776 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:29,776 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:29,777 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:29,777 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:29,777 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:29,777 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:29,778 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:29,778 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,778 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,779 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,779 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,780 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,780 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,780 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:29,780 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,781 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,781 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,781 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,782 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,782 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,783 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:29,783 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,784 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,784 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,785 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,785 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,785 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,787 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:29,788 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,788 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,788 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,788 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:29,788 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:29,789 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,323 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:30,324 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,324 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,325 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,325 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,325 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,325 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,462 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=137, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2023-11-07 01:37:30,462 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:30,463 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:30,465 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:30,465 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:30,465 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:30,570 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:30,571 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:30,571 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:30,571 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:30,679 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:30,679 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:30,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:30,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:30,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:30,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:30,679 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:30,679 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:30,679 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:30,680 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:30,680 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:30,680 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:30,681 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:30,681 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,681 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,682 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,682 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,682 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,683 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,684 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:30,684 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,685 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,685 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,685 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,685 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,686 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,687 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:30,687 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,688 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,688 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,688 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,689 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,689 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,690 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:30,690 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,690 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,704 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,704 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:30,705 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:30,705 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,364 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=674, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:31,364 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:31,365 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:31,367 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:31,367 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:31,367 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:31,472 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:31,473 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:31,474 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:31,474 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:31,579 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:31,579 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:31,579 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:31,579 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:31,579 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:31,580 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:31,580 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:31,580 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:31,580 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:31,580 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:31,580 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:31,580 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:31,581 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:31,581 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,581 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,582 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,582 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,582 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,582 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,583 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:31,583 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,583 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,585 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,586 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,586 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,586 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,588 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:31,588 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,588 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,588 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,588 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,589 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,589 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,590 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:31,590 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,590 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,590 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,591 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:31,591 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:31,591 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,266 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=675, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2023-11-07 01:37:32,266 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:32,266 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:32,269 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:32,270 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:32,270 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:32,376 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:32,378 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:32,378 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:32,378 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:32,483 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:32,484 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:32,485 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:32,485 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,486 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,487 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,487 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,487 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,487 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,489 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:32,489 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,489 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,489 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,490 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,490 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,490 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,490 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:32,490 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,490 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,491 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,491 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,491 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,491 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,492 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:32,492 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,492 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,493 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,493 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:32,493 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:32,493 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,168 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=674, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:33,168 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:33,168 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:33,170 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:33,170 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:33,170 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:33,276 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:33,280 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:33,280 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:33,280 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:33,387 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:33,387 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:33,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:33,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:33,387 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:33,388 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:33,388 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:33,388 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:33,388 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:33,388 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:33,388 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:33,388 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:33,389 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:33,389 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,389 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,390 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,390 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,390 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,391 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,392 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:33,392 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,392 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,393 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,393 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,393 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,393 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,393 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:33,394 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,394 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,395 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,395 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,395 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,395 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,396 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:33,396 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,397 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,397 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,397 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:33,398 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:33,398 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,070 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=672, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2023-11-07 01:37:34,070 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:34,070 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:34,073 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:34,073 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:34,073 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:34,178 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:34,180 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:34,180 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:34,180 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:34,286 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:34,287 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:34,288 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:34,288 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,289 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,289 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,289 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,289 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,289 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,292 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:34,293 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,293 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,294 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,294 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,294 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,295 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,296 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:34,296 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,296 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,296 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,297 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,297 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,297 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,299 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:34,299 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,299 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,299 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,300 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,302 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:34,302 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:34,971 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=672, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:34,971 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:34,972 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:34,974 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:34,974 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:34,974 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:35,080 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:35,081 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:35,082 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:35,082 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:35,187 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:35,188 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:35,189 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:35,189 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,190 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,191 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,191 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,191 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,193 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,193 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:35,193 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,193 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,194 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,194 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,194 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,194 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,196 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:35,196 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,196 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,196 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,196 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,197 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,197 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,197 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:35,198 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,198 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,198 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,198 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,198 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,199 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,869 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:35,869 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,870 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,870 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,870 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:35,870 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,871 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:35,873 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=3, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:35,873 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:35,873 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:35,875 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:35,875 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:35,875 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:35,980 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:35,983 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:35,983 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:35,983 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:36,089 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:36,089 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:36,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:36,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:36,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:36,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:36,090 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:36,090 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:36,090 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:36,091 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:36,091 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:36,091 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:36,091 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:36,092 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,092 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,093 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,093 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,093 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,093 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,094 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:36,094 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,095 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,095 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,095 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,096 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,096 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,097 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:36,097 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,097 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,098 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,098 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,098 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,098 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,099 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:36,100 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,100 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,100 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,100 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,100 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,101 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,504 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$start$6(349)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:37:36,775 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=674, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:36,775 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:36,775 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:36,777 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:36,777 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:36,777 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:36,883 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:36,884 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:36,884 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:36,884 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:36,989 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:36,989 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:36,989 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:36,989 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:36,989 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:36,990 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:36,990 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:36,990 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:36,990 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:36,990 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:36,990 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:36,990 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:36,990 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:36,991 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,991 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,992 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,992 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,992 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,992 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,994 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:36,994 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,994 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,994 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,995 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,995 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,995 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,995 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:36,995 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,996 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,996 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,996 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,996 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,996 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,997 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:36,997 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,997 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,997 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,997 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:36,998 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:36,998 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,676 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=679, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2023-11-07 01:37:37,677 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:37,677 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:37,679 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:37,680 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:37,680 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:37,787 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:37,789 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:37,789 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:37,789 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:37,894 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:37,895 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:37,895 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:37,895 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:37,895 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:37,895 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:37,895 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:37,895 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:37,896 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:37,896 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:37,896 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:37,896 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:37,897 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:37,897 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,897 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,898 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,898 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,898 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,898 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,899 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:37,899 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,900 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,900 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,900 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,901 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,901 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,901 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:37,901 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,902 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,902 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,903 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,903 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,903 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,903 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:37,903 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,904 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,904 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,905 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:37,905 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:37,905 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,490 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:38,491 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,491 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,492 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,492 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,492 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,493 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,578 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=86, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:38,578 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:38,579 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:38,581 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:38,581 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:38,581 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:38,687 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:38,689 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:38,689 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:38,689 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:38,794 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:38,795 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:38,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:38,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:38,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:38,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:38,795 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:38,795 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:38,795 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:38,795 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:38,796 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:38,796 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:38,796 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:38,797 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,797 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,798 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,798 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,798 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,799 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,799 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:38,799 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,799 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,800 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,800 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,800 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,801 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,803 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:38,803 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,804 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,804 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,804 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,805 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,805 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,806 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:38,807 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,807 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,807 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,807 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:38,808 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:38,808 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,480 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=673, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:39,480 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:39,480 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:39,482 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:39,483 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:39,483 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:39,588 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:39,589 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:39,590 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:39,590 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:39,695 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:39,696 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:39,696 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:39,696 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:39,696 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:39,696 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:39,696 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:39,696 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:39,697 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:39,697 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:39,697 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:39,697 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:39,697 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:39,698 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,698 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,699 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,699 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,699 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,699 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,701 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:39,701 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,701 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,701 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,701 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,702 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,702 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,703 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:39,704 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,704 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,704 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,704 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,704 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,704 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,706 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:39,706 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,706 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,706 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,707 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:39,707 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:39,707 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,382 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=675, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:40,382 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:40,383 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:40,384 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:40,384 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:40,384 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:40,489 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:40,490 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:40,490 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:40,490 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:40,598 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:40,598 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:40,599 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:40,599 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:40,599 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:40,599 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:40,599 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:40,599 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:40,599 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:40,599 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:40,599 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:40,599 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:40,600 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:40,600 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,601 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,601 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,601 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,602 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,602 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,603 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:40,603 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,603 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,604 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,604 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,604 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,605 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,606 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:40,607 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,607 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,608 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,608 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,608 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,608 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,609 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:40,610 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,610 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,610 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,610 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:40,610 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:40,611 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,142 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:41,142 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,143 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,143 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,143 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,143 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,143 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,283 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=140, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:41,283 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:41,284 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:41,285 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:41,286 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:41,286 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:41,390 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:41,391 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:41,391 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:41,391 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:41,497 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:41,497 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:41,498 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:41,498 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:41,498 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:41,498 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:41,498 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:41,498 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:41,498 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:41,498 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:41,498 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:41,498 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:41,499 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:41,499 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,500 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,500 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,500 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,500 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,501 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,502 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:41,503 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,503 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,503 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,504 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,504 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,504 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,505 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:41,506 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,506 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,506 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,506 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,507 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,507 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,509 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:41,509 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,509 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,510 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,510 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:41,519 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:41,521 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,185 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=675, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2023-11-07 01:37:42,185 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:42,185 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:42,188 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:42,188 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:42,188 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:42,293 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:42,294 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:42,294 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:42,294 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:42,401 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:42,401 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:42,401 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:42,402 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:42,402 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:42,402 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:42,402 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:42,402 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:42,402 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:42,402 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:42,402 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:42,402 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:42,403 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:42,403 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,403 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,404 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,404 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,404 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,404 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,407 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:42,407 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,407 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,408 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,408 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,408 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,408 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,410 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:42,410 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,411 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,411 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,411 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,411 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,411 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,413 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:42,413 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,413 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,414 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,414 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:42,414 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:42,415 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,086 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=673, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:43,087 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:43,087 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:43,090 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:43,090 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:43,090 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:43,197 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:43,198 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:43,198 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:43,199 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:43,305 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:43,306 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:43,306 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:43,306 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:43,306 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:43,306 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:43,306 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:43,306 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:43,306 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:43,306 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:43,307 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:43,307 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:43,307 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:43,307 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,308 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,310 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,310 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,310 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,311 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,311 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:43,312 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,312 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,313 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,313 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,313 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,313 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,314 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:43,315 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,316 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,316 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,318 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,318 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,318 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,319 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:43,320 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,320 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,321 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,321 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:43,321 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,322 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:43,988 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=668, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2023-11-07 01:37:43,988 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:43,991 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:43,991 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:43,991 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:43,992 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:44,096 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:44,098 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:44,098 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:44,098 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:44,203 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:44,203 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:44,203 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:44,203 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:44,204 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:44,204 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:44,204 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:44,204 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:44,204 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:44,204 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:44,204 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:44,204 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:44,205 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:44,205 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,205 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,205 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,205 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,206 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,206 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,207 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:44,207 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,207 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,207 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,208 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,208 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,208 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,209 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:44,210 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,210 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,210 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,210 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,211 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,211 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,211 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:44,212 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,213 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,213 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,213 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,213 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:44,213 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:44,890 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2023-11-07 01:37:44,890 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:44,891 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:44,893 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:44,893 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:44,893 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:44,997 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:44,998 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:44,999 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:44,999 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:45,106 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:45,106 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:45,106 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:45,107 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:45,107 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:45,107 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:45,107 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:45,107 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:45,107 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:45,107 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:45,107 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:45,107 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:45,108 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:45,108 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,108 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,109 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,109 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,109 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,110 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:45,110 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,111 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,111 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,111 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,111 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,112 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,112 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,113 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:45,113 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,113 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,113 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,113 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,113 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,114 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,115 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:45,116 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,116 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,116 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,116 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:45,116 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,117 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:45,792 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:45,792 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:45,792 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:45,795 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:45,795 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:45,795 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:45,900 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:45,902 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:45,902 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:45,902 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:46,009 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:46,010 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:46,010 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:46,010 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:46,010 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:46,010 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:46,010 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:46,010 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:46,011 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:46,011 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:46,011 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:46,011 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:46,011 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:46,012 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,012 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,012 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,012 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,013 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,013 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,015 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:46,015 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,015 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,015 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,016 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,018 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:46,018 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,018 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,018 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,019 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,019 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,019 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,020 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,020 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,020 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:46,022 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,023 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,023 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,023 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,023 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,027 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,505 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$start$6(349)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:37:46,693 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=668, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:46,693 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:46,694 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:46,696 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:46,696 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:46,696 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:46,800 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:46,802 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:46,802 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:46,802 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:46,907 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:46,907 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:46,907 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:46,908 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:46,908 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:46,908 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:46,908 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:46,908 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:46,908 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:46,908 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:46,908 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:46,908 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:46,909 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:46,909 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,909 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,910 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,910 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,910 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,911 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,911 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:46,911 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,911 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,912 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,912 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,913 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,913 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,916 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:46,916 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,916 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,916 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,917 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,917 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,917 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,918 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:46,918 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,918 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,918 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,919 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:46,919 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:46,919 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,484 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:47,484 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,485 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,485 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,485 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,486 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,486 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,595 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=110, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2023-11-07 01:37:47,595 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:47,595 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:47,597 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:47,597 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:47,597 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:47,702 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:47,703 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:47,703 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:47,703 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:47,809 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:47,809 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:47,810 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:47,810 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:47,810 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:47,810 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:47,810 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:47,810 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:47,810 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:47,810 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:47,810 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:47,810 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:47,811 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:47,812 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,812 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,812 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,812 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,813 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,813 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,814 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:47,814 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,815 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,816 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,816 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,816 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,816 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,818 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:47,818 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,819 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,819 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,819 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,819 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,819 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,821 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:47,821 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,822 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,822 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,822 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:47,822 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:47,822 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,496 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=674, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2023-11-07 01:37:48,496 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:48,497 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:48,501 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:48,501 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:48,501 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:48,606 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:48,608 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:48,608 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:48,608 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:48,713 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:48,713 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:48,714 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:48,714 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:48,714 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:48,714 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:48,714 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:48,714 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:48,714 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:48,714 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:48,714 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:48,714 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:48,715 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:48,715 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,716 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,716 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,716 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,716 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,716 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,717 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:48,718 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,718 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,719 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,719 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,719 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,719 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,720 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:48,720 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,720 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,720 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,721 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,721 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,721 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,723 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:48,723 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,723 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,723 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,724 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:48,724 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:48,724 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,355 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:49,355 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,356 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,357 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,357 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,357 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,357 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,397 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=40, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:49,398 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:49,398 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:49,400 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:49,400 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:49,401 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:49,505 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:49,506 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:49,506 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:49,506 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:49,611 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:49,612 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:49,612 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:49,612 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:49,612 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:49,612 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:49,612 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:49,612 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:49,612 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:49,612 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:49,613 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:49,613 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:49,613 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:49,614 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,614 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,615 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,615 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,615 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,616 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,617 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:49,618 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,618 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,618 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,618 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,619 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,620 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,621 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:49,622 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,622 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,622 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,622 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,622 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,623 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,624 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:49,624 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,624 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,625 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,625 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:49,625 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:49,625 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,299 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=674, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2023-11-07 01:37:50,299 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:50,299 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:50,301 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:50,301 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:50,301 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:50,407 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:50,409 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:50,409 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:50,409 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:50,514 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:50,514 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:50,514 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:50,514 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:50,514 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:50,514 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:50,514 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:50,515 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:50,515 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:50,515 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:50,515 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:50,515 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:50,515 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:50,516 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,516 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,518 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,519 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,520 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,520 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,520 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:50,521 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,521 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,522 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,522 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,522 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,522 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,523 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:50,523 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,523 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,524 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,524 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,524 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,524 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,524 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:50,524 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,525 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,525 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,525 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:50,526 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:50,526 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,200 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=675, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2023-11-07 01:37:51,201 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:51,201 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:51,203 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:51,203 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:51,203 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:51,308 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:51,309 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:51,310 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:51,310 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:51,419 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:51,419 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:51,419 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:51,419 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:51,419 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:51,420 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:51,420 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:51,420 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:51,420 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:51,420 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:51,420 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:51,420 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:51,424 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:51,424 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,425 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,426 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,426 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,426 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,426 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,427 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:51,427 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,427 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,428 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,428 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,428 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,428 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,430 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:51,430 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,430 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,431 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,431 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,431 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,431 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,433 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:51,433 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,433 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,434 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,434 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:51,434 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:51,434 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,102 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=668, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2023-11-07 01:37:52,102 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:52,102 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:52,104 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:52,104 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:52,104 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:52,210 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:52,211 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:52,211 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:52,211 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:52,317 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:52,317 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:52,317 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:52,318 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:52,318 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:52,318 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:52,318 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:52,318 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:52,318 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:52,318 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:52,318 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:52,318 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:52,319 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:52,319 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,319 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,320 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,320 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,321 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,321 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,323 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:52,323 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,324 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,324 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,324 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,324 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,325 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,325 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:52,325 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,325 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,326 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,326 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,326 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,326 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,327 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:52,327 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,327 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,327 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,327 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:52,328 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:52,328 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,003 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:37:53,004 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:53,004 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:53,006 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:53,006 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:53,006 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:53,111 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:53,112 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:53,113 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:53,113 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:53,222 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:53,222 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:53,223 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:53,223 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:53,223 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:53,223 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:53,223 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:53,223 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:53,223 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:53,223 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:53,223 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:53,223 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:53,224 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:53,224 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,225 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,225 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,225 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,226 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,226 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,226 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:53,226 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,226 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,226 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,226 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,226 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,226 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,227 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:53,228 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,228 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,228 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,228 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,229 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,229 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,230 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:53,231 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,231 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,231 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,231 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:53,232 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,232 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:53,905 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=673, lastRpcResponseTime=982) timeout (982ms) for bootstrapping
2023-11-07 01:37:53,905 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:53,905 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:53,907 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:53,907 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:53,907 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:54,014 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:54,015 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:54,016 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:54,016 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:54,121 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:54,121 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:54,121 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:54,121 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:54,122 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:54,122 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:54,122 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:54,122 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:54,122 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:54,122 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:54,122 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:54,122 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:54,123 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:54,123 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,123 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,124 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,124 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,124 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,124 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,127 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:54,127 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,127 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,127 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,127 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,128 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,128 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,128 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:54,129 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,129 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,129 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,129 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,129 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,130 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:54,130 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,130 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,130 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,131 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,131 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,131 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:54,132 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:54,806 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:37:54,806 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:54,807 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:54,808 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:54,809 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:54,809 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:54,914 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:54,915 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:54,915 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:54,915 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:55,020 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:55,021 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:55,021 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:55,021 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:55,021 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:55,021 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:55,021 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:55,021 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:55,021 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:55,021 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:55,021 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:55,022 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:55,022 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:55,022 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,023 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,023 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,023 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,023 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,023 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,024 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:55,024 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,025 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,025 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,025 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,025 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,025 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,026 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:55,026 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,027 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,027 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,027 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,027 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,027 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,029 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:55,029 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,030 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,031 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,031 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,031 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,031 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,708 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2023-11-07 01:37:55,708 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:55,709 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:55,711 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:55,711 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:55,711 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:55,816 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:55,817 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:55,817 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:55,817 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:55,922 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:55,922 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:55,922 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:55,923 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:55,923 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:55,923 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:55,923 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:55,923 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:55,923 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:55,923 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:55,923 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:55,923 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:55,924 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:55,924 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,924 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,925 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,925 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,925 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,925 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,926 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:55,926 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,927 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,927 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,927 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,927 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,928 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,929 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:55,929 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,929 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,930 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,930 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,930 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,930 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,933 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:55,933 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,933 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,934 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,934 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:55,934 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:55,934 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,505 [Timer-0] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:lambda$start$6(349)) - TIMED-PRINT: printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:37:56,610 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2023-11-07 01:37:56,610 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:56,610 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:56,612 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:56,612 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:56,612 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:56,720 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:56,721 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:56,721 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:56,721 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:56,827 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:56,827 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:56,828 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:56,828 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:56,828 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:56,828 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:56,828 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:56,828 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:56,828 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:56,828 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:56,828 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:56,828 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:56,829 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:56,829 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,829 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,830 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,830 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,830 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,830 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,832 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:56,832 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,833 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,833 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,833 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,833 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,833 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,835 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:56,835 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,836 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,836 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,836 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,836 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,836 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,837 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:56,837 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,837 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,838 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,838 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:56,838 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:56,838 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,511 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=674, lastRpcResponseTime=983) timeout (983ms) for bootstrapping
2023-11-07 01:37:57,512 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:57,512 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:57,514 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:57,514 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:57,514 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:57,619 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:57,620 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:57,621 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:57,621 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:57,725 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:57,726 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:57,726 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:57,726 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:57,726 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:57,726 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:57,726 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:57,726 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:57,726 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:57,726 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:57,726 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:57,727 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:57,727 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:57,727 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,728 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,728 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,728 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,729 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,729 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,729 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:57,729 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,729 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,730 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,730 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,730 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,730 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,731 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:57,731 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,731 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,732 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,732 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,732 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,732 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,733 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:57,733 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,733 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,733 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,733 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:57,733 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:57,733 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,413 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=680, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2023-11-07 01:37:58,413 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:58,414 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:58,416 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:58,416 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:58,416 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:58,521 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:58,522 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:58,522 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:58,522 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:58,626 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:58,627 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:58,628 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:58,628 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,628 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,629 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,629 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,629 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,629 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,631 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:58,631 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,632 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,632 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,632 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,632 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,632 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,634 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:58,634 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,634 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,635 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,635 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,635 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,635 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,636 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:58,636 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,636 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,637 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,637 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:58,637 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:58,637 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,315 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=678, lastRpcResponseTime=988) timeout (988ms) for bootstrapping
2023-11-07 01:37:59,315 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:37:59,315 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:37:59,322 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:59,322 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:37:59,323 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:37:59,428 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:59,429 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:59,430 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:37:59,430 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:37:59,535 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:37:59,536 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:59,536 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,537 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,537 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,537 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,537 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,538 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,538 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:59,539 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,539 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,539 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,539 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,539 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,539 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,550 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:59,550 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,550 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,550 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,550 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,550 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,550 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,552 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:37:59,553 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,553 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,553 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,553 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:37:59,553 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:37:59,553 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,216 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=663, lastRpcResponseTime=981) timeout (981ms) for bootstrapping
2023-11-07 01:38:00,217 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:38:00,217 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:00,218 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:00,219 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:38:00,219 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:00,324 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:00,325 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:00,325 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:38:00,325 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:00,431 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:00,431 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:00,431 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:00,432 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:00,432 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:00,432 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:00,432 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:00,432 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:00,432 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:00,432 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:00,432 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:00,432 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:00,433 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:00,433 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,434 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,435 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,435 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,435 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,435 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,438 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:00,438 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,438 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,439 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,439 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,439 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,440 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,440 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:00,440 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,441 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,441 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,441 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,441 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,441 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,443 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:00,443 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,443 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,444 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,444 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,444 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,444 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,994 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:00,995 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,995 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,996 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,996 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:00,996 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:00,997 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,118 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=123, lastRpcResponseTime=986) timeout (986ms) for bootstrapping
2023-11-07 01:38:01,118 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:38:01,118 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:01,120 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:01,120 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:38:01,120 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:01,225 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:01,226 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:01,227 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:38:01,227 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:01,331 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:01,332 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:01,333 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:01,333 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,334 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,334 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,334 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,334 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,335 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,335 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:01,335 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,336 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,336 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,336 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,336 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,337 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,338 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:01,338 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,339 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,339 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,339 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,339 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,339 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,341 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:01,341 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,342 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,342 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,342 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:01,343 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:01,343 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,019 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=677, lastRpcResponseTime=987) timeout (987ms) for bootstrapping
2023-11-07 01:38:02,020 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:38:02,020 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:02,022 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:02,022 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:38:02,022 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:02,129 [s3-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:02,130 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:02,130 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:38:02,130 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:02,235 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:02,235 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:02,236 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:02,236 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:02,236 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:02,236 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:02,236 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:02,236 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:02,236 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:02,236 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:02,236 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:02,236 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:02,237 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:02,237 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,238 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,238 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,238 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,240 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,240 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,241 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:02,241 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,241 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,242 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,242 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,242 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,242 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,243 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:02,243 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,243 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,243 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,244 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,244 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,244 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,245 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:02,245 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,245 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,245 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,246 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,246 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:02,246 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:02,921 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=676, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:38:02,921 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:38:02,921 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:02,927 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:02,927 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:38:02,927 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:03,032 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:03,033 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:03,034 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:38:03,034 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:03,138 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:03,138 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:03,138 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:03,138 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:03,138 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:03,139 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:03,139 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:03,139 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:03,139 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:03,139 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:03,139 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:03,139 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:03,139 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:03,140 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,141 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,141 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,141 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,141 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,142 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,143 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:03,144 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,144 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,144 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,144 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,145 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,145 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,145 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:03,148 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,149 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,149 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,149 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,150 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,150 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,151 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:03,151 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,152 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,152 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,152 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,152 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:03,153 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:03,822 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=670, lastRpcResponseTime=984) timeout (984ms) for bootstrapping
2023-11-07 01:38:03,822 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:38:03,823 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:03,824 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:03,824 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:38:03,824 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:03,929 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:03,930 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:03,930 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:38:03,931 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:04,037 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:04,038 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:04,038 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:04,038 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:04,038 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:04,038 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:04,038 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:04,038 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:04,038 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:04,038 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:04,038 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:04,039 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:04,039 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:04,039 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,040 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,041 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,041 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,041 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,041 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,041 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:04,042 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,042 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,042 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,042 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,042 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,042 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,043 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:04,043 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,044 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,044 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,044 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,044 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,044 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,046 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:04,046 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,046 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,047 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,047 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,047 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,047 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,724 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:checkProgress(775)) - s0@group-252D3078B158-LeaderStateImpl detects a follower s0@group-252D3078B158->s4(c-1,m-1,n0, caughtUp=false, lastRpcSendTime=677, lastRpcResponseTime=985) timeout (985ms) for bootstrapping
2023-11-07 01:38:04,724 [s0@group-252D3078B158-LeaderStateImpl] DEBUG server.RaftServer$Division (LeaderStateImpl.java:fail(1232)) - s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
2023-11-07 01:38:04,724 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:04,725 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:04,726 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:38:04,726 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
org.apache.ratis.protocol.exceptions.ReconfigurationTimeoutException: s0@group-252D3078B158-ConfigurationStagingState: Fail to set configuration peers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863]|listeners:[] due to NOPROGRESS
	at org.apache.ratis.server.impl.LeaderStateImpl$ConfigurationStagingState.fail(LeaderStateImpl.java:1237)
	at org.apache.ratis.server.impl.LeaderStateImpl.checkStaging(LeaderStateImpl.java:815)
	at org.apache.ratis.server.impl.LeaderStateImpl.access$700(LeaderStateImpl.java:100)
	at org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:750)
2023-11-07 01:38:04,830 [s3-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s3@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:04,832 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: s0. Failed SetConfigurationRequest:client-3CB7E0C972B5->s3@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:04,832 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s3,  curLeader=s3, newLeader=s0
2023-11-07 01:38:04,832 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s3 to s0 for group-252D3078B158
org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-252D3078B158 is not the leader s0|localhost:42863
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:397)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:04,938 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-252D3078B158: receive setConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:04,938 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-252D3078B158-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[]
2023-11-07 01:38:04,938 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:04,938 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:04,938 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:04,939 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:04,939 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:04,939 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:04,939 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:04,939 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:04,939 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:04,939 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:04,940 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:04,940 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,940 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,941 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,941 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,941 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,941 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,943 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:04,943 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,943 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,943 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,943 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,944 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,944 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,945 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:04,945 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,946 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,946 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,946 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,946 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,947 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,947 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:04,947 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,948 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,948 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,948 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:04,948 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:04,949 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:05,507 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(419)) - client-3CB7E0C972B5: suggested new leader: null. Failed SetConfigurationRequest:client-3CB7E0C972B5->s0@group-252D3078B158, cid=21, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:45279, s4|0.0.0.0:45797, s0|localhost:42863], listeners:[] with {}
java.io.IOException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: Thread interrupted
	at org.apache.ratis.grpc.GrpcUtil.unwrapException(GrpcUtil.java:99)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:223)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.setConfiguration(GrpcClientProtocolClient.java:189)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: Thread interrupted
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$AdminProtocolServiceBlockingStub.setConfiguration(AdminProtocolServiceGrpc.java:451)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.lambda$setConfiguration$6(GrpcClientProtocolClient.java:191)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:221)
	... 25 more
Caused by: java.lang.InterruptedException
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.throwIfInterrupted(ClientCalls.java:750)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:718)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:159)
	... 28 more
2023-11-07 01:38:05,510 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(438)) - client-3CB7E0C972B5: oldLeader=s0,  curLeader=s0, newLeader=s3
2023-11-07 01:38:05,510 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:handleIOException(444)) - client-3CB7E0C972B5 changes Leader from s0 to s3 for group-252D3078B158
java.io.IOException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: Thread interrupted
	at org.apache.ratis.grpc.GrpcUtil.unwrapException(GrpcUtil.java:99)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:223)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.setConfiguration(GrpcClientProtocolClient.java:189)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: Thread interrupted
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$AdminProtocolServiceBlockingStub.setConfiguration(AdminProtocolServiceGrpc.java:451)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.lambda$setConfiguration$6(GrpcClientProtocolClient.java:191)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:221)
	... 25 more
Caused by: java.lang.InterruptedException
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.throwIfInterrupted(ClientCalls.java:750)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:718)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:159)
	... 28 more
]]></system-out>
  </testcase>
  <testcase name="testRestartPeer" classname="org.apache.ratis.grpc.TestRaftSnapshotWithGrpc" time="2.965">
    <system-out><![CDATA[2023-11-07 01:38:05,520 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-252D3078B158->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, send snapshot SingleFileSnapshotInfo(t:1, i:39):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_39] to follower
2023-11-07 01:38:05,521 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:05,525 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-11-07 01:38:05,525 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-11-07 01:38:05,525 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-11-07 01:38:05,525 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-11-07 01:38:05,525 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-11-07 01:38:05,525 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING

2023-11-07 01:38:05,527 2023-11-07 01:38:05,528 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:05,529 [grpc-default-executor-1] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:05,529 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s4-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:05,531 [Time-limited test] WARN  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(849)) - shutdown interrupted
java.lang.InterruptedException
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2109)
	at java.base/java.util.concurrent.ThreadPoolExecutor.awaitTermination(ThreadPoolExecutor.java:1454)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:847)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:320)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:05,530 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
2023-11-07 01:38:05,540 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s4-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (0) unchanged and retry.
org.junit.runners.model.TestTimedOutException: test timed out after 100 seconds
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)
	at app//org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:717)
	at app//org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:159)
	at app//org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$AdminProtocolServiceBlockingStub.setConfiguration(AdminProtocolServiceGrpc.java:451)
	at app//org.apache.ratis.grpc.client.GrpcClientProtocolClient.lambda$setConfiguration$6(GrpcClientProtocolClient.java:191)
	at app//org.apache.ratis.grpc.client.GrpcClientProtocolClient$$Lambda$633/0x0000000100430840.get(Unknown Source)
	at app//org.apache.ratis.grpc.client.GrpcClientProtocolClient.blockingCall(GrpcClientProtocolClient.java:221)
	at app//org.apache.ratis.grpc.client.GrpcClientProtocolClient.setConfiguration(GrpcClientProtocolClient.java:189)
	at app//org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)
	at app//org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:145)
	at app//org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:109)
	at app//org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)
	at app//org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)
	at app//org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)
	at app//org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:820)
	at app//org.apache.ratis.statemachine.RaftSnapshotBaseTest.lambda$testInstallSnapshotDuringBootstrap$6(RaftSnapshotBaseTest.java:308)
	at app//org.apache.ratis.statemachine.RaftSnapshotBaseTest$$Lambda$620/0x0000000100434440.accept(Unknown Source)
	at app//org.apache.ratis.server.impl.RaftServerTestUtil.runWithMinorityPeers(RaftServerTestUtil.java:215)
	at app//org.apache.ratis.statemachine.RaftSnapshotBaseTest.testInstallSnapshotDuringBootstrap(RaftSnapshotBaseTest.java:307)
	at java.base@11.0.21/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base@11.0.21/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base@11.0.21/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base@11.0.21/java.lang.reflect.Method.invoke(Method.java:566)
	at app//org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at app//org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at app//org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at app//org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at app//org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at app//org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at app//org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at app//org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base@11.0.21/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base@11.0.21/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:05,542 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-11-07 01:38:05,542 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-11-07 01:38:05,542 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-11-07 01:38:05,542 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-11-07 01:38:05,542 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-11-07 01:38:05,542 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-11-07 01:38:05,542 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-252D3078B158:t1, leader=s0, voted=null, raftlog=Memoized:s3@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
  s4:   CLOSED CANDIDATE s4@group-252D3078B158:t0, leader=null, voted=, raftlog=Memoized:s4@group-252D3078B158-SegmentedRaftLog:CLOSED:c-1, conf=-1: peers:[s3, s4, s0|localhost:42863]|listeners:[], old=null CLOSED
  s0:  RUNNING    LEADER s0@group-252D3078B158:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-252D3078B158-SegmentedRaftLog:OPENED:c42, conf=41: peers:[s3|0.0.0.0:45279, s0|localhost:42863]|listeners:[], old=null RUNNING
2023-11-07 01:38:05,543 [Time-limited test] WARN  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(849)) - shutdown interrupted
java.lang.InterruptedException
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2109)
	at java.base/java.util.concurrent.ThreadPoolExecutor.awaitTermination(ThreadPoolExecutor.java:1454)
	at org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:847)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.tearDown(RaftSnapshotBaseTest.java:141)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.RunAfters.invokeMethod(RunAfters.java:46)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:05,543 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-11-07 01:38:05,543 [MiniRaftCluster-4] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(416)) - s3: close
2023-11-07 01:38:05,548 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server GrpcServerProtocolService now
2023-11-07 01:38:05,553 [MiniRaftCluster-3] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(416)) - s0: close
2023-11-07 01:38:05,557 [grpc-default-executor-3] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(121)) - s3: APPEND_ENTRIES onError, lastRequest: s0->s3#6-t1,previous=(t:1, i:41),leaderCommit=41,initializing? true,entries: size=1, first=(t:1, i:42), METADATAENTRY(c:41): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-11-07 01:38:05,573 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server GrpcServerProtocolService successfully
2023-11-07 01:38:05,572 [s3-impl-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$3(514)) - s3@group-252D3078B158: shutdown
2023-11-07 01:38:05,557 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s3: Stopped
2023-11-07 01:38:05,575 [s3-impl-thread2] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-252D3078B158,id=s3
2023-11-07 01:38:05,575 [s3-impl-thread2] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-252D3078B158-FollowerState
2023-11-07 01:38:05,575 [s3-impl-thread2] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s3@group-252D3078B158-StateMachineUpdater: set stopIndex = 42
2023-11-07 01:38:05,556 [grpc-default-executor-2] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(121)) - s3: APPEND_ENTRIES onError, lastRequest: null: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-11-07 01:38:05,575 [s3@group-252D3078B158-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s3@group-252D3078B158-FollowerState was interrupted
2023-11-07 01:38:05,553 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2023-11-07 01:38:05,577 [grpc-default-executor-3] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s3-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: RST_STREAM closed stream. HTTP/2 error code: CANCEL
2023-11-07 01:38:05,577 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s3-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (43) unchanged and retry.
2023-11-07 01:38:05,580 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-11-07 01:38:05,591 [grpc-default-executor-4] WARN  server.GrpcLogAppender (LogUtils.java:warn(121)) - s0@group-252D3078B158->s3-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: RST_STREAM closed stream. HTTP/2 error code: CANCEL
2023-11-07 01:38:05,591 [grpc-default-executor-4] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(140)) - s0@group-252D3078B158->s3-GrpcLogAppender: Follower failed and request == null,  keep nextIndex (43) unchanged and retry.
2023-11-07 01:38:05,598 [s0-impl-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$3(514)) - s0@group-252D3078B158: shutdown
2023-11-07 01:38:05,599 [s0-impl-thread2] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-252D3078B158,id=s0
2023-11-07 01:38:05,599 [s0-impl-thread2] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(94)) - s0: shutdown s0@group-252D3078B158-LeaderStateImpl
2023-11-07 01:38:05,599 [s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:05,599 [s0-impl-thread2] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(289)) - s0@group-252D3078B158-PendingRequests: sendNotLeaderResponses
2023-11-07 01:38:05,599 [s0@group-252D3078B158->s3-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-252D3078B158->s3-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:05,600 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(457)) - s0@group-252D3078B158->s3-GrpcLogAppender is already stopped
2023-11-07 01:38:05,602 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(457)) - s0@group-252D3078B158->s3-GrpcLogAppender is already stopped
2023-11-07 01:38:05,604 [s3@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_42 with options [READ]: sun.nio.ch.FileChannelImpl@768fc60
2023-11-07 01:38:05,605 [s3@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_42.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@1c4ffc58
2023-11-07 01:38:05,607 [s3@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_42.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s3/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_42.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:05,608 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s3@group-252D3078B158-StateMachineUpdater: Took a snapshot at index 42
2023-11-07 01:38:05,609 [s3@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-252D3078B158-StateMachineUpdater: snapshotIndex: updateIncreasingly 39 -> 42
"main" prio=5 Id=1 RUNNABLE
	at java.management@11.0.21/sun.management.ThreadImpl.dumpThreads0(Native Method)
	at java.management@11.0.21/sun.management.ThreadImpl.dumpAllThreads(ThreadImpl.java:521)
	at java.management@11.0.21/sun.management.ThreadImpl.dumpAllThreads(ThreadImpl.java:509)
	at app//org.apache.ratis.util.JavaUtils.dumpAllThreads(JavaUtils.java:267)
	at app//org.apache.ratis.JUnitRunListener.testFailure(JUnitRunListener.java:65)
	at app//org.junit.runner.notification.SynchronizedRunListener.testFailure(SynchronizedRunListener.java:94)
	-  locked org.apache.maven.surefire.common.junit4.Notifier@70325e14
	at app//org.junit.runner.notification.RunNotifier$6.notifyListener(RunNotifier.java:177)
	at app//org.junit.runner.notification.RunNotifier$SafeNotifier.run(RunNotifier.java:72)
	...


"Reference Handler" daemon prio=10 Id=2 RUNNABLE
	at java.base@11.0.21/java.lang.ref.Reference.waitForReferencePendingList(Native Method)
	at java.base@11.0.21/java.lang.ref.Reference.processPendingReferences(Reference.java:241)
	at java.base@11.0.21/java.lang.ref.Reference$ReferenceHandler.run(Reference.java:213)


"Finalizer" daemon prio=8 Id=3 WAITING on java.lang.ref.ReferenceQueue$Lock@37ceb1df
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.lang.ref.ReferenceQueue$Lock@37ceb1df
	at java.base@11.0.21/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:155)
	at java.base@11.0.21/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:176)
	at java.base@11.0.21/java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:170)


"Signal Dispatcher" daemon prio=9 Id=4 RUNNABLE


"Common-Cleaner" daemon prio=8 Id=9 TIMED_WAITING on java.lang.ref.ReferenceQueue$Lock@7c9d8e2
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.lang.ref.ReferenceQueue$Lock@7c9d8e2
	at java.base@11.0.21/java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:155)
	at java.base@11.0.21/jdk.internal.ref.CleanerImpl.run(CleanerImpl.java:148)
	at java.base@11.0.21/java.lang.Thread.run(Thread.java:829)
	at java.base@11.0.21/jdk.internal.misc.InnocuousThread.run(InnocuousThread.java:161)


"surefire-forkedjvm-stream-flusher" daemon prio=5 Id=10 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@20d525
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@20d525
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2123)
	at java.base@11.0.21/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)
	at java.base@11.0.21/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	...


"surefire-forkedjvm-command-thread" daemon prio=5 Id=12 RUNNABLE (in native)
	at java.base@11.0.21/java.io.FileInputStream.readBytes(Native Method)
	at java.base@11.0.21/java.io.FileInputStream.read(FileInputStream.java:279)
	at java.base@11.0.21/java.io.BufferedInputStream.read1(BufferedInputStream.java:290)
	at java.base@11.0.21/java.io.BufferedInputStream.read(BufferedInputStream.java:351)
	-  locked java.io.BufferedInputStream@6200f9cb
	at java.base@11.0.21/java.io.BufferedInputStream.fill(BufferedInputStream.java:252)
	at java.base@11.0.21/java.io.BufferedInputStream.read1(BufferedInputStream.java:292)
	at java.base@11.0.21/java.io.BufferedInputStream.read(BufferedInputStream.java:351)
	-  locked java.io.BufferedInputStream@2002fc1d
	at app//org.apache.maven.surefire.api.util.internal.Channels$3.readImpl(Channels.java:169)
	...


"s0-groupManagement" daemon prio=5 Id=17 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@69453e37
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@69453e37
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)
	at java.base@11.0.21/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base@11.0.21/java.lang.Thread.run(Thread.java:829)


"s0@group-252D3078B158-cacheEviction-AwaitToRun" daemon prio=5 Id=19 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6f4a47c7
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@6f4a47c7
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)
	at app//org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:48)
	at app//org.apache.ratis.util.AwaitToRun$RunnableImpl.run(AwaitToRun.java:47)
	at java.base@11.0.21/java.lang.Thread.run(Thread.java:829)


"s0@group-252D3078B158-SegmentedRaftLogWorker" daemon prio=5 Id=20 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@ae13544
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@ae13544
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2123)
	at app//org.apache.ratis.util.DataBlockingQueue.poll(DataBlockingQueue.java:148)
	at app//org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.run(SegmentedRaftLogWorker.java:297)
	at app//org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker$$Lambda$344/0x00000001002f0440.run(Unknown Source)
	at java.base@11.0.21/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base@11.0.21/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@628fa3e8


"s0@group-252D3078B158-StateMachineUpdater" daemon prio=5 Id=22 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3d34d211
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@3d34d211
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2211)
	at app//org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:65)
	at app//org.apache.ratis.server.impl.StateMachineUpdater.waitForCommit(StateMachineUpdater.java:211)
	at app//org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:180)
	at java.base@11.0.21/java.lang.Thread.run(Thread.java:829)


"grpc-default-boss-ELG-1-1" daemon prio=5 Id=23 RUNNABLE (in native)
	at app//org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait(Native Method)
	at app//org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait(Native.java:209)
	at app//org.apache.ratis.thirdparty.io.netty.channel.epoll.Native.epollWait(Native.java:202)
	at app//org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.epollWaitNoTimerChange(EpollEventLoop.java:316)
	at app//org.apache.ratis.thirdparty.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:373)
	at app//org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at app//org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at app//org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	...


"JvmPauseMonitor0" daemon prio=5 Id=24 BLOCKED on org.apache.log4j.spi.RootLogger@7dc0f706 owned by "MiniRaftCluster-3" Id=187
	at app//org.apache.log4j.Category.callAppenders(Category.java:204)
	-  blocked on org.apache.log4j.spi.RootLogger@7dc0f706
	at app//org.apache.log4j.Category.forcedLog(Category.java:384)
	at app//org.apache.log4j.Category.log(Category.java:810)
	at app//org.slf4j.reload4j.Reload4jLoggerAdapter.handleNormalizedLoggingCall(Reload4jLoggerAdapter.java:137)
	at app//org.slf4j.helpers.AbstractLogger.handle_1ArgsCall(AbstractLogger.java:386)
	at app//org.slf4j.helpers.AbstractLogger.info(AbstractLogger.java:209)
	at app//org.apache.ratis.util.JvmPauseMonitor.run(JvmPauseMonitor.java:152)
	at app//org.apache.ratis.util.JvmPauseMonitor$$Lambda$373/0x00000001002ff040.run(Unknown Source)
	...


"s0@group-252D3078B158-LeaderStateImpl" daemon prio=5 Id=27 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@4009e306
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@4009e306
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2123)
	at java.base@11.0.21/java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:432)
	at app//org.apache.ratis.server.impl.LeaderStateImpl$EventQueue.poll(LeaderStateImpl.java:164)
	at app//org.apache.ratis.server.impl.LeaderStateImpl$EventProcessor.run(LeaderStateImpl.java:744)


"grpc-default-worker-ELG-3-1" daemon prio=5 Id=28 RUNNABLE
	at app//org.apache.ratis.thirdparty.io.grpc.internal.PickFirstLoadBalancer.updateBalancingState(PickFirstLoadBalancer.java:157)
	at app//org.apache.ratis.thirdparty.io.grpc.internal.PickFirstLoadBalancer.processSubchannelState(PickFirstLoadBalancer.java:152)
	at app//org.apache.ratis.thirdparty.io.grpc.internal.PickFirstLoadBalancer.access$000(PickFirstLoadBalancer.java:43)
	at app//org.apache.ratis.thirdparty.io.grpc.internal.PickFirstLoadBalancer$1.onSubchannelState(PickFirstLoadBalancer.java:82)
	at app//org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelImpl$SubchannelImpl$1ManagedInternalSubchannelCallback.onStateChange(ManagedChannelImpl.java:1941)
	at app//org.apache.ratis.thirdparty.io.grpc.internal.InternalSubchannel.gotoState(InternalSubchannel.java:334)
	at app//org.apache.ratis.thirdparty.io.grpc.internal.InternalSubchannel.gotoNonErrorState(InternalSubchannel.java:324)
	at app//org.apache.ratis.thirdparty.io.grpc.internal.InternalSubchannel.access$300(InternalSubchannel.java:66)
	...


"grpc-default-worker-ELG-3-2" daemon prio=5 Id=30 RUNNABLE
	at java.base@11.0.21/jdk.internal.misc.Unsafe.unpark(Native Method)
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.unpark(LockSupport.java:160)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack$SNode.tryMatch(SynchronousQueue.java:269)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:382)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue.offer(SynchronousQueue.java:909)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1347)
	at app//org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.schedule(SerializingExecutor.java:102)
	at app//org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.execute(SerializingExecutor.java:95)
	...


"grpc-default-executor-1" daemon prio=5 Id=31 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@43c1b556
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@43c1b556
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:462)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:361)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:937)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1053)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	...


"grpc-default-executor-2" daemon prio=5 Id=32 BLOCKED on org.apache.log4j.spi.RootLogger@7dc0f706 owned by "MiniRaftCluster-3" Id=187
	at app//org.apache.log4j.Category.callAppenders(Category.java:204)
	-  blocked on org.apache.log4j.spi.RootLogger@7dc0f706
	at app//org.apache.log4j.Category.forcedLog(Category.java:384)
	at app//org.apache.log4j.Category.log(Category.java:810)
	at app//org.slf4j.reload4j.Reload4jLoggerAdapter.handleNormalizedLoggingCall(Reload4jLoggerAdapter.java:137)
	at app//org.slf4j.helpers.AbstractLogger.handle_0ArgsCall(AbstractLogger.java:382)
	at app//org.slf4j.helpers.AbstractLogger.warn(AbstractLogger.java:263)
	at app//org.apache.ratis.util.LogUtils.warn(LogUtils.java:121)
	at app//org.apache.ratis.grpc.GrpcUtil.warn(GrpcUtil.java:195)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@7423e1b3


"s3-groupManagement" daemon prio=5 Id=37 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@587e5365
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@587e5365
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)
	at java.base@11.0.21/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base@11.0.21/java.lang.Thread.run(Thread.java:829)


"s3@group-252D3078B158-cacheEviction-AwaitToRun" daemon prio=5 Id=41 WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@22fcf7ab
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@22fcf7ab
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)
	at app//org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:48)
	at app//org.apache.ratis.util.AwaitToRun$RunnableImpl.run(AwaitToRun.java:47)
	at java.base@11.0.21/java.lang.Thread.run(Thread.java:829)


"s3@group-252D3078B158-SegmentedRaftLogWorker" daemon prio=5 Id=42 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@2de23121
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@2de23121
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2123)
	at app//org.apache.ratis.util.DataBlockingQueue.poll(DataBlockingQueue.java:148)
	at app//org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.run(SegmentedRaftLogWorker.java:297)
	at app//org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker$$Lambda$344/0x00000001002f0440.run(Unknown Source)
	at java.base@11.0.21/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base@11.0.21/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@3da79282


"s3@group-252D3078B158-FollowerState" daemon prio=5 Id=44 TIMED_WAITING
	at java.base@11.0.21/java.lang.Thread.sleep(Native Method)
	at java.base@11.0.21/java.lang.Thread.sleep(Thread.java:334)
	at java.base@11.0.21/java.util.concurrent.TimeUnit.sleep(TimeUnit.java:446)
	at app//org.apache.ratis.util.TimeDuration.sleep(TimeDuration.java:352)
	at app//org.apache.ratis.util.TimeDuration.sleep(TimeDuration.java:337)
	at app//org.apache.ratis.server.impl.FollowerState.run(FollowerState.java:128)


"s3@group-252D3078B158-StateMachineUpdater" daemon prio=5 Id=45 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@63475ace
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@63475ace
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2211)
	at app//org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:65)
	at app//org.apache.ratis.server.impl.StateMachineUpdater.waitForCommit(StateMachineUpdater.java:211)
	at app//org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:180)
	at java.base@11.0.21/java.lang.Thread.run(Thread.java:829)


"JvmPauseMonitor1" daemon prio=5 Id=46 BLOCKED on org.apache.log4j.spi.RootLogger@7dc0f706 owned by "MiniRaftCluster-3" Id=187
	at app//org.apache.log4j.Category.callAppenders(Category.java:204)
	-  blocked on org.apache.log4j.spi.RootLogger@7dc0f706
	at app//org.apache.log4j.Category.forcedLog(Category.java:384)
	at app//org.apache.log4j.Category.log(Category.java:810)
	at app//org.slf4j.reload4j.Reload4jLoggerAdapter.handleNormalizedLoggingCall(Reload4jLoggerAdapter.java:137)
	at app//org.slf4j.helpers.AbstractLogger.handle_1ArgsCall(AbstractLogger.java:386)
	at app//org.slf4j.helpers.AbstractLogger.info(AbstractLogger.java:209)
	at app//org.apache.ratis.util.JvmPauseMonitor.run(JvmPauseMonitor.java:152)
	at app//org.apache.ratis.util.JvmPauseMonitor$$Lambda$373/0x00000001002ff040.run(Unknown Source)
	...


"s0-server-thread1" daemon prio=5 Id=52 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@4988d8b8
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@4988d8b8
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:462)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:361)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:937)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1053)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	...


"s0@group-252D3078B158->s3-GrpcLogAppender-LogAppenderDaemon" daemon prio=5 Id=53 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@c0c2f8d
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@c0c2f8d
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2211)
	at app//org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:65)
	at app//org.apache.ratis.grpc.server.GrpcLogAppender.mayWait(GrpcLogAppender.java:209)
	at app//org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:177)
	at app//org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at app//org.apache.ratis.server.leader.LogAppenderDaemon$$Lambda$665/0x000000010045f040.run(Unknown Source)
	...


"timer1" daemon prio=5 Id=54 TIMED_WAITING on java.util.TaskQueue@305b7c14
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@305b7c14
	at java.base@11.0.21/java.util.TimerThread.mainLoop(Timer.java:553)
	at java.base@11.0.21/java.util.TimerThread.run(Timer.java:506)


"timer2" daemon prio=5 Id=55 TIMED_WAITING on java.util.TaskQueue@6913c1fb
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@6913c1fb
	at java.base@11.0.21/java.util.TimerThread.mainLoop(Timer.java:553)
	at java.base@11.0.21/java.util.TimerThread.run(Timer.java:506)


"s3-server-thread1" daemon prio=5 Id=56 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@66d18979
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@66d18979
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:462)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:361)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:937)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1053)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	...


"s3-server-thread2" daemon prio=5 Id=57 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@66d18979
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@66d18979
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:462)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:361)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:937)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1053)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	...


"timer3" daemon prio=5 Id=58 TIMED_WAITING on java.util.TaskQueue@bccb269
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@bccb269
	at java.base@11.0.21/java.util.TimerThread.mainLoop(Timer.java:553)
	at java.base@11.0.21/java.util.TimerThread.run(Timer.java:506)


"s3-server-thread3" daemon prio=5 Id=59 TIMED_WAITING on java.util.concurrent.SynchronousQueue$TransferStack@66d18979
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.SynchronousQueue$TransferStack@66d18979
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:462)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:361)
	at java.base@11.0.21/java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:937)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1053)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)
	at java.base@11.0.21/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	...


"timer4" daemon prio=5 Id=61 TIMED_WAITING on java.util.TaskQueue@609cd4d8
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@609cd4d8
	at java.base@11.0.21/java.util.TimerThread.mainLoop(Timer.java:553)
	at java.base@11.0.21/java.util.TimerThread.run(Timer.java:506)


"timer5" daemon prio=5 Id=64 TIMED_WAITING on java.util.TaskQueue@17f7cd29
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@17f7cd29
	at java.base@11.0.21/java.util.TimerThread.mainLoop(Timer.java:553)
	at java.base@11.0.21/java.util.TimerThread.run(Timer.java:506)


"timer6" daemon prio=5 Id=65 TIMED_WAITING on java.util.TaskQueue@7d8704ef
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@7d8704ef
	at java.base@11.0.21/java.util.TimerThread.mainLoop(Timer.java:553)
	at java.base@11.0.21/java.util.TimerThread.run(Timer.java:506)


"timer7" daemon prio=5 Id=72 TIMED_WAITING on java.util.TaskQueue@13b6aecc
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@13b6aecc
	at java.base@11.0.21/java.util.TimerThread.mainLoop(Timer.java:553)
	at java.base@11.0.21/java.util.TimerThread.run(Timer.java:506)


"timer0" daemon prio=5 Id=73 TIMED_WAITING on java.util.TaskQueue@158a8276
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.util.TaskQueue@158a8276
	at java.base@11.0.21/java.util.TimerThread.mainLoop(Timer.java:553)
	at java.base@11.0.21/java.util.TimerThread.run(Timer.java:506)


"grpc-default-executor-3" daemon prio=5 Id=89 RUNNABLE
	at app//org.apache.log4j.Category.callAppenders(Category.java:204)
	-  locked org.apache.log4j.Logger@3c3d9b6b
	at app//org.apache.log4j.Category.forcedLog(Category.java:384)
	at app//org.apache.log4j.Category.log(Category.java:810)
	at app//org.slf4j.reload4j.Reload4jLoggerAdapter.handleNormalizedLoggingCall(Reload4jLoggerAdapter.java:137)
	at app//org.slf4j.helpers.AbstractLogger.handle_0ArgsCall(AbstractLogger.java:382)
	at app//org.slf4j.helpers.AbstractLogger.warn(AbstractLogger.java:263)
	at app//org.apache.ratis.util.LogUtils.warn(LogUtils.java:121)
	at app//org.apache.ratis.grpc.GrpcUtil.warn(GrpcUtil.java:195)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@508c8d1a


"s0@group-252D3078B158->s4-GrpcLogAppender-LogAppenderDaemon" daemon prio=5 Id=181 TIMED_WAITING on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@79d8407f
	at java.base@11.0.21/jdk.internal.misc.Unsafe.park(Native Method)
	-  waiting on java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject@79d8407f
	at java.base@11.0.21/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:234)
	at java.base@11.0.21/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2211)
	at app//org.apache.ratis.util.AwaitForSignal.await(AwaitForSignal.java:65)
	at app//org.apache.ratis.grpc.server.GrpcLogAppender.mayWait(GrpcLogAppender.java:209)
	at app//org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:177)
	at app//org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at app//org.apache.ratis.server.leader.LogAppenderDaemon$$Lambda$665/0x000000010045f040.run(Unknown Source)
	...


"MiniRaftCluster-1" daemon prio=5 Id=185 WAITING on org.apache.ratis.util.Daemon@5fbe4146
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on org.apache.ratis.util.Daemon@5fbe4146
	at java.base@11.0.21/java.lang.Thread.join(Thread.java:1300)
	at java.base@11.0.21/java.lang.Thread.join(Thread.java:1375)
	at app//org.apache.ratis.util.JvmPauseMonitor.stop(JvmPauseMonitor.java:199)
	at app//org.apache.ratis.server.impl.RaftServerProxy.close(RaftServerProxy.java:443)
	at app//org.apache.ratis.server.impl.MiniRaftCluster$$Lambda$860/0x00000001004c8040.run(Unknown Source)
	at app//org.apache.ratis.util.JavaUtils.runAsUnchecked(JavaUtils.java:97)
	at app//org.apache.ratis.util.JavaUtils.runAsUnchecked(JavaUtils.java:91)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@b012ce0


"MiniRaftCluster-3" daemon prio=5 Id=187 RUNNABLE
	at java.base@11.0.21/java.lang.StringBuffer.capacity(StringBuffer.java:214)
	-  locked java.lang.StringBuffer@1e66f1f5
	at app//org.apache.log4j.PatternLayout.format(PatternLayout.java:501)
	at app//org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:303)
	at app//org.apache.log4j.WriterAppender.append(WriterAppender.java:156)
	at app//org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:232)
	-  locked org.apache.log4j.ConsoleAppender@4e50c791
	at app//org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:57)
	at app//org.apache.log4j.Category.callAppenders(Category.java:206)
	-  locked org.apache.log4j.spi.RootLogger@7dc0f706
	at app//org.apache.log4j.Category.forcedLog(Category.java:384)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@73e11baa


"MiniRaftCluster-4" daemon prio=5 Id=188 WAITING on java.lang.Object@7530ad9c
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on java.lang.Object@7530ad9c
	at java.base@11.0.21/java.lang.Object.wait(Object.java:328)
	at app//org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl.awaitTermination(ServerImpl.java:322)
	at app//org.apache.ratis.grpc.server.GrpcService.closeImpl(GrpcService.java:315)
	at app//org.apache.ratis.server.RaftServerRpcWithProxy$$Lambda$822/0x00000001004a3040.run(Unknown Source)
	at app//org.apache.ratis.util.LifeCycle.lambda$checkStateAndClose$4(LifeCycle.java:299)
	at app//org.apache.ratis.util.LifeCycle$$Lambda$462/0x0000000100335040.get(Unknown Source)
	at app//org.apache.ratis.util.LifeCycle.checkStateAndClose(LifeCycle.java:319)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@56241d01


"MiniRaftCluster-6" daemon prio=5 Id=190 WAITING on org.apache.ratis.util.Daemon@58a9760d
	at java.base@11.0.21/java.lang.Object.wait(Native Method)
	-  waiting on org.apache.ratis.util.Daemon@58a9760d
	at java.base@11.0.21/java.lang.Thread.join(Thread.java:1300)
	at java.base@11.0.21/java.lang.Thread.join(Thread.java:1375)
	at app//org.apache.ratis.util.JvmPauseMonitor.stop(JvmPauseMonitor.java:199)
	at app//org.apache.ratis.server.impl.RaftServerProxy.close(RaftServerProxy.java:443)
	at app//org.apache.ratis.server.impl.MiniRaftCluster$$Lambda$860/0x00000001004c8040.run(Unknown Source)
	at app//org.apache.ratis.util.JavaUtils.runAsUnchecked(JavaUtils.java:97)
	at app//org.apache.ratis.util.JavaUtils.runAsUnchecked(JavaUtils.java:91)
	...

	Number of locked synchronizers = 1
	- java.util.concurrent.ThreadPoolExecutor$Worker@31e32764


"s3-impl-thread2" daemon prio=5 Id=191 RUNNABLE


2023-11-07 01:38:05,609 [s3-impl-thread2] INFO  server.RaftServer$Division (ServerState.java:close(423)) - s3@group-252D3078B158: applyIndex: 42
2023-11-07 01:38:05,645 [Thread-174] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s3 Close channels
2023-11-07 01:38:05,643 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-11-07 01:38:05,646 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-11-07 01:38:05,646 [Thread-175] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s4 Close channels
2023-11-07 01:38:05,645 [s3@group-252D3078B158-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s3@group-252D3078B158-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2023-11-07 01:38:05,646 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-11-07 01:38:05,646 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.RaftServer$Division log level to DEBUG
2023-11-07 01:38:05,646 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.raftlog.RaftLog log level to DEBUG
2023-11-07 01:38:05,646 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-11-07 01:38:05,647 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.client.RaftClient log level to DEBUG
2023-11-07 01:38:05,687 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-11-07 01:38:05,687 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-11-07 01:38:05,696 [s0-impl-thread2] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-252D3078B158-StateMachineUpdater: set stopIndex = 42
2023-11-07 01:38:05,710 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_42 with options [READ]: sun.nio.ch.FileChannelImpl@273eae54
2023-11-07 01:38:05,710 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_42.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@5ba0fc58
2023-11-07 01:38:05,716 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-3E098B494562:[s0|localhost:33651]
2023-11-07 01:38:05,717 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-11-07 01:38:05,717 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-11-07 01:38:05,716 [s0@group-252D3078B158-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_42.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc2f9f759b/s0/681bb86f-03d3-48b5-8cbf-252d3078b158/sm/snapshot.1_42.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:05,717 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-11-07 01:38:05,717 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-11-07 01:38:05,717 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-11-07 01:38:05,717 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-11-07 01:38:05,717 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-252D3078B158-StateMachineUpdater: Took a snapshot at index 42
2023-11-07 01:38:05,717 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-3E098B494562:[s0|localhost:33651], format? true
2023-11-07 01:38:05,717 [s0@group-252D3078B158-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-252D3078B158-StateMachineUpdater: snapshotIndex: updateIncreasingly 39 -> 42
2023-11-07 01:38:05,718 [s0-impl-thread2] INFO  server.RaftServer$Division (ServerState.java:close(423)) - s0@group-252D3078B158: applyIndex: 42
2023-11-07 01:38:05,718 [s0@group-252D3078B158-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-252D3078B158-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2023-11-07 01:38:05,719 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0
2023-11-07 01:38:05,719 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0 does not exist.
2023-11-07 01:38:05,719 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0
2023-11-07 01:38:05,721 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-11-07 01:38:05,721 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:05,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:05,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 41121 (custom)
2023-11-07 01:38:05,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:05,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 36701 (custom)
2023-11-07 01:38:05,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-11-07 01:38:05,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 33651 (custom)
2023-11-07 01:38:05,722 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-11-07 01:38:05,723 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:05,723 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-11-07 01:38:05,723 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:05,723 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:05,723 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-11-07 01:38:05,723 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-11-07 01:38:05,725 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-11-07 01:38:05,725 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:05,726 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2023-11-07 01:38:05,726 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:05,728 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0] (custom)
2023-11-07 01:38:05,729 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-11-07 01:38:05,729 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-11-07 01:38:05,751 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(100)) - s0: addNew group-3E098B494562:[s0|localhost:33651] returns group-3E098B494562:java.util.concurrent.CompletableFuture@d92a9b7[Not completed]
2023-11-07 01:38:05,751 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:05,751 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:05,751 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:05,751 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(255)) - s0: new RaftServerImpl for group-3E098B494562:[s0|localhost:33651] with SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:05,751 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-3E098B494562: ConfigurationManager, init=-1: peers:[s0|localhost:33651]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-11-07 01:38:05,752 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2023-11-07 01:38:05,753 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:05,753 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:05,753 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-11-07 01:38:05,753 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-11-07 01:38:05,753 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-11-07 01:38:05,753 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-11-07 01:38:05,754 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-11-07 01:38:05,754 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-11-07 01:38:05,754 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0] (custom)
2023-11-07 01:38:05,754 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562 does not exist. Creating ...
2023-11-07 01:38:05,755 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562
2023-11-07 01:38:05,756 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/in_use.lock acquired by nodename 23589@fv-az1231-351
2023-11-07 01:38:05,756 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current
2023-11-07 01:38:05,756 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm
2023-11-07 01:38:05,757 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@799f2bdd
2023-11-07 01:38:05,758 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:05,758 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(97)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562 has been successfully formatted.
2023-11-07 01:38:05,758 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:05,759 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2023-11-07 01:38:05,759 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-11-07 01:38:05,759 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-11-07 01:38:05,759 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:05,759 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-11-07 01:38:05,759 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-11-07 01:38:05,760 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:05,760 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-11-07 01:38:05,760 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-11-07 01:38:05,760 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:05,770 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-3E098B494562-cacheEviction-AwaitToRun,5,main] started
2023-11-07 01:38:05,770 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-3E098B494562-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562
2023-11-07 01:38:05,770 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:05,770 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-11-07 01:38:05,770 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:05,770 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:05,770 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-11-07 01:38:05,770 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-11-07 01:38:05,770 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-11-07 01:38:05,770 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-11-07 01:38:05,771 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:05,771 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:05,772 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-11-07 01:38:05,772 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-11-07 01:38:05,772 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-11-07 01:38:05,773 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-3E098B494562-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:05,773 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-3E098B494562-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:05,776 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(390)) - s0@group-3E098B494562: start as a follower, conf=-1: peers:[s0|localhost:33651]|listeners:[], old=null
2023-11-07 01:38:05,776 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-3E098B494562: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-11-07 01:38:05,777 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-3E098B494562-FollowerState
2023-11-07 01:38:05,778 [s0@group-3E098B494562-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:38:05,778 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3E098B494562,id=s0
2023-11-07 01:38:05,778 [s0@group-3E098B494562-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:38:05,778 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2023-11-07 01:38:05,778 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-11-07 01:38:05,778 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2023-11-07 01:38:05,778 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-11-07 01:38:05,778 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-11-07 01:38:05,782 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(406)) - s0: start RPC server
2023-11-07 01:38:05,783 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 36701
2023-11-07 01:38:05,784 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 33651
2023-11-07 01:38:05,785 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 41121
2023-11-07 01:38:05,787 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2023-11-07 01:38:05,791 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:05,791 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-3E098B494562:t0, leader=null, voted=, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:33651]|listeners:[], old=null RUNNING
2023-11-07 01:38:05,791 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(223)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-3E098B494562:t0, leader=null, voted=, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:33651]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-3E098B494562:t0, leader=null, voted=, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:33651]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:217)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:203)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testRestartPeer(RaftSnapshotBaseTest.java:152)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:06,039 [s0@group-3E098B494562-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-3E098B494562-FollowerState: change to CANDIDATE, lastRpcElapsedTime:262876942ns, electionTimeout:260ms
2023-11-07 01:38:06,040 [s0@group-3E098B494562-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-3E098B494562-FollowerState
2023-11-07 01:38:06,040 [s0@group-3E098B494562-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-3E098B494562: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-11-07 01:38:06,040 [s0@group-3E098B494562-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:06,040 [s0@group-3E098B494562-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-3E098B494562-LeaderElection3
2023-11-07 01:38:06,041 [s0@group-3E098B494562-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-3E098B494562-LeaderElection3 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|localhost:33651]|listeners:[], old=null
2023-11-07 01:38:06,041 [s0@group-3E098B494562-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s0@group-3E098B494562-LeaderElection3 PRE_VOTE round 0: result PASSED (term=0)
2023-11-07 01:38:06,041 [s0@group-3E098B494562-LeaderElection3] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@15639a00
2023-11-07 01:38:06,043 [s0@group-3E098B494562-LeaderElection3] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:06,043 [s0@group-3E098B494562-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-3E098B494562-LeaderElection3 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|localhost:33651]|listeners:[], old=null
2023-11-07 01:38:06,043 [s0@group-3E098B494562-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s0@group-3E098B494562-LeaderElection3 ELECTION round 0: result PASSED (term=1)
2023-11-07 01:38:06,043 [s0@group-3E098B494562-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-3E098B494562-LeaderElection3
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-3E098B494562: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:38:06,044 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-11-07 01:38:06,045 [s0@group-3E098B494562-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-3E098B494562-LeaderStateImpl
2023-11-07 01:38:06,045 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(562)) - s0@group-3E098B494562: set firstElectionSinceStartup to false for becomeLeader
2023-11-07 01:38:06,045 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s0@group-3E098B494562: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 292ms
2023-11-07 01:38:06,045 [s0@group-3E098B494562-LeaderElection3] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(428)) - s0@group-3E098B494562-SegmentedRaftLogWorker: Starting segment from index:0
2023-11-07 01:38:06,046 [s0@group-3E098B494562-LeaderElection3] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-3E098B494562: set configuration 0: peers:[s0|localhost:33651]|listeners:[], old=null
2023-11-07 01:38:06,057 [s0@group-3E098B494562-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(632)) - s0@group-3E098B494562-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/log_inprogress_0
2023-11-07 01:38:06,059 [s0@group-3E098B494562-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(316)) - leader is ready since appliedIndex == 0 >= startIndex == 0
2023-11-07 01:38:06,179 [s0-impl-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(243)) - s0@group-252D3078B158-SegmentedRaftLogWorker close()
2023-11-07 01:38:06,194 [s3-impl-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(243)) - s3@group-252D3078B158-SegmentedRaftLogWorker close()
2023-11-07 01:38:06,242 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-3E098B494562:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|localhost:33651]|listeners:[], old=null RUNNING
2023-11-07 01:38:06,242 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:06,243 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 22 returns []
2023-11-07 01:38:06,248 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=22, seq=null, RW, Message:6d30)
2023-11-07 01:38:06,248 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=22, seq=null, RW, Message:6d30, entry=(t:1, i:1), STATEMACHINELOGENTRY, 22@client-C5D94BB052C8
2023-11-07 01:38:06,249 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 1
2023-11-07 01:38:06,249 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 22@client-C5D94BB052C8
2023-11-07 01:38:06,253 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 22
2023-11-07 01:38:06,253 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 23 returns [22]
2023-11-07 01:38:06,255 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=23, seq=null, RW, Message:6d31)
2023-11-07 01:38:06,255 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=23, seq=null, RW, Message:6d31, entry=(t:1, i:3), STATEMACHINELOGENTRY, 23@client-C5D94BB052C8
2023-11-07 01:38:06,256 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 3
2023-11-07 01:38:06,256 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 23@client-C5D94BB052C8
2023-11-07 01:38:06,257 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 23
2023-11-07 01:38:06,257 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 24 returns [23]
2023-11-07 01:38:06,258 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=24, seq=null, RW, Message:6d32)
2023-11-07 01:38:06,258 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=24, seq=null, RW, Message:6d32, entry=(t:1, i:5), STATEMACHINELOGENTRY, 24@client-C5D94BB052C8
2023-11-07 01:38:06,259 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 5
2023-11-07 01:38:06,259 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 24@client-C5D94BB052C8
2023-11-07 01:38:06,260 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 24
2023-11-07 01:38:06,260 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 25 returns [24]
2023-11-07 01:38:06,261 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=25, seq=null, RW, Message:6d33)
2023-11-07 01:38:06,261 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=25, seq=null, RW, Message:6d33, entry=(t:1, i:7), STATEMACHINELOGENTRY, 25@client-C5D94BB052C8
2023-11-07 01:38:06,262 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 7
2023-11-07 01:38:06,262 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 25@client-C5D94BB052C8
2023-11-07 01:38:06,265 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 25
2023-11-07 01:38:06,265 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 26 returns [25]
2023-11-07 01:38:06,268 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=26, seq=null, RW, Message:6d34)
2023-11-07 01:38:06,269 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=26, seq=null, RW, Message:6d34, entry=(t:1, i:9), STATEMACHINELOGENTRY, 26@client-C5D94BB052C8
2023-11-07 01:38:06,269 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 9
2023-11-07 01:38:06,269 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 26@client-C5D94BB052C8
2023-11-07 01:38:06,275 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 26
2023-11-07 01:38:06,275 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 27 returns [26]
2023-11-07 01:38:06,276 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=27, seq=null, RW, Message:6d35)
2023-11-07 01:38:06,277 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=27, seq=null, RW, Message:6d35, entry=(t:1, i:11), STATEMACHINELOGENTRY, 27@client-C5D94BB052C8
2023-11-07 01:38:06,283 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_9 with options [READ]: sun.nio.ch.FileChannelImpl@33870cee
2023-11-07 01:38:06,284 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_9.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@37b89e46
2023-11-07 01:38:06,285 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_9.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_9.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:06,285 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-3E098B494562-StateMachineUpdater: Took a snapshot at index 9
2023-11-07 01:38:06,285 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-3E098B494562-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 9
2023-11-07 01:38:06,285 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 11
2023-11-07 01:38:06,285 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 27@client-C5D94BB052C8
2023-11-07 01:38:06,287 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 27
2023-11-07 01:38:06,287 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 28 returns [27]
2023-11-07 01:38:06,288 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=28, seq=null, RW, Message:6d36)
2023-11-07 01:38:06,289 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=28, seq=null, RW, Message:6d36, entry=(t:1, i:13), STATEMACHINELOGENTRY, 28@client-C5D94BB052C8
2023-11-07 01:38:06,290 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 13
2023-11-07 01:38:06,290 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 28@client-C5D94BB052C8
2023-11-07 01:38:06,291 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 28
2023-11-07 01:38:06,291 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 29 returns [28]
2023-11-07 01:38:06,298 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=29, seq=null, RW, Message:6d37)
2023-11-07 01:38:06,299 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=29, seq=null, RW, Message:6d37, entry=(t:1, i:15), STATEMACHINELOGENTRY, 29@client-C5D94BB052C8
2023-11-07 01:38:06,300 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 15
2023-11-07 01:38:06,300 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 29@client-C5D94BB052C8
2023-11-07 01:38:06,302 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 29
2023-11-07 01:38:06,302 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 30 returns [29]
2023-11-07 01:38:06,303 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=30, seq=null, RW, Message:6d38)
2023-11-07 01:38:06,303 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=30, seq=null, RW, Message:6d38, entry=(t:1, i:17), STATEMACHINELOGENTRY, 30@client-C5D94BB052C8
2023-11-07 01:38:06,304 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 17
2023-11-07 01:38:06,304 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 30@client-C5D94BB052C8
2023-11-07 01:38:06,305 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 30
2023-11-07 01:38:06,305 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 31 returns [30]
2023-11-07 01:38:06,306 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=31, seq=null, RW, Message:6d39)
2023-11-07 01:38:06,307 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=31, seq=null, RW, Message:6d39, entry=(t:1, i:19), STATEMACHINELOGENTRY, 31@client-C5D94BB052C8
2023-11-07 01:38:06,307 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 19
2023-11-07 01:38:06,307 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 31@client-C5D94BB052C8
2023-11-07 01:38:06,313 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 31
2023-11-07 01:38:06,314 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 32 returns [31]
2023-11-07 01:38:06,319 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=32, seq=null, RW, Message:6d3130)
2023-11-07 01:38:06,319 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=32, seq=null, RW, Message:6d3130, entry=(t:1, i:21), STATEMACHINELOGENTRY, 32@client-C5D94BB052C8
2023-11-07 01:38:06,321 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_19 with options [READ]: sun.nio.ch.FileChannelImpl@72ba06d5
2023-11-07 01:38:06,322 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_19.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@4869b4f1
2023-11-07 01:38:06,323 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_19.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_19.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:06,323 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-3E098B494562-StateMachineUpdater: Took a snapshot at index 19
2023-11-07 01:38:06,323 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-3E098B494562-StateMachineUpdater: snapshotIndex: updateIncreasingly 9 -> 19
2023-11-07 01:38:06,323 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 21
2023-11-07 01:38:06,323 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 32@client-C5D94BB052C8
2023-11-07 01:38:06,324 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 32
2023-11-07 01:38:06,324 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 33 returns [32]
2023-11-07 01:38:06,326 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=33, seq=null, RW, Message:6d3131)
2023-11-07 01:38:06,326 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=33, seq=null, RW, Message:6d3131, entry=(t:1, i:23), STATEMACHINELOGENTRY, 33@client-C5D94BB052C8
2023-11-07 01:38:06,327 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 23
2023-11-07 01:38:06,327 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 33@client-C5D94BB052C8
2023-11-07 01:38:06,328 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 33
2023-11-07 01:38:06,328 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 34 returns [33]
2023-11-07 01:38:06,329 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=34, seq=null, RW, Message:6d3132)
2023-11-07 01:38:06,330 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=34, seq=null, RW, Message:6d3132, entry=(t:1, i:25), STATEMACHINELOGENTRY, 34@client-C5D94BB052C8
2023-11-07 01:38:06,330 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 25
2023-11-07 01:38:06,330 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 34@client-C5D94BB052C8
2023-11-07 01:38:06,332 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 34
2023-11-07 01:38:06,332 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 35 returns [34]
2023-11-07 01:38:06,333 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=35, seq=null, RW, Message:6d3133)
2023-11-07 01:38:06,333 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=35, seq=null, RW, Message:6d3133, entry=(t:1, i:27), STATEMACHINELOGENTRY, 35@client-C5D94BB052C8
2023-11-07 01:38:06,334 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 27
2023-11-07 01:38:06,334 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 35@client-C5D94BB052C8
2023-11-07 01:38:06,338 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 35
2023-11-07 01:38:06,339 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 36 returns [35]
2023-11-07 01:38:06,340 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=36, seq=null, RW, Message:6d3134)
2023-11-07 01:38:06,340 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=36, seq=null, RW, Message:6d3134, entry=(t:1, i:29), STATEMACHINELOGENTRY, 36@client-C5D94BB052C8
2023-11-07 01:38:06,341 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 29
2023-11-07 01:38:06,341 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 36@client-C5D94BB052C8
2023-11-07 01:38:06,346 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 36
2023-11-07 01:38:06,346 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 37 returns [36]
2023-11-07 01:38:06,351 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=37, seq=null, RW, Message:6d3135)
2023-11-07 01:38:06,352 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=37, seq=null, RW, Message:6d3135, entry=(t:1, i:31), STATEMACHINELOGENTRY, 37@client-C5D94BB052C8
2023-11-07 01:38:06,357 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_29 with options [READ]: sun.nio.ch.FileChannelImpl@4302316e
2023-11-07 01:38:06,358 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_29.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@303bdde6
2023-11-07 01:38:06,359 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_29.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_29.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:06,359 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-3E098B494562-StateMachineUpdater: Took a snapshot at index 29
2023-11-07 01:38:06,359 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-3E098B494562-StateMachineUpdater: snapshotIndex: updateIncreasingly 19 -> 29
2023-11-07 01:38:06,359 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 31
2023-11-07 01:38:06,360 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 37@client-C5D94BB052C8
2023-11-07 01:38:06,361 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 37
2023-11-07 01:38:06,361 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 38 returns [37]
2023-11-07 01:38:06,362 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=38, seq=null, RW, Message:6d3136)
2023-11-07 01:38:06,363 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=38, seq=null, RW, Message:6d3136, entry=(t:1, i:33), STATEMACHINELOGENTRY, 38@client-C5D94BB052C8
2023-11-07 01:38:06,364 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 33
2023-11-07 01:38:06,364 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 38@client-C5D94BB052C8
2023-11-07 01:38:06,365 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 38
2023-11-07 01:38:06,365 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 39 returns [38]
2023-11-07 01:38:06,366 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=39, seq=null, RW, Message:6d3137)
2023-11-07 01:38:06,366 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=39, seq=null, RW, Message:6d3137, entry=(t:1, i:35), STATEMACHINELOGENTRY, 39@client-C5D94BB052C8
2023-11-07 01:38:06,367 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 35
2023-11-07 01:38:06,367 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 39@client-C5D94BB052C8
2023-11-07 01:38:06,368 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 39
2023-11-07 01:38:06,368 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-C5D94BB052C8: get 40 returns [39]
2023-11-07 01:38:06,369 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-3E098B494562: receive client request(RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=40, seq=null, RW, Message:6d3138)
2023-11-07 01:38:06,369 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-3E098B494562-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-C5D94BB052C8->s0@group-3E098B494562, cid=40, seq=null, RW, Message:6d3138, entry=(t:1, i:37), STATEMACHINELOGENTRY, 40@client-C5D94BB052C8
2023-11-07 01:38:06,370 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 37
2023-11-07 01:38:06,370 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 40@client-C5D94BB052C8
2023-11-07 01:38:06,371 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-C5D94BB052C8: add replied callId 40
2023-11-07 01:38:06,377 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:testRestartPeer(163)) - nextIndex = 39
2023-11-07 01:38:06,377 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:exists(183)) - File exists: /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_29
2023-11-07 01:38:06,377 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-11-07 01:38:06,377 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-11-07 01:38:06,377 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-11-07 01:38:06,378 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-11-07 01:38:06,378 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-11-07 01:38:06,378 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-3E098B494562:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:33651]|listeners:[], old=null RUNNING
2023-11-07 01:38:06,380 [MiniRaftCluster-7] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(416)) - s0: close
2023-11-07 01:38:06,380 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-11-07 01:38:06,381 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$3(514)) - s0@group-3E098B494562: shutdown
2023-11-07 01:38:06,381 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3E098B494562,id=s0
2023-11-07 01:38:06,381 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(94)) - s0: shutdown s0@group-3E098B494562-LeaderStateImpl
2023-11-07 01:38:06,381 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(289)) - s0@group-3E098B494562-PendingRequests: sendNotLeaderResponses
2023-11-07 01:38:06,385 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-3E098B494562-StateMachineUpdater: set stopIndex = 38
2023-11-07 01:38:06,388 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-11-07 01:38:06,388 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-11-07 01:38:06,395 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-11-07 01:38:06,395 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-11-07 01:38:06,398 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_38 with options [READ]: sun.nio.ch.FileChannelImpl@1295f99a
2023-11-07 01:38:06,399 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_38.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@17de0905
2023-11-07 01:38:06,399 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_38.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_38.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:06,400 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-3E098B494562-StateMachineUpdater: Took a snapshot at index 38
2023-11-07 01:38:06,400 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-3E098B494562-StateMachineUpdater: snapshotIndex: updateIncreasingly 29 -> 38
2023-11-07 01:38:06,400 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(423)) - s0@group-3E098B494562: applyIndex: 38
2023-11-07 01:38:06,400 [s0@group-3E098B494562-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-3E098B494562-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2023-11-07 01:38:06,405 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-11-07 01:38:07,373 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(243)) - s0@group-3E098B494562-SegmentedRaftLogWorker close()
2023-11-07 01:38:07,375 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2023-11-07 01:38:07,375 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-11-07 01:38:07,375 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-3E098B494562:[s0|localhost:33651], format? false
2023-11-07 01:38:07,376 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:07,376 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:07,376 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 41121 (custom)
2023-11-07 01:38:07,376 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:07,376 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 36701 (custom)
2023-11-07 01:38:07,376 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-11-07 01:38:07,376 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 33651 (custom)
2023-11-07 01:38:07,377 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-11-07 01:38:07,377 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:07,377 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-11-07 01:38:07,377 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:07,377 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:07,377 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-11-07 01:38:07,377 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-11-07 01:38:07,379 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-11-07 01:38:07,379 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:07,379 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2023-11-07 01:38:07,379 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:07,379 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0] (custom)
2023-11-07 01:38:07,379 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-11-07 01:38:07,379 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-11-07 01:38:07,380 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(264)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562
2023-11-07 01:38:07,380 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(100)) - s0: addNew group-3E098B494562:[s0|localhost:33651] returns group-3E098B494562:java.util.concurrent.CompletableFuture@54be2d99[Not completed]
2023-11-07 01:38:07,380 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-11-07 01:38:07,380 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-11-07 01:38:07,381 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-11-07 01:38:07,381 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-11-07 01:38:07,381 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-11-07 01:38:07,381 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {s0=s0:      NEW group-3E098B494562:java.util.concurrent.CompletableFuture@54be2d99[Not completed]}
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(255)) - s0: new RaftServerImpl for group-3E098B494562:[s0|localhost:33651] with SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-3E098B494562: ConfigurationManager, init=-1: peers:[s0|localhost:33651]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-11-07 01:38:07,381 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2023-11-07 01:38:07,382 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-11-07 01:38:07,382 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2023-11-07 01:38:07,382 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:07,382 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:07,383 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-11-07 01:38:07,383 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-11-07 01:38:07,383 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-11-07 01:38:07,383 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-11-07 01:38:07,383 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-11-07 01:38:07,383 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-11-07 01:38:07,383 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0] (custom)
2023-11-07 01:38:07,385 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/in_use.lock acquired by nodename 23589@fv-az1231-351
2023-11-07 01:38:07,386 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:analyzeAndRecoverStorage(117)) - Read RaftStorageMetadata{term=1, votedFor=s0} from /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/raft-meta
2023-11-07 01:38:07,387 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-3E098B494562: set configuration 0: peers:[s0|localhost:33651]|listeners:[], old=null
2023-11-07 01:38:07,387 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:07,387 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@6cb0933d
2023-11-07 01:38:07,387 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.1_38]
2023-11-07 01:38:07,388 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 22@client-C5D94BB052C8
2023-11-07 01:38:07,388 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 23@client-C5D94BB052C8
2023-11-07 01:38:07,388 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 24@client-C5D94BB052C8
2023-11-07 01:38:07,389 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 25@client-C5D94BB052C8
2023-11-07 01:38:07,389 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 26@client-C5D94BB052C8
2023-11-07 01:38:07,389 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 27@client-C5D94BB052C8
2023-11-07 01:38:07,389 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 28@client-C5D94BB052C8
2023-11-07 01:38:07,389 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 29@client-C5D94BB052C8
2023-11-07 01:38:07,389 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 30@client-C5D94BB052C8
2023-11-07 01:38:07,389 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 31@client-C5D94BB052C8
2023-11-07 01:38:07,389 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 32@client-C5D94BB052C8
2023-11-07 01:38:07,389 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 33@client-C5D94BB052C8
2023-11-07 01:38:07,389 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 34@client-C5D94BB052C8
2023-11-07 01:38:07,390 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 35@client-C5D94BB052C8
2023-11-07 01:38:07,390 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 36@client-C5D94BB052C8
2023-11-07 01:38:07,390 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 37@client-C5D94BB052C8
2023-11-07 01:38:07,390 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 38@client-C5D94BB052C8
2023-11-07 01:38:07,390 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 39@client-C5D94BB052C8
2023-11-07 01:38:07,391 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 40@client-C5D94BB052C8
2023-11-07 01:38:07,391 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-11-07 01:38:07,391 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-11-07 01:38:07,391 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:07,391 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-11-07 01:38:07,391 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-3E098B494562-cacheEviction-AwaitToRun,5,main] started
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-3E098B494562-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-11-07 01:38:07,392 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-11-07 01:38:07,393 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-11-07 01:38:07,393 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:07,393 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:07,394 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-11-07 01:38:07,394 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-11-07 01:38:07,394 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-11-07 01:38:07,398 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-3E098B494562: set configuration 0: peers:[s0|localhost:33651]|listeners:[], old=null
2023-11-07 01:38:07,405 [s0-impl-thread1] INFO  segmented.LogSegment (LogSegment.java:loadSegment(170)) - Successfully read 39 entries from segment file /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/log_inprogress_0
2023-11-07 01:38:07,405 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-3E098B494562-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> 38
2023-11-07 01:38:07,405 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-3E098B494562-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:07,406 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(390)) - s0@group-3E098B494562: start as a follower, conf=0: peers:[s0|localhost:33651]|listeners:[], old=null
2023-11-07 01:38:07,407 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-3E098B494562: changes role from      null to FOLLOWER at term 1 for startAsFollower
2023-11-07 01:38:07,407 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-3E098B494562-FollowerState
2023-11-07 01:38:07,409 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3E098B494562,id=s0
2023-11-07 01:38:07,409 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2023-11-07 01:38:07,409 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-11-07 01:38:07,410 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2023-11-07 01:38:07,410 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-11-07 01:38:07,410 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-11-07 01:38:07,410 [s0@group-3E098B494562-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:38:07,410 [s0@group-3E098B494562-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:38:07,410 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(406)) - s0: start RPC server
2023-11-07 01:38:07,412 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 36701
2023-11-07 01:38:07,412 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 33651
2023-11-07 01:38:07,413 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 41121
2023-11-07 01:38:07,414 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:07,415 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-3E098B494562:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:33651]|listeners:[], old=null RUNNING
2023-11-07 01:38:07,415 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(223)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-3E098B494562:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:33651]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-3E098B494562:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:33651]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:217)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:203)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.assertLeaderContent(RaftSnapshotBaseTest.java:91)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testRestartPeer(RaftSnapshotBaseTest.java:175)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:07,415 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2023-11-07 01:38:07,573 [s0@group-3E098B494562-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-3E098B494562-FollowerState: change to CANDIDATE, lastRpcElapsedTime:166604331ns, electionTimeout:163ms
2023-11-07 01:38:07,573 [s0@group-3E098B494562-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-3E098B494562-FollowerState
2023-11-07 01:38:07,573 [s0@group-3E098B494562-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-3E098B494562: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-11-07 01:38:07,574 [s0@group-3E098B494562-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:07,574 [s0@group-3E098B494562-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-3E098B494562-LeaderElection4
2023-11-07 01:38:07,574 [s0@group-3E098B494562-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-3E098B494562-LeaderElection4 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|localhost:33651]|listeners:[], old=null
2023-11-07 01:38:07,575 [s0@group-3E098B494562-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s0@group-3E098B494562-LeaderElection4 PRE_VOTE round 0: result PASSED (term=1)
2023-11-07 01:38:07,575 [s0@group-3E098B494562-LeaderElection4] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@41bf9f76
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-3E098B494562-LeaderElection4 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|localhost:33651]|listeners:[], old=null
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s0@group-3E098B494562-LeaderElection4 ELECTION round 0: result PASSED (term=2)
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-3E098B494562-LeaderElection4
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-3E098B494562: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2023-11-07 01:38:07,577 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2023-11-07 01:38:07,578 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:07,578 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:38:07,578 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-11-07 01:38:07,578 [s0@group-3E098B494562-LeaderElection4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-3E098B494562-LeaderStateImpl
2023-11-07 01:38:07,578 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(562)) - s0@group-3E098B494562: set firstElectionSinceStartup to false for becomeLeader
2023-11-07 01:38:07,578 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s0@group-3E098B494562: change Leader from null to s0 at term 2 for becomeLeader, leader elected after 196ms
2023-11-07 01:38:07,578 [s0@group-3E098B494562-LeaderElection4] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(433)) - s0@group-3E098B494562-SegmentedRaftLogWorker: Rolling segment log-0_38 to index:38
2023-11-07 01:38:07,580 [s0@group-3E098B494562-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/log_0-38
2023-11-07 01:38:07,580 [s0@group-3E098B494562-LeaderElection4] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-3E098B494562: set configuration 39: peers:[s0|localhost:33651]|listeners:[], old=null
2023-11-07 01:38:07,580 [s0@group-3E098B494562-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(589)) - s0@group-3E098B494562-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/log_0-38
2023-11-07 01:38:07,591 [s0@group-3E098B494562-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(632)) - s0@group-3E098B494562-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/current/log_inprogress_39
2023-11-07 01:38:07,593 [s0@group-3E098B494562-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(316)) - leader is ready since appliedIndex == 39 >= startIndex == 39
2023-11-07 01:38:07,866 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-3E098B494562:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:OPENED:c40, conf=39: peers:[s0|localhost:33651]|listeners:[], old=null RUNNING
2023-11-07 01:38:07,866 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 0) 0 term: 1, index: 1, stateMachineLogEntry {,   logData: "m0",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 22, }, 
2023-11-07 01:38:07,867 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 1) 1 term: 1, index: 3, stateMachineLogEntry {,   logData: "m1",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 23, }, 
2023-11-07 01:38:07,867 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 2) 2 term: 1, index: 5, stateMachineLogEntry {,   logData: "m2",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 24, }, 
2023-11-07 01:38:07,867 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 3) 3 term: 1, index: 7, stateMachineLogEntry {,   logData: "m3",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 25, }, 
2023-11-07 01:38:07,867 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 4) 4 term: 1, index: 9, stateMachineLogEntry {,   logData: "m4",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 26, }, 
2023-11-07 01:38:07,867 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 5) 5 term: 1, index: 11, stateMachineLogEntry {,   logData: "m5",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 27, }, 
2023-11-07 01:38:07,867 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 6) 6 term: 1, index: 13, stateMachineLogEntry {,   logData: "m6",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 28, }, 
2023-11-07 01:38:07,868 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 7) 7 term: 1, index: 15, stateMachineLogEntry {,   logData: "m7",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 29, }, 
2023-11-07 01:38:07,868 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 8) 8 term: 1, index: 17, stateMachineLogEntry {,   logData: "m8",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 30, }, 
2023-11-07 01:38:07,868 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 9) 9 term: 1, index: 19, stateMachineLogEntry {,   logData: "m9",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 31, }, 
2023-11-07 01:38:07,868 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 10) 10 term: 1, index: 21, stateMachineLogEntry {,   logData: "m10",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 32, }, 
2023-11-07 01:38:07,868 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 11) 11 term: 1, index: 23, stateMachineLogEntry {,   logData: "m11",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 33, }, 
2023-11-07 01:38:07,868 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 12) 12 term: 1, index: 25, stateMachineLogEntry {,   logData: "m12",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 34, }, 
2023-11-07 01:38:07,869 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 13) 13 term: 1, index: 27, stateMachineLogEntry {,   logData: "m13",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 35, }, 
2023-11-07 01:38:07,869 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 14) 14 term: 1, index: 29, stateMachineLogEntry {,   logData: "m14",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 36, }, 
2023-11-07 01:38:07,869 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 15) 15 term: 1, index: 31, stateMachineLogEntry {,   logData: "m15",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 37, }, 
2023-11-07 01:38:07,869 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 16) 16 term: 1, index: 33, stateMachineLogEntry {,   logData: "m16",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 38, }, 
2023-11-07 01:38:07,869 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 17) 17 term: 1, index: 35, stateMachineLogEntry {,   logData: "m17",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 39, }, 
2023-11-07 01:38:07,869 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 18) 18 term: 1, index: 37, stateMachineLogEntry {,   logData: "m18",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\367\352O^\264\345G\031\274\275\305\331K\260R\310",   callId: 40, }, 
2023-11-07 01:38:07,869 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-11-07 01:38:07,869 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-11-07 01:38:07,869 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-11-07 01:38:07,869 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-11-07 01:38:07,869 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-11-07 01:38:07,870 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-3E098B494562:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:OPENED:c40, conf=39: peers:[s0|localhost:33651]|listeners:[], old=null RUNNING
2023-11-07 01:38:07,870 [MiniRaftCluster-8] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(416)) - s0: close
2023-11-07 01:38:07,870 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$3(514)) - s0@group-3E098B494562: shutdown
2023-11-07 01:38:07,871 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-3E098B494562,id=s0
2023-11-07 01:38:07,871 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(94)) - s0: shutdown s0@group-3E098B494562-LeaderStateImpl
2023-11-07 01:38:07,871 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(289)) - s0@group-3E098B494562-PendingRequests: sendNotLeaderResponses
2023-11-07 01:38:07,871 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-11-07 01:38:07,872 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-3E098B494562-StateMachineUpdater: set stopIndex = 40
2023-11-07 01:38:07,873 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-11-07 01:38:07,873 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-11-07 01:38:07,874 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-11-07 01:38:07,874 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-11-07 01:38:07,876 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-11-07 01:38:07,888 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.2_40 with options [READ]: sun.nio.ch.FileChannelImpl@1527a355
2023-11-07 01:38:07,888 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.2_40.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@1be05f81
2023-11-07 01:38:07,890 [s0@group-3E098B494562-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.2_40.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpce34a226/s0/f03fcca2-58ca-47a5-98e2-3e098b494562/sm/snapshot.2_40.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:07,890 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-3E098B494562-StateMachineUpdater: Took a snapshot at index 40
2023-11-07 01:38:07,890 [s0@group-3E098B494562-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-3E098B494562-StateMachineUpdater: snapshotIndex: updateIncreasingly 38 -> 40
2023-11-07 01:38:07,891 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(423)) - s0@group-3E098B494562: applyIndex: 40
2023-11-07 01:38:07,891 [s0@group-3E098B494562-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-3E098B494562-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2023-11-07 01:38:08,595 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(243)) - s0@group-3E098B494562-SegmentedRaftLogWorker close()
2023-11-07 01:38:08,596 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2023-11-07 01:38:08,596 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-11-07 01:38:08,596 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-11-07 01:38:08,596 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-11-07 01:38:08,596 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-11-07 01:38:08,596 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-11-07 01:38:08,596 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-11-07 01:38:08,596 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:   CLOSED    LEADER s0@group-3E098B494562:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-3E098B494562-SegmentedRaftLog:CLOSED:c40, conf=39: peers:[s0|localhost:33651]|listeners:[], old=null CLOSED
2023-11-07 01:38:08,597 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
]]></system-out>
  </testcase>
  <testcase name="testBasicInstallSnapshot" classname="org.apache.ratis.grpc.TestRaftSnapshotWithGrpc" time="4.524">
    <system-out><![CDATA[2023-11-07 01:38:08,598 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-11-07 01:38:08,598 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-11-07 01:38:08,598 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.RaftServer$Division log level to DEBUG
2023-11-07 01:38:08,598 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.server.raftlog.RaftLog log level to DEBUG
2023-11-07 01:38:08,598 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.client.RaftClient log level to DEBUG
2023-11-07 01:38:08,599 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-54B65749A8A2:[s0|localhost:41917]
2023-11-07 01:38:08,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-11-07 01:38:08,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-11-07 01:38:08,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-11-07 01:38:08,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-11-07 01:38:08,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-11-07 01:38:08,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-11-07 01:38:08,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-54B65749A8A2:[s0|localhost:41917], format? true
2023-11-07 01:38:08,600 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0
2023-11-07 01:38:08,600 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0 does not exist.
2023-11-07 01:38:08,600 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0
2023-11-07 01:38:08,600 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:08,600 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:08,601 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46377 (custom)
2023-11-07 01:38:08,601 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:08,601 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 46761 (custom)
2023-11-07 01:38:08,601 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-11-07 01:38:08,601 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41917 (custom)
2023-11-07 01:38:08,601 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-11-07 01:38:08,601 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:08,601 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-11-07 01:38:08,601 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:08,601 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:08,601 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-11-07 01:38:08,601 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-11-07 01:38:08,602 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-11-07 01:38:08,602 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:08,602 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2023-11-07 01:38:08,603 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:08,603 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0] (custom)
2023-11-07 01:38:08,603 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-11-07 01:38:08,603 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-11-07 01:38:08,604 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(100)) - s0: addNew group-54B65749A8A2:[s0|localhost:41917] returns group-54B65749A8A2:java.util.concurrent.CompletableFuture@14a68663[Not completed]
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(255)) - s0: new RaftServerImpl for group-54B65749A8A2:[s0|localhost:41917] with SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-54B65749A8A2: ConfigurationManager, init=-1: peers:[s0|localhost:41917]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-11-07 01:38:08,604 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-11-07 01:38:08,605 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2023-11-07 01:38:08,605 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-11-07 01:38:08,605 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2023-11-07 01:38:08,605 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:08,605 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:08,605 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-11-07 01:38:08,606 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-11-07 01:38:08,606 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-11-07 01:38:08,606 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-11-07 01:38:08,606 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-11-07 01:38:08,606 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-11-07 01:38:08,606 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0] (custom)
2023-11-07 01:38:08,606 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2 does not exist. Creating ...
2023-11-07 01:38:08,606 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2
2023-11-07 01:38:08,608 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/in_use.lock acquired by nodename 23589@fv-az1231-351
2023-11-07 01:38:08,608 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current
2023-11-07 01:38:08,608 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm
2023-11-07 01:38:08,609 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@1d10899e
2023-11-07 01:38:08,610 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:08,610 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(97)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2 has been successfully formatted.
2023-11-07 01:38:08,611 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:08,611 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2023-11-07 01:38:08,611 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-11-07 01:38:08,611 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-11-07 01:38:08,611 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:08,611 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-11-07 01:38:08,611 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-54B65749A8A2-cacheEviction-AwaitToRun,5,main] started
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-54B65749A8A2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-11-07 01:38:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:08,613 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:08,615 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-11-07 01:38:08,615 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-11-07 01:38:08,615 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-11-07 01:38:08,615 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:08,615 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:08,615 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(390)) - s0@group-54B65749A8A2: start as a follower, conf=-1: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:08,616 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-54B65749A8A2: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-11-07 01:38:08,616 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-54B65749A8A2-FollowerState
2023-11-07 01:38:08,616 [s0@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:38:08,616 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-54B65749A8A2,id=s0
2023-11-07 01:38:08,616 [s0@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:38:08,616 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2023-11-07 01:38:08,616 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-11-07 01:38:08,616 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2023-11-07 01:38:08,616 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-11-07 01:38:08,616 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-11-07 01:38:08,617 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(406)) - s0: start RPC server
2023-11-07 01:38:08,619 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 46761
2023-11-07 01:38:08,620 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 41917
2023-11-07 01:38:08,620 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 46377
2023-11-07 01:38:08,621 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2023-11-07 01:38:08,621 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:08,621 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t0, leader=null, voted=, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:08,621 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(223)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t0, leader=null, voted=, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:41917]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t0, leader=null, voted=, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|localhost:41917]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:217)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:203)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testBasicInstallSnapshot(RaftSnapshotBaseTest.java:199)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:08,806 [s0@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:190685308ns, electionTimeout:190ms
2023-11-07 01:38:08,806 [s0@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-54B65749A8A2-FollowerState
2023-11-07 01:38:08,806 [s0@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-11-07 01:38:08,807 [s0@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:08,807 [s0@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-54B65749A8A2-LeaderElection5
2023-11-07 01:38:08,807 [s0@group-54B65749A8A2-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-54B65749A8A2-LeaderElection5 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:08,808 [s0@group-54B65749A8A2-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s0@group-54B65749A8A2-LeaderElection5 PRE_VOTE round 0: result PASSED (term=0)
2023-11-07 01:38:08,808 [s0@group-54B65749A8A2-LeaderElection5] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@1963cf8c
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-54B65749A8A2-LeaderElection5 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s0@group-54B65749A8A2-LeaderElection5 ELECTION round 0: result PASSED (term=1)
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-54B65749A8A2-LeaderElection5
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-54B65749A8A2: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-11-07 01:38:08,810 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2023-11-07 01:38:08,811 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2023-11-07 01:38:08,811 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:08,811 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:38:08,811 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-11-07 01:38:08,811 [s0@group-54B65749A8A2-LeaderElection5] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-54B65749A8A2-LeaderStateImpl
2023-11-07 01:38:08,811 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(562)) - s0@group-54B65749A8A2: set firstElectionSinceStartup to false for becomeLeader
2023-11-07 01:38:08,811 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s0@group-54B65749A8A2: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 206ms
2023-11-07 01:38:08,811 [s0@group-54B65749A8A2-LeaderElection5] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(428)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: Starting segment from index:0
2023-11-07 01:38:08,816 [s0@group-54B65749A8A2-LeaderElection5] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 0: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:08,824 [s0@group-54B65749A8A2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(632)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_0
2023-11-07 01:38:08,825 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(316)) - leader is ready since appliedIndex == 0 >= startIndex == 0
2023-11-07 01:38:09,072 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-54B65749A8A2:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:09,072 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:09,073 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 41 returns []
2023-11-07 01:38:09,078 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=41, seq=null, RW, Message:6d30)
2023-11-07 01:38:09,079 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=41, seq=null, RW, Message:6d30, entry=(t:1, i:1), STATEMACHINELOGENTRY, 41@client-0DF16CBE4C94
2023-11-07 01:38:09,080 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 1
2023-11-07 01:38:09,080 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 41@client-0DF16CBE4C94
2023-11-07 01:38:09,083 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 41
2023-11-07 01:38:09,083 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 42 returns [41]
2023-11-07 01:38:09,088 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=42, seq=null, RW, Message:6d31)
2023-11-07 01:38:09,088 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=42, seq=null, RW, Message:6d31, entry=(t:1, i:3), STATEMACHINELOGENTRY, 42@client-0DF16CBE4C94
2023-11-07 01:38:09,089 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 3
2023-11-07 01:38:09,089 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 42@client-0DF16CBE4C94
2023-11-07 01:38:09,091 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 42
2023-11-07 01:38:09,091 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 43 returns [42]
2023-11-07 01:38:09,092 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=43, seq=null, RW, Message:6d32)
2023-11-07 01:38:09,093 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=43, seq=null, RW, Message:6d32, entry=(t:1, i:5), STATEMACHINELOGENTRY, 43@client-0DF16CBE4C94
2023-11-07 01:38:09,093 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 5
2023-11-07 01:38:09,093 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-0DF16CBE4C94
2023-11-07 01:38:09,094 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 43
2023-11-07 01:38:09,094 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 44 returns [43]
2023-11-07 01:38:09,095 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=44, seq=null, RW, Message:6d33)
2023-11-07 01:38:09,096 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=44, seq=null, RW, Message:6d33, entry=(t:1, i:7), STATEMACHINELOGENTRY, 44@client-0DF16CBE4C94
2023-11-07 01:38:09,097 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 7
2023-11-07 01:38:09,097 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 44@client-0DF16CBE4C94
2023-11-07 01:38:09,099 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 44
2023-11-07 01:38:09,099 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 45 returns [44]
2023-11-07 01:38:09,100 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=45, seq=null, RW, Message:6d34)
2023-11-07 01:38:09,100 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=45, seq=null, RW, Message:6d34, entry=(t:1, i:9), STATEMACHINELOGENTRY, 45@client-0DF16CBE4C94
2023-11-07 01:38:09,101 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 9
2023-11-07 01:38:09,101 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-0DF16CBE4C94
2023-11-07 01:38:09,108 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 45
2023-11-07 01:38:09,108 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 46 returns [45]
2023-11-07 01:38:09,110 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=46, seq=null, RW, Message:6d35)
2023-11-07 01:38:09,110 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=46, seq=null, RW, Message:6d35, entry=(t:1, i:11), STATEMACHINELOGENTRY, 46@client-0DF16CBE4C94
2023-11-07 01:38:09,114 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_9 with options [READ]: sun.nio.ch.FileChannelImpl@39bcc763
2023-11-07 01:38:09,115 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_9.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3d83548c
2023-11-07 01:38:09,117 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_9.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_9.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:09,117 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-54B65749A8A2-StateMachineUpdater: Took a snapshot at index 9
2023-11-07 01:38:09,117 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 9
2023-11-07 01:38:09,117 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 11
2023-11-07 01:38:09,117 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 46@client-0DF16CBE4C94
2023-11-07 01:38:09,119 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 46
2023-11-07 01:38:09,119 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 47 returns [46]
2023-11-07 01:38:09,120 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=47, seq=null, RW, Message:6d36)
2023-11-07 01:38:09,121 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=47, seq=null, RW, Message:6d36, entry=(t:1, i:13), STATEMACHINELOGENTRY, 47@client-0DF16CBE4C94
2023-11-07 01:38:09,121 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 13
2023-11-07 01:38:09,122 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 47@client-0DF16CBE4C94
2023-11-07 01:38:09,123 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 47
2023-11-07 01:38:09,123 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 48 returns [47]
2023-11-07 01:38:09,124 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=48, seq=null, RW, Message:6d37)
2023-11-07 01:38:09,124 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=48, seq=null, RW, Message:6d37, entry=(t:1, i:15), STATEMACHINELOGENTRY, 48@client-0DF16CBE4C94
2023-11-07 01:38:09,125 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 15
2023-11-07 01:38:09,125 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 48@client-0DF16CBE4C94
2023-11-07 01:38:09,126 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 48
2023-11-07 01:38:09,126 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 49 returns [48]
2023-11-07 01:38:09,132 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=49, seq=null, RW, Message:6d38)
2023-11-07 01:38:09,133 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=49, seq=null, RW, Message:6d38, entry=(t:1, i:17), STATEMACHINELOGENTRY, 49@client-0DF16CBE4C94
2023-11-07 01:38:09,133 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 17
2023-11-07 01:38:09,134 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 49@client-0DF16CBE4C94
2023-11-07 01:38:09,135 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 49
2023-11-07 01:38:09,135 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 50 returns [49]
2023-11-07 01:38:09,136 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=50, seq=null, RW, Message:6d39)
2023-11-07 01:38:09,136 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=50, seq=null, RW, Message:6d39, entry=(t:1, i:19), STATEMACHINELOGENTRY, 50@client-0DF16CBE4C94
2023-11-07 01:38:09,137 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 19
2023-11-07 01:38:09,137 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 50@client-0DF16CBE4C94
2023-11-07 01:38:09,145 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 50
2023-11-07 01:38:09,146 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 51 returns [50]
2023-11-07 01:38:09,147 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=51, seq=null, RW, Message:6d3130)
2023-11-07 01:38:09,148 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=51, seq=null, RW, Message:6d3130, entry=(t:1, i:21), STATEMACHINELOGENTRY, 51@client-0DF16CBE4C94
2023-11-07 01:38:09,161 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_19 with options [READ]: sun.nio.ch.FileChannelImpl@7881cd58
2023-11-07 01:38:09,162 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_19.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@16eb896b
2023-11-07 01:38:09,163 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_19.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_19.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:09,163 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-54B65749A8A2-StateMachineUpdater: Took a snapshot at index 19
2023-11-07 01:38:09,163 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: updateIncreasingly 9 -> 19
2023-11-07 01:38:09,163 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 21
2023-11-07 01:38:09,163 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 51@client-0DF16CBE4C94
2023-11-07 01:38:09,165 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 51
2023-11-07 01:38:09,165 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 52 returns [51]
2023-11-07 01:38:09,166 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=52, seq=null, RW, Message:6d3131)
2023-11-07 01:38:09,167 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=52, seq=null, RW, Message:6d3131, entry=(t:1, i:23), STATEMACHINELOGENTRY, 52@client-0DF16CBE4C94
2023-11-07 01:38:09,168 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 23
2023-11-07 01:38:09,168 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 52@client-0DF16CBE4C94
2023-11-07 01:38:09,169 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 52
2023-11-07 01:38:09,169 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 53 returns [52]
2023-11-07 01:38:09,170 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=53, seq=null, RW, Message:6d3132)
2023-11-07 01:38:09,170 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=53, seq=null, RW, Message:6d3132, entry=(t:1, i:25), STATEMACHINELOGENTRY, 53@client-0DF16CBE4C94
2023-11-07 01:38:09,171 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 25
2023-11-07 01:38:09,171 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 53@client-0DF16CBE4C94
2023-11-07 01:38:09,172 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 53
2023-11-07 01:38:09,172 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 54 returns [53]
2023-11-07 01:38:09,173 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=54, seq=null, RW, Message:6d3133)
2023-11-07 01:38:09,174 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=54, seq=null, RW, Message:6d3133, entry=(t:1, i:27), STATEMACHINELOGENTRY, 54@client-0DF16CBE4C94
2023-11-07 01:38:09,175 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 27
2023-11-07 01:38:09,175 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 54@client-0DF16CBE4C94
2023-11-07 01:38:09,176 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 54
2023-11-07 01:38:09,176 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 55 returns [54]
2023-11-07 01:38:09,177 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=55, seq=null, RW, Message:6d3134)
2023-11-07 01:38:09,178 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=55, seq=null, RW, Message:6d3134, entry=(t:1, i:29), STATEMACHINELOGENTRY, 55@client-0DF16CBE4C94
2023-11-07 01:38:09,178 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 29
2023-11-07 01:38:09,178 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 55@client-0DF16CBE4C94
2023-11-07 01:38:09,179 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 55
2023-11-07 01:38:09,179 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 56 returns [55]
2023-11-07 01:38:09,180 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=56, seq=null, RW, Message:6d3135)
2023-11-07 01:38:09,181 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=56, seq=null, RW, Message:6d3135, entry=(t:1, i:31), STATEMACHINELOGENTRY, 56@client-0DF16CBE4C94
2023-11-07 01:38:09,194 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_29 with options [READ]: sun.nio.ch.FileChannelImpl@4933d30a
2023-11-07 01:38:09,195 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_29.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@6eb3c994
2023-11-07 01:38:09,196 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_29.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_29.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:09,196 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-54B65749A8A2-StateMachineUpdater: Took a snapshot at index 29
2023-11-07 01:38:09,196 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: updateIncreasingly 19 -> 29
2023-11-07 01:38:09,196 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 31
2023-11-07 01:38:09,196 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 56@client-0DF16CBE4C94
2023-11-07 01:38:09,198 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 56
2023-11-07 01:38:09,198 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 57 returns [56]
2023-11-07 01:38:09,200 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=57, seq=null, RW, Message:6d3136)
2023-11-07 01:38:09,200 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=57, seq=null, RW, Message:6d3136, entry=(t:1, i:33), STATEMACHINELOGENTRY, 57@client-0DF16CBE4C94
2023-11-07 01:38:09,205 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 33
2023-11-07 01:38:09,205 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 57@client-0DF16CBE4C94
2023-11-07 01:38:09,208 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 57
2023-11-07 01:38:09,208 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 58 returns [57]
2023-11-07 01:38:09,209 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=58, seq=null, RW, Message:6d3137)
2023-11-07 01:38:09,210 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=58, seq=null, RW, Message:6d3137, entry=(t:1, i:35), STATEMACHINELOGENTRY, 58@client-0DF16CBE4C94
2023-11-07 01:38:09,211 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 35
2023-11-07 01:38:09,211 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 58@client-0DF16CBE4C94
2023-11-07 01:38:09,212 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 58
2023-11-07 01:38:09,212 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-0DF16CBE4C94: get 59 returns [58]
2023-11-07 01:38:09,213 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=59, seq=null, RW, Message:6d3138)
2023-11-07 01:38:09,214 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-0DF16CBE4C94->s0@group-54B65749A8A2, cid=59, seq=null, RW, Message:6d3138, entry=(t:1, i:37), STATEMACHINELOGENTRY, 59@client-0DF16CBE4C94
2023-11-07 01:38:09,215 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 37
2023-11-07 01:38:09,215 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 59@client-0DF16CBE4C94
2023-11-07 01:38:09,216 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-0DF16CBE4C94: add replied callId 59
2023-11-07 01:38:09,218 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:testBasicInstallSnapshot(211)) - nextIndex = 39
2023-11-07 01:38:09,219 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:exists(183)) - File exists: /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_29
2023-11-07 01:38:09,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-11-07 01:38:09,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-11-07 01:38:09,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-11-07 01:38:09,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-11-07 01:38:09,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-11-07 01:38:09,220 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-54B65749A8A2:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:09,223 [MiniRaftCluster-10] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(416)) - s0: close
2023-11-07 01:38:09,223 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$3(514)) - s0@group-54B65749A8A2: shutdown
2023-11-07 01:38:09,223 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-54B65749A8A2,id=s0
2023-11-07 01:38:09,223 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(94)) - s0: shutdown s0@group-54B65749A8A2-LeaderStateImpl
2023-11-07 01:38:09,223 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(289)) - s0@group-54B65749A8A2-PendingRequests: sendNotLeaderResponses
2023-11-07 01:38:09,224 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-11-07 01:38:09,224 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-54B65749A8A2-StateMachineUpdater: set stopIndex = 38
2023-11-07 01:38:09,227 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-11-07 01:38:09,227 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-11-07 01:38:09,227 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-11-07 01:38:09,228 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-11-07 01:38:09,228 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-11-07 01:38:09,238 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38 with options [READ]: sun.nio.ch.FileChannelImpl@18ae3217
2023-11-07 01:38:09,239 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@75b7e423
2023-11-07 01:38:09,241 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:09,241 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-54B65749A8A2-StateMachineUpdater: Took a snapshot at index 38
2023-11-07 01:38:09,241 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: updateIncreasingly 29 -> 38
2023-11-07 01:38:09,241 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(423)) - s0@group-54B65749A8A2: applyIndex: 38
2023-11-07 01:38:09,242 [s0@group-54B65749A8A2-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-54B65749A8A2-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2023-11-07 01:38:10,217 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(243)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker close()
2023-11-07 01:38:10,218 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2023-11-07 01:38:10,218 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-11-07 01:38:10,219 [Time-limited test] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.delete /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_0
2023-11-07 01:38:10,219 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:testBasicInstallSnapshot(229)) - Restarting the cluster
2023-11-07 01:38:10,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-11-07 01:38:10,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-11-07 01:38:10,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-11-07 01:38:10,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-11-07 01:38:10,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-11-07 01:38:10,219 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:   CLOSED    LEADER s0@group-54B65749A8A2:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:CLOSED:c38, conf=0: peers:[s0|localhost:41917]|listeners:[], old=null CLOSED
2023-11-07 01:38:10,220 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-11-07 01:38:10,220 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-54B65749A8A2:[s0|localhost:41917], format? false
2023-11-07 01:38:10,221 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:10,221 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:10,221 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46377 (custom)
2023-11-07 01:38:10,221 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:10,221 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 46761 (custom)
2023-11-07 01:38:10,221 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-11-07 01:38:10,221 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41917 (custom)
2023-11-07 01:38:10,221 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-11-07 01:38:10,221 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,221 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-11-07 01:38:10,221 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:10,221 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:10,222 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-11-07 01:38:10,222 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-11-07 01:38:10,223 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-11-07 01:38:10,223 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:10,223 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2023-11-07 01:38:10,223 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:10,223 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0] (custom)
2023-11-07 01:38:10,223 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-11-07 01:38:10,223 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-11-07 01:38:10,224 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(264)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2
2023-11-07 01:38:10,224 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(100)) - s0: addNew group-54B65749A8A2:[s0|localhost:41917] returns group-54B65749A8A2:java.util.concurrent.CompletableFuture@48c2bffa[Not completed]
2023-11-07 01:38:10,224 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-11-07 01:38:10,225 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-11-07 01:38:10,225 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-11-07 01:38:10,225 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-11-07 01:38:10,225 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-11-07 01:38:10,225 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {s0=s0:      NEW group-54B65749A8A2:java.util.concurrent.CompletableFuture@48c2bffa[Not completed]}
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(255)) - s0: new RaftServerImpl for group-54B65749A8A2:[s0|localhost:41917] with SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-54B65749A8A2: ConfigurationManager, init=-1: peers:[s0|localhost:41917]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-11-07 01:38:10,225 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2023-11-07 01:38:10,226 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-11-07 01:38:10,226 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2023-11-07 01:38:10,226 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:10,226 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:10,226 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-11-07 01:38:10,227 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-11-07 01:38:10,227 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-11-07 01:38:10,227 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-11-07 01:38:10,227 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-11-07 01:38:10,227 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-11-07 01:38:10,227 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0] (custom)
2023-11-07 01:38:10,229 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/in_use.lock acquired by nodename 23589@fv-az1231-351
2023-11-07 01:38:10,229 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:analyzeAndRecoverStorage(117)) - Read RaftStorageMetadata{term=1, votedFor=s0} from /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta
2023-11-07 01:38:10,229 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 0: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,229 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:10,230 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@7f46aa1b
2023-11-07 01:38:10,230 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38]
2023-11-07 01:38:10,230 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 41@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 42@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 44@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 46@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 47@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 48@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 49@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 50@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 51@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 52@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 53@client-0DF16CBE4C94
2023-11-07 01:38:10,231 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 54@client-0DF16CBE4C94
2023-11-07 01:38:10,232 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 55@client-0DF16CBE4C94
2023-11-07 01:38:10,232 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 56@client-0DF16CBE4C94
2023-11-07 01:38:10,232 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 57@client-0DF16CBE4C94
2023-11-07 01:38:10,232 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 58@client-0DF16CBE4C94
2023-11-07 01:38:10,232 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 59@client-0DF16CBE4C94
2023-11-07 01:38:10,232 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-11-07 01:38:10,232 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-11-07 01:38:10,232 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,232 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-11-07 01:38:10,232 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-11-07 01:38:10,235 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:10,235 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-11-07 01:38:10,235 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-11-07 01:38:10,235 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,235 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-54B65749A8A2-cacheEviction-AwaitToRun,5,main] started
2023-11-07 01:38:10,235 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-54B65749A8A2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2
2023-11-07 01:38:10,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:10,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-11-07 01:38:10,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:10,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:10,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-11-07 01:38:10,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-11-07 01:38:10,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-11-07 01:38:10,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-11-07 01:38:10,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:10,236 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,238 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-11-07 01:38:10,238 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-11-07 01:38:10,238 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-11-07 01:38:10,238 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> 38
2023-11-07 01:38:10,238 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:10,238 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(390)) - s0@group-54B65749A8A2: start as a follower, conf=0: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,238 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-54B65749A8A2: changes role from      null to FOLLOWER at term 1 for startAsFollower
2023-11-07 01:38:10,239 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-54B65749A8A2-FollowerState
2023-11-07 01:38:10,242 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-54B65749A8A2,id=s0
2023-11-07 01:38:10,242 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2023-11-07 01:38:10,243 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-11-07 01:38:10,243 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2023-11-07 01:38:10,243 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-11-07 01:38:10,243 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-11-07 01:38:10,243 [s0@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:38:10,243 [s0@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:38:10,243 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(406)) - s0: start RPC server
2023-11-07 01:38:10,244 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 46761
2023-11-07 01:38:10,246 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 41917
2023-11-07 01:38:10,246 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 46377
2023-11-07 01:38:10,246 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:10,247 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:10,247 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(223)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:41917]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c38, conf=0: peers:[s0|localhost:41917]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:217)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:203)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.assertLeaderContent(RaftSnapshotBaseTest.java:91)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testBasicInstallSnapshot(RaftSnapshotBaseTest.java:232)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:10,247 [JvmPauseMonitor6] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2023-11-07 01:38:10,543 [s0@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:304826152ns, electionTimeout:300ms
2023-11-07 01:38:10,543 [s0@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-54B65749A8A2-FollowerState
2023-11-07 01:38:10,544 [s0@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-11-07 01:38:10,544 [s0@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:10,544 [s0@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-54B65749A8A2-LeaderElection6
2023-11-07 01:38:10,545 [s0@group-54B65749A8A2-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-54B65749A8A2-LeaderElection6 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,545 [s0@group-54B65749A8A2-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s0@group-54B65749A8A2-LeaderElection6 PRE_VOTE round 0: result PASSED (term=1)
2023-11-07 01:38:10,545 [s0@group-54B65749A8A2-LeaderElection6] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@c51589d
2023-11-07 01:38:10,547 [s0@group-54B65749A8A2-LeaderElection6] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:10,547 [s0@group-54B65749A8A2-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s0@group-54B65749A8A2-LeaderElection6 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,547 [s0@group-54B65749A8A2-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s0@group-54B65749A8A2-LeaderElection6 ELECTION round 0: result PASSED (term=2)
2023-11-07 01:38:10,547 [s0@group-54B65749A8A2-LeaderElection6] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-54B65749A8A2-LeaderElection6
2023-11-07 01:38:10,547 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-54B65749A8A2: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2023-11-07 01:38:10,547 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-11-07 01:38:10,547 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:38:10,547 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:10,548 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-11-07 01:38:10,548 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-11-07 01:38:10,548 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-11-07 01:38:10,548 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2023-11-07 01:38:10,548 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2023-11-07 01:38:10,549 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:10,549 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:38:10,549 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-11-07 01:38:10,549 [s0@group-54B65749A8A2-LeaderElection6] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-54B65749A8A2-LeaderStateImpl
2023-11-07 01:38:10,549 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(562)) - s0@group-54B65749A8A2: set firstElectionSinceStartup to false for becomeLeader
2023-11-07 01:38:10,549 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s0@group-54B65749A8A2: change Leader from null to s0 at term 2 for becomeLeader, leader elected after 323ms
2023-11-07 01:38:10,549 [s0@group-54B65749A8A2-LeaderElection6] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(428)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: Starting segment from index:39
2023-11-07 01:38:10,549 [s0@group-54B65749A8A2-LeaderElection6] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 39: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,561 [s0@group-54B65749A8A2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(632)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_39
2023-11-07 01:38:10,563 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(316)) - leader is ready since appliedIndex == 39 >= startIndex == 39
2023-11-07 01:38:10,697 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-54B65749A8A2:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c40, conf=39: peers:[s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:10,698 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 0) 0 term: 1, index: 1, stateMachineLogEntry {,   logData: "m0",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 41, }, 
2023-11-07 01:38:10,700 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 1) 1 term: 1, index: 3, stateMachineLogEntry {,   logData: "m1",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 42, }, 
2023-11-07 01:38:10,700 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 2) 2 term: 1, index: 5, stateMachineLogEntry {,   logData: "m2",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 43, }, 
2023-11-07 01:38:10,700 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 3) 3 term: 1, index: 7, stateMachineLogEntry {,   logData: "m3",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 44, }, 
2023-11-07 01:38:10,700 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 4) 4 term: 1, index: 9, stateMachineLogEntry {,   logData: "m4",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 45, }, 
2023-11-07 01:38:10,700 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 5) 5 term: 1, index: 11, stateMachineLogEntry {,   logData: "m5",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 46, }, 
2023-11-07 01:38:10,700 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 6) 6 term: 1, index: 13, stateMachineLogEntry {,   logData: "m6",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 47, }, 
2023-11-07 01:38:10,701 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 7) 7 term: 1, index: 15, stateMachineLogEntry {,   logData: "m7",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 48, }, 
2023-11-07 01:38:10,701 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 8) 8 term: 1, index: 17, stateMachineLogEntry {,   logData: "m8",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 49, }, 
2023-11-07 01:38:10,701 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 9) 9 term: 1, index: 19, stateMachineLogEntry {,   logData: "m9",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 50, }, 
2023-11-07 01:38:10,701 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 10) 10 term: 1, index: 21, stateMachineLogEntry {,   logData: "m10",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 51, }, 
2023-11-07 01:38:10,701 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 11) 11 term: 1, index: 23, stateMachineLogEntry {,   logData: "m11",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 52, }, 
2023-11-07 01:38:10,701 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 12) 12 term: 1, index: 25, stateMachineLogEntry {,   logData: "m12",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 53, }, 
2023-11-07 01:38:10,701 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 13) 13 term: 1, index: 27, stateMachineLogEntry {,   logData: "m13",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 54, }, 
2023-11-07 01:38:10,701 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 14) 14 term: 1, index: 29, stateMachineLogEntry {,   logData: "m14",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 55, }, 
2023-11-07 01:38:10,702 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 15) 15 term: 1, index: 31, stateMachineLogEntry {,   logData: "m15",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 56, }, 
2023-11-07 01:38:10,702 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 16) 16 term: 1, index: 33, stateMachineLogEntry {,   logData: "m16",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 57, }, 
2023-11-07 01:38:10,702 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 17) 17 term: 1, index: 35, stateMachineLogEntry {,   logData: "m17",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 58, }, 
2023-11-07 01:38:10,702 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 18) 18 term: 1, index: 37, stateMachineLogEntry {,   logData: "m18",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 59, }, 
2023-11-07 01:38:10,702 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:10,703 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:get(162)) - client-61946BA3FD81: get 60 returns []
2023-11-07 01:38:10,709 [s0-client-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:submitClientRequestAsync(891)) - s0@group-54B65749A8A2: receive client request(RaftClientRequest:client-61946BA3FD81->s0@group-54B65749A8A2, cid=60, seq=null, RW, Message:6d3139)
2023-11-07 01:38:10,711 [s0-client-thread1] DEBUG server.RaftServer$Division (LeaderStateImpl.java:addPendingRequest(517)) - s0@group-54B65749A8A2-LeaderStateImpl: addPendingRequest at RaftClientRequest:client-61946BA3FD81->s0@group-54B65749A8A2, cid=60, seq=null, RW, Message:6d3139, entry=(t:2, i:41), STATEMACHINELOGENTRY, 60@client-61946BA3FD81
2023-11-07 01:38:10,712 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 41
2023-11-07 01:38:10,713 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 41, m19 -> (t:2, i:41), STATEMACHINELOGENTRY, 60@client-61946BA3FD81
2023-11-07 01:38:10,715 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-61946BA3FD81: add replied callId 60
2023-11-07 01:38:10,721 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:addNewPeers(464)) - Add new peers [s3, s4]
2023-11-07 01:38:10,721 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s3, group-54B65749A8A2:[s3, s4, s0|localhost:41917], format? true
2023-11-07 01:38:10,721 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3
2023-11-07 01:38:10,721 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3 does not exist.
2023-11-07 01:38:10,721 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3
2023-11-07 01:38:10,722 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:10,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:10,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.port = 39111 (fallback to raft.grpc.server.port)
2023-11-07 01:38:10,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:10,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.port = 39111 (fallback to raft.grpc.server.port)
2023-11-07 01:38:10,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-11-07 01:38:10,722 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 39111 (custom)
2023-11-07 01:38:10,722 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-11-07 01:38:10,722 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,722 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-11-07 01:38:10,722 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:10,723 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:10,723 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-11-07 01:38:10,723 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-11-07 01:38:10,723 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-11-07 01:38:10,723 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:10,723 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2023-11-07 01:38:10,723 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:10,724 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3] (custom)
2023-11-07 01:38:10,724 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-11-07 01:38:10,724 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-11-07 01:38:10,725 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(100)) - s3: addNew group-54B65749A8A2:[s3, s4, s0|localhost:41917] returns group-54B65749A8A2:java.util.concurrent.CompletableFuture@59b40af0[Not completed]
2023-11-07 01:38:10,725 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s4, group-54B65749A8A2:[s3, s4, s0|localhost:41917], format? true
2023-11-07 01:38:10,725 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4
2023-11-07 01:38:10,725 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(318)) - deleteFully: target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4 does not exist.
2023-11-07 01:38:10,725 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4
2023-11-07 01:38:10,725 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:10,725 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:10,725 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.port = 37939 (fallback to raft.grpc.server.port)
2023-11-07 01:38:10,725 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:10,725 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.port = 37939 (fallback to raft.grpc.server.port)
2023-11-07 01:38:10,725 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-11-07 01:38:10,725 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 37939 (custom)
2023-11-07 01:38:10,725 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-11-07 01:38:10,725 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,726 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-11-07 01:38:10,726 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:10,726 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:10,726 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-11-07 01:38:10,726 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-11-07 01:38:10,726 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-11-07 01:38:10,726 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:10,726 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2023-11-07 01:38:10,726 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:10,726 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4] (custom)
2023-11-07 01:38:10,727 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-11-07 01:38:10,727 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-11-07 01:38:10,727 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(100)) - s4: addNew group-54B65749A8A2:[s3, s4, s0|localhost:41917] returns group-54B65749A8A2:java.util.concurrent.CompletableFuture@26c6cf44[Not completed]
2023-11-07 01:38:10,727 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:10,727 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:10,727 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:10,727 [s4-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(255)) - s4: new RaftServerImpl for group-54B65749A8A2:[s3, s4, s0|localhost:41917] with SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:10,727 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s4@group-54B65749A8A2: ConfigurationManager, init=-1: peers:[s3, s4, s0|localhost:41917]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-11-07 01:38:10,728 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2023-11-07 01:38:10,729 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:10,729 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:10,729 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-11-07 01:38:10,729 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-11-07 01:38:10,729 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-11-07 01:38:10,729 [s4-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-11-07 01:38:10,729 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:10,729 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:10,729 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:10,729 [s3-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(255)) - s3: new RaftServerImpl for group-54B65749A8A2:[s3, s4, s0|localhost:41917] with SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:10,729 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s3@group-54B65749A8A2: ConfigurationManager, init=-1: peers:[s3, s4, s0|localhost:41917]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-11-07 01:38:10,730 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2023-11-07 01:38:10,731 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:10,731 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:10,731 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-11-07 01:38:10,731 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-11-07 01:38:10,731 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-11-07 01:38:10,731 [s3-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-11-07 01:38:10,731 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-11-07 01:38:10,731 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-11-07 01:38:10,731 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3] (custom)
2023-11-07 01:38:10,731 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2 does not exist. Creating ...
2023-11-07 01:38:10,732 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2
2023-11-07 01:38:10,733 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/in_use.lock acquired by nodename 23589@fv-az1231-351
2023-11-07 01:38:10,733 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current
2023-11-07 01:38:10,733 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm
2023-11-07 01:38:10,733 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@7542f812
2023-11-07 01:38:10,735 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:10,735 [s3-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(97)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2 has been successfully formatted.
2023-11-07 01:38:10,735 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:10,735 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2023-11-07 01:38:10,735 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-11-07 01:38:10,735 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-11-07 01:38:10,735 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s3@group-54B65749A8A2-cacheEviction-AwaitToRun,5,main] started
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s3@group-54B65749A8A2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-11-07 01:38:10,736 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:10,737 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:10,737 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-11-07 01:38:10,737 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-11-07 01:38:10,737 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-11-07 01:38:10,737 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-11-07 01:38:10,737 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:10,737 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,739 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-11-07 01:38:10,739 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-11-07 01:38:10,739 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-11-07 01:38:10,739 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s3@group-54B65749A8A2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:10,739 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s3@group-54B65749A8A2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:10,739 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(390)) - s3@group-54B65749A8A2: start as a follower, conf=-1: peers:[s3, s4, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,739 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-11-07 01:38:10,739 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-FollowerState
2023-11-07 01:38:10,740 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-54B65749A8A2,id=s3
2023-11-07 01:38:10,740 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2023-11-07 01:38:10,740 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-11-07 01:38:10,740 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2023-11-07 01:38:10,740 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-11-07 01:38:10,740 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-11-07 01:38:10,740 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(406)) - s3: start RPC server
2023-11-07 01:38:10,741 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:38:10,741 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 39111
2023-11-07 01:38:10,741 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:38:10,742 [JvmPauseMonitor7] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s3: Started
2023-11-07 01:38:10,742 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-11-07 01:38:10,742 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-11-07 01:38:10,742 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4] (custom)
2023-11-07 01:38:10,742 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2 does not exist. Creating ...
2023-11-07 01:38:10,742 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2
2023-11-07 01:38:10,744 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/in_use.lock acquired by nodename 23589@fv-az1231-351
2023-11-07 01:38:10,744 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/current
2023-11-07 01:38:10,744 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm
2023-11-07 01:38:10,744 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3e21a32b
2023-11-07 01:38:10,746 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:10,746 [s4-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(97)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2 has been successfully formatted.
2023-11-07 01:38:10,747 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:10,747 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot null
2023-11-07 01:38:10,747 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-11-07 01:38:10,747 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-11-07 01:38:10,747 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,747 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-11-07 01:38:10,747 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-11-07 01:38:10,747 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:10,747 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-11-07 01:38:10,747 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s4@group-54B65749A8A2-cacheEviction-AwaitToRun,5,main] started
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s4@group-54B65749A8A2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:10,748 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,749 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-11-07 01:38:10,749 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-11-07 01:38:10,749 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-11-07 01:38:10,750 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s4@group-54B65749A8A2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:10,750 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s4@group-54B65749A8A2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:10,750 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(390)) - s4@group-54B65749A8A2: start as a follower, conf=-1: peers:[s3, s4, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,750 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-11-07 01:38:10,750 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:10,751 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-54B65749A8A2,id=s4
2023-11-07 01:38:10,751 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:38:10,751 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2023-11-07 01:38:10,751 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:38:10,751 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-11-07 01:38:10,751 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2023-11-07 01:38:10,751 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-11-07 01:38:10,751 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-11-07 01:38:10,751 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(406)) - s4: start RPC server
2023-11-07 01:38:10,752 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 37939
2023-11-07 01:38:10,753 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:10,753 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:setConfiguration(819)) - Start changing the configuration: [s3|0.0.0.0:39111, s0|localhost:41917]
2023-11-07 01:38:10,755 [JvmPauseMonitor8] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s4: Started
2023-11-07 01:38:10,762 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-54B65749A8A2: receive setConfiguration SetConfigurationRequest:client-DE63551E3C73->s0@group-54B65749A8A2, cid=61, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:39111, s0|localhost:41917], listeners:[]
2023-11-07 01:38:10,762 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-54B65749A8A2-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-DE63551E3C73->s0@group-54B65749A8A2, cid=61, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:39111, s0|localhost:41917], listeners:[]
2023-11-07 01:38:10,762 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:10,762 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,762 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:10,762 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:10,762 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:10,763 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:10,763 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:10,763 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:10,763 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:10,763 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:10,764 [s0@group-54B65749A8A2->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-54B65749A8A2->s3-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38] to follower
2023-11-07 01:38:10,764 [s0@group-54B65749A8A2->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s3
2023-11-07 01:38:10,768 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(89)) - s3@group-54B65749A8A2: receive installSnapshot: s0->s3#0-t2,chunk:007495ea-9d64-4eea-8edf-6f59098ba226,0
2023-11-07 01:38:10,769 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@7ce51e1f
2023-11-07 01:38:10,771 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:10,771 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(562)) - s3@group-54B65749A8A2: set firstElectionSinceStartup to false for installSnapshot
2023-11-07 01:38:10,771 [grpc-default-executor-0] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s3@group-54B65749A8A2: change Leader from null to s0 at term 2 for installSnapshot, leader elected after 40ms
2023-11-07 01:38:10,771 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-007495ea-9d64-4eea-8edf-6f59098ba226
2023-11-07 01:38:10,771 [grpc-default-executor-0] INFO  storage.SnapshotManager (SnapshotManager.java:installSnapshot(89)) - Installing snapshot:s0->s3#0-t2,chunk:007495ea-9d64-4eea-8edf-6f59098ba226,0, to tmp dir:/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-007495ea-9d64-4eea-8edf-6f59098ba226
2023-11-07 01:38:10,772 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-007495ea-9d64-4eea-8edf-6f59098ba226
2023-11-07 01:38:10,772 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-007495ea-9d64-4eea-8edf-6f59098ba226/snapshot.1_38.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@7641aec9
2023-11-07 01:38:10,775 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-007495ea-9d64-4eea-8edf-6f59098ba226/snapshot.1_38.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-007495ea-9d64-4eea-8edf-6f59098ba226/snapshot.1_38.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:10,775 [grpc-default-executor-0] INFO  storage.SnapshotManager (SnapshotManager.java:rename(168)) - Installed snapshot, renaming temporary dir /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-007495ea-9d64-4eea-8edf-6f59098ba226 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm
2023-11-07 01:38:10,775 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm.tmp20231107-013810_775
2023-11-07 01:38:10,775 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-007495ea-9d64-4eea-8edf-6f59098ba226 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm
2023-11-07 01:38:10,775 [grpc-default-executor-0] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm.tmp20231107-013810_775
2023-11-07 01:38:10,776 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.delete /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm.tmp20231107-013810_775
2023-11-07 01:38:10,776 [grpc-default-executor-0] INFO  raftlog.RaftLog (RaftLogBase.java:lambda$new$0(54)) - s3@group-54B65749A8A2-SegmentedRaftLog: snapshotIndex: updateIncreasingly -1 -> 38
2023-11-07 01:38:10,776 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:reinitialize(236)) - Reinitializing SimpleStateMachine4Testing:s3:group-54B65749A8A2
2023-11-07 01:38:10,777 [grpc-default-executor-0] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s3@group-54B65749A8A2-SegmentedRaftLogWorker: flushIndex: setUnconditionally -1 -> 38
2023-11-07 01:38:10,777 [grpc-default-executor-0] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s3@group-54B65749A8A2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally -1 -> 38
2023-11-07 01:38:10,777 [s3@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@2b1b02e9
2023-11-07 01:38:10,778 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@2d4d29fc
2023-11-07 01:38:10,778 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38]
2023-11-07 01:38:10,778 [grpc-default-executor-0] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:purgeImpl(379)) - purging segments:null
2023-11-07 01:38:10,778 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 41@client-0DF16CBE4C94
2023-11-07 01:38:10,778 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:checkAndInstallSnapshot(194)) - s3@group-54B65749A8A2: successfully install the entire snapshot-38
2023-11-07 01:38:10,778 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 42@client-0DF16CBE4C94
2023-11-07 01:38:10,778 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-0DF16CBE4C94
2023-11-07 01:38:10,778 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 44@client-0DF16CBE4C94
2023-11-07 01:38:10,778 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-0DF16CBE4C94
2023-11-07 01:38:10,778 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshotImpl(134)) - s3@group-54B65749A8A2: set new configuration index: 39
configurationEntry {
  peers {
    id: "s0"
    address: "localhost:41917"
    dataStreamAddress: "localhost:46051"
    clientAddress: "localhost:46761"
    adminAddress: "localhost:46377"
    startupRole: FOLLOWER
  }
}
 from snapshot
2023-11-07 01:38:10,778 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 46@client-0DF16CBE4C94
2023-11-07 01:38:10,779 [grpc-default-executor-0] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s3@group-54B65749A8A2: set configuration 39: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,779 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 47@client-0DF16CBE4C94
2023-11-07 01:38:10,779 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 48@client-0DF16CBE4C94
2023-11-07 01:38:10,779 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 49@client-0DF16CBE4C94
2023-11-07 01:38:10,779 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 50@client-0DF16CBE4C94
2023-11-07 01:38:10,779 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 51@client-0DF16CBE4C94
2023-11-07 01:38:10,779 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 52@client-0DF16CBE4C94
2023-11-07 01:38:10,779 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 53@client-0DF16CBE4C94
2023-11-07 01:38:10,779 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 54@client-0DF16CBE4C94
2023-11-07 01:38:10,780 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 55@client-0DF16CBE4C94
2023-11-07 01:38:10,780 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 56@client-0DF16CBE4C94
2023-11-07 01:38:10,780 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 57@client-0DF16CBE4C94
2023-11-07 01:38:10,780 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 58@client-0DF16CBE4C94
2023-11-07 01:38:10,780 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 59@client-0DF16CBE4C94
2023-11-07 01:38:10,780 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: setUnconditionally -1 -> 38
2023-11-07 01:38:10,780 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-54B65749A8A2-StateMachineUpdater: appliedIndex: setUnconditionally -1 -> 38
2023-11-07 01:38:10,780 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(100)) - s3@group-54B65749A8A2: reply installSnapshot: s0<-s3#0:OK-t0,SUCCESS,requestIndex=0
2023-11-07 01:38:10,781 [grpc-default-executor-0] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(157)) - s3: Completed INSTALL_SNAPSHOT, lastRequest: s0->s3#0-t2,chunk:007495ea-9d64-4eea-8edf-6f59098ba226,0
2023-11-07 01:38:10,781 [grpc-default-executor-0] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$5(159)) - s3: Completed INSTALL_SNAPSHOT, lastReply: null
2023-11-07 01:38:10,782 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(549)) - s0@group-54B65749A8A2->s3-InstallSnapshotResponseHandler: received the first reply s0<-s3#0:OK-t0,SUCCESS,requestIndex=0
2023-11-07 01:38:10,782 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(563)) - s0@group-54B65749A8A2->s3-InstallSnapshotResponseHandler: Completed InstallSnapshot. Reply: serverReply {
  requestorId: "s0"
  replyId: "s3"
  raftGroupId {
    id: "R\'\303C\276\275B\355\204YT\266WI\250\242"
  }
  success: true
}
requestIndex: 0

2023-11-07 01:38:10,782 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:setAttemptedToInstallSnapshot(154)) - Follower s0@group-54B65749A8A2->s3 acknowledged installing snapshot
2023-11-07 01:38:10,782 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(629)) - s0@group-54B65749A8A2->s3-InstallSnapshotResponseHandler: follower responded installSnapshot COMPLETED
2023-11-07 01:38:10,782 [s0@group-54B65749A8A2->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-54B65749A8A2->s3: snapshotIndex: setUnconditionally 0 -> 38
2023-11-07 01:38:10,782 [s0@group-54B65749A8A2->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-54B65749A8A2->s3: matchIndex: setUnconditionally -1 -> 38
2023-11-07 01:38:10,782 [s0@group-54B65749A8A2->s3-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-54B65749A8A2->s3: nextIndex: setUnconditionally 0 -> 39
2023-11-07 01:38:10,782 [s0@group-54B65749A8A2->s3-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(685)) - s0@group-54B65749A8A2->s3-GrpcLogAppender: installed snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38] successfully
2023-11-07 01:38:10,790 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: receive appendEntries(s0, 2, (t:1, i:38), 42, false, commits:[s0:c42, s3:c38], cId:1, entries: [(t:2, i:39), CONFIGURATIONENTRY(current:id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:), (t:2, i:40), METADATAENTRY(c:39), (t:2, i:41), STATEMACHINELOGENTRY, 60@client-61946BA3FD81, (t:2, i:42), METADATAENTRY(c:41)]
2023-11-07 01:38:10,790 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s3@group-54B65749A8A2: set configuration 39: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,790 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,790 [s3-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(428)) - s3@group-54B65749A8A2-SegmentedRaftLogWorker: Starting segment from index:39
2023-11-07 01:38:10,802 [s3@group-54B65749A8A2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(632)) - s3@group-54B65749A8A2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_39
2023-11-07 01:38:10,804 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s3#1:OK-t2,SUCCESS,nextIndex=43,followerCommit=42,matchIndex=42
2023-11-07 01:38:10,804 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 41
2023-11-07 01:38:10,804 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 41, m19 -> (t:2, i:41), STATEMACHINELOGENTRY, 60@client-61946BA3FD81
2023-11-07 01:38:10,805 [s0@group-54B65749A8A2-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 43: peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[], old=peers:[s0|localhost:41917]|listeners:[]
2023-11-07 01:38:10,811 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: receive appendEntries(s0, 2, (t:2, i:42), 42, true, commits:[s0:c42, s3:c42], cId:2, entries: [(t:2, i:43), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
)]
2023-11-07 01:38:10,811 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s3@group-54B65749A8A2: set configuration 43: peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[], old=peers:[s0|localhost:41917]|listeners:[]
2023-11-07 01:38:10,811 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,814 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s3#2:OK-t2,SUCCESS,nextIndex=44,followerCommit=42,matchIndex=43
2023-11-07 01:38:10,815 [s0@group-54B65749A8A2-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 45: peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,817 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: receive appendEntries(s0, 2, (t:2, i:43), 43, true, commits:[s0:c43, s3:c42], cId:3, entries: [(t:2, i:44), METADATAENTRY(c:43), (t:2, i:45), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:)]
2023-11-07 01:38:10,817 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s3@group-54B65749A8A2: set configuration 45: peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,817 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,819 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s3#3:OK-t2,SUCCESS,nextIndex=46,followerCommit=43,matchIndex=45
2023-11-07 01:38:10,821 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-DE63551E3C73: add replied callId 61
2023-11-07 01:38:10,821 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: receive appendEntries(s0, 2, (t:2, i:45), 45, true, commits:[s0:c45, s3:c43], cId:5, entries: [(t:2, i:46), METADATAENTRY(c:45)]
2023-11-07 01:38:10,821 [s3-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,822 [s3-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s3#5:OK-t2,SUCCESS,nextIndex=47,followerCommit=45,matchIndex=46
2023-11-07 01:38:10,827 [Time-limited test] DEBUG client.RaftClient (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:10,828 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:setConfiguration(819)) - Start changing the configuration: [s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]
2023-11-07 01:38:10,832 [s0-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1262)) - s0@group-54B65749A8A2: receive setConfiguration SetConfigurationRequest:client-91457CA39150->s0@group-54B65749A8A2, cid=62, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917], listeners:[]
2023-11-07 01:38:10,832 [s0-server-thread1] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(483)) - s0@group-54B65749A8A2-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-91457CA39150->s0@group-54B65749A8A2, cid=62, seq=null, RW, null, SET_UNCONDITIONALLY, servers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917], listeners:[]
2023-11-07 01:38:10,832 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:10,832 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:10,832 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:10,832 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:10,832 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:10,832 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:10,832 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:10,833 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:10,833 [s0-server-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:10,833 [s0-server-thread1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:10,833 [s0@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s0@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38] to follower
2023-11-07 01:38:10,833 [s0@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s4
2023-11-07 01:38:10,840 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(89)) - s4@group-54B65749A8A2: receive installSnapshot: s0->s4#0-t2,chunk:5050f640-cf86-45c5-b539-26c9f284153c,0
2023-11-07 01:38:10,840 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@6d45a68d
2023-11-07 01:38:10,842 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:10,842 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(562)) - s4@group-54B65749A8A2: set firstElectionSinceStartup to false for installSnapshot
2023-11-07 01:38:10,842 [grpc-default-executor-0] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s4@group-54B65749A8A2: change Leader from null to s0 at term 2 for installSnapshot, leader elected after 114ms
2023-11-07 01:38:10,843 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-5050f640-cf86-45c5-b539-26c9f284153c
2023-11-07 01:38:10,843 [grpc-default-executor-0] INFO  storage.SnapshotManager (SnapshotManager.java:installSnapshot(89)) - Installing snapshot:s0->s4#0-t2,chunk:5050f640-cf86-45c5-b539-26c9f284153c,0, to tmp dir:/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-5050f640-cf86-45c5-b539-26c9f284153c
2023-11-07 01:38:10,843 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-5050f640-cf86-45c5-b539-26c9f284153c
2023-11-07 01:38:10,843 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-5050f640-cf86-45c5-b539-26c9f284153c/snapshot.1_38.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@29037010
2023-11-07 01:38:10,845 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-5050f640-cf86-45c5-b539-26c9f284153c/snapshot.1_38.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-5050f640-cf86-45c5-b539-26c9f284153c/snapshot.1_38.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:10,845 [grpc-default-executor-0] INFO  storage.SnapshotManager (SnapshotManager.java:rename(168)) - Installed snapshot, renaming temporary dir /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-5050f640-cf86-45c5-b539-26c9f284153c to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm
2023-11-07 01:38:10,845 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm.tmp20231107-013810_845
2023-11-07 01:38:10,845 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/tmp/snapshot-5050f640-cf86-45c5-b539-26c9f284153c to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm
2023-11-07 01:38:10,846 [grpc-default-executor-0] TRACE util.FileUtils (FileUtils.java:deleteFully(305)) - deleteFully /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm.tmp20231107-013810_845
2023-11-07 01:38:10,846 [grpc-default-executor-0] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.delete /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm.tmp20231107-013810_845
2023-11-07 01:38:10,846 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:reinitialize(236)) - Reinitializing SimpleStateMachine4Testing:s4:group-54B65749A8A2
2023-11-07 01:38:10,846 [s4@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38.md5 with options []: sun.nio.ch.ChannelInputStream@4c7724cd
2023-11-07 01:38:10,847 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38]
2023-11-07 01:38:10,847 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 41@client-0DF16CBE4C94
2023-11-07 01:38:10,847 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 42@client-0DF16CBE4C94
2023-11-07 01:38:10,847 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-0DF16CBE4C94
2023-11-07 01:38:10,847 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 44@client-0DF16CBE4C94
2023-11-07 01:38:10,847 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-0DF16CBE4C94
2023-11-07 01:38:10,847 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 46@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 47@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 48@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 49@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 50@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 51@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 52@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 53@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 54@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 55@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 56@client-0DF16CBE4C94
2023-11-07 01:38:10,848 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 57@client-0DF16CBE4C94
2023-11-07 01:38:10,849 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 58@client-0DF16CBE4C94
2023-11-07 01:38:10,849 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 59@client-0DF16CBE4C94
2023-11-07 01:38:10,849 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s4@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: setUnconditionally -1 -> 38
2023-11-07 01:38:10,849 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s4@group-54B65749A8A2-StateMachineUpdater: appliedIndex: setUnconditionally -1 -> 38
2023-11-07 01:38:10,858 [grpc-default-executor-0] INFO  raftlog.RaftLog (RaftLogBase.java:lambda$new$0(54)) - s4@group-54B65749A8A2-SegmentedRaftLog: snapshotIndex: updateIncreasingly -1 -> 38
2023-11-07 01:38:10,858 [grpc-default-executor-0] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s4@group-54B65749A8A2-SegmentedRaftLogWorker: flushIndex: setUnconditionally -1 -> 38
2023-11-07 01:38:10,858 [grpc-default-executor-0] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s4@group-54B65749A8A2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally -1 -> 38
2023-11-07 01:38:10,858 [grpc-default-executor-0] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:purgeImpl(379)) - purging segments:null
2023-11-07 01:38:10,858 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:checkAndInstallSnapshot(194)) - s4@group-54B65749A8A2: successfully install the entire snapshot-38
2023-11-07 01:38:10,858 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshotImpl(134)) - s4@group-54B65749A8A2: set new configuration index: 45
configurationEntry {
  peers {
    id: "s3"
    address: "0.0.0.0:39111"
    clientAddress: "0.0.0.0:39111"
    adminAddress: "0.0.0.0:39111"
    startupRole: FOLLOWER
  }
  peers {
    id: "s0"
    address: "localhost:41917"
    dataStreamAddress: "localhost:46051"
    clientAddress: "localhost:46761"
    adminAddress: "localhost:46377"
    startupRole: FOLLOWER
  }
}
 from snapshot
2023-11-07 01:38:10,859 [grpc-default-executor-0] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s4@group-54B65749A8A2: set configuration 45: peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,859 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(100)) - s4@group-54B65749A8A2: reply installSnapshot: s0<-s4#0:OK-t0,SUCCESS,requestIndex=0
2023-11-07 01:38:10,859 [grpc-default-executor-0] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(157)) - s4: Completed INSTALL_SNAPSHOT, lastRequest: s0->s4#0-t2,chunk:5050f640-cf86-45c5-b539-26c9f284153c,0
2023-11-07 01:38:10,859 [grpc-default-executor-0] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$5(159)) - s4: Completed INSTALL_SNAPSHOT, lastReply: null
2023-11-07 01:38:10,860 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(549)) - s0@group-54B65749A8A2->s4-InstallSnapshotResponseHandler: received the first reply s0<-s4#0:OK-t0,SUCCESS,requestIndex=0
2023-11-07 01:38:10,861 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(563)) - s0@group-54B65749A8A2->s4-InstallSnapshotResponseHandler: Completed InstallSnapshot. Reply: serverReply {
  requestorId: "s0"
  replyId: "s4"
  raftGroupId {
    id: "R\'\303C\276\275B\355\204YT\266WI\250\242"
  }
  success: true
}
requestIndex: 0

2023-11-07 01:38:10,861 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:setAttemptedToInstallSnapshot(154)) - Follower s0@group-54B65749A8A2->s4 acknowledged installing snapshot
2023-11-07 01:38:10,861 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(629)) - s0@group-54B65749A8A2->s4-InstallSnapshotResponseHandler: follower responded installSnapshot COMPLETED
2023-11-07 01:38:10,861 [s0@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-54B65749A8A2->s4: snapshotIndex: setUnconditionally 0 -> 38
2023-11-07 01:38:10,861 [s0@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-54B65749A8A2->s4: matchIndex: setUnconditionally -1 -> 38
2023-11-07 01:38:10,861 [s0@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  leader.FollowerInfo (FollowerInfoImpl.java:info(64)) - s0@group-54B65749A8A2->s4: nextIndex: setUnconditionally 0 -> 39
2023-11-07 01:38:10,861 [s0@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(685)) - s0@group-54B65749A8A2->s4-GrpcLogAppender: installed snapshot SingleFileSnapshotInfo(t:1, i:38):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.1_38] successfully
2023-11-07 01:38:10,890 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s4@group-54B65749A8A2: receive appendEntries(s0, 2, (t:1, i:38), 46, false, commits:[s0:c46, s3:c45, s4:c-1], cId:1, entries: [(t:2, i:39), CONFIGURATIONENTRY(current:id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:), (t:2, i:40), METADATAENTRY(c:39), (t:2, i:41), STATEMACHINELOGENTRY, 60@client-61946BA3FD81, (t:2, i:42), METADATAENTRY(c:41), (t:2, i:43), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
), (t:2, i:44), METADATAENTRY(c:43), (t:2, i:45), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:), (t:2, i:46), METADATAENTRY(c:45)]
2023-11-07 01:38:10,891 [s4-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s4@group-54B65749A8A2: set configuration 39: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,891 [s4-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s4@group-54B65749A8A2: set configuration 43: peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[], old=peers:[s0|localhost:41917]|listeners:[]
2023-11-07 01:38:10,891 [s4-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s4@group-54B65749A8A2: set configuration 45: peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,891 [s4-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,891 [s4-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(428)) - s4@group-54B65749A8A2-SegmentedRaftLogWorker: Starting segment from index:39
2023-11-07 01:38:10,906 [s4@group-54B65749A8A2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(632)) - s4@group-54B65749A8A2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_39
2023-11-07 01:38:10,907 [s4-server-thread3] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s4@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s4#1:OK-t2,SUCCESS,nextIndex=47,followerCommit=46,matchIndex=46
2023-11-07 01:38:10,908 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:applyTransaction(248)) - applyTransaction for log index 41
2023-11-07 01:38:10,908 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 41, m19 -> (t:2, i:41), STATEMACHINELOGENTRY, 60@client-61946BA3FD81
2023-11-07 01:38:10,908 [s0@group-54B65749A8A2-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 47: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[]
2023-11-07 01:38:10,910 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: receive appendEntries(s0, 2, (t:2, i:46), 46, true, commits:[s0:c46, s3:c46, s4:c46], cId:9, entries: [(t:2, i:47), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s4"
address: "0.0.0.0:37939"
clientAddress: "0.0.0.0:37939"
adminAddress: "0.0.0.0:37939"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
)]
2023-11-07 01:38:10,910 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s3@group-54B65749A8A2: set configuration 47: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[]
2023-11-07 01:38:10,910 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,911 [s4-server-thread3] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s4@group-54B65749A8A2: receive appendEntries(s0, 2, (t:2, i:46), 46, true, commits:[s0:c46, s3:c46, s4:c46], cId:4, entries: [(t:2, i:47), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s4"
address: "0.0.0.0:37939"
clientAddress: "0.0.0.0:37939"
adminAddress: "0.0.0.0:37939"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
)]
2023-11-07 01:38:10,912 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s3#9:OK-t2,SUCCESS,nextIndex=48,followerCommit=46,matchIndex=47
2023-11-07 01:38:10,913 [s0@group-54B65749A8A2-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,914 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: receive appendEntries(s0, 2, (t:2, i:47), 47, true, commits:[s0:c47, s3:c46, s4:c46], cId:10, entries: [(t:2, i:48), METADATAENTRY(c:47), (t:2, i:49), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s4"
address: "0.0.0.0:37939"
clientAddress: "0.0.0.0:37939"
adminAddress: "0.0.0.0:37939"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:)]
2023-11-07 01:38:10,914 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s3@group-54B65749A8A2: set configuration 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,914 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,915 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s3#10:OK-t2,SUCCESS,nextIndex=50,followerCommit=47,matchIndex=49
2023-11-07 01:38:10,920 [Time-limited test] DEBUG client.RaftClient (RaftClientImpl.java:add(150)) - client-91457CA39150: add replied callId 62
2023-11-07 01:38:10,920 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: receive appendEntries(s0, 2, (t:2, i:49), 49, true, commits:[s0:c49, s3:c47, s4:c46], cId:12, entries: [(t:2, i:50), METADATAENTRY(c:49)]
2023-11-07 01:38:10,920 [s3-server-thread1] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,926 [s3-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s3@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s3#12:OK-t2,SUCCESS,nextIndex=51,followerCommit=49,matchIndex=50
2023-11-07 01:38:10,929 [s4-server-thread3] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s4@group-54B65749A8A2: set configuration 47: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[]
2023-11-07 01:38:10,929 [s4-server-thread3] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,930 [s4-server-thread3] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s4@group-54B65749A8A2: receive appendEntries(s0, 2, (t:2, i:47), 47, true, commits:[s0:c47, s3:c46, s4:c46], cId:5, entries: [(t:2, i:48), METADATAENTRY(c:47), (t:2, i:49), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s4"
address: "0.0.0.0:37939"
clientAddress: "0.0.0.0:37939"
adminAddress: "0.0.0.0:37939"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:)]
2023-11-07 01:38:10,930 [s4-server-thread3] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s4@group-54B65749A8A2: set configuration 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:10,930 [s4-server-thread3] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,931 [s4-server-thread3] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s4@group-54B65749A8A2: receive appendEntries(s0, 2, (t:2, i:49), 49, true, commits:[s0:c49, s3:c47, s4:c46], cId:8, entries: [(t:2, i:50), METADATAENTRY(c:49)]
2023-11-07 01:38:10,931 [s4-server-thread3] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:10,932 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:10,933 [Time-limited test] INFO  impl.RaftServerTestUtil (RaftServerTestUtil.java:waitAndCheckNewConf(94)) - waitAndCheckNewConf: peers=[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917], deadPeers=null, printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-54B65749A8A2:t2, leader=s0, voted=null, raftlog=Memoized:s3@group-54B65749A8A2-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s4:  RUNNING  FOLLOWER s4@group-54B65749A8A2:t2, leader=s0, voted=null, raftlog=Memoized:s4@group-54B65749A8A2-SegmentedRaftLog:OPENED:c46, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s0:  RUNNING    LEADER s0@group-54B65749A8A2:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:10,934 [Time-limited test] INFO  impl.RaftServerTestUtil (RaftServerTestUtil.java:waitAndCheckNewConf(103)) - checking  FOLLOWER s3@group-54B65749A8A2:t2, leader=s0, voted=null, raftlog=Memoized:s3@group-54B65749A8A2-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:10,934 [Time-limited test] INFO  impl.RaftServerTestUtil (RaftServerTestUtil.java:waitAndCheckNewConf(103)) - checking  FOLLOWER s4@group-54B65749A8A2:t2, leader=s0, voted=null, raftlog=Memoized:s4@group-54B65749A8A2-SegmentedRaftLog:OPENED:c46, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:10,934 [Time-limited test] INFO  impl.RaftServerTestUtil (RaftServerTestUtil.java:waitAndCheckNewConf(103)) - checking    LEADER s0@group-54B65749A8A2:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:10,934 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:killServer(533)) - killServer s0
2023-11-07 01:38:10,934 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(416)) - s0: close
2023-11-07 01:38:10,935 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$3(514)) - s0@group-54B65749A8A2: shutdown
2023-11-07 01:38:10,937 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-54B65749A8A2,id=s0
2023-11-07 01:38:10,937 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(94)) - s0: shutdown s0@group-54B65749A8A2-LeaderStateImpl
2023-11-07 01:38:10,937 [s0@group-54B65749A8A2->s3-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-54B65749A8A2->s3-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:10,937 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(289)) - s0@group-54B65749A8A2-PendingRequests: sendNotLeaderResponses
2023-11-07 01:38:10,937 [s0@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s0@group-54B65749A8A2->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:10,938 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(157)) - s3: Completed APPEND_ENTRIES, lastRequest: s0->s3#12-t2,previous=(t:2, i:49),leaderCommit=49,initializing? true,entries: size=1, first=(t:2, i:50), METADATAENTRY(c:49)
2023-11-07 01:38:10,938 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$5(159)) - s3: Completed APPEND_ENTRIES, lastReply: null
2023-11-07 01:38:10,938 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(157)) - s4: Completed APPEND_ENTRIES, lastRequest: null
2023-11-07 01:38:10,940 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$5(159)) - s4: Completed APPEND_ENTRIES, lastReply: serverReply {
  requestorId: "s0"
  replyId: "s4"
  raftGroupId {
    id: "R\'\303C\276\275B\355\204YT\266WI\250\242"
  }
  success: true
}
term: 2
nextIndex: 47
followerCommit: 38
matchIndex: 18446744073709551615
isHearbeat: true

2023-11-07 01:38:10,941 [grpc-default-executor-0] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(469)) - s0@group-54B65749A8A2->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-11-07 01:38:10,942 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-11-07 01:38:10,942 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(157)) - s4: Completed APPEND_ENTRIES, lastRequest: s0->s4#8-t2,previous=(t:2, i:49),leaderCommit=49,initializing? true,entries: size=1, first=(t:2, i:50), METADATAENTRY(c:49)
2023-11-07 01:38:10,944 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-54B65749A8A2-StateMachineUpdater: set stopIndex = 50
2023-11-07 01:38:10,944 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(157)) - s3: Completed APPEND_ENTRIES, lastRequest: null
2023-11-07 01:38:10,945 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$5(159)) - s3: Completed APPEND_ENTRIES, lastReply: serverReply {
  requestorId: "s0"
  replyId: "s3"
  raftGroupId {
    id: "R\'\303C\276\275B\355\204YT\266WI\250\242"
  }
  callId: 8
  success: true
}
term: 2
nextIndex: 47
followerCommit: 46
matchIndex: 18446744073709551615
isHearbeat: true

2023-11-07 01:38:10,946 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49 with options [READ]: sun.nio.ch.FileChannelImpl@1ed054ed
2023-11-07 01:38:10,947 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@1aefc3ef
2023-11-07 01:38:10,954 [Thread-278] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s3 Close channels
2023-11-07 01:38:10,955 [Thread-279] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s4 Close channels
2023-11-07 01:38:10,955 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:10,956 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-54B65749A8A2-StateMachineUpdater: Took a snapshot at index 49
2023-11-07 01:38:10,956 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: updateIncreasingly 38 -> 49
2023-11-07 01:38:10,956 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(469)) - s0@group-54B65749A8A2->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-11-07 01:38:10,961 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(149)) - s0@group-54B65749A8A2->s3-GrpcLogAppender: Failed to getClient for s3
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:126)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$800(GrpcLogAppender.java:61)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:471)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:479)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:10,962 [s4-server-thread3] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s4@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s4#4:OK-t2,SUCCESS,nextIndex=48,followerCommit=46,matchIndex=47
2023-11-07 01:38:10,962 [s4-server-thread1] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s4@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s4#8:OK-t2,SUCCESS,nextIndex=51,followerCommit=49,matchIndex=50
2023-11-07 01:38:10,963 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(469)) - s0@group-54B65749A8A2->s4-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-11-07 01:38:10,963 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(149)) - s0@group-54B65749A8A2->s4-GrpcLogAppender: Failed to getClient for s4
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:126)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$800(GrpcLogAppender.java:61)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:471)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:479)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:489)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:453)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:486)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:10,964 [s3@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49 with options [READ]: sun.nio.ch.FileChannelImpl@25dce9fa
2023-11-07 01:38:10,964 [s3@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@21e36999
2023-11-07 01:38:10,966 [s3@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:10,966 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s3@group-54B65749A8A2-StateMachineUpdater: Took a snapshot at index 49
2023-11-07 01:38:10,966 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: updateIncreasingly 38 -> 49
2023-11-07 01:38:10,966 [s4-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s4@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s0<-s4#5:OK-t2,SUCCESS,nextIndex=50,followerCommit=49,matchIndex=49
2023-11-07 01:38:10,970 [s4-server-thread2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$5(159)) - s4: Completed APPEND_ENTRIES, lastReply: null
2023-11-07 01:38:10,977 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(469)) - s0@group-54B65749A8A2->s4-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-11-07 01:38:10,978 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(149)) - s0@group-54B65749A8A2->s4-GrpcLogAppender: Failed to getClient for s4
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:126)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$800(GrpcLogAppender.java:61)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:471)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:479)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:10,978 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-11-07 01:38:10,978 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-11-07 01:38:10,985 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-11-07 01:38:10,985 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-11-07 01:38:10,988 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_50 with options [READ]: sun.nio.ch.FileChannelImpl@5fed5ed6
2023-11-07 01:38:10,989 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_50.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@721346e4
2023-11-07 01:38:10,990 [s4@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49 with options [READ]: sun.nio.ch.FileChannelImpl@42b0c333
2023-11-07 01:38:10,990 [s4@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@468f4fbd
2023-11-07 01:38:10,991 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_50.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_50.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:10,991 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-54B65749A8A2-StateMachineUpdater: Took a snapshot at index 50
2023-11-07 01:38:10,991 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: updateIncreasingly 49 -> 50
2023-11-07 01:38:10,992 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(423)) - s0@group-54B65749A8A2: applyIndex: 50
2023-11-07 01:38:10,992 [s0@group-54B65749A8A2-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-54B65749A8A2-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2023-11-07 01:38:10,991 [s4@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s4/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:10,992 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s4@group-54B65749A8A2-StateMachineUpdater: Took a snapshot at index 49
2023-11-07 01:38:10,992 [s4@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s4@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: updateIncreasingly 38 -> 49
2023-11-07 01:38:10,993 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-11-07 01:38:11,171 [s3@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s3@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:249683844ns, electionTimeout:241ms
2023-11-07 01:38:11,171 [s3@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,171 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2023-11-07 01:38:11,172 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:11,172 [s3@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-LeaderElection7
2023-11-07 01:38:11,175 [s3@group-54B65749A8A2-LeaderElection7] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s3@group-54B65749A8A2: change Leader from s0 to null at term 2 for PRE_VOTE
2023-11-07 01:38:11,175 [s3@group-54B65749A8A2-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s3@group-54B65749A8A2-LeaderElection7 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,175 [s3@group-54B65749A8A2-LeaderElection7-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s4
2023-11-07 01:38:11,176 [s3@group-54B65749A8A2-LeaderElection7] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s3@group-54B65749A8A2-LeaderElection7 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.NullPointerException: target
2023-11-07 01:38:11,176 [s3@group-54B65749A8A2-LeaderElection7-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s0
2023-11-07 01:38:11,179 [s3@group-54B65749A8A2-LeaderElection7] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s3@group-54B65749A8A2-LeaderElection7 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,179 [s3@group-54B65749A8A2-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-54B65749A8A2-LeaderElection7: PRE_VOTE REJECTED received 0 response(s) and 2 exception(s):
2023-11-07 01:38:11,179 [s3@group-54B65749A8A2-LeaderElection7] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 0: java.util.concurrent.ExecutionException: java.lang.NullPointerException: target
2023-11-07 01:38:11,179 [s3@group-54B65749A8A2-LeaderElection7] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,179 [s3@group-54B65749A8A2-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s3@group-54B65749A8A2-LeaderElection7 PRE_VOTE round 0: result REJECTED
2023-11-07 01:38:11,179 [s3@group-54B65749A8A2-LeaderElection7] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-11-07 01:38:11,179 [s3@group-54B65749A8A2-LeaderElection7] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s3: shutdown s3@group-54B65749A8A2-LeaderElection7
2023-11-07 01:38:11,179 [s3@group-54B65749A8A2-LeaderElection7] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,395 [s3@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s3@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:216380698ns, electionTimeout:216ms
2023-11-07 01:38:11,395 [s3@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,396 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2023-11-07 01:38:11,396 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:11,396 [s3@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-LeaderElection8
2023-11-07 01:38:11,397 [s3@group-54B65749A8A2-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s3@group-54B65749A8A2-LeaderElection8 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,399 [s3@group-54B65749A8A2-LeaderElection8] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s3@group-54B65749A8A2-LeaderElection8 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, EXCEPTION -> STARTING
2023-11-07 01:38:11,399 [s3@group-54B65749A8A2-LeaderElection8] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s3@group-54B65749A8A2-LeaderElection8 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,399 [s3@group-54B65749A8A2-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-54B65749A8A2-LeaderElection8: PRE_VOTE REJECTED received 0 response(s) and 2 exception(s):
2023-11-07 01:38:11,399 [s3@group-54B65749A8A2-LeaderElection8] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 0: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, EXCEPTION -> STARTING
2023-11-07 01:38:11,399 [s3@group-54B65749A8A2-LeaderElection8] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,399 [s3@group-54B65749A8A2-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s3@group-54B65749A8A2-LeaderElection8 PRE_VOTE round 0: result REJECTED
2023-11-07 01:38:11,399 [s3@group-54B65749A8A2-LeaderElection8] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-11-07 01:38:11,399 [s3@group-54B65749A8A2-LeaderElection8] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s3: shutdown s3@group-54B65749A8A2-LeaderElection8
2023-11-07 01:38:11,399 [s3@group-54B65749A8A2-LeaderElection8] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,430 [s4@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:464384630ns, electionTimeout:272ms
2023-11-07 01:38:11,430 [s4@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,430 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2023-11-07 01:38:11,431 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:11,431 [s4@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-LeaderElection9
2023-11-07 01:38:11,434 [s4@group-54B65749A8A2-LeaderElection9] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s4@group-54B65749A8A2: change Leader from s0 to null at term 2 for PRE_VOTE
2023-11-07 01:38:11,435 [s4@group-54B65749A8A2-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s4@group-54B65749A8A2-LeaderElection9 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,435 [s4@group-54B65749A8A2-LeaderElection9-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s3
2023-11-07 01:38:11,435 [s4@group-54B65749A8A2-LeaderElection9] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-54B65749A8A2-LeaderElection9 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.NullPointerException: target
2023-11-07 01:38:11,436 [s4@group-54B65749A8A2-LeaderElection9-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(65)) - Build channel for s0
2023-11-07 01:38:11,439 [s4@group-54B65749A8A2-LeaderElection9] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-54B65749A8A2-LeaderElection9 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,439 [s4@group-54B65749A8A2-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-54B65749A8A2-LeaderElection9: PRE_VOTE REJECTED received 0 response(s) and 2 exception(s):
2023-11-07 01:38:11,439 [s4@group-54B65749A8A2-LeaderElection9] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 0: java.util.concurrent.ExecutionException: java.lang.NullPointerException: target
2023-11-07 01:38:11,439 [s4@group-54B65749A8A2-LeaderElection9] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,439 [s4@group-54B65749A8A2-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s4@group-54B65749A8A2-LeaderElection9 PRE_VOTE round 0: result REJECTED
2023-11-07 01:38:11,439 [s4@group-54B65749A8A2-LeaderElection9] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-11-07 01:38:11,439 [s4@group-54B65749A8A2-LeaderElection9] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s4: shutdown s4@group-54B65749A8A2-LeaderElection9
2023-11-07 01:38:11,439 [s4@group-54B65749A8A2-LeaderElection9] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,551 [s3@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s3@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:151538819ns, electionTimeout:151ms
2023-11-07 01:38:11,551 [s3@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,551 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2023-11-07 01:38:11,551 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:11,551 [s3@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-LeaderElection10
2023-11-07 01:38:11,552 [s3@group-54B65749A8A2-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s3@group-54B65749A8A2-LeaderElection10 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,553 [s3@group-54B65749A8A2-LeaderElection10] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s3@group-54B65749A8A2-LeaderElection10 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
2023-11-07 01:38:11,553 [s3@group-54B65749A8A2-LeaderElection10] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s3@group-54B65749A8A2-LeaderElection10 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,553 [s3@group-54B65749A8A2-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-54B65749A8A2-LeaderElection10: PRE_VOTE REJECTED received 0 response(s) and 2 exception(s):
2023-11-07 01:38:11,553 [s3@group-54B65749A8A2-LeaderElection10] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 0: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
2023-11-07 01:38:11,553 [s3@group-54B65749A8A2-LeaderElection10] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,553 [s3@group-54B65749A8A2-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s3@group-54B65749A8A2-LeaderElection10 PRE_VOTE round 0: result REJECTED
2023-11-07 01:38:11,553 [s3@group-54B65749A8A2-LeaderElection10] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-11-07 01:38:11,553 [s3@group-54B65749A8A2-LeaderElection10] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s3: shutdown s3@group-54B65749A8A2-LeaderElection10
2023-11-07 01:38:11,553 [s3@group-54B65749A8A2-LeaderElection10] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,597 [s4@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:157503063ns, electionTimeout:156ms
2023-11-07 01:38:11,597 [s4@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,597 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2023-11-07 01:38:11,597 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:11,597 [s4@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-LeaderElection11
2023-11-07 01:38:11,598 [s4@group-54B65749A8A2-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s4@group-54B65749A8A2-LeaderElection11 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,600 [s4@group-54B65749A8A2-LeaderElection11] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-54B65749A8A2-LeaderElection11 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s3, EXCEPTION -> STARTING
2023-11-07 01:38:11,600 [s4@group-54B65749A8A2-LeaderElection11] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-54B65749A8A2-LeaderElection11 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,600 [s4@group-54B65749A8A2-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-54B65749A8A2-LeaderElection11: PRE_VOTE REJECTED received 0 response(s) and 2 exception(s):
2023-11-07 01:38:11,600 [s4@group-54B65749A8A2-LeaderElection11] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 0: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s3, EXCEPTION -> STARTING
2023-11-07 01:38:11,600 [s4@group-54B65749A8A2-LeaderElection11] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,600 [s4@group-54B65749A8A2-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s4@group-54B65749A8A2-LeaderElection11 PRE_VOTE round 0: result REJECTED
2023-11-07 01:38:11,600 [s4@group-54B65749A8A2-LeaderElection11] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-11-07 01:38:11,600 [s4@group-54B65749A8A2-LeaderElection11] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s4: shutdown s4@group-54B65749A8A2-LeaderElection11
2023-11-07 01:38:11,601 [s4@group-54B65749A8A2-LeaderElection11] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,811 [s4@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:210376708ns, electionTimeout:210ms
2023-11-07 01:38:11,811 [s4@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,811 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2023-11-07 01:38:11,811 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:11,811 [s4@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-LeaderElection12
2023-11-07 01:38:11,815 [s3@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s3@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:261519484ns, electionTimeout:261ms
2023-11-07 01:38:11,815 [s3@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,815 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2023-11-07 01:38:11,815 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:11,815 [s3@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-LeaderElection13
2023-11-07 01:38:11,815 [s4@group-54B65749A8A2-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s4@group-54B65749A8A2-LeaderElection12 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,815 [s3@group-54B65749A8A2-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s3@group-54B65749A8A2-LeaderElection13 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,817 [s3@group-54B65749A8A2-LeaderElection13] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s3@group-54B65749A8A2-LeaderElection13 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
2023-11-07 01:38:11,817 [s3@group-54B65749A8A2-LeaderElection13] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s3@group-54B65749A8A2-LeaderElection13 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,817 [s3@group-54B65749A8A2-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-54B65749A8A2-LeaderElection13: PRE_VOTE REJECTED received 0 response(s) and 2 exception(s):
2023-11-07 01:38:11,817 [s3@group-54B65749A8A2-LeaderElection13] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 0: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
2023-11-07 01:38:11,817 [s3@group-54B65749A8A2-LeaderElection13] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,818 [s3@group-54B65749A8A2-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s3@group-54B65749A8A2-LeaderElection13 PRE_VOTE round 0: result REJECTED
2023-11-07 01:38:11,818 [s3@group-54B65749A8A2-LeaderElection13] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-11-07 01:38:11,818 [s3@group-54B65749A8A2-LeaderElection13] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s3: shutdown s3@group-54B65749A8A2-LeaderElection13
2023-11-07 01:38:11,818 [s3@group-54B65749A8A2-LeaderElection13] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,818 [s4@group-54B65749A8A2-LeaderElection12] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-54B65749A8A2-LeaderElection12 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,818 [s4@group-54B65749A8A2-LeaderElection12] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-54B65749A8A2-LeaderElection12 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s3, STARTING -> STARTING
2023-11-07 01:38:11,818 [s4@group-54B65749A8A2-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-54B65749A8A2-LeaderElection12: PRE_VOTE REJECTED received 0 response(s) and 2 exception(s):
2023-11-07 01:38:11,819 [s4@group-54B65749A8A2-LeaderElection12] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 0: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:11,819 [s4@group-54B65749A8A2-LeaderElection12] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s3, STARTING -> STARTING
2023-11-07 01:38:11,819 [s4@group-54B65749A8A2-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s4@group-54B65749A8A2-LeaderElection12 PRE_VOTE round 0: result REJECTED
2023-11-07 01:38:11,819 [s4@group-54B65749A8A2-LeaderElection12] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-11-07 01:38:11,819 [s4@group-54B65749A8A2-LeaderElection12] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s4: shutdown s4@group-54B65749A8A2-LeaderElection12
2023-11-07 01:38:11,819 [s4@group-54B65749A8A2-LeaderElection12] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,922 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(243)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker close()
2023-11-07 01:38:11,923 [JvmPauseMonitor6] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2023-11-07 01:38:11,923 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-54B65749A8A2:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917], format? false
2023-11-07 01:38:11,923 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-11-07 01:38:11,923 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:11,923 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 46377 (custom)
2023-11-07 01:38:11,923 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-11-07 01:38:11,924 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 46761 (custom)
2023-11-07 01:38:11,924 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-11-07 01:38:11,924 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41917 (custom)
2023-11-07 01:38:11,924 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-11-07 01:38:11,924 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:11,924 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-11-07 01:38:11,924 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:11,924 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:11,924 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-11-07 01:38:11,924 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-11-07 01:38:11,925 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-11-07 01:38:11,925 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:11,926 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.close.threshold = 60s (default)
2023-11-07 01:38:11,926 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:11,926 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0] (custom)
2023-11-07 01:38:11,926 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-11-07 01:38:11,926 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-11-07 01:38:11,926 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(264)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2
2023-11-07 01:38:11,927 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(100)) - s0: addNew group-54B65749A8A2:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917] returns group-54B65749A8A2:java.util.concurrent.CompletableFuture@4c587adf[Not completed]
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(255)) - s0: new RaftServerImpl for group-54B65749A8A2:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917] with SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-54B65749A8A2: ConfigurationManager, init=-1: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-11-07 01:38:11,927 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-11-07 01:38:11,928 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-11-07 01:38:11,928 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-11-07 01:38:11,928 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100ms (default)
2023-11-07 01:38:11,928 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-11-07 01:38:11,928 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.read-after-write-consistent.write-index-cache.expiry-time = 60s (default)
2023-11-07 01:38:11,928 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:11,928 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:11,929 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-11-07 01:38:11,929 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-11-07 01:38:11,929 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-11-07 01:38:11,929 [s0-groupManagement] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-11-07 01:38:11,929 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-11-07 01:38:11,929 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-11-07 01:38:11,929 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0] (custom)
2023-11-07 01:38:11,931 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/in_use.lock acquired by nodename 23589@fv-az1231-351
2023-11-07 01:38:11,932 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:analyzeAndRecoverStorage(117)) - Read RaftStorageMetadata{term=2, votedFor=s0} from /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta
2023-11-07 01:38:11,933 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,933 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-11-07 01:38:11,933 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied Files.newInputStream /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_50.md5 with options []: sun.nio.ch.ChannelInputStream@1e840b04
2023-11-07 01:38:11,933 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - Loading snapshot SingleFileSnapshotInfo(t:2, i:50):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_50]
2023-11-07 01:38:11,934 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, m0 -> (t:1, i:1), STATEMACHINELOGENTRY, 41@client-0DF16CBE4C94
2023-11-07 01:38:11,935 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 42@client-0DF16CBE4C94
2023-11-07 01:38:11,935 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, m2 -> (t:1, i:5), STATEMACHINELOGENTRY, 43@client-0DF16CBE4C94
2023-11-07 01:38:11,935 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, m3 -> (t:1, i:7), STATEMACHINELOGENTRY, 44@client-0DF16CBE4C94
2023-11-07 01:38:11,935 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, m4 -> (t:1, i:9), STATEMACHINELOGENTRY, 45@client-0DF16CBE4C94
2023-11-07 01:38:11,935 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, m5 -> (t:1, i:11), STATEMACHINELOGENTRY, 46@client-0DF16CBE4C94
2023-11-07 01:38:11,935 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 13, m6 -> (t:1, i:13), STATEMACHINELOGENTRY, 47@client-0DF16CBE4C94
2023-11-07 01:38:11,935 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 15, m7 -> (t:1, i:15), STATEMACHINELOGENTRY, 48@client-0DF16CBE4C94
2023-11-07 01:38:11,935 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 17, m8 -> (t:1, i:17), STATEMACHINELOGENTRY, 49@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 19, m9 -> (t:1, i:19), STATEMACHINELOGENTRY, 50@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 21, m10 -> (t:1, i:21), STATEMACHINELOGENTRY, 51@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 23, m11 -> (t:1, i:23), STATEMACHINELOGENTRY, 52@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 25, m12 -> (t:1, i:25), STATEMACHINELOGENTRY, 53@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 27, m13 -> (t:1, i:27), STATEMACHINELOGENTRY, 54@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 29, m14 -> (t:1, i:29), STATEMACHINELOGENTRY, 55@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 31, m15 -> (t:1, i:31), STATEMACHINELOGENTRY, 56@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 33, m16 -> (t:1, i:33), STATEMACHINELOGENTRY, 57@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 35, m17 -> (t:1, i:35), STATEMACHINELOGENTRY, 58@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 37, m18 -> (t:1, i:37), STATEMACHINELOGENTRY, 59@client-0DF16CBE4C94
2023-11-07 01:38:11,936 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 41, m19 -> (t:2, i:41), STATEMACHINELOGENTRY, 60@client-61946BA3FD81
2023-11-07 01:38:11,937 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-11-07 01:38:11,937 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-11-07 01:38:11,937 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:11,937 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-11-07 01:38:11,937 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-11-07 01:38:11,937 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:11,937 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-11-07 01:38:11,937 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-11-07 01:38:11,937 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  util.AwaitToRun (AwaitToRun.java:start(81)) - Thread[s0@group-54B65749A8A2-cacheEviction-AwaitToRun,5,main] started
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-54B65749A8A2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 32MB (=33554432) (default)
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-11-07 01:38:11,947 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:11,948 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-11-07 01:38:11,948 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-11-07 01:38:11,948 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-11-07 01:38:11,949 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 39: peers:[s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,949 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 43: peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[], old=peers:[s0|localhost:41917]|listeners:[]
2023-11-07 01:38:11,950 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 45: peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,950 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 47: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=peers:[s3|0.0.0.0:39111, s0|localhost:41917]|listeners:[]
2023-11-07 01:38:11,950 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,950 [s0-impl-thread1] INFO  segmented.LogSegment (LogSegment.java:loadSegment(170)) - Successfully read 12 entries from segment file /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_39
2023-11-07 01:38:11,951 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> 50
2023-11-07 01:38:11,951 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-11-07 01:38:11,951 [s0-impl-thread1] INFO  raftlog.RaftLog (RaftLogBase.java:lambda$new$0(54)) - s0@group-54B65749A8A2-SegmentedRaftLog: purgeIndex: updateIncreasingly -1 -> 38
2023-11-07 01:38:11,951 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(390)) - s0@group-54B65749A8A2: start as a follower, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:11,951 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-54B65749A8A2: changes role from      null to FOLLOWER at term 2 for startAsFollower
2023-11-07 01:38:11,951 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-54B65749A8A2-FollowerState
2023-11-07 01:38:11,952 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-54B65749A8A2,id=s0
2023-11-07 01:38:11,952 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.trigger-when-stop.enabled = true (default)
2023-11-07 01:38:11,952 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-11-07 01:38:11,952 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 10 (custom)
2023-11-07 01:38:11,952 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-11-07 01:38:11,952 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-11-07 01:38:11,952 [s0@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-11-07 01:38:11,952 [s0@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-11-07 01:38:11,953 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(406)) - s0: start RPC server
2023-11-07 01:38:11,960 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 46761
2023-11-07 01:38:11,961 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 41917
2023-11-07 01:38:11,962 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 46377
2023-11-07 01:38:11,967 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-11-07 01:38:11,967 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-54B65749A8A2:t2, leader=null, voted=null, raftlog=Memoized:s3@group-54B65749A8A2-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s4:  RUNNING  FOLLOWER s4@group-54B65749A8A2:t2, leader=null, voted=null, raftlog=Memoized:s4@group-54B65749A8A2-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:11,967 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(223)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-54B65749A8A2:t2, leader=null, voted=null, raftlog=Memoized:s3@group-54B65749A8A2-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s4:  RUNNING  FOLLOWER s4@group-54B65749A8A2:t2, leader=null, voted=null, raftlog=Memoized:s4@group-54B65749A8A2-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-54B65749A8A2:t2, leader=null, voted=null, raftlog=Memoized:s3@group-54B65749A8A2-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s4:  RUNNING  FOLLOWER s4@group-54B65749A8A2:t2, leader=null, voted=null, raftlog=Memoized:s4@group-54B65749A8A2-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:217)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:203)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.assertLeaderContent(RaftSnapshotBaseTest.java:91)
	at org.apache.ratis.statemachine.RaftSnapshotBaseTest.testBasicInstallSnapshot(RaftSnapshotBaseTest.java:262)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:11,969 [JvmPauseMonitor9] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(146)) - JvmPauseMonitor-s0: Started
2023-11-07 01:38:12,022 [s4@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:203454692ns, electionTimeout:203ms
2023-11-07 01:38:12,023 [s4@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:12,023 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2023-11-07 01:38:12,023 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:12,023 [s4@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-LeaderElection14
2023-11-07 01:38:12,027 [s4@group-54B65749A8A2-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s4@group-54B65749A8A2-LeaderElection14 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:12,028 [s4@group-54B65749A8A2-LeaderElection14] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-54B65749A8A2-LeaderElection14 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s3, STARTING -> STARTING
2023-11-07 01:38:12,028 [s4@group-54B65749A8A2-LeaderElection14] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-54B65749A8A2-LeaderElection14 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:12,028 [s4@group-54B65749A8A2-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-54B65749A8A2-LeaderElection14: PRE_VOTE REJECTED received 0 response(s) and 2 exception(s):
2023-11-07 01:38:12,029 [s4@group-54B65749A8A2-LeaderElection14] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 0: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s3, STARTING -> STARTING
2023-11-07 01:38:12,029 [s4@group-54B65749A8A2-LeaderElection14] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:12,033 [s4@group-54B65749A8A2-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s4@group-54B65749A8A2-LeaderElection14 PRE_VOTE round 0: result REJECTED
2023-11-07 01:38:12,033 [s4@group-54B65749A8A2-LeaderElection14] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-11-07 01:38:12,033 [s4@group-54B65749A8A2-LeaderElection14] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s4: shutdown s4@group-54B65749A8A2-LeaderElection14
2023-11-07 01:38:12,033 [s4@group-54B65749A8A2-LeaderElection14] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:12,037 [s3@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s3@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:219852904ns, electionTimeout:219ms
2023-11-07 01:38:12,038 [s3@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-54B65749A8A2-FollowerState
2023-11-07 01:38:12,038 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2023-11-07 01:38:12,038 [s3@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:12,038 [s3@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-LeaderElection15
2023-11-07 01:38:12,042 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s3@group-54B65749A8A2-LeaderElection15 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:12,044 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s3@group-54B65749A8A2-LeaderElection15 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
2023-11-07 01:38:12,045 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1372)) - s0@group-54B65749A8A2: receive requestVote(PRE_VOTE, s3, group-54B65749A8A2, 2, (t:2, i:50))
2023-11-07 01:38:12,046 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-54B65749A8A2-FOLLOWER: accept PRE_VOTE from s3: our priority 0 <= candidate's priority 0
2023-11-07 01:38:12,047 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1405)) - s0@group-54B65749A8A2 replies to PRE_VOTE vote request: s3<-s0#0:OK-t2. Peer's state: s0@group-54B65749A8A2:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:12,050 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-54B65749A8A2-LeaderElection15: PRE_VOTE PASSED received 1 response(s) and 1 exception(s):
2023-11-07 01:38:12,050 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s3<-s0#0:OK-t2
2023-11-07 01:38:12,050 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
2023-11-07 01:38:12,050 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s3@group-54B65749A8A2-LeaderElection15 PRE_VOTE round 0: result PASSED
2023-11-07 01:38:12,050 [s3@group-54B65749A8A2-LeaderElection15] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@3700a3d8
2023-11-07 01:38:12,052 [s3@group-54B65749A8A2-LeaderElection15] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:12,052 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s3@group-54B65749A8A2-LeaderElection15 ELECTION round 0: submit vote requests at term 3 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:12,052 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s3@group-54B65749A8A2-LeaderElection15 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
2023-11-07 01:38:12,054 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1372)) - s0@group-54B65749A8A2: receive requestVote(ELECTION, s3, group-54B65749A8A2, 3, (t:2, i:50))
2023-11-07 01:38:12,054 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-54B65749A8A2-FOLLOWER: accept ELECTION from s3: our priority 0 <= candidate's priority 0
2023-11-07 01:38:12,054 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s0@group-54B65749A8A2: changes role from  FOLLOWER to FOLLOWER at term 3 for candidate:s3
2023-11-07 01:38:12,054 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-54B65749A8A2-FollowerState
2023-11-07 01:38:12,054 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-54B65749A8A2-FollowerState
2023-11-07 01:38:12,054 [s0@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-54B65749A8A2-FollowerState was interrupted
2023-11-07 01:38:12,054 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setFirstElection(562)) - s0@group-54B65749A8A2: set firstElectionSinceStartup to false for candidate:s3
2023-11-07 01:38:12,055 [grpc-default-executor-3] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@392d42b7
2023-11-07 01:38:12,057 [grpc-default-executor-3] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/raft-meta with options [REPLACE_EXISTING]
2023-11-07 01:38:12,057 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1405)) - s0@group-54B65749A8A2 replies to ELECTION vote request: s3<-s0#0:OK-t3. Peer's state: s0@group-54B65749A8A2:t3, leader=null, voted=s3, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c50, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-54B65749A8A2-LeaderElection15: ELECTION PASSED received 1 response(s) and 1 exception(s):
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s3<-s0#0:OK-t3
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s3@group-54B65749A8A2-LeaderElection15 ELECTION round 0: result PASSED
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s3: shutdown s3@group-54B65749A8A2-LeaderElection15
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s3@group-54B65749A8A2: changes role from CANDIDATE to LEADER at term 3 for changeToLeader
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-11-07 01:38:12,058 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.enabled = false (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.leader.lease.timeout.ratio = 0.9 (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,059 [s3@group-54B65749A8A2-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-54B65749A8A2-LeaderStateImpl
2023-11-07 01:38:12,060 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s3@group-54B65749A8A2: change Leader from null to s3 at term 3 for becomeLeader, leader elected after 885ms
2023-11-07 01:38:12,062 [s3@group-54B65749A8A2-LeaderElection15] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(433)) - s3@group-54B65749A8A2-SegmentedRaftLogWorker: Rolling segment log-39_50 to index:50
2023-11-07 01:38:12,063 [s3@group-54B65749A8A2-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_39 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_39-50
2023-11-07 01:38:12,063 [s3@group-54B65749A8A2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(589)) - s3@group-54B65749A8A2-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_39 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_39-50
2023-11-07 01:38:12,067 [s3@group-54B65749A8A2-LeaderElection15] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s3@group-54B65749A8A2: set configuration 51: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:12,070 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,070 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,071 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,071 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,071 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,071 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,071 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,071 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,071 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,072 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,072 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,072 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,073 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,073 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,074 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,074 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,074 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,074 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,075 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,075 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,075 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,075 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,075 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,075 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,075 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,075 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,075 [s3@group-54B65749A8A2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(632)) - s3@group-54B65749A8A2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_51
2023-11-07 01:38:12,076 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,076 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,080 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,080 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,081 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,081 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,081 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,081 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,081 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,081 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,081 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,081 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,081 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,081 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,082 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,082 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,082 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,083 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,083 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,083 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,083 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,083 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,083 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,083 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,083 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,084 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,084 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,084 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,087 [s0-server-thread2] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s0@group-54B65749A8A2: receive appendEntries(s3, 3, (t:2, i:50), 49, true, commits:[s3:c49, s0:c49, s4:c46], cId:1, entries: [(t:3, i:51), CONFIGURATIONENTRY(current:id: "s3"
address: "0.0.0.0:39111"
clientAddress: "0.0.0.0:39111"
adminAddress: "0.0.0.0:39111"
startupRole: FOLLOWER
,id: "s4"
address: "0.0.0.0:37939"
clientAddress: "0.0.0.0:37939"
adminAddress: "0.0.0.0:37939"
startupRole: FOLLOWER
,id: "s0"
address: "localhost:41917"
dataStreamAddress: "localhost:46051"
clientAddress: "localhost:46761"
adminAddress: "localhost:46377"
startupRole: FOLLOWER
, old:)]
2023-11-07 01:38:12,091 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(265)) - s0@group-54B65749A8A2: change Leader from null to s3 at term 3 for appendEntries, leader elected after 163ms
2023-11-07 01:38:12,091 [s0-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(382)) - s0@group-54B65749A8A2: set configuration 51: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:12,091 [s0-server-thread2] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:12,091 [s0-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(433)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: Rolling segment log-39_50 to index:50
2023-11-07 01:38:12,096 [s0@group-54B65749A8A2-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_39 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_39-50
2023-11-07 01:38:12,096 [s0@group-54B65749A8A2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(589)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_39 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_39-50
2023-11-07 01:38:12,101 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,101 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,101 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,101 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,101 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,102 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,102 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,102 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,102 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,102 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,102 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,102 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,102 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,102 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,103 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,104 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,108 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,108 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,108 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,108 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,108 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,108 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,108 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,108 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,108 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,109 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,109 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,109 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,109 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,110 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,110 [s0@group-54B65749A8A2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(632)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/current/log_inprogress_51
2023-11-07 01:38:12,110 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,110 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,110 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,110 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,110 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,110 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,110 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,110 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,110 [s0-server-thread3] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s0@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s3<-s0#1:OK-t3,SUCCESS,nextIndex=52,followerCommit=50,matchIndex=51
2023-11-07 01:38:12,110 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,111 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,111 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,111 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,112 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  server.RaftServer$Division (LeaderStateImpl.java:isApplied(316)) - leader is ready since appliedIndex == 51 >= startIndex == 51
2023-11-07 01:38:12,116 [s0-server-thread3] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s0@group-54B65749A8A2: receive appendEntries(s3, 3, (t:3, i:51), 51, true, commits:[s3:c51, s0:c50, s4:c46], cId:2, entries: [(t:3, i:52), METADATAENTRY(c:51)]
2023-11-07 01:38:12,116 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,116 [s0-server-thread3] DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(463)) - truncateIndex=-1, arrayIndex=0
2023-11-07 01:38:12,117 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,118 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,118 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,118 [s0-server-thread3] DEBUG server.RaftServer$Division (RaftServerImpl.java:logAppendEntries(1499)) - s0@group-54B65749A8A2: succeeded to handle AppendEntries. Reply: s3<-s0#2:OK-t3,SUCCESS,nextIndex=53,followerCommit=51,matchIndex=52
2023-11-07 01:38:12,119 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,119 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,119 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,119 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,119 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,119 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,119 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,119 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,119 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,119 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,120 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,120 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,120 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,120 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,120 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,120 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,120 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,121 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,121 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,121 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,121 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,121 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,121 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,121 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,122 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,123 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,124 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,125 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,125 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,125 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,125 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,125 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,125 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,125 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,126 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,126 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,126 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,126 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,126 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,126 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,126 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,127 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,127 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,128 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,129 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,129 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,129 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,129 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,130 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,130 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,130 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,130 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,130 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,130 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,130 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,130 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,130 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,130 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,131 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,131 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,131 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,131 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,131 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,132 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,133 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,133 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,137 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,137 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,137 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,137 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,137 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,137 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,137 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,137 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,137 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,137 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,142 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,142 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,142 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,142 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,143 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,143 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,143 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,143 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,143 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,143 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,143 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,143 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,143 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,143 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,145 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,147 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,147 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,148 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,148 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,148 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,148 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,149 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,149 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,149 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,149 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,149 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,149 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,149 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,149 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,150 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,152 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,153 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,153 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,153 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,153 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,153 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,153 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,153 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,154 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,154 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,154 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,154 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,154 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,154 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,154 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,154 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,154 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,155 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,156 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,156 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,156 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,156 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,156 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,156 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,156 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,156 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,157 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,157 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,157 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,157 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,157 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,157 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,159 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,160 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,160 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,160 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,161 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,161 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,161 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,161 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,161 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,161 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,161 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,161 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,161 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,161 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,162 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,162 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,162 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,162 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,162 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,162 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,163 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,164 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,165 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,165 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,165 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,165 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,165 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,165 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,165 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,165 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,166 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,166 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,166 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,166 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,166 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,166 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,166 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,166 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,167 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,168 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,168 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,168 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,169 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,170 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,171 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,171 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,172 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,172 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,172 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,172 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,172 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,172 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,172 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,174 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,174 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,174 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,174 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,174 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,174 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,174 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,174 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,175 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,176 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,176 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,176 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,176 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,176 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,176 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,176 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,177 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,177 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,177 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,177 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,177 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,177 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,177 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,177 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,177 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,178 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,179 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,179 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,179 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,179 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,180 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,180 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,180 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,180 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,180 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,180 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,180 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,180 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,180 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,180 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,181 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,181 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,181 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,181 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,181 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,181 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,181 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,181 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,181 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,181 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,182 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,182 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,182 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,182 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,182 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,182 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,182 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,182 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,183 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,184 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,185 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,185 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,185 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,185 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,185 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,185 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,185 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,186 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,186 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,186 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,186 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,186 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,186 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,186 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,187 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,187 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,187 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,187 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,187 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,188 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,189 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,190 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,190 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,190 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,190 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,190 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,190 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,190 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,191 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,191 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,191 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,191 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,191 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,191 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,191 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,192 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,193 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,193 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,193 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,193 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,193 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,194 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,194 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,194 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,194 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,194 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,194 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,194 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,194 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,194 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,194 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,195 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,200 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,200 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,200 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,200 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,200 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,200 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,201 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,201 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,201 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,201 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,201 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,201 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,201 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,201 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,201 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,202 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,204 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,205 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,206 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,206 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,206 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,206 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,207 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,208 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,209 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,209 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,210 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,211 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,211 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,211 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,211 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,211 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,212 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,213 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,214 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,214 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,214 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,214 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,214 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,214 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,214 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,215 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,215 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,215 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,215 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,215 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,215 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,215 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,215 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,215 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,215 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,216 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,217 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,218 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,218 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,220 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,220 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,220 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,220 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,221 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,221 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,221 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,221 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,221 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,221 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,221 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,221 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,221 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,221 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,222 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,223 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,223 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,223 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,223 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,223 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,224 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,225 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,226 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,226 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,226 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,226 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,226 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,226 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,226 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,226 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,227 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,227 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,227 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,227 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,227 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,227 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,227 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,227 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,227 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,228 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,229 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,230 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,230 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,230 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,230 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,230 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,230 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,230 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,230 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,231 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,231 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,231 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,231 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,231 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,231 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,231 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,231 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,231 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,232 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,233 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,234 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,234 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,234 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,234 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,234 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,234 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,235 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,235 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,235 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,235 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,235 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,235 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,235 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,235 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,235 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,235 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,236 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,237 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,237 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,237 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,237 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,237 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,237 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,237 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,237 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,238 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,238 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,238 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,238 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,238 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,238 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,238 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,238 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,239 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,240 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,241 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,241 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,241 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,241 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,241 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,241 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,241 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,241 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,242 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,242 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,242 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,242 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,242 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,242 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,242 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,242 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,243 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,244 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,244 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,244 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,245 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,246 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,247 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,248 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,248 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,248 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,248 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,248 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,248 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,248 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,248 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,248 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,248 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,249 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,250 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,250 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,250 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,250 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,250 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,250 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,250 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,250 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,250 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,250 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,251 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,252 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,252 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,252 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,252 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,252 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,252 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,252 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,252 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,253 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,253 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,253 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,253 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,253 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,253 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,253 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,253 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,253 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,253 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,254 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,255 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,256 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,257 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,257 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,257 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,257 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,257 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,257 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,257 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,257 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,258 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,258 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,258 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,258 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,258 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,258 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,258 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,258 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,258 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,258 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,259 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,260 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,275 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,275 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,276 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,278 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,278 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,279 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,280 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,280 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,280 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,280 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,280 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,280 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,280 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,280 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,281 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,281 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,281 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,281 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,281 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,281 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,281 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,281 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,281 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,281 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,282 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,283 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,284 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,284 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,284 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,284 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,284 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,284 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,284 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,284 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,285 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,285 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,285 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,285 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,285 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,285 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,285 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,285 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,285 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,286 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,287 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,288 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,288 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,288 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,288 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,288 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,288 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,288 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,289 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,289 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,289 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,289 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,289 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,289 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,289 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,289 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,289 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,289 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,290 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,291 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,292 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,292 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,292 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,292 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,292 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,293 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,294 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,295 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,296 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,296 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,296 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,296 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,296 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,296 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,297 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,298 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,299 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,299 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,299 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,299 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,299 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,299 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,299 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,299 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,300 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,300 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,300 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,300 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,300 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,300 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,300 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,300 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,300 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,300 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,301 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,302 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,303 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,303 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,303 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,303 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,303 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,303 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,304 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,305 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,306 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,307 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,307 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,307 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,307 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,307 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,307 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,307 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,307 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,307 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,307 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,308 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,308 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,308 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,308 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,308 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,308 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,308 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,308 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,309 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,310 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,311 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,312 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,312 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,312 [s4@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-54B65749A8A2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:278526205ns, electionTimeout:278ms
2023-11-07 01:38:12,312 [s4@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:12,312 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,312 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2023-11-07 01:38:12,312 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,312 [s4@group-54B65749A8A2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-11-07 01:38:12,312 [s4@group-54B65749A8A2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-LeaderElection16
2023-11-07 01:38:12,312 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,312 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,313 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,313 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,313 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,313 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,313 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,313 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,313 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,313 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,313 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,313 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,317 [s4@group-54B65749A8A2-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(323)) - s4@group-54B65749A8A2-LeaderElection16 PRE_VOTE round 0: submit vote requests at term 2 for 49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null
2023-11-07 01:38:12,318 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,318 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,318 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,318 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,318 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,318 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,318 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,318 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,318 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,318 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,319 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,319 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,319 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,319 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,319 [s4@group-54B65749A8A2-LeaderElection16] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-54B65749A8A2-LeaderElection16 got exception when requesting votes: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s3, STARTING -> STARTING
2023-11-07 01:38:12,320 [s4@group-54B65749A8A2-LeaderElection16] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) - s4@group-54B65749A8A2-LeaderElection16 got exception when requesting votes: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:12,320 [s4@group-54B65749A8A2-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-54B65749A8A2-LeaderElection16: PRE_VOTE REJECTED received 0 response(s) and 2 exception(s):
2023-11-07 01:38:12,320 [s4@group-54B65749A8A2-LeaderElection16] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 0: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: ILLEGAL TRANSITION: In s3, STARTING -> STARTING
2023-11-07 01:38:12,320 [s4@group-54B65749A8A2-LeaderElection16] INFO  impl.LeaderElection (LogUtils.java:infoOrTrace(136)) -   Exception 1: java.util.concurrent.ExecutionException: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception
2023-11-07 01:38:12,320 [s4@group-54B65749A8A2-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(325)) - s4@group-54B65749A8A2-LeaderElection16 PRE_VOTE round 0: result REJECTED
2023-11-07 01:38:12,320 [s4@group-54B65749A8A2-LeaderElection16] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(377)) - s4@group-54B65749A8A2: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-11-07 01:38:12,320 [s4@group-54B65749A8A2-LeaderElection16] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s4: shutdown s4@group-54B65749A8A2-LeaderElection16
2023-11-07 01:38:12,320 [s4@group-54B65749A8A2-LeaderElection16] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:12,323 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,323 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,323 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,323 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,323 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,323 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,323 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,323 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,323 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,324 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,324 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,324 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,324 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,324 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,324 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,324 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,325 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,326 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,327 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,327 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,327 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,327 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,327 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,327 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,327 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,328 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,328 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,328 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,328 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,328 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,328 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,328 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,328 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,328 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,328 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,329 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,330 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,331 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,332 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,332 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,332 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,332 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,332 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,332 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,332 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,333 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,333 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,333 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,333 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,333 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,333 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,333 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,333 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,333 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,333 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,334 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,335 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,336 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,336 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,338 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,338 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,338 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,338 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,338 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,338 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,338 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,338 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,338 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,338 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,339 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,339 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,339 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,339 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,340 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,340 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,340 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,340 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,341 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,342 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,343 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,343 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,343 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,343 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,343 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,343 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,343 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,344 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,344 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,344 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,344 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,344 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,344 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,344 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,344 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,344 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,345 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,346 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,346 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,346 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,346 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,346 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,346 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,346 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,346 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,347 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,347 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,347 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,347 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,347 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,347 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,347 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,347 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,347 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,347 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,348 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,349 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,350 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,351 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,351 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,352 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,352 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,352 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,352 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,352 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,352 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,352 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,353 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,353 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,353 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,353 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,353 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,353 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,353 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,371 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,371 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,371 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,371 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,371 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,371 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,371 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,372 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,372 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,372 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,372 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,372 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,372 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,372 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,381 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,381 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,381 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,381 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,381 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,382 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,382 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,382 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,382 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,382 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,382 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,382 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,382 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,382 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,391 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,391 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,391 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,392 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,401 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,401 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,401 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,401 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,401 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,401 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,401 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,402 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,402 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,402 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,402 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,402 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,402 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,402 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,411 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,412 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,412 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,412 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,418 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s3:  RUNNING    LEADER s3@group-54B65749A8A2:t3, leader=s3, voted=s3, raftlog=Memoized:s3@group-54B65749A8A2-SegmentedRaftLog:OPENED:c52, conf=51: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s4:  RUNNING  FOLLOWER s4@group-54B65749A8A2:t2, leader=null, voted=null, raftlog=Memoized:s4@group-54B65749A8A2-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t3, leader=s3, voted=s3, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c52, conf=51: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:12,418 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 0) 0 term: 1, index: 1, stateMachineLogEntry {,   logData: "m0",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 41, }, 
2023-11-07 01:38:12,419 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 1) 1 term: 1, index: 3, stateMachineLogEntry {,   logData: "m1",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 42, }, 
2023-11-07 01:38:12,419 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 2) 2 term: 1, index: 5, stateMachineLogEntry {,   logData: "m2",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 43, }, 
2023-11-07 01:38:12,419 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 3) 3 term: 1, index: 7, stateMachineLogEntry {,   logData: "m3",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 44, }, 
2023-11-07 01:38:12,419 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 4) 4 term: 1, index: 9, stateMachineLogEntry {,   logData: "m4",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 45, }, 
2023-11-07 01:38:12,419 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 5) 5 term: 1, index: 11, stateMachineLogEntry {,   logData: "m5",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 46, }, 
2023-11-07 01:38:12,419 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 6) 6 term: 1, index: 13, stateMachineLogEntry {,   logData: "m6",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 47, }, 
2023-11-07 01:38:12,419 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 7) 7 term: 1, index: 15, stateMachineLogEntry {,   logData: "m7",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 48, }, 
2023-11-07 01:38:12,419 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 8) 8 term: 1, index: 17, stateMachineLogEntry {,   logData: "m8",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 49, }, 
2023-11-07 01:38:12,419 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 9) 9 term: 1, index: 19, stateMachineLogEntry {,   logData: "m9",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 50, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 10) 10 term: 1, index: 21, stateMachineLogEntry {,   logData: "m10",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 51, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 11) 11 term: 1, index: 23, stateMachineLogEntry {,   logData: "m11",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 52, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 12) 12 term: 1, index: 25, stateMachineLogEntry {,   logData: "m12",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 53, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 13) 13 term: 1, index: 27, stateMachineLogEntry {,   logData: "m13",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 54, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 14) 14 term: 1, index: 29, stateMachineLogEntry {,   logData: "m14",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 55, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 15) 15 term: 1, index: 31, stateMachineLogEntry {,   logData: "m15",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 56, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 16) 16 term: 1, index: 33, stateMachineLogEntry {,   logData: "m16",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 57, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 17) 17 term: 1, index: 35, stateMachineLogEntry {,   logData: "m17",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 58, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 18) 18 term: 1, index: 37, stateMachineLogEntry {,   logData: "m18",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\332(\261s\337\tK\255\270G\r\361l\276L\224",   callId: 59, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  statemachine.RaftSnapshotBaseTest (RaftSnapshotBaseTest.java:assertLogContent(113)) - 19) 19 term: 2, index: 41, stateMachineLogEntry {,   logData: "m19",   stateMachineEntry {,     stateMachineData: "StateMachine Data",   },   clientId: "\004\304d\020\344\217M\220\226\031a\224k\243\375\201",   callId: 60, }, 
2023-11-07 01:38:12,420 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-11-07 01:38:12,420 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-11-07 01:38:12,420 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-11-07 01:38:12,420 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-11-07 01:38:12,420 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-11-07 01:38:12,421 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s3:  RUNNING    LEADER s3@group-54B65749A8A2:t3, leader=s3, voted=s3, raftlog=Memoized:s3@group-54B65749A8A2-SegmentedRaftLog:OPENED:c52, conf=51: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s4:  RUNNING  FOLLOWER s4@group-54B65749A8A2:t2, leader=null, voted=null, raftlog=Memoized:s4@group-54B65749A8A2-SegmentedRaftLog:OPENED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
  s0:  RUNNING  FOLLOWER s0@group-54B65749A8A2:t3, leader=s3, voted=s3, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:OPENED:c52, conf=51: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null RUNNING
2023-11-07 01:38:12,423 [MiniRaftCluster-12] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(416)) - s3: close
2023-11-07 01:38:12,432 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(646)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 39, send snapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49] to follower
2023-11-07 01:38:12,432 [MiniRaftCluster-13] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(416)) - s4: close
2023-11-07 01:38:12,432 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(668)) - s3@group-54B65749A8A2->s4-GrpcLogAppender: failed to installSnapshot SingleFileSnapshotInfo(t:2, i:49):[/home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.2_49]
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:653)
	at org.apache.ratis.grpc.server.GrpcLogAppender.installSnapshot(GrpcLogAppender.java:161)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:180)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,432 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] WARN  leader.LogAppenderDaemon (LogAppenderDaemon.java:run(89)) - s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon failed
java.lang.IllegalStateException: ILLEGAL TRANSITION: In s4, STARTING -> STARTING
	at org.apache.ratis.util.Preconditions.assertTrue(Preconditions.java:61)
	at org.apache.ratis.util.LifeCycle$State.validate(LifeCycle.java:121)
	at org.apache.ratis.util.LifeCycle.transition(LifeCycle.java:164)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:268)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:63)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.appendLog(GrpcLogAppender.java:313)
	at org.apache.ratis.grpc.server.GrpcLogAppender.run(GrpcLogAppender.java:181)
	at org.apache.ratis.server.leader.LogAppenderDaemon.run(LogAppenderDaemon.java:80)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,432 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServer$Division (LeaderStateImpl.java:restart(663)) - s3@group-54B65749A8A2-LeaderStateImpl: Restarting GrpcLogAppender for s3@group-54B65749A8A2->s4
2023-11-07 01:38:12,432 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-11-07 01:38:12,433 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-11-07 01:38:12,433 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-11-07 01:38:12,433 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 1ms (default)
2023-11-07 01:38:12,433 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 8 (default)
2023-11-07 01:38:12,433 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-11-07 01:38:12,433 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.element-limit = 8 (default)
2023-11-07 01:38:12,433 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.install_snapshot.request.timeout = 3000ms (default)
2023-11-07 01:38:12,433 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-11-07 01:38:12,433 [s3@group-54B65749A8A2->s4-GrpcLogAppender-LogAppenderDaemon] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-11-07 01:38:12,442 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$3(514)) - s3@group-54B65749A8A2: shutdown
2023-11-07 01:38:12,442 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$3(514)) - s4@group-54B65749A8A2: shutdown
2023-11-07 01:38:12,442 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-54B65749A8A2,id=s3
2023-11-07 01:38:12,442 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-54B65749A8A2,id=s4
2023-11-07 01:38:12,442 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(94)) - s3: shutdown s3@group-54B65749A8A2-LeaderStateImpl
2023-11-07 01:38:12,442 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-54B65749A8A2-FollowerState
2023-11-07 01:38:12,443 [s4-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s4@group-54B65749A8A2-StateMachineUpdater: set stopIndex = 49
2023-11-07 01:38:12,443 [s3-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(289)) - s3@group-54B65749A8A2-PendingRequests: sendNotLeaderResponses
2023-11-07 01:38:12,443 [s4@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s4@group-54B65749A8A2-FollowerState was interrupted
2023-11-07 01:38:12,443 [MiniRaftCluster-14] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$9(416)) - s0: close
2023-11-07 01:38:12,443 [s3@group-54B65749A8A2->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(212)) - s3@group-54B65749A8A2->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-11-07 01:38:12,444 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(157)) - s0: Completed APPEND_ENTRIES, lastRequest: s3->s0#2-t3,previous=(t:3, i:51),leaderCommit=51,initializing? true,entries: size=1, first=(t:3, i:52), METADATAENTRY(c:51)
2023-11-07 01:38:12,444 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$5(159)) - s0: Completed APPEND_ENTRIES, lastReply: null
2023-11-07 01:38:12,442 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server GrpcServerProtocolService now
2023-11-07 01:38:12,445 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(157)) - s0: Completed APPEND_ENTRIES, lastRequest: null
2023-11-07 01:38:12,445 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:lambda$onCompleted$5(159)) - s0: Completed APPEND_ENTRIES, lastReply: serverReply {
  requestorId: "s3"
  replyId: "s0"
  raftGroupId {
    id: "R\'\303C\276\275B\355\204YT\266WI\250\242"
  }
  callId: 9
  success: true
}
term: 3
nextIndex: 53
followerCommit: 52
matchIndex: 18446744073709551615
isHearbeat: true

2023-11-07 01:38:12,445 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(469)) - s3@group-54B65749A8A2->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-11-07 01:38:12,442 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server GrpcServerProtocolService now
2023-11-07 01:38:12,445 [s4-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(423)) - s4@group-54B65749A8A2: applyIndex: 49
2023-11-07 01:38:12,445 [s4@group-54B65749A8A2-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s4@group-54B65749A8A2-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2023-11-07 01:38:12,471 [Thread-485] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s0 Close channels
2023-11-07 01:38:12,472 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server GrpcServerProtocolService successfully
2023-11-07 01:38:12,494 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-11-07 01:38:12,495 [s3-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s3@group-54B65749A8A2-StateMachineUpdater: set stopIndex = 52
2023-11-07 01:38:12,495 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$3(514)) - s0@group-54B65749A8A2: shutdown
2023-11-07 01:38:12,495 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-54B65749A8A2,id=s0
2023-11-07 01:38:12,495 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(469)) - s3@group-54B65749A8A2->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-11-07 01:38:12,495 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-54B65749A8A2-FollowerState
2023-11-07 01:38:12,495 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(157)) - s0@group-54B65749A8A2-StateMachineUpdater: set stopIndex = 52
2023-11-07 01:38:12,495 [s0@group-54B65749A8A2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-54B65749A8A2-FollowerState was interrupted
2023-11-07 01:38:12,501 [Thread-487] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(103)) - s0 Close channels
2023-11-07 01:38:12,501 [grpc-default-executor-1] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(149)) - s3@group-54B65749A8A2->s0-GrpcLogAppender: Failed to getClient for s0
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s3 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:110)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:121)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:126)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$800(GrpcLogAppender.java:61)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:471)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:479)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:489)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:453)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:486)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:567)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:71)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:735)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:716)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-11-07 01:38:12,501 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server GrpcServerProtocolService successfully
2023-11-07 01:38:12,523 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-11-07 01:38:12,523 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-11-07 01:38:12,527 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-11-07 01:38:12,527 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-11-07 01:38:12,528 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-11-07 01:38:12,539 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.3_52 with options [READ]: sun.nio.ch.FileChannelImpl@2ec854b7
2023-11-07 01:38:12,540 [s3@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.3_52 with options [READ]: sun.nio.ch.FileChannelImpl@64e1e3c1
2023-11-07 01:38:12,540 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.3_52.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@200faf1e
2023-11-07 01:38:12,540 [s3@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:supplyAndLog(69)) - Successfully supplied FileChannel.open /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.3_52.md5.tmp with options [CREATE, WRITE]: sun.nio.ch.FileChannelImpl@179ea9fe
2023-11-07 01:38:12,542 [s0@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.3_52.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s0/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.3_52.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:12,542 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s0@group-54B65749A8A2-StateMachineUpdater: Took a snapshot at index 52
2023-11-07 01:38:12,542 [s0@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s0@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: updateIncreasingly 50 -> 52
2023-11-07 01:38:12,542 [s3@group-54B65749A8A2-StateMachineUpdater] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.3_52.md5.tmp to /home/runner/work/ratis/ratis/ratis-test/target/test/data/7ce3eb00/MiniRaftClusterWithGrpc17918598/s3/5227c343-bebd-42ed-8459-54b65749a8a2/sm/snapshot.3_52.md5 with options [REPLACE_EXISTING]
2023-11-07 01:38:12,542 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(295)) - s3@group-54B65749A8A2-StateMachineUpdater: Took a snapshot at index 52
2023-11-07 01:38:12,542 [s3@group-54B65749A8A2-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(98)) - s3@group-54B65749A8A2-StateMachineUpdater: snapshotIndex: updateIncreasingly 49 -> 52
2023-11-07 01:38:12,542 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(423)) - s0@group-54B65749A8A2: applyIndex: 52
2023-11-07 01:38:12,543 [s0@group-54B65749A8A2-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s0@group-54B65749A8A2-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2023-11-07 01:38:12,543 [s3-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(423)) - s3@group-54B65749A8A2: applyIndex: 52
2023-11-07 01:38:12,544 [s3@group-54B65749A8A2-cacheEviction-AwaitToRun] INFO  util.AwaitToRun (AwaitToRun.java:run(49)) - s3@group-54B65749A8A2-cacheEviction-AwaitToRun-AwaitForSignal is interrupted
2023-11-07 01:38:12,964 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(243)) - s4@group-54B65749A8A2-SegmentedRaftLogWorker close()
2023-11-07 01:38:12,965 [JvmPauseMonitor8] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s4: Stopped
2023-11-07 01:38:13,117 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(243)) - s3@group-54B65749A8A2-SegmentedRaftLogWorker close()
2023-11-07 01:38:13,118 [JvmPauseMonitor7] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s3: Stopped
2023-11-07 01:38:13,119 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(243)) - s0@group-54B65749A8A2-SegmentedRaftLogWorker close()
2023-11-07 01:38:13,120 [JvmPauseMonitor9] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(152)) - JvmPauseMonitor-s0: Stopped
2023-11-07 01:38:13,120 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-11-07 01:38:13,120 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-11-07 01:38:13,120 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-11-07 01:38:13,120 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-11-07 01:38:13,120 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-11-07 01:38:13,120 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-11-07 01:38:13,120 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s3:   CLOSED    LEADER s3@group-54B65749A8A2:t3, leader=s3, voted=s3, raftlog=Memoized:s3@group-54B65749A8A2-SegmentedRaftLog:CLOSED:c52, conf=51: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null CLOSED
  s4:   CLOSED  FOLLOWER s4@group-54B65749A8A2:t2, leader=null, voted=null, raftlog=Memoized:s4@group-54B65749A8A2-SegmentedRaftLog:CLOSED:c49, conf=49: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null CLOSED
  s0:   CLOSED  FOLLOWER s0@group-54B65749A8A2:t3, leader=s3, voted=s3, raftlog=Memoized:s0@group-54B65749A8A2-SegmentedRaftLog:CLOSED:c52, conf=51: peers:[s3|0.0.0.0:39111, s4|0.0.0.0:37939, s0|localhost:41917]|listeners:[], old=null CLOSED
2023-11-07 01:38:13,121 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
]]></system-out>
  </testcase>
</testsuite>