2023-01-06 13:31:07,601 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:07,606 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:07,610 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:07,634 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-01-06 13:31:07,691 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-013C6D6F97E1:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:07,692 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:07,693 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:07,694 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:07,694 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:07,694 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:07,695 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:07,700 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-013C6D6F97E1:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:07,702 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0
2023-01-06 13:31:07,703 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0 does not exist.
2023-01-06 13:31:07,703 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0
2023-01-06 13:31:07,739 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:07,839 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:07,842 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 40631 (custom)
2023-01-06 13:31:07,847 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:07,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 39857 (custom)
2023-01-06 13:31:07,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:07,848 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 38239 (custom)
2023-01-06 13:31:07,849 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:07,853 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:07,855 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:07,856 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:07,879 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:07,886 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:07,887 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:08,085 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:08,088 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:08,088 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:08,089 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:08,090 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:08,093 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0] (custom)
2023-01-06 13:31:08,107 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-013C6D6F97E1:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER] returns group-013C6D6F97E1:java.util.concurrent.CompletableFuture@4879f3d9[Not completed]
2023-01-06 13:31:08,107 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-013C6D6F97E1:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:08,107 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1
2023-01-06 13:31:08,107 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1 does not exist.
2023-01-06 13:31:08,107 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1
2023-01-06 13:31:08,108 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:08,108 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:08,108 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44731 (custom)
2023-01-06 13:31:08,109 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:08,109 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 43037 (custom)
2023-01-06 13:31:08,109 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:08,109 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 33451 (custom)
2023-01-06 13:31:08,110 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:08,110 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:08,110 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:08,110 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:08,110 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:08,110 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:08,111 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:08,113 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:08,113 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:08,113 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:08,113 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:08,118 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:08,120 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1] (custom)
2023-01-06 13:31:08,129 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-013C6D6F97E1:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER] returns group-013C6D6F97E1:java.util.concurrent.CompletableFuture@60a9554a[Not completed]
2023-01-06 13:31:08,130 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-013C6D6F97E1:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:08,130 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2
2023-01-06 13:31:08,130 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2 does not exist.
2023-01-06 13:31:08,130 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2
2023-01-06 13:31:08,130 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:08,131 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:08,131 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 34435 (custom)
2023-01-06 13:31:08,131 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:08,131 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 45091 (custom)
2023-01-06 13:31:08,131 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:08,132 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 38795 (custom)
2023-01-06 13:31:08,132 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:08,132 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:08,132 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:08,132 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:08,132 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:08,133 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:08,133 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:08,139 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:08,139 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:08,139 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:08,140 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:08,140 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:08,140 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2] (custom)
2023-01-06 13:31:08,142 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-013C6D6F97E1:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER] returns group-013C6D6F97E1:java.util.concurrent.CompletableFuture@2ecb9e4c[Not completed]
2023-01-06 13:31:08,148 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:08,149 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:08,150 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:08,150 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:08,148 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:08,154 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:08,154 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:08,154 [pool-2-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-013C6D6F97E1:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:08,150 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:08,158 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:08,158 [pool-3-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-013C6D6F97E1:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:08,159 [pool-1-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-013C6D6F97E1:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:08,160 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:08,160 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:08,171 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:08,171 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:08,171 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:08,171 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:08,172 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:08,170 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:08,175 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:08,175 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:08,175 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:08,175 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:08,177 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:08,177 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:08,177 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:08,177 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:08,177 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:08,178 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:08,183 [pool-2-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-013C6D6F97E1: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:08,191 [pool-3-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-013C6D6F97E1: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:08,192 [pool-1-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-013C6D6F97E1: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:08,205 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:08,205 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:08,205 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:08,210 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:08,210 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:08,214 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:08,214 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:08,214 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:08,218 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:08,218 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:08,218 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:08,218 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:08,244 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:08,244 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:08,245 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:08,254 [pool-3-thread-1] INFO  metrics.MetricRegistries (MetricRegistriesLoader.java:load(64)) - Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2023-01-06 13:31:08,604 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:08,606 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:08,607 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:08,606 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:08,607 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:08,608 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:08,609 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:08,609 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:08,610 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:08,610 [pool-1-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:08,611 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:08,612 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0] (custom)
2023-01-06 13:31:08,610 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:08,613 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:08,613 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:08,614 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:08,614 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:08,625 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1 does not exist. Creating ...
2023-01-06 13:31:08,626 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1
2023-01-06 13:31:08,637 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:08,637 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/current
2023-01-06 13:31:08,639 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/sm
2023-01-06 13:31:08,654 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1 has been successfully formatted.
2023-01-06 13:31:08,655 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:08,658 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:08,659 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:08,666 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:08,666 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:08,667 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:08,668 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:08,671 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:08,675 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:08,676 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:08,679 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-013C6D6F97E1-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1
2023-01-06 13:31:08,680 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:08,680 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:08,682 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:08,683 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:08,684 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:08,685 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:08,685 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:08,686 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:08,688 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:08,688 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:08,691 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:08,691 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:08,692 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:08,697 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-013C6D6F97E1-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:08,698 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-013C6D6F97E1-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:08,700 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-013C6D6F97E1: start as a follower, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:08,700 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-013C6D6F97E1: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:08,701 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:08,703 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-013C6D6F97E1,id=s0
2023-01-06 13:31:08,705 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:08,706 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:08,706 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:08,710 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2023-01-06 13:31:08,712 [s0@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:08,712 [s0@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:08,751 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 39857
2023-01-06 13:31:08,756 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 38239
2023-01-06 13:31:08,759 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 40631
2023-01-06 13:31:08,762 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:08,762 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:08,762 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1] (custom)
2023-01-06 13:31:08,762 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1 does not exist. Creating ...
2023-01-06 13:31:08,770 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1
2023-01-06 13:31:08,773 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:08,773 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/current
2023-01-06 13:31:08,773 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/sm
2023-01-06 13:31:08,775 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2023-01-06 13:31:08,776 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1 has been successfully formatted.
2023-01-06 13:31:08,780 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:08,780 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:08,780 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:08,781 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:08,783 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:08,783 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:08,783 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:08,785 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:08,786 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:08,786 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:08,786 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-013C6D6F97E1-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1
2023-01-06 13:31:08,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:08,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:08,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:08,790 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:08,792 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:08,792 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:08,792 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:08,792 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:08,793 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:08,793 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:08,794 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:08,794 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:08,794 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:08,801 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-013C6D6F97E1-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:08,801 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-013C6D6F97E1-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:08,802 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-013C6D6F97E1: start as a follower, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:08,802 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-013C6D6F97E1: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:08,802 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:08,806 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-013C6D6F97E1,id=s1
2023-01-06 13:31:08,809 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:08,809 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:08,809 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:08,814 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2023-01-06 13:31:08,818 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 43037
2023-01-06 13:31:08,819 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 33451
2023-01-06 13:31:08,820 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 44731
2023-01-06 13:31:08,820 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:08,820 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:08,821 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2] (custom)
2023-01-06 13:31:08,821 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1 does not exist. Creating ...
2023-01-06 13:31:08,821 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1
2023-01-06 13:31:08,823 [s1@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:08,823 [s1@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:08,823 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2023-01-06 13:31:08,824 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:08,824 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/current
2023-01-06 13:31:08,825 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/sm
2023-01-06 13:31:08,828 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1 has been successfully formatted.
2023-01-06 13:31:08,829 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:08,829 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:08,829 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:08,829 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:08,829 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:08,829 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:08,829 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:08,833 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:08,833 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:08,833 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:08,834 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-013C6D6F97E1-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1
2023-01-06 13:31:08,834 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:08,834 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:08,834 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:08,834 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:08,835 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:08,836 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:08,836 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:08,836 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:08,836 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:08,836 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:08,838 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:08,838 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:08,838 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:08,839 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-013C6D6F97E1-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:08,839 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-013C6D6F97E1-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:08,842 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-013C6D6F97E1: start as a follower, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:08,843 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-013C6D6F97E1: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:08,843 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:08,843 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-013C6D6F97E1,id=s2
2023-01-06 13:31:08,844 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:08,844 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:08,844 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:08,848 [s2@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:08,851 [s2@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:08,851 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2023-01-06 13:31:08,856 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 45091
2023-01-06 13:31:08,857 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 38795
2023-01-06 13:31:08,858 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 34435
2023-01-06 13:31:08,861 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2023-01-06 13:31:08,863 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:08,865 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:08,868 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:308)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:219)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:08,938 [s0@group-013C6D6F97E1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-013C6D6F97E1-FollowerState: change to CANDIDATE, lastRpcElapsedTime:237925763ns, electionTimeout:225ms
2023-01-06 13:31:08,939 [s0@group-013C6D6F97E1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:08,939 [s0@group-013C6D6F97E1-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-013C6D6F97E1: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:08,944 [s0@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:08,944 [s0@group-013C6D6F97E1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-013C6D6F97E1-LeaderElection1
2023-01-06 13:31:08,950 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-013C6D6F97E1-LeaderElection1 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:08,967 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:08,967 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:08,969 [s0@group-013C6D6F97E1-LeaderElection1-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-01-06 13:31:08,969 [s0@group-013C6D6F97E1-LeaderElection1-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-01-06 13:31:09,031 [s2@group-013C6D6F97E1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-013C6D6F97E1-FollowerState: change to CANDIDATE, lastRpcElapsedTime:188280379ns, electionTimeout:180ms
2023-01-06 13:31:09,032 [s2@group-013C6D6F97E1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:09,032 [s2@group-013C6D6F97E1-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-013C6D6F97E1: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:09,032 [s2@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:09,033 [s2@group-013C6D6F97E1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-013C6D6F97E1-LeaderElection2
2023-01-06 13:31:09,045 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-013C6D6F97E1-LeaderElection2 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,050 [s2@group-013C6D6F97E1-LeaderElection2-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-01-06 13:31:09,054 [s2@group-013C6D6F97E1-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,056 [s1@group-013C6D6F97E1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-013C6D6F97E1-FollowerState: change to CANDIDATE, lastRpcElapsedTime:254490159ns, electionTimeout:233ms
2023-01-06 13:31:09,067 [s1@group-013C6D6F97E1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:09,067 [s1@group-013C6D6F97E1-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-013C6D6F97E1: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:09,054 [s2@group-013C6D6F97E1-LeaderElection2-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-01-06 13:31:09,070 [s1@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:09,070 [s1@group-013C6D6F97E1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-013C6D6F97E1-LeaderElection3
2023-01-06 13:31:09,071 [s2@group-013C6D6F97E1-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,095 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-013C6D6F97E1-LeaderElection3 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,096 [s1@group-013C6D6F97E1-LeaderElection3-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-01-06 13:31:09,097 [s1@group-013C6D6F97E1-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,106 [s1@group-013C6D6F97E1-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,098 [s1@group-013C6D6F97E1-LeaderElection3-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-01-06 13:31:09,164 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-013C6D6F97E1-LeaderElection1: PRE_VOTE TIMEOUT received 0 response(s) and 0 exception(s):
2023-01-06 13:31:09,164 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-013C6D6F97E1-LeaderElection1 PRE_VOTE round 0: result TIMEOUT
2023-01-06 13:31:09,165 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-013C6D6F97E1-LeaderElection1 PRE_VOTE round 1: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,167 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,167 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,208 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-013C6D6F97E1-LeaderElection2: PRE_VOTE TIMEOUT received 0 response(s) and 0 exception(s):
2023-01-06 13:31:09,208 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-013C6D6F97E1-LeaderElection2 PRE_VOTE round 0: result TIMEOUT
2023-01-06 13:31:09,208 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-013C6D6F97E1-LeaderElection2 PRE_VOTE round 1: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,218 [s2@group-013C6D6F97E1-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,219 [s2@group-013C6D6F97E1-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,322 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #2/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:308)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:219)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:09,324 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-013C6D6F97E1-LeaderElection3: PRE_VOTE TIMEOUT received 0 response(s) and 0 exception(s):
2023-01-06 13:31:09,324 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-013C6D6F97E1-LeaderElection3 PRE_VOTE round 0: result TIMEOUT
2023-01-06 13:31:09,324 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-013C6D6F97E1-LeaderElection3 PRE_VOTE round 1: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,329 [s1@group-013C6D6F97E1-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,329 [s1@group-013C6D6F97E1-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,367 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s0, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,369 [grpc-default-executor-0] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,373 [grpc-default-executor-0] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-013C6D6F97E1 replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,374 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s2, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,374 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s0, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,376 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,376 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-013C6D6F97E1 replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,376 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s2, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,374 [grpc-default-executor-5] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,389 [grpc-default-executor-5] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-013C6D6F97E1 replies to PRE_VOTE vote request: s2<-s0#0:OK-t0. Peer's state: s0@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,374 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s2, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,390 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,390 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-013C6D6F97E1 replies to PRE_VOTE vote request: s2<-s0#0:OK-t0. Peer's state: s0@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,381 [grpc-default-executor-9] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s0, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,380 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s1, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,378 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s1, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,394 [grpc-default-executor-6] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,394 [grpc-default-executor-6] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-013C6D6F97E1 replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,378 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s1, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,378 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s1, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,395 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s0, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,397 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,397 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-013C6D6F97E1 replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,394 [grpc-default-executor-9] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,392 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,399 [grpc-default-executor-9] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-013C6D6F97E1 replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,404 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,404 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-013C6D6F97E1-LeaderElection2: PRE_VOTE TIMEOUT received 0 response(s) and 0 exception(s):
2023-01-06 13:31:09,405 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-013C6D6F97E1-LeaderElection2 PRE_VOTE round 1: result TIMEOUT
2023-01-06 13:31:09,405 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-013C6D6F97E1-LeaderElection1: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:09,405 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t0
2023-01-06 13:31:09,405 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-013C6D6F97E1-LeaderElection1 PRE_VOTE round 1: result PASSED
2023-01-06 13:31:09,398 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s2, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,404 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-013C6D6F97E1 replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,401 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-013C6D6F97E1 replies to PRE_VOTE vote request: s2<-s1#0:OK-t0. Peer's state: s1@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,408 [grpc-default-executor-7] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,408 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-013C6D6F97E1-LeaderElection1 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,408 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,410 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-013C6D6F97E1 replies to PRE_VOTE vote request: s1<-s2#0:OK-t0. Peer's state: s2@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,409 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-013C6D6F97E1 replies to PRE_VOTE vote request: s2<-s1#0:OK-t0. Peer's state: s1@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,418 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,425 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,411 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,427 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-013C6D6F97E1 replies to PRE_VOTE vote request: s1<-s2#0:OK-t0. Peer's state: s2@group-013C6D6F97E1:t0, leader=null, voted=, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,427 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-013C6D6F97E1-LeaderElection2 PRE_VOTE round 2: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,426 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-013C6D6F97E1-LeaderElection3: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:09,441 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:OK-t0
2023-01-06 13:31:09,441 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-013C6D6F97E1-LeaderElection3 PRE_VOTE round 1: result PASSED
2023-01-06 13:31:09,434 [s2@group-013C6D6F97E1-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,444 [s2@group-013C6D6F97E1-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,446 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-013C6D6F97E1-LeaderElection3 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,450 [s1@group-013C6D6F97E1-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,450 [s1@group-013C6D6F97E1-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,463 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s2, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,464 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,464 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-013C6D6F97E1 replies to PRE_VOTE vote request: s2<-s1#0:OK-t1. Peer's state: s1@group-013C6D6F97E1:t1, leader=null, voted=s1, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,465 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-013C6D6F97E1: receive requestVote(ELECTION, s0, group-013C6D6F97E1, 1, (t:0, i:0))
2023-01-06 13:31:09,466 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-013C6D6F97E1-CANDIDATE: reject ELECTION from s0: already has voted for s1 at current term 1
2023-01-06 13:31:09,466 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-013C6D6F97E1 replies to ELECTION vote request: s0<-s1#0:FAIL-t1. Peer's state: s1@group-013C6D6F97E1:t1, leader=null, voted=s1, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,468 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-013C6D6F97E1-LeaderElection2: PRE_VOTE DISCOVERED_A_NEW_TERM (term=1) received 1 response(s) and 0 exception(s):
2023-01-06 13:31:09,468 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s1#0:OK-t1
2023-01-06 13:31:09,468 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-013C6D6F97E1-LeaderElection2 PRE_VOTE round 2: result DISCOVERED_A_NEW_TERM (term=1)
2023-01-06 13:31:09,469 [s2@group-013C6D6F97E1-LeaderElection2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-013C6D6F97E1: changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM (term=1)
2023-01-06 13:31:09,469 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-013C6D6F97E1-LeaderElection2
2023-01-06 13:31:09,469 [s2@group-013C6D6F97E1-LeaderElection2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:09,470 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-013C6D6F97E1: receive requestVote(ELECTION, s0, group-013C6D6F97E1, 1, (t:0, i:0))
2023-01-06 13:31:09,476 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-013C6D6F97E1-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,476 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-013C6D6F97E1: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-01-06 13:31:09,476 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:09,476 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:09,477 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-013C6D6F97E1: receive requestVote(ELECTION, s1, group-013C6D6F97E1, 1, (t:0, i:0))
2023-01-06 13:31:09,476 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-013C6D6F97E1: receive requestVote(ELECTION, s1, group-013C6D6F97E1, 1, (t:0, i:0))
2023-01-06 13:31:09,477 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-013C6D6F97E1-CANDIDATE: reject ELECTION from s1: already has voted for s0 at current term 1
2023-01-06 13:31:09,477 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-013C6D6F97E1 replies to ELECTION vote request: s1<-s0#0:FAIL-t1. Peer's state: s0@group-013C6D6F97E1:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,476 [s2@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,477 [s2@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,470 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s2, group-013C6D6F97E1, 0, (t:0, i:0))
2023-01-06 13:31:09,480 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-013C6D6F97E1-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:09,480 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-013C6D6F97E1 replies to PRE_VOTE vote request: s2<-s0#0:OK-t1. Peer's state: s0@group-013C6D6F97E1:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,477 [s2@group-013C6D6F97E1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-013C6D6F97E1-FollowerState was interrupted
2023-01-06 13:31:09,481 [s2@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,483 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-013C6D6F97E1 replies to ELECTION vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-013C6D6F97E1:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,486 [s2@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,486 [grpc-default-executor-7] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-013C6D6F97E1-FOLLOWER: reject ELECTION from s1: already has voted for s0 at current term 1
2023-01-06 13:31:09,490 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-013C6D6F97E1 replies to ELECTION vote request: s1<-s2#0:FAIL-t1. Peer's state: s2@group-013C6D6F97E1:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,492 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-013C6D6F97E1-LeaderElection1: ELECTION PASSED received 2 response(s) and 0 exception(s):
2023-01-06 13:31:09,492 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:FAIL-t1
2023-01-06 13:31:09,492 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s0<-s2#0:OK-t1
2023-01-06 13:31:09,492 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-013C6D6F97E1-LeaderElection1 ELECTION round 0: result PASSED
2023-01-06 13:31:09,492 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-013C6D6F97E1-LeaderElection1
2023-01-06 13:31:09,492 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-013C6D6F97E1: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:09,492 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-013C6D6F97E1: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 1287ms
2023-01-06 13:31:09,494 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-013C6D6F97E1-LeaderElection3: ELECTION REJECTED received 2 response(s) and 0 exception(s):
2023-01-06 13:31:09,494 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:FAIL-t1
2023-01-06 13:31:09,495 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s1<-s2#0:FAIL-t1
2023-01-06 13:31:09,495 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-013C6D6F97E1-LeaderElection3 ELECTION round 0: result REJECTED
2023-01-06 13:31:09,495 [s1@group-013C6D6F97E1-LeaderElection3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-013C6D6F97E1: changes role from CANDIDATE to FOLLOWER at term 1 for REJECTED
2023-01-06 13:31:09,495 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-013C6D6F97E1-LeaderElection3
2023-01-06 13:31:09,495 [s1@group-013C6D6F97E1-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:09,502 [s1@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:09,502 [s1@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:09,503 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:09,507 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:09,508 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:09,512 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:09,516 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:09,517 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:09,530 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:09,533 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:09,544 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:09,545 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:09,545 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:09,549 [s0@group-013C6D6F97E1-LeaderElection1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:09,550 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:09,550 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:09,550 [s0@group-013C6D6F97E1-LeaderElection1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:09,550 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:09,559 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:09,559 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:09,559 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:09,561 [s0@group-013C6D6F97E1-LeaderElection1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:09,563 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:09,563 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:09,563 [s0@group-013C6D6F97E1-LeaderElection1] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:09,563 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:09,564 [s0@group-013C6D6F97E1-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-013C6D6F97E1-LeaderStateImpl
2023-01-06 13:31:09,581 [s0@group-013C6D6F97E1-LeaderElection1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-013C6D6F97E1-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:09,625 [s0@group-013C6D6F97E1-LeaderElection1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-013C6D6F97E1: set configuration 0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,648 [s2@group-013C6D6F97E1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-013C6D6F97E1-FollowerState: change to CANDIDATE, lastRpcElapsedTime:165570551ns, electionTimeout:158ms
2023-01-06 13:31:09,648 [s2@group-013C6D6F97E1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:09,648 [s2@group-013C6D6F97E1-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-013C6D6F97E1: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-01-06 13:31:09,648 [s2@group-013C6D6F97E1-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:09,648 [s2@group-013C6D6F97E1-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-013C6D6F97E1-LeaderElection4
2023-01-06 13:31:09,657 [s2@group-013C6D6F97E1-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-013C6D6F97E1-LeaderElection4 PRE_VOTE round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,664 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-013C6D6F97E1: change Leader from null to s0 at term 1 for appendEntries, leader elected after 1460ms
2023-01-06 13:31:09,667 [s2-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-013C6D6F97E1: changes role from CANDIDATE to FOLLOWER at term 1 for appendEntries
2023-01-06 13:31:09,667 [s2-server-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-013C6D6F97E1-LeaderElection4
2023-01-06 13:31:09,667 [s2-server-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:09,670 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-013C6D6F97E1: change Leader from null to s0 at term 1 for appendEntries, leader elected after 1465ms
2023-01-06 13:31:09,682 [s2@group-013C6D6F97E1-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-013C6D6F97E1-LeaderElection4: PRE_VOTE REJECTED received 0 response(s) and 0 exception(s):
2023-01-06 13:31:09,683 [s2@group-013C6D6F97E1-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-013C6D6F97E1-LeaderElection4 PRE_VOTE round 0: result REJECTED
2023-01-06 13:31:09,701 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-013C6D6F97E1: set configuration 0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,701 [s2-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-013C6D6F97E1-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:09,702 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s2, group-013C6D6F97E1, 1, (t:0, i:0))
2023-01-06 13:31:09,702 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-013C6D6F97E1-LEADER: reject PRE_VOTE from s2: this server is the leader and still has leadership
2023-01-06 13:31:09,703 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-013C6D6F97E1 replies to PRE_VOTE vote request: s2<-s0#0:FAIL-t1. Peer's state: s0@group-013C6D6F97E1:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,703 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-013C6D6F97E1: receive requestVote(PRE_VOTE, s2, group-013C6D6F97E1, 1, (t:0, i:0))
2023-01-06 13:31:09,705 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-013C6D6F97E1: set configuration 0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,705 [s1-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-013C6D6F97E1-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:09,707 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-013C6D6F97E1-FOLLOWER: reject PRE_VOTE from s2: this server is a follower and still has a valid leader s0
2023-01-06 13:31:09,707 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-013C6D6F97E1 replies to PRE_VOTE vote request: s2<-s1#0:FAIL-t1. Peer's state: s1@group-013C6D6F97E1:t1, leader=s0, voted=s1, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c-1, conf=0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:09,775 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #3/100: java.lang.IllegalStateException: Leader: s0@group-013C6D6F97E1 not ready, sleep 450ms and then retry.
java.lang.IllegalStateException: Leader: s0@group-013C6D6F97E1 not ready
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:114)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:308)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:219)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:09,792 [s2@group-013C6D6F97E1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-013C6D6F97E1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s2/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/current/log_inprogress_0
2023-01-06 13:31:09,793 [s0@group-013C6D6F97E1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-013C6D6F97E1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s0/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/current/log_inprogress_0
2023-01-06 13:31:09,795 [s1@group-013C6D6F97E1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-013C6D6F97E1-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc1ccee48a/s1/cc7e9b62-8912-4ab2-aa78-013c6d6f97e1/current/log_inprogress_0
2023-01-06 13:31:10,227 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-013C6D6F97E1:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-013C6D6F97E1:t1, leader=s0, voted=s1, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-013C6D6F97E1:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:10,255 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:10,256 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:10,327 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-F578A33D4331->s0: receive RaftClientReply:client-F578A33D4331->s0@group-013C6D6F97E1, cid=0, SUCCESS, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2023-01-06 13:31:10,354 [s0@group-013C6D6F97E1-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 1@client-F578A33D4331
2023-01-06 13:31:10,358 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-F578A33D4331->s0: receive RaftClientReply:client-F578A33D4331->s0@group-013C6D6F97E1, cid=1, SUCCESS, logIndex=1, commits[s0:c1, s1:c0, s2:c0]
2023-01-06 13:31:10,362 [s2@group-013C6D6F97E1-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 1@client-F578A33D4331
2023-01-06 13:31:10,363 [s1@group-013C6D6F97E1-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 1@client-F578A33D4331
2023-01-06 13:31:10,382 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:10,382 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:10,382 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:10,382 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:10,382 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:10,382 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-013C6D6F97E1:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-013C6D6F97E1:t1, leader=s0, voted=s1, raftlog=Memoized:s1@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-013C6D6F97E1:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-013C6D6F97E1-SegmentedRaftLog:OPENED:c1, conf=0: peers:[s0|rpc:localhost:38239|admin:localhost:40631|client:localhost:39857|dataStream:localhost:43249|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:33451|admin:localhost:44731|client:localhost:43037|dataStream:localhost:43147|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:38795|admin:localhost:34435|client:localhost:45091|dataStream:localhost:44871|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:10,384 [MiniRaftCluster-1] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2023-01-06 13:31:10,385 [MiniRaftCluster-2] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2023-01-06 13:31:10,390 [MiniRaftCluster-3] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2023-01-06 13:31:10,388 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:10,388 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-013C6D6F97E1: shutdown
2023-01-06 13:31:10,391 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-013C6D6F97E1,id=s0
2023-01-06 13:31:10,391 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-013C6D6F97E1-LeaderStateImpl
2023-01-06 13:31:10,392 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-013C6D6F97E1-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:10,391 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:10,391 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-013C6D6F97E1: shutdown
2023-01-06 13:31:10,398 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-013C6D6F97E1,id=s1
2023-01-06 13:31:10,398 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:10,398 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-013C6D6F97E1-StateMachineUpdater: set stopIndex = 1
2023-01-06 13:31:10,398 [s1@group-013C6D6F97E1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-013C6D6F97E1-FollowerState was interrupted
2023-01-06 13:31:10,394 [s0@group-013C6D6F97E1->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-013C6D6F97E1->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:10,394 [s0@group-013C6D6F97E1->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-013C6D6F97E1->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:10,400 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-013C6D6F97E1: shutdown
2023-01-06 13:31:10,404 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-013C6D6F97E1,id=s2
2023-01-06 13:31:10,405 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-013C6D6F97E1-FollowerState
2023-01-06 13:31:10,405 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-013C6D6F97E1-StateMachineUpdater: set stopIndex = 1
2023-01-06 13:31:10,406 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-013C6D6F97E1: applyIndex: 1
2023-01-06 13:31:10,407 [s2@group-013C6D6F97E1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s2@group-013C6D6F97E1-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:10,408 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#20-t1,previous=(t:1, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:1, i:2), METADATAENTRY(c:1)
2023-01-06 13:31:10,408 [s2@group-013C6D6F97E1-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-013C6D6F97E1-FollowerState was interrupted
2023-01-06 13:31:10,399 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-013C6D6F97E1: applyIndex: 1
2023-01-06 13:31:10,409 [s1@group-013C6D6F97E1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s1@group-013C6D6F97E1-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:10,410 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#18-t1,previous=(t:1, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:1, i:2), METADATAENTRY(c:1)
2023-01-06 13:31:10,404 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-013C6D6F97E1-StateMachineUpdater: set stopIndex = 2
2023-01-06 13:31:10,412 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-013C6D6F97E1: applyIndex: 2
2023-01-06 13:31:10,412 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-01-06 13:31:10,410 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-013C6D6F97E1->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:10,413 [grpc-default-executor-2] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(136)) - s0@group-013C6D6F97E1->s1-GrpcLogAppender: Failed to getClient for s1
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:120)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:57)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:414)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:10,411 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-013C6D6F97E1->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:10,415 [grpc-default-executor-8] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-013C6D6F97E1->s2: nextIndex: updateUnconditionally 3 -> 2
2023-01-06 13:31:10,417 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:10,417 [s0@group-013C6D6F97E1-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s0@group-013C6D6F97E1-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:10,417 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s1@group-013C6D6F97E1-SegmentedRaftLogWorker close()
2023-01-06 13:31:10,418 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s2@group-013C6D6F97E1-SegmentedRaftLogWorker close()
2023-01-06 13:31:10,424 [MiniRaftCluster-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-01-06 13:31:10,425 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-01-06 13:31:10,426 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:10,426 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:10,428 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s0@group-013C6D6F97E1-SegmentedRaftLogWorker close()
2023-01-06 13:31:10,430 [MiniRaftCluster-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-01-06 13:31:10,431 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:10,431 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:10,431 [MiniRaftCluster-1] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:10,432 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2023-01-06 13:31:10,432 [MiniRaftCluster-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-01-06 13:31:10,435 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:10,435 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:10,437 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:10,437 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:10,437 [MiniRaftCluster-2] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:10,437 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2023-01-06 13:31:10,438 [MiniRaftCluster-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-01-06 13:31:10,438 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:10,438 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:10,439 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:10,439 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:10,442 [MiniRaftCluster-3] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:10,443 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2023-01-06 13:31:10,444 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:10,455 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:10,461 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:10,461 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:10,469 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/server.pem: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/server.pem
2023-01-06 13:31:10,770 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/server.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/server.crt
2023-01-06 13:31:10,927 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/ca.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/ca.crt
2023-01-06 13:31:10,935 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/client.pem: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/client.pem
2023-01-06 13:31:10,937 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/client.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/client.crt
2023-01-06 13:31:10,989 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/ca.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/ca.crt
2023-01-06 13:31:10,996 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-6E26527BDBA6:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:10,997 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:10,997 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:10,997 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:10,997 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:10,997 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:10,997 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:10,997 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s3, group-6E26527BDBA6:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:10,997 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3
2023-01-06 13:31:10,997 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3 does not exist.
2023-01-06 13:31:10,997 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3
2023-01-06 13:31:10,998 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:10,998 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:10,998 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 45997 (custom)
2023-01-06 13:31:10,998 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:10,998 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37029 (custom)
2023-01-06 13:31:10,998 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:10,998 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35085 (custom)
2023-01-06 13:31:10,999 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:10,999 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:10,999 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:10,999 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:10,999 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:10,999 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:10,999 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:11,141 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:11,141 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:11,141 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:11,141 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:11,141 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:11,141 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3] (custom)
2023-01-06 13:31:11,142 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s3: addNew group-6E26527BDBA6:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER] returns group-6E26527BDBA6:java.util.concurrent.CompletableFuture@1f659694[Not completed]
2023-01-06 13:31:11,142 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s4, group-6E26527BDBA6:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:11,142 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4
2023-01-06 13:31:11,142 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4 does not exist.
2023-01-06 13:31:11,142 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4
2023-01-06 13:31:11,143 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:11,143 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:11,143 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 41629 (custom)
2023-01-06 13:31:11,143 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:11,143 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 36005 (custom)
2023-01-06 13:31:11,143 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:11,143 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35397 (custom)
2023-01-06 13:31:11,144 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,144 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:11,144 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,144 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:11,144 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:11,144 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:11,144 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:11,147 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:11,147 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:11,147 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:11,147 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:11,148 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:11,148 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4] (custom)
2023-01-06 13:31:11,147 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:11,148 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:11,148 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:11,148 [pool-6-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s3: new RaftServerImpl for group-6E26527BDBA6:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:11,148 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:11,148 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:11,148 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:11,148 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:11,148 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:11,149 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:11,149 [pool-6-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s3@group-6E26527BDBA6: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:11,149 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:11,149 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:11,149 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:11,149 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:11,149 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:11,151 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:11,151 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:11,152 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:11,152 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:11,152 [pool-6-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:11,156 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s4: addNew group-6E26527BDBA6:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER] returns group-6E26527BDBA6:java.util.concurrent.CompletableFuture@3fa4623b[Not completed]
2023-01-06 13:31:11,156 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s5, group-6E26527BDBA6:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:11,156 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5
2023-01-06 13:31:11,157 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5 does not exist.
2023-01-06 13:31:11,157 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5
2023-01-06 13:31:11,157 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:11,157 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:11,157 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 36017 (custom)
2023-01-06 13:31:11,157 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:11,157 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 45217 (custom)
2023-01-06 13:31:11,157 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:11,158 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 36697 (custom)
2023-01-06 13:31:11,158 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,158 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:11,158 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,158 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:11,158 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:11,158 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:11,158 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:11,161 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:11,157 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:11,161 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:11,161 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:11,161 [pool-7-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s4: new RaftServerImpl for group-6E26527BDBA6:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:11,161 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:11,162 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:11,161 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:11,162 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:11,162 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:11,163 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:11,163 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:11,163 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:11,163 [pool-7-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s4@group-6E26527BDBA6: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:11,163 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:11,163 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:11,163 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:11,163 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:11,163 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:11,165 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:11,169 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:11,162 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:11,170 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:11,170 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:11,170 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5] (custom)
2023-01-06 13:31:11,170 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:11,170 [pool-7-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:11,171 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s5: addNew group-6E26527BDBA6:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER] returns group-6E26527BDBA6:java.util.concurrent.CompletableFuture@33e9fa01[Not completed]
2023-01-06 13:31:11,172 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:11,172 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:11,172 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:11,172 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3] (custom)
2023-01-06 13:31:11,172 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:11,172 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3/11543314-e5ad-4d42-bcf3-6e26527bdba6 does not exist. Creating ...
2023-01-06 13:31:11,172 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:11,172 [pool-8-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s5: new RaftServerImpl for group-6E26527BDBA6:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:11,173 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:11,173 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3/11543314-e5ad-4d42-bcf3-6e26527bdba6
2023-01-06 13:31:11,173 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:11,173 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:11,173 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:11,173 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:11,173 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:11,173 [pool-8-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s5@group-6E26527BDBA6: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:11,174 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:11,174 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:11,174 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:11,174 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:11,174 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:11,176 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:11,176 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:11,176 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:11,176 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:11,176 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:11,177 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3/11543314-e5ad-4d42-bcf3-6e26527bdba6/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:11,178 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3/11543314-e5ad-4d42-bcf3-6e26527bdba6/current
2023-01-06 13:31:11,178 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3/11543314-e5ad-4d42-bcf3-6e26527bdba6/sm
2023-01-06 13:31:11,180 [s3-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3/11543314-e5ad-4d42-bcf3-6e26527bdba6 has been successfully formatted.
2023-01-06 13:31:11,180 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:11,180 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:11,180 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:11,181 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:11,181 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:11,181 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:11,181 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s3@group-6E26527BDBA6-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3/11543314-e5ad-4d42-bcf3-6e26527bdba6
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:11,182 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:11,183 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:11,183 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:11,183 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:11,185 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:11,185 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:11,185 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-6E26527BDBA6-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:11,185 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-6E26527BDBA6-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:11,186 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s3@group-6E26527BDBA6: start as a follower, conf=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,186 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s3@group-6E26527BDBA6: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:11,186 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:11,187 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6E26527BDBA6,id=s3
2023-01-06 13:31:11,187 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:11,187 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:11,187 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:11,187 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s3: start RPC server
2023-01-06 13:31:11,190 [s3@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:11,190 [s3@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:11,191 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 37029
2023-01-06 13:31:11,193 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 35085
2023-01-06 13:31:11,194 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 45997
2023-01-06 13:31:11,194 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:11,194 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s3: Started
2023-01-06 13:31:11,194 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:11,195 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4] (custom)
2023-01-06 13:31:11,195 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4/11543314-e5ad-4d42-bcf3-6e26527bdba6 does not exist. Creating ...
2023-01-06 13:31:11,196 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4/11543314-e5ad-4d42-bcf3-6e26527bdba6
2023-01-06 13:31:11,198 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4/11543314-e5ad-4d42-bcf3-6e26527bdba6/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:11,198 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4/11543314-e5ad-4d42-bcf3-6e26527bdba6/current
2023-01-06 13:31:11,199 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4/11543314-e5ad-4d42-bcf3-6e26527bdba6/sm
2023-01-06 13:31:11,200 [s4-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4/11543314-e5ad-4d42-bcf3-6e26527bdba6 has been successfully formatted.
2023-01-06 13:31:11,200 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:11,201 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:11,201 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:11,201 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:11,201 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:11,201 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:11,201 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:11,202 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:11,202 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:11,203 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:11,203 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s4@group-6E26527BDBA6-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4/11543314-e5ad-4d42-bcf3-6e26527bdba6
2023-01-06 13:31:11,203 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:11,203 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:11,203 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:11,203 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:11,203 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:11,203 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:11,203 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:11,203 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:11,204 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:11,204 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:11,204 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:11,205 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:11,205 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:11,205 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-6E26527BDBA6-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:11,205 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-6E26527BDBA6-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:11,205 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s4@group-6E26527BDBA6: start as a follower, conf=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,205 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s4@group-6E26527BDBA6: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:11,205 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:11,206 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6E26527BDBA6,id=s4
2023-01-06 13:31:11,206 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:11,206 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:11,206 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:11,206 [s4@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:11,206 [s4@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:11,207 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s4: start RPC server
2023-01-06 13:31:11,207 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 36005
2023-01-06 13:31:11,208 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 35397
2023-01-06 13:31:11,209 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 41629
2023-01-06 13:31:11,209 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s4: Started
2023-01-06 13:31:11,209 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:11,209 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:11,209 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5] (custom)
2023-01-06 13:31:11,210 [s5-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5/11543314-e5ad-4d42-bcf3-6e26527bdba6 does not exist. Creating ...
2023-01-06 13:31:11,210 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5/11543314-e5ad-4d42-bcf3-6e26527bdba6
2023-01-06 13:31:11,211 [s5-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5/11543314-e5ad-4d42-bcf3-6e26527bdba6/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:11,211 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5/11543314-e5ad-4d42-bcf3-6e26527bdba6/current
2023-01-06 13:31:11,211 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5/11543314-e5ad-4d42-bcf3-6e26527bdba6/sm
2023-01-06 13:31:11,213 [s5-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5/11543314-e5ad-4d42-bcf3-6e26527bdba6 has been successfully formatted.
2023-01-06 13:31:11,214 [s5-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:11,214 [s5-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:11,214 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:11,214 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:11,214 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:11,214 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:11,214 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:11,215 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:11,215 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:11,215 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:11,215 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s5@group-6E26527BDBA6-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5/11543314-e5ad-4d42-bcf3-6e26527bdba6
2023-01-06 13:31:11,215 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:11,216 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:11,216 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:11,216 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:11,216 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:11,216 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:11,216 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:11,216 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:11,216 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:11,216 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:11,218 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:11,218 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:11,218 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:11,218 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s5@group-6E26527BDBA6-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:11,218 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s5@group-6E26527BDBA6-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:11,226 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s5@group-6E26527BDBA6: start as a follower, conf=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,226 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s5@group-6E26527BDBA6: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:11,226 [s5-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:11,230 [s5-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-6E26527BDBA6,id=s5
2023-01-06 13:31:11,230 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:11,230 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:11,230 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:11,231 [s5@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:11,231 [s5@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:11,234 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s5: start RPC server
2023-01-06 13:31:11,238 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 45217
2023-01-06 13:31:11,239 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 36697
2023-01-06 13:31:11,240 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 36017
2023-01-06 13:31:11,242 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s5: Started
2023-01-06 13:31:11,243 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,243 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,417 [s4@group-6E26527BDBA6-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-6E26527BDBA6-FollowerState: change to CANDIDATE, lastRpcElapsedTime:211373537ns, electionTimeout:210ms
2023-01-06 13:31:11,417 [s4@group-6E26527BDBA6-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:11,417 [s4@group-6E26527BDBA6-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s4@group-6E26527BDBA6: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:11,418 [s4@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:11,418 [s4@group-6E26527BDBA6-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-6E26527BDBA6-LeaderElection5
2023-01-06 13:31:11,426 [s4@group-6E26527BDBA6-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s4@group-6E26527BDBA6-LeaderElection5 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,427 [s4@group-6E26527BDBA6-LeaderElection5-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s3
2023-01-06 13:31:11,427 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:11,428 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:11,431 [s3@group-6E26527BDBA6-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s3@group-6E26527BDBA6-FollowerState: change to CANDIDATE, lastRpcElapsedTime:244959894ns, electionTimeout:240ms
2023-01-06 13:31:11,431 [s3@group-6E26527BDBA6-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:11,431 [s3@group-6E26527BDBA6-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s3@group-6E26527BDBA6: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:11,432 [s4@group-6E26527BDBA6-LeaderElection5-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s5
2023-01-06 13:31:11,438 [s3@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:11,438 [s3@group-6E26527BDBA6-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-6E26527BDBA6-LeaderElection6
2023-01-06 13:31:11,440 [s5@group-6E26527BDBA6-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s5@group-6E26527BDBA6-FollowerState: change to CANDIDATE, lastRpcElapsedTime:214228977ns, electionTimeout:209ms
2023-01-06 13:31:11,440 [s5@group-6E26527BDBA6-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s5: shutdown s5@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:11,440 [s5@group-6E26527BDBA6-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s5@group-6E26527BDBA6: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:11,442 [s5@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:11,442 [s5@group-6E26527BDBA6-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-6E26527BDBA6-LeaderElection7
2023-01-06 13:31:11,454 [s5@group-6E26527BDBA6-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s5@group-6E26527BDBA6-LeaderElection7 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,458 [s5@group-6E26527BDBA6-LeaderElection7-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s3
2023-01-06 13:31:11,460 [s5@group-6E26527BDBA6-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:11,460 [s5@group-6E26527BDBA6-LeaderElection7] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:11,465 [s3@group-6E26527BDBA6-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s3@group-6E26527BDBA6-LeaderElection6 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,474 [s3@group-6E26527BDBA6-LeaderElection6-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s4
2023-01-06 13:31:11,474 [s3@group-6E26527BDBA6-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:11,475 [s3@group-6E26527BDBA6-LeaderElection6] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:11,475 [s5@group-6E26527BDBA6-LeaderElection7-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s4
2023-01-06 13:31:11,474 [s3@group-6E26527BDBA6-LeaderElection6-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s5
2023-01-06 13:31:11,515 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E156E6C53759->s3: receive RaftClientReply:client-E156E6C53759->s3@group-6E26527BDBA6, cid=2, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-6E26527BDBA6 is not the leader, logIndex=0, commits[s3:c-1]
2023-01-06 13:31:11,520 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s5@group-6E26527BDBA6: receive requestVote(PRE_VOTE, s4, group-6E26527BDBA6, 0, (t:0, i:0))
2023-01-06 13:31:11,521 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s5@group-6E26527BDBA6-CANDIDATE: accept PRE_VOTE from s4: our priority 0 <= candidate's priority 0
2023-01-06 13:31:11,521 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s5@group-6E26527BDBA6 replies to PRE_VOTE vote request: s4<-s5#0:OK-t0. Peer's state: s5@group-6E26527BDBA6:t0, leader=null, voted=, raftlog=Memoized:s5@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,551 [s4@group-6E26527BDBA6-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-6E26527BDBA6-LeaderElection5: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:11,551 [s4@group-6E26527BDBA6-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s4<-s5#0:OK-t0
2023-01-06 13:31:11,551 [s4@group-6E26527BDBA6-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s4@group-6E26527BDBA6-LeaderElection5 PRE_VOTE round 0: result PASSED
2023-01-06 13:31:11,555 [s4@group-6E26527BDBA6-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s4@group-6E26527BDBA6-LeaderElection5 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,562 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:11,562 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:11,587 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s5@group-6E26527BDBA6: receive requestVote(ELECTION, s4, group-6E26527BDBA6, 1, (t:0, i:0))
2023-01-06 13:31:11,587 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s5@group-6E26527BDBA6-CANDIDATE: accept ELECTION from s4: our priority 0 <= candidate's priority 0
2023-01-06 13:31:11,588 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s5@group-6E26527BDBA6: changes role from CANDIDATE to FOLLOWER at term 1 for candidate:s4
2023-01-06 13:31:11,588 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s5: shutdown s5@group-6E26527BDBA6-LeaderElection7
2023-01-06 13:31:11,588 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:11,594 [s5@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:11,594 [s5@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:11,599 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s5@group-6E26527BDBA6 replies to ELECTION vote request: s4<-s5#0:OK-t1. Peer's state: s5@group-6E26527BDBA6:t1, leader=null, voted=s4, raftlog=Memoized:s5@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,602 [s4@group-6E26527BDBA6-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-6E26527BDBA6-LeaderElection5: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:11,602 [s4@group-6E26527BDBA6-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s4<-s5#0:OK-t1
2023-01-06 13:31:11,602 [s4@group-6E26527BDBA6-LeaderElection5] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s4@group-6E26527BDBA6-LeaderElection5 ELECTION round 0: result PASSED
2023-01-06 13:31:11,602 [s4@group-6E26527BDBA6-LeaderElection5] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s4: shutdown s4@group-6E26527BDBA6-LeaderElection5
2023-01-06 13:31:11,602 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s4@group-6E26527BDBA6: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:11,602 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s4@group-6E26527BDBA6: change Leader from null to s4 at term 1 for becomeLeader, leader elected after 439ms
2023-01-06 13:31:11,602 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:11,602 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-01-06 13:31:11,602 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 1MB (=1048576) (custom)
2023-01-06 13:31:11,603 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:11,603 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:11,603 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:11,603 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-01-06 13:31:11,603 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:11,603 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:11,603 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:11,604 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:11,604 [s4@group-6E26527BDBA6-LeaderElection5] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:11,604 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:11,604 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:11,604 [s4@group-6E26527BDBA6-LeaderElection5] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:11,604 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:11,604 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:11,604 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:11,605 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:11,605 [s4@group-6E26527BDBA6-LeaderElection5] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:11,605 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:11,605 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:11,605 [s4@group-6E26527BDBA6-LeaderElection5] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:11,605 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:11,605 [s4@group-6E26527BDBA6-LeaderElection5] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-6E26527BDBA6-LeaderStateImpl
2023-01-06 13:31:11,605 [s4@group-6E26527BDBA6-LeaderElection5] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s4@group-6E26527BDBA6-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:11,618 [s4@group-6E26527BDBA6-LeaderElection5] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s4@group-6E26527BDBA6: set configuration 0: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,620 [s4@group-6E26527BDBA6-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s4@group-6E26527BDBA6-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s4/11543314-e5ad-4d42-bcf3-6e26527bdba6/current/log_inprogress_0
2023-01-06 13:31:11,625 [s5-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s5@group-6E26527BDBA6: change Leader from null to s4 at term 1 for appendEntries, leader elected after 451ms
2023-01-06 13:31:11,635 [s5-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s5@group-6E26527BDBA6: set configuration 0: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,635 [s5-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s5@group-6E26527BDBA6-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:11,648 [s5@group-6E26527BDBA6-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s5@group-6E26527BDBA6-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s5/11543314-e5ad-4d42-bcf3-6e26527bdba6/current/log_inprogress_0
2023-01-06 13:31:11,658 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s4@group-6E26527BDBA6: receive requestVote(PRE_VOTE, s3, group-6E26527BDBA6, 0, (t:0, i:0))
2023-01-06 13:31:11,658 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s4@group-6E26527BDBA6-LEADER: reject PRE_VOTE from s3: this server is the leader and still has leadership
2023-01-06 13:31:11,658 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s4@group-6E26527BDBA6 replies to PRE_VOTE vote request: s3<-s4#0:FAIL-t1. Peer's state: s4@group-6E26527BDBA6:t1, leader=s4, voted=s4, raftlog=Memoized:s4@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,678 [s3@group-6E26527BDBA6-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-6E26527BDBA6-LeaderElection6: PRE_VOTE DISCOVERED_A_NEW_TERM (term=1) received 1 response(s) and 0 exception(s):
2023-01-06 13:31:11,678 [s3@group-6E26527BDBA6-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s3<-s4#0:FAIL-t1
2023-01-06 13:31:11,678 [s3@group-6E26527BDBA6-LeaderElection6] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s3@group-6E26527BDBA6-LeaderElection6 PRE_VOTE round 0: result DISCOVERED_A_NEW_TERM (term=1)
2023-01-06 13:31:11,678 [s3@group-6E26527BDBA6-LeaderElection6] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s3@group-6E26527BDBA6: changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM (term=1)
2023-01-06 13:31:11,678 [s3@group-6E26527BDBA6-LeaderElection6] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s3: shutdown s3@group-6E26527BDBA6-LeaderElection6
2023-01-06 13:31:11,679 [s3@group-6E26527BDBA6-LeaderElection6] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:11,681 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s3@group-6E26527BDBA6: receive requestVote(PRE_VOTE, s4, group-6E26527BDBA6, 0, (t:0, i:0))
2023-01-06 13:31:11,687 [s3@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:11,687 [s3@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:11,689 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s3@group-6E26527BDBA6: receive requestVote(ELECTION, s4, group-6E26527BDBA6, 1, (t:0, i:0))
2023-01-06 13:31:11,690 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s4@group-6E26527BDBA6: receive requestVote(PRE_VOTE, s5, group-6E26527BDBA6, 0, (t:0, i:0))
2023-01-06 13:31:11,690 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s4@group-6E26527BDBA6-LEADER: reject PRE_VOTE from s5: this server is the leader and still has leadership
2023-01-06 13:31:11,690 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s4@group-6E26527BDBA6 replies to PRE_VOTE vote request: s5<-s4#0:FAIL-t1. Peer's state: s4@group-6E26527BDBA6:t1, leader=s4, voted=s4, raftlog=Memoized:s4@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,691 [grpc-default-executor-7] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-6E26527BDBA6-FOLLOWER: accept ELECTION from s4: our priority 0 <= candidate's priority 0
2023-01-06 13:31:11,691 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s3@group-6E26527BDBA6: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s4
2023-01-06 13:31:11,691 [grpc-default-executor-7] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:11,691 [grpc-default-executor-7] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:11,691 [s3@group-6E26527BDBA6-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s3@group-6E26527BDBA6-FollowerState was interrupted
2023-01-06 13:31:11,702 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,702 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,714 [s3@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:11,714 [s3@group-6E26527BDBA6-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:11,715 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s3@group-6E26527BDBA6 replies to ELECTION vote request: s4<-s3#0:OK-t1. Peer's state: s3@group-6E26527BDBA6:t1, leader=null, voted=s4, raftlog=Memoized:s3@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,715 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s3@group-6E26527BDBA6: receive requestVote(PRE_VOTE, s5, group-6E26527BDBA6, 0, (t:0, i:0))
2023-01-06 13:31:11,715 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-6E26527BDBA6-FOLLOWER: accept PRE_VOTE from s4: our priority 0 <= candidate's priority 0
2023-01-06 13:31:11,715 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s3@group-6E26527BDBA6 replies to PRE_VOTE vote request: s4<-s3#0:OK-t1. Peer's state: s3@group-6E26527BDBA6:t1, leader=null, voted=s4, raftlog=Memoized:s3@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,716 [s5@group-6E26527BDBA6-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s5@group-6E26527BDBA6-LeaderElection7: PRE_VOTE DISCOVERED_A_NEW_TERM (term=1) received 1 response(s) and 0 exception(s):
2023-01-06 13:31:11,716 [s5@group-6E26527BDBA6-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s5<-s4#0:FAIL-t1
2023-01-06 13:31:11,716 [s5@group-6E26527BDBA6-LeaderElection7] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s5@group-6E26527BDBA6-LeaderElection7 PRE_VOTE round 0: result DISCOVERED_A_NEW_TERM (term=1)
2023-01-06 13:31:11,716 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-6E26527BDBA6-FOLLOWER: accept PRE_VOTE from s5: our priority 0 <= candidate's priority 0
2023-01-06 13:31:11,716 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s3@group-6E26527BDBA6 replies to PRE_VOTE vote request: s5<-s3#0:OK-t1. Peer's state: s3@group-6E26527BDBA6:t1, leader=null, voted=s4, raftlog=Memoized:s3@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,717 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s5@group-6E26527BDBA6: receive requestVote(PRE_VOTE, s3, group-6E26527BDBA6, 0, (t:0, i:0))
2023-01-06 13:31:11,718 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s5@group-6E26527BDBA6-FOLLOWER: reject PRE_VOTE from s3: this server is a follower and still has a valid leader s4
2023-01-06 13:31:11,718 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s5@group-6E26527BDBA6 replies to PRE_VOTE vote request: s3<-s5#0:FAIL-t1. Peer's state: s5@group-6E26527BDBA6:t1, leader=s4, voted=s4, raftlog=Memoized:s5@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,718 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s3@group-6E26527BDBA6: change Leader from null to s4 at term 1 for appendEntries, leader elected after 569ms
2023-01-06 13:31:11,738 [s3-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s3@group-6E26527BDBA6: set configuration 0: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:11,738 [s3-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s3@group-6E26527BDBA6-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:11,752 [s3@group-6E26527BDBA6-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s3@group-6E26527BDBA6-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc287b6727/s3/11543314-e5ad-4d42-bcf3-6e26527bdba6/current/log_inprogress_0
2023-01-06 13:31:11,786 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E156E6C53759->s5: receive RaftClientReply:client-E156E6C53759->s5@group-6E26527BDBA6, cid=2, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s5@group-6E26527BDBA6 is not the leader s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s5:c0, s3:c-1, s4:c0]
2023-01-06 13:31:11,789 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,790 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,825 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E156E6C53759->s4: receive RaftClientReply:client-E156E6C53759->s4@group-6E26527BDBA6, cid=2, SUCCESS, logIndex=0, commits[s4:c0, s3:c0, s5:c0]
2023-01-06 13:31:11,832 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 3@client-E156E6C53759
2023-01-06 13:31:11,836 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E156E6C53759->s4: receive RaftClientReply:client-E156E6C53759->s4@group-6E26527BDBA6, cid=3, SUCCESS, logIndex=1, commits[s4:c1, s3:c0, s5:c0]
2023-01-06 13:31:11,836 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 3@client-E156E6C53759
2023-01-06 13:31:11,837 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 3@client-E156E6C53759
2023-01-06 13:31:11,842 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block FLUSH_STATE_MACHINE_DATA
2023-01-06 13:31:11,843 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,843 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,848 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,848 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,856 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,856 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,858 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,858 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,866 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,872 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,882 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,882 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,887 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,887 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,897 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,897 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,907 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,907 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,911 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,911 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:11,922 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:11,922 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:12,099 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-13979617DB87->s4: receive RaftClientReply:client-13979617DB87->s4@group-6E26527BDBA6, cid=4, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,116 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6080BCC48CE9->s4: receive RaftClientReply:client-6080BCC48CE9->s4@group-6E26527BDBA6, cid=6, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,121 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-4B471FE03AC4->s4: receive RaftClientReply:client-4B471FE03AC4->s4@group-6E26527BDBA6, cid=12, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,122 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-7C82C68578F0->s4: receive RaftClientReply:client-7C82C68578F0->s4@group-6E26527BDBA6, cid=8, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,126 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2BD6A982F6B0->s4: receive RaftClientReply:client-2BD6A982F6B0->s4@group-6E26527BDBA6, cid=24, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,131 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-ABE6FE38B76F->s4: receive RaftClientReply:client-ABE6FE38B76F->s4@group-6E26527BDBA6, cid=20, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,155 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E4020142C208->s4: receive RaftClientReply:client-E4020142C208->s4@group-6E26527BDBA6, cid=16, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,167 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-84386EF56382->s4: receive RaftClientReply:client-84386EF56382->s4@group-6E26527BDBA6, cid=10, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,175 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-131D2B3C047C->s4: receive RaftClientReply:client-131D2B3C047C->s4@group-6E26527BDBA6, cid=18, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,187 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E5AB6FFA1AC0->s4: receive RaftClientReply:client-E5AB6FFA1AC0->s4@group-6E26527BDBA6, cid=14, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,197 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-0E710A42F610->s4: receive RaftClientReply:client-0E710A42F610->s4@group-6E26527BDBA6, cid=22, SUCCESS, logIndex=2, commits[s4:c2, s3:c2, s5:c2]
2023-01-06 13:31:12,225 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock FLUSH_STATE_MACHINE_DATA
2023-01-06 13:31:12,234 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 5@client-13979617DB87
2023-01-06 13:31:12,237 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 5@client-13979617DB87
2023-01-06 13:31:12,242 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 4, message 1 -> (t:1, i:4), STATEMACHINELOGENTRY, 9@client-7C82C68578F0
2023-01-06 13:31:12,243 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 5, message 3 -> (t:1, i:5), STATEMACHINELOGENTRY, 13@client-4B471FE03AC4
2023-01-06 13:31:12,243 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 6, message 0 -> (t:1, i:6), STATEMACHINELOGENTRY, 7@client-6080BCC48CE9
2023-01-06 13:31:12,243 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 7, message 9 -> (t:1, i:7), STATEMACHINELOGENTRY, 25@client-2BD6A982F6B0
2023-01-06 13:31:12,243 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 8, message 7 -> (t:1, i:8), STATEMACHINELOGENTRY, 21@client-ABE6FE38B76F
2023-01-06 13:31:12,244 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 17@client-E4020142C208
2023-01-06 13:31:12,244 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 10, message 2 -> (t:1, i:10), STATEMACHINELOGENTRY, 11@client-84386EF56382
2023-01-06 13:31:12,244 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 11, message 6 -> (t:1, i:11), STATEMACHINELOGENTRY, 19@client-131D2B3C047C
2023-01-06 13:31:12,244 [s4@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 12, message 4 -> (t:1, i:12), STATEMACHINELOGENTRY, 15@client-E5AB6FFA1AC0
2023-01-06 13:31:12,245 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 5@client-13979617DB87
2023-01-06 13:31:12,247 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 4, message 1 -> (t:1, i:4), STATEMACHINELOGENTRY, 9@client-7C82C68578F0
2023-01-06 13:31:12,247 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 5, message 3 -> (t:1, i:5), STATEMACHINELOGENTRY, 13@client-4B471FE03AC4
2023-01-06 13:31:12,247 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 6, message 0 -> (t:1, i:6), STATEMACHINELOGENTRY, 7@client-6080BCC48CE9
2023-01-06 13:31:12,248 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 7, message 9 -> (t:1, i:7), STATEMACHINELOGENTRY, 25@client-2BD6A982F6B0
2023-01-06 13:31:12,248 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 8, message 7 -> (t:1, i:8), STATEMACHINELOGENTRY, 21@client-ABE6FE38B76F
2023-01-06 13:31:12,248 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 17@client-E4020142C208
2023-01-06 13:31:12,248 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 10, message 2 -> (t:1, i:10), STATEMACHINELOGENTRY, 11@client-84386EF56382
2023-01-06 13:31:12,249 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 11, message 6 -> (t:1, i:11), STATEMACHINELOGENTRY, 19@client-131D2B3C047C
2023-01-06 13:31:12,249 [s5@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 12, message 4 -> (t:1, i:12), STATEMACHINELOGENTRY, 15@client-E5AB6FFA1AC0
2023-01-06 13:31:12,252 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-7C82C68578F0->s4: receive RaftClientReply:client-7C82C68578F0->s4@group-6E26527BDBA6, cid=9, SUCCESS, logIndex=4, commits[s4:c12, s3:c3, s5:c2]
2023-01-06 13:31:12,255 [grpc-default-executor-7] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=message 8
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s4@group-6E26527BDBA6: Failed to acquire a pending write request for RaftClientRequest:client-0E710A42F610->s4@group-6E26527BDBA6, cid=23, seq=2, RW, Message:6d6573736167652038
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s4@group-6E26527BDBA6: Failed to acquire a pending write request for RaftClientRequest:client-0E710A42F610->s4@group-6E26527BDBA6, cid=23, seq=2, RW, Message:6d6573736167652038
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:771)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:882)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:820)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:820)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:890)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:889)
		... 7 more
2023-01-06 13:31:12,256 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-84386EF56382->s4: receive RaftClientReply:client-84386EF56382->s4@group-6E26527BDBA6, cid=11, SUCCESS, logIndex=10, commits[s4:c12, s3:c3, s5:c2]
2023-01-06 13:31:12,257 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6080BCC48CE9->s4: receive RaftClientReply:client-6080BCC48CE9->s4@group-6E26527BDBA6, cid=7, SUCCESS, logIndex=6, commits[s4:c12, s3:c3, s5:c2]
2023-01-06 13:31:12,257 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-4B471FE03AC4->s4: receive RaftClientReply:client-4B471FE03AC4->s4@group-6E26527BDBA6, cid=13, SUCCESS, logIndex=5, commits[s4:c12, s3:c3, s5:c2]
2023-01-06 13:31:12,258 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-13979617DB87->s4: receive RaftClientReply:client-13979617DB87->s4@group-6E26527BDBA6, cid=5, SUCCESS, logIndex=3, commits[s4:c3, s3:c2, s5:c2]
2023-01-06 13:31:12,258 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E4020142C208->s4: receive RaftClientReply:client-E4020142C208->s4@group-6E26527BDBA6, cid=17, SUCCESS, logIndex=9, commits[s4:c12, s3:c3, s5:c2]
2023-01-06 13:31:12,259 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-ABE6FE38B76F->s4: receive RaftClientReply:client-ABE6FE38B76F->s4@group-6E26527BDBA6, cid=21, SUCCESS, logIndex=8, commits[s4:c12, s3:c3, s5:c2]
2023-01-06 13:31:12,259 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2BD6A982F6B0->s4: receive RaftClientReply:client-2BD6A982F6B0->s4@group-6E26527BDBA6, cid=25, SUCCESS, logIndex=7, commits[s4:c12, s3:c3, s5:c2]
2023-01-06 13:31:12,260 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 4, message 1 -> (t:1, i:4), STATEMACHINELOGENTRY, 9@client-7C82C68578F0
2023-01-06 13:31:12,260 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 5, message 3 -> (t:1, i:5), STATEMACHINELOGENTRY, 13@client-4B471FE03AC4
2023-01-06 13:31:12,260 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 6, message 0 -> (t:1, i:6), STATEMACHINELOGENTRY, 7@client-6080BCC48CE9
2023-01-06 13:31:12,260 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 7, message 9 -> (t:1, i:7), STATEMACHINELOGENTRY, 25@client-2BD6A982F6B0
2023-01-06 13:31:12,261 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 8, message 7 -> (t:1, i:8), STATEMACHINELOGENTRY, 21@client-ABE6FE38B76F
2023-01-06 13:31:12,261 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 17@client-E4020142C208
2023-01-06 13:31:12,261 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 10, message 2 -> (t:1, i:10), STATEMACHINELOGENTRY, 11@client-84386EF56382
2023-01-06 13:31:12,261 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:12,261 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:12,261 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 11, message 6 -> (t:1, i:11), STATEMACHINELOGENTRY, 19@client-131D2B3C047C
2023-01-06 13:31:12,262 [s3@group-6E26527BDBA6-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 12, message 4 -> (t:1, i:12), STATEMACHINELOGENTRY, 15@client-E5AB6FFA1AC0
2023-01-06 13:31:12,270 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-131D2B3C047C->s4: receive RaftClientReply:client-131D2B3C047C->s4@group-6E26527BDBA6, cid=19, SUCCESS, logIndex=11, commits[s4:c12, s3:c3, s5:c2]
2023-01-06 13:31:12,273 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-E5AB6FFA1AC0->s4: receive RaftClientReply:client-E5AB6FFA1AC0->s4@group-6E26527BDBA6, cid=15, SUCCESS, logIndex=12, commits[s4:c12, s3:c3, s5:c2]
2023-01-06 13:31:12,304 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-EFC6D8659672->s4: receive RaftClientReply:client-EFC6D8659672->s4@group-6E26527BDBA6, cid=26, SUCCESS, logIndex=14, commits[s4:c14, s3:c12, s5:c12]
2023-01-06 13:31:12,350 [grpc-default-executor-8] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=1025kb (=1049600)-message
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s4@group-6E26527BDBA6: Failed to acquire a pending write request for RaftClientRequest:client-EFC6D8659672->s4@group-6E26527BDBA6, cid=27, seq=2, RW, Message:3c73c3f4365822550a04...(size=1049600)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s4@group-6E26527BDBA6: Failed to acquire a pending write request for RaftClientRequest:client-EFC6D8659672->s4@group-6E26527BDBA6, cid=27, seq=2, RW, Message:3c73c3f4365822550a04...(size=1049600)
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:771)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:882)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:820)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:820)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:890)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:889)
		... 7 more
2023-01-06 13:31:12,632 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:12,632 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:12,632 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:12,632 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:12,632 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:12,633 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-6E26527BDBA6:t1, leader=s4, voted=s4, raftlog=Memoized:s3@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s4:  RUNNING    LEADER s4@group-6E26527BDBA6:t1, leader=s4, voted=s4, raftlog=Memoized:s4@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s5:  RUNNING  FOLLOWER s5@group-6E26527BDBA6:t1, leader=s4, voted=s4, raftlog=Memoized:s5@group-6E26527BDBA6-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s3|rpc:localhost:35085|admin:localhost:45997|client:localhost:37029|dataStream:localhost:43789|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:35397|admin:localhost:41629|client:localhost:36005|dataStream:localhost:42639|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:36697|admin:localhost:36017|client:localhost:45217|dataStream:localhost:44613|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:12,637 [MiniRaftCluster-4] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s3: close
2023-01-06 13:31:12,638 [MiniRaftCluster-5] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s4: close
2023-01-06 13:31:12,642 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:12,643 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s3@group-6E26527BDBA6: shutdown
2023-01-06 13:31:12,643 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6E26527BDBA6,id=s3
2023-01-06 13:31:12,643 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:12,643 [s3-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s3@group-6E26527BDBA6-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:12,643 [s3@group-6E26527BDBA6-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s3@group-6E26527BDBA6-FollowerState was interrupted
2023-01-06 13:31:12,646 [s3-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s3@group-6E26527BDBA6: applyIndex: 14
2023-01-06 13:31:12,646 [MiniRaftCluster-6] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s5: close
2023-01-06 13:31:12,646 [s3@group-6E26527BDBA6-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s3@group-6E26527BDBA6-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:12,647 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s4@group-6E26527BDBA6: shutdown
2023-01-06 13:31:12,647 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6E26527BDBA6,id=s4
2023-01-06 13:31:12,647 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s4: shutdown s4@group-6E26527BDBA6-LeaderStateImpl
2023-01-06 13:31:12,647 [s4-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s4@group-6E26527BDBA6-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:12,647 [s4@group-6E26527BDBA6->s5-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s4@group-6E26527BDBA6->s5-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:12,648 [s4@group-6E26527BDBA6->s3-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s4@group-6E26527BDBA6->s3-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:12,648 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:12,649 [MiniRaftCluster-4] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s4 Close channels
2023-01-06 13:31:12,648 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s5: Completed APPEND_ENTRIES, lastRequest: s4->s5#31-t1,previous=(t:1, i:13),leaderCommit=12,initializing? true,entries: size=1, first=(t:1, i:14), METADATAENTRY(c:12)
2023-01-06 13:31:12,648 [grpc-default-executor-10] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s3: Completed APPEND_ENTRIES, lastRequest: s4->s3#40-t1,previous=(t:1, i:13),leaderCommit=12,initializing? true,entries: size=1, first=(t:1, i:14), METADATAENTRY(c:12)
2023-01-06 13:31:12,652 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s4@group-6E26527BDBA6->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:12,652 [grpc-default-executor-8] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s4@group-6E26527BDBA6->s3: nextIndex: updateUnconditionally 15 -> 14
2023-01-06 13:31:12,653 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s4@group-6E26527BDBA6->s5-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:12,653 [grpc-default-executor-8] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s4@group-6E26527BDBA6->s5: nextIndex: updateUnconditionally 15 -> 14
2023-01-06 13:31:12,653 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s5@group-6E26527BDBA6: shutdown
2023-01-06 13:31:12,653 [s5-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-6E26527BDBA6,id=s5
2023-01-06 13:31:12,653 [s5-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s5: shutdown s5@group-6E26527BDBA6-FollowerState
2023-01-06 13:31:12,654 [s5-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s5@group-6E26527BDBA6-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:12,654 [s5@group-6E26527BDBA6-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s5@group-6E26527BDBA6-FollowerState was interrupted
2023-01-06 13:31:12,654 [s5-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s5@group-6E26527BDBA6: applyIndex: 14
2023-01-06 13:31:12,654 [s5@group-6E26527BDBA6-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s5@group-6E26527BDBA6-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:12,654 [s4-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s4@group-6E26527BDBA6-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:12,655 [s4-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s4@group-6E26527BDBA6: applyIndex: 14
2023-01-06 13:31:12,655 [s4@group-6E26527BDBA6-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s4@group-6E26527BDBA6-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:12,655 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s3@group-6E26527BDBA6-SegmentedRaftLogWorker close()
2023-01-06 13:31:12,655 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:12,656 [MiniRaftCluster-4] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s5 Close channels
2023-01-06 13:31:12,658 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:12,658 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:12,660 [MiniRaftCluster-5] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s3 Close channels
2023-01-06 13:31:12,661 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s4@group-6E26527BDBA6-SegmentedRaftLogWorker close()
2023-01-06 13:31:12,662 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s5@group-6E26527BDBA6-SegmentedRaftLogWorker close()
2023-01-06 13:31:12,667 [MiniRaftCluster-5] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s5 Close channels
2023-01-06 13:31:12,669 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:12,669 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:12,669 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:12,669 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:12,672 [MiniRaftCluster-4] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:12,672 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s3: Stopped
2023-01-06 13:31:12,674 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:12,674 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:12,674 [MiniRaftCluster-5] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:12,672 [MiniRaftCluster-6] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s3 Close channels
2023-01-06 13:31:12,675 [MiniRaftCluster-6] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s4 Close channels
2023-01-06 13:31:12,675 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s4: Stopped
2023-01-06 13:31:12,675 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:12,675 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:12,680 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:12,680 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:12,680 [MiniRaftCluster-6] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:12,681 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s5: Stopped
2023-01-06 13:31:12,681 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:12,681 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:12,682 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:12,682 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:12,683 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-01-06 13:31:12,683 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-0E8919EB0250:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:12,684 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:12,684 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:12,684 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:12,684 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:12,684 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:12,684 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:12,684 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-0E8919EB0250:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:12,684 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0
2023-01-06 13:31:12,685 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0 does not exist.
2023-01-06 13:31:12,685 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0
2023-01-06 13:31:12,686 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:12,686 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:12,686 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 42365 (custom)
2023-01-06 13:31:12,686 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:12,686 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 33447 (custom)
2023-01-06 13:31:12,687 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:12,687 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35299 (custom)
2023-01-06 13:31:12,687 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:12,687 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:12,687 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:12,687 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:12,687 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:12,687 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:12,687 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:12,689 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:12,690 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:12,690 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:12,690 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:12,690 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:12,690 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0] (custom)
2023-01-06 13:31:12,694 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:12,694 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:12,694 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:12,695 [pool-9-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-0E8919EB0250:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:12,695 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:12,695 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:12,695 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:12,695 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:12,695 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:12,695 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:12,695 [pool-9-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-0E8919EB0250: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:12,695 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:12,695 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:12,696 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:12,696 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:12,696 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-0E8919EB0250:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER] returns group-0E8919EB0250:java.util.concurrent.CompletableFuture@6a07610a[Not completed]
2023-01-06 13:31:12,696 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:12,696 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-0E8919EB0250:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:12,696 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1
2023-01-06 13:31:12,696 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1 does not exist.
2023-01-06 13:31:12,696 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1
2023-01-06 13:31:12,697 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:12,697 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:12,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 40879 (custom)
2023-01-06 13:31:12,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:12,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 39631 (custom)
2023-01-06 13:31:12,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:12,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 36683 (custom)
2023-01-06 13:31:12,698 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:12,698 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:12,698 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:12,698 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:12,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:12,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:12,698 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:12,700 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:12,700 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:12,700 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:12,700 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:12,700 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:12,701 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1] (custom)
2023-01-06 13:31:12,701 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-0E8919EB0250:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER] returns group-0E8919EB0250:java.util.concurrent.CompletableFuture@5bf6bb00[Not completed]
2023-01-06 13:31:12,701 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-0E8919EB0250:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:12,701 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2
2023-01-06 13:31:12,702 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2 does not exist.
2023-01-06 13:31:12,702 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2
2023-01-06 13:31:12,702 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:12,702 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:12,702 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 36721 (custom)
2023-01-06 13:31:12,702 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:12,702 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 43483 (custom)
2023-01-06 13:31:12,702 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:12,702 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 36469 (custom)
2023-01-06 13:31:12,702 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:12,703 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:12,703 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:12,703 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:12,703 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:12,703 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:12,703 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:12,704 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:12,704 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:12,704 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:12,704 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:12,705 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:12,705 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2] (custom)
2023-01-06 13:31:12,706 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:12,708 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:12,709 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:12,709 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:12,709 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:12,710 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:12,710 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:12,710 [pool-9-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:12,710 [pool-10-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-0E8919EB0250:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:12,710 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:12,711 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:12,711 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-0E8919EB0250:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER] returns group-0E8919EB0250:java.util.concurrent.CompletableFuture@2eb2144c[Not completed]
2023-01-06 13:31:12,711 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:12,711 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:12,711 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0] (custom)
2023-01-06 13:31:12,712 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0/68d3c25e-bd82-4abb-bb97-0e8919eb0250 does not exist. Creating ...
2023-01-06 13:31:12,712 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0/68d3c25e-bd82-4abb-bb97-0e8919eb0250
2023-01-06 13:31:12,712 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:12,713 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:12,713 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:12,713 [pool-11-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-0E8919EB0250:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:12,713 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:12,713 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:12,713 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:12,713 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:12,713 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:12,713 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:12,714 [pool-11-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-0E8919EB0250: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:12,714 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:12,714 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:12,714 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:12,714 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:12,714 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:12,715 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0/68d3c25e-bd82-4abb-bb97-0e8919eb0250/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:12,715 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0/68d3c25e-bd82-4abb-bb97-0e8919eb0250/current
2023-01-06 13:31:12,715 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0/68d3c25e-bd82-4abb-bb97-0e8919eb0250/sm
2023-01-06 13:31:12,716 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0/68d3c25e-bd82-4abb-bb97-0e8919eb0250 has been successfully formatted.
2023-01-06 13:31:12,717 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:12,717 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:12,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:12,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:12,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:12,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:12,717 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:12,717 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:12,718 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:12,718 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:12,718 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:12,718 [pool-10-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-0E8919EB0250: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:12,718 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-0E8919EB0250-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0/68d3c25e-bd82-4abb-bb97-0e8919eb0250
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:12,718 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:12,719 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:12,719 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:12,720 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:12,720 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:12,720 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:12,720 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-0E8919EB0250-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:12,721 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-0E8919EB0250-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:12,718 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:12,721 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:12,721 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:12,721 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:12,722 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-0E8919EB0250: start as a follower, conf=-1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:12,722 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-0E8919EB0250: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:12,722 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-0E8919EB0250-FollowerState
2023-01-06 13:31:12,723 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:12,723 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:12,724 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:12,724 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:12,724 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:12,724 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:12,726 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:12,726 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:12,726 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:12,726 [pool-11-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:12,727 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-0E8919EB0250,id=s0
2023-01-06 13:31:12,727 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:12,728 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:12,728 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:12,728 [s0@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:12,728 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2023-01-06 13:31:12,729 [s0@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:12,730 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 33447
2023-01-06 13:31:12,732 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 35299
2023-01-06 13:31:12,732 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 42365
2023-01-06 13:31:12,733 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:12,733 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:12,733 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1] (custom)
2023-01-06 13:31:12,734 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1/68d3c25e-bd82-4abb-bb97-0e8919eb0250 does not exist. Creating ...
2023-01-06 13:31:12,734 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1/68d3c25e-bd82-4abb-bb97-0e8919eb0250
2023-01-06 13:31:12,734 [JvmPauseMonitor6] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2023-01-06 13:31:12,736 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1/68d3c25e-bd82-4abb-bb97-0e8919eb0250/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:12,736 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1/68d3c25e-bd82-4abb-bb97-0e8919eb0250/current
2023-01-06 13:31:12,737 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1/68d3c25e-bd82-4abb-bb97-0e8919eb0250/sm
2023-01-06 13:31:12,739 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1/68d3c25e-bd82-4abb-bb97-0e8919eb0250 has been successfully formatted.
2023-01-06 13:31:12,739 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:12,739 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:12,739 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:12,739 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:12,740 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:12,740 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:12,740 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:12,740 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:12,740 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-0E8919EB0250-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1/68d3c25e-bd82-4abb-bb97-0e8919eb0250
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:12,741 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:12,745 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:12,745 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:12,746 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:12,746 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-0E8919EB0250-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:12,746 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-0E8919EB0250-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:12,746 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-0E8919EB0250: start as a follower, conf=-1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:12,746 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-0E8919EB0250: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:12,746 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-0E8919EB0250-FollowerState
2023-01-06 13:31:12,750 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-0E8919EB0250,id=s1
2023-01-06 13:31:12,750 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:12,750 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:12,750 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:12,750 [s1@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:12,750 [s1@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:12,751 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2023-01-06 13:31:12,752 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 39631
2023-01-06 13:31:12,752 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 36683
2023-01-06 13:31:12,756 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 40879
2023-01-06 13:31:12,756 [JvmPauseMonitor7] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2023-01-06 13:31:12,756 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:12,757 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:12,757 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2] (custom)
2023-01-06 13:31:12,757 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2/68d3c25e-bd82-4abb-bb97-0e8919eb0250 does not exist. Creating ...
2023-01-06 13:31:12,757 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2/68d3c25e-bd82-4abb-bb97-0e8919eb0250
2023-01-06 13:31:12,759 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2/68d3c25e-bd82-4abb-bb97-0e8919eb0250/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:12,759 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2/68d3c25e-bd82-4abb-bb97-0e8919eb0250/current
2023-01-06 13:31:12,760 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2/68d3c25e-bd82-4abb-bb97-0e8919eb0250/sm
2023-01-06 13:31:12,762 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2/68d3c25e-bd82-4abb-bb97-0e8919eb0250 has been successfully formatted.
2023-01-06 13:31:12,762 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:12,762 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:12,763 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:12,763 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:12,763 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:12,763 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:12,763 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:12,763 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-0E8919EB0250-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2/68d3c25e-bd82-4abb-bb97-0e8919eb0250
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:12,764 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:12,766 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:12,766 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:12,766 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:12,766 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-0E8919EB0250-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:12,766 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-0E8919EB0250-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:12,770 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-0E8919EB0250: start as a follower, conf=-1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:12,770 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-0E8919EB0250: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:12,770 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-0E8919EB0250-FollowerState
2023-01-06 13:31:12,770 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-0E8919EB0250,id=s2
2023-01-06 13:31:12,770 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:12,770 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:12,770 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:12,771 [s2@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:12,772 [s2@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:12,772 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2023-01-06 13:31:12,773 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 43483
2023-01-06 13:31:12,776 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 36469
2023-01-06 13:31:12,776 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 36721
2023-01-06 13:31:12,777 [JvmPauseMonitor8] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2023-01-06 13:31:12,778 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:12,778 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:12,797 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-B610849938B4->s0: receive RaftClientReply:client-B610849938B4->s0@group-0E8919EB0250, cid=28, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-0E8919EB0250 is not the leader, logIndex=0, commits[s0:c-1]
2023-01-06 13:31:12,903 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:12,903 [timer2] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:12,916 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-B610849938B4->s1: receive RaftClientReply:client-B610849938B4->s1@group-0E8919EB0250, cid=28, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s1@group-0E8919EB0250 is not the leader, logIndex=0, commits[s1:c-1]
2023-01-06 13:31:12,968 [s0@group-0E8919EB0250-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-0E8919EB0250-FollowerState: change to CANDIDATE, lastRpcElapsedTime:246358664ns, electionTimeout:238ms
2023-01-06 13:31:12,968 [s0@group-0E8919EB0250-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-0E8919EB0250-FollowerState
2023-01-06 13:31:12,969 [s0@group-0E8919EB0250-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-0E8919EB0250: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:12,969 [s0@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:12,969 [s0@group-0E8919EB0250-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-0E8919EB0250-LeaderElection8
2023-01-06 13:31:12,974 [s0@group-0E8919EB0250-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-0E8919EB0250-LeaderElection8 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:12,974 [s0@group-0E8919EB0250-LeaderElection8-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-01-06 13:31:12,974 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:12,974 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:12,975 [s0@group-0E8919EB0250-LeaderElection8-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-01-06 13:31:12,985 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-0E8919EB0250: receive requestVote(PRE_VOTE, s0, group-0E8919EB0250, 0, (t:0, i:0))
2023-01-06 13:31:12,985 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-0E8919EB0250-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:12,985 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-0E8919EB0250 replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-0E8919EB0250:t0, leader=null, voted=, raftlog=Memoized:s1@group-0E8919EB0250-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:12,990 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-0E8919EB0250: receive requestVote(PRE_VOTE, s0, group-0E8919EB0250, 0, (t:0, i:0))
2023-01-06 13:31:12,990 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-0E8919EB0250-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:12,990 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-0E8919EB0250 replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-0E8919EB0250:t0, leader=null, voted=, raftlog=Memoized:s2@group-0E8919EB0250-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:12,991 [s0@group-0E8919EB0250-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-0E8919EB0250-LeaderElection8: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:12,991 [s0@group-0E8919EB0250-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t0
2023-01-06 13:31:12,991 [s0@group-0E8919EB0250-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-0E8919EB0250-LeaderElection8 PRE_VOTE round 0: result PASSED
2023-01-06 13:31:12,994 [s0@group-0E8919EB0250-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-0E8919EB0250-LeaderElection8 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:12,996 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-0E8919EB0250: receive requestVote(ELECTION, s0, group-0E8919EB0250, 1, (t:0, i:0))
2023-01-06 13:31:12,996 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-0E8919EB0250-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:12,996 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-0E8919EB0250: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-01-06 13:31:12,996 [grpc-default-executor-10] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-0E8919EB0250-FollowerState
2023-01-06 13:31:12,996 [s1@group-0E8919EB0250-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-0E8919EB0250-FollowerState was interrupted
2023-01-06 13:31:13,001 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:13,001 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:13,001 [grpc-default-executor-10] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-0E8919EB0250-FollowerState
2023-01-06 13:31:13,003 [s1@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:13,003 [s1@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:13,004 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-0E8919EB0250: receive requestVote(ELECTION, s0, group-0E8919EB0250, 1, (t:0, i:0))
2023-01-06 13:31:13,005 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-0E8919EB0250-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:13,005 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-0E8919EB0250: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-01-06 13:31:13,005 [grpc-default-executor-8] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-0E8919EB0250-FollowerState
2023-01-06 13:31:13,005 [s2@group-0E8919EB0250-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-0E8919EB0250-FollowerState was interrupted
2023-01-06 13:31:13,006 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-0E8919EB0250 replies to ELECTION vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-0E8919EB0250:t1, leader=null, voted=s0, raftlog=Memoized:s1@group-0E8919EB0250-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:13,007 [grpc-default-executor-8] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-0E8919EB0250-FollowerState
2023-01-06 13:31:13,007 [s0@group-0E8919EB0250-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-0E8919EB0250-LeaderElection8: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:13,007 [s0@group-0E8919EB0250-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t1
2023-01-06 13:31:13,007 [s0@group-0E8919EB0250-LeaderElection8] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-0E8919EB0250-LeaderElection8 ELECTION round 0: result PASSED
2023-01-06 13:31:13,007 [s0@group-0E8919EB0250-LeaderElection8] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-0E8919EB0250-LeaderElection8
2023-01-06 13:31:13,007 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-0E8919EB0250: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:13,007 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-0E8919EB0250: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 312ms
2023-01-06 13:31:13,008 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:13,008 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-01-06 13:31:13,008 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 1MB (=1048576) (custom)
2023-01-06 13:31:13,008 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:13,008 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:13,008 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:13,008 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-01-06 13:31:13,008 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:13,009 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:13,009 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:13,009 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:13,009 [s0@group-0E8919EB0250-LeaderElection8] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:13,009 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:13,009 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:13,009 [s0@group-0E8919EB0250-LeaderElection8] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:13,009 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:13,010 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:13,010 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:13,010 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:13,010 [s0@group-0E8919EB0250-LeaderElection8] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:13,010 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:13,010 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:13,010 [s0@group-0E8919EB0250-LeaderElection8] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:13,011 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:13,011 [s0@group-0E8919EB0250-LeaderElection8] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-0E8919EB0250-LeaderStateImpl
2023-01-06 13:31:13,013 [s0@group-0E8919EB0250-LeaderElection8] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-0E8919EB0250-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:13,015 [s2@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:13,015 [s2@group-0E8919EB0250-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:13,019 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,019 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,025 [s0@group-0E8919EB0250-LeaderElection8] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-0E8919EB0250: set configuration 0: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:13,026 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-0E8919EB0250 replies to ELECTION vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-0E8919EB0250:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-0E8919EB0250-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:13,027 [s0@group-0E8919EB0250-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-0E8919EB0250-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s0/68d3c25e-bd82-4abb-bb97-0e8919eb0250/current/log_inprogress_0
2023-01-06 13:31:13,043 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-0E8919EB0250: change Leader from null to s0 at term 1 for appendEntries, leader elected after 324ms
2023-01-06 13:31:13,043 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-B610849938B4->s0: receive RaftClientReply:client-B610849938B4->s0@group-0E8919EB0250, cid=28, SUCCESS, logIndex=0, commits[s0:c0, s1:c-1, s2:c-1]
2023-01-06 13:31:13,043 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-0E8919EB0250: change Leader from null to s0 at term 1 for appendEntries, leader elected after 325ms
2023-01-06 13:31:13,058 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-0E8919EB0250: set configuration 0: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:13,058 [s2-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-0E8919EB0250-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:13,064 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-0E8919EB0250: set configuration 0: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:13,064 [s1-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-0E8919EB0250-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:13,083 [s1@group-0E8919EB0250-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-0E8919EB0250-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s1/68d3c25e-bd82-4abb-bb97-0e8919eb0250/current/log_inprogress_0
2023-01-06 13:31:13,085 [s2@group-0E8919EB0250-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-0E8919EB0250-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc3807911/s2/68d3c25e-bd82-4abb-bb97-0e8919eb0250/current/log_inprogress_0
2023-01-06 13:31:13,090 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 29@client-B610849938B4
2023-01-06 13:31:13,091 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-B610849938B4->s0: receive RaftClientReply:client-B610849938B4->s0@group-0E8919EB0250, cid=29, SUCCESS, logIndex=1, commits[s0:c1, s1:c0, s2:c0]
2023-01-06 13:31:13,097 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block FLUSH_STATE_MACHINE_DATA
2023-01-06 13:31:13,097 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,097 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,098 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 29@client-B610849938B4
2023-01-06 13:31:13,099 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,099 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,101 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 29@client-B610849938B4
2023-01-06 13:31:13,108 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,110 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A639DE8D785E->s0: receive RaftClientReply:client-A639DE8D785E->s0@group-0E8919EB0250, cid=32, SUCCESS, logIndex=2, commits[s0:c2, s1:c1, s2:c1]
2023-01-06 13:31:13,110 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-867B5A8F539C->s0: receive RaftClientReply:client-867B5A8F539C->s0@group-0E8919EB0250, cid=30, SUCCESS, logIndex=2, commits[s0:c2, s1:c1, s2:c1]
2023-01-06 13:31:13,110 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,123 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,123 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,138 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-51BD0F2D039F->s0: receive RaftClientReply:client-51BD0F2D039F->s0@group-0E8919EB0250, cid=34, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:13,144 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-C82E4713AB8F->s0: receive RaftClientReply:client-C82E4713AB8F->s0@group-0E8919EB0250, cid=36, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:13,148 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,149 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,166 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A9B5DA8D7423->s0: receive RaftClientReply:client-A9B5DA8D7423->s0@group-0E8919EB0250, cid=38, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:13,166 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,169 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,181 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-F1ED619683A3->s0: receive RaftClientReply:client-F1ED619683A3->s0@group-0E8919EB0250, cid=40, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:13,186 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,186 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,211 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,211 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,215 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,215 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,217 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,217 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,230 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-5B16ED30F656->s0: receive RaftClientReply:client-5B16ED30F656->s0@group-0E8919EB0250, cid=42, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:13,232 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,232 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,233 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-212F1D0929D6->s0: receive RaftClientReply:client-212F1D0929D6->s0@group-0E8919EB0250, cid=44, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:13,245 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-315DB7A3DD21->s0: receive RaftClientReply:client-315DB7A3DD21->s0@group-0E8919EB0250, cid=46, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:13,254 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-05E0E26C5CA0->s0: receive RaftClientReply:client-05E0E26C5CA0->s0@group-0E8919EB0250, cid=48, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:13,262 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-BA7C16195E30->s0: receive RaftClientReply:client-BA7C16195E30->s0@group-0E8919EB0250, cid=50, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:13,272 [grpc-default-executor-8] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=message 8
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-0E8919EB0250: Failed to acquire a pending write request for RaftClientRequest:client-05E0E26C5CA0->s0@group-0E8919EB0250, cid=49, seq=2, RW, Message:6d6573736167652038
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-0E8919EB0250: Failed to acquire a pending write request for RaftClientRequest:client-05E0E26C5CA0->s0@group-0E8919EB0250, cid=49, seq=2, RW, Message:6d6573736167652038
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:771)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:882)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:820)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:820)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:890)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:889)
		... 7 more
2023-01-06 13:31:13,537 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock FLUSH_STATE_MACHINE_DATA
2023-01-06 13:31:13,539 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 31@client-867B5A8F539C
2023-01-06 13:31:13,540 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 33@client-A639DE8D785E
2023-01-06 13:31:13,540 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, message 1 -> (t:1, i:5), STATEMACHINELOGENTRY, 35@client-51BD0F2D039F
2023-01-06 13:31:13,541 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 6, message 2 -> (t:1, i:6), STATEMACHINELOGENTRY, 37@client-C82E4713AB8F
2023-01-06 13:31:13,541 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, message 3 -> (t:1, i:7), STATEMACHINELOGENTRY, 39@client-A9B5DA8D7423
2023-01-06 13:31:13,541 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 8, message 4 -> (t:1, i:8), STATEMACHINELOGENTRY, 41@client-F1ED619683A3
2023-01-06 13:31:13,541 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 43@client-5B16ED30F656
2023-01-06 13:31:13,541 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 45@client-212F1D0929D6
2023-01-06 13:31:13,542 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 47@client-315DB7A3DD21
2023-01-06 13:31:13,542 [s0@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 12, message 9 -> (t:1, i:12), STATEMACHINELOGENTRY, 51@client-BA7C16195E30
2023-01-06 13:31:13,542 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 31@client-867B5A8F539C
2023-01-06 13:31:13,544 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-867B5A8F539C->s0: receive RaftClientReply:client-867B5A8F539C->s0@group-0E8919EB0250, cid=31, SUCCESS, logIndex=3, commits[s0:c3, s1:c2, s2:c2]
2023-01-06 13:31:13,545 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-C82E4713AB8F->s0: receive RaftClientReply:client-C82E4713AB8F->s0@group-0E8919EB0250, cid=37, SUCCESS, logIndex=6, commits[s0:c12, s1:c2, s2:c2]
2023-01-06 13:31:13,545 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-F1ED619683A3->s0: receive RaftClientReply:client-F1ED619683A3->s0@group-0E8919EB0250, cid=41, SUCCESS, logIndex=8, commits[s0:c12, s1:c2, s2:c2]
2023-01-06 13:31:13,545 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-212F1D0929D6->s0: receive RaftClientReply:client-212F1D0929D6->s0@group-0E8919EB0250, cid=45, SUCCESS, logIndex=10, commits[s0:c12, s1:c2, s2:c2]
2023-01-06 13:31:13,548 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A639DE8D785E->s0: receive RaftClientReply:client-A639DE8D785E->s0@group-0E8919EB0250, cid=33, SUCCESS, logIndex=4, commits[s0:c12, s1:c2, s2:c2]
2023-01-06 13:31:13,549 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 33@client-A639DE8D785E
2023-01-06 13:31:13,549 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 5, message 1 -> (t:1, i:5), STATEMACHINELOGENTRY, 35@client-51BD0F2D039F
2023-01-06 13:31:13,550 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 6, message 2 -> (t:1, i:6), STATEMACHINELOGENTRY, 37@client-C82E4713AB8F
2023-01-06 13:31:13,550 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 7, message 3 -> (t:1, i:7), STATEMACHINELOGENTRY, 39@client-A9B5DA8D7423
2023-01-06 13:31:13,550 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 8, message 4 -> (t:1, i:8), STATEMACHINELOGENTRY, 41@client-F1ED619683A3
2023-01-06 13:31:13,550 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 43@client-5B16ED30F656
2023-01-06 13:31:13,550 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 45@client-212F1D0929D6
2023-01-06 13:31:13,551 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 47@client-315DB7A3DD21
2023-01-06 13:31:13,551 [s2@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 12, message 9 -> (t:1, i:12), STATEMACHINELOGENTRY, 51@client-BA7C16195E30
2023-01-06 13:31:13,552 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-BA7C16195E30->s0: receive RaftClientReply:client-BA7C16195E30->s0@group-0E8919EB0250, cid=51, SUCCESS, logIndex=12, commits[s0:c12, s1:c2, s2:c2]
2023-01-06 13:31:13,552 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A9B5DA8D7423->s0: receive RaftClientReply:client-A9B5DA8D7423->s0@group-0E8919EB0250, cid=39, SUCCESS, logIndex=7, commits[s0:c12, s1:c2, s2:c2]
2023-01-06 13:31:13,552 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-5B16ED30F656->s0: receive RaftClientReply:client-5B16ED30F656->s0@group-0E8919EB0250, cid=43, SUCCESS, logIndex=9, commits[s0:c12, s1:c2, s2:c2]
2023-01-06 13:31:13,553 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-315DB7A3DD21->s0: receive RaftClientReply:client-315DB7A3DD21->s0@group-0E8919EB0250, cid=47, SUCCESS, logIndex=11, commits[s0:c12, s1:c2, s2:c2]
2023-01-06 13:31:13,555 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-51BD0F2D039F->s0: receive RaftClientReply:client-51BD0F2D039F->s0@group-0E8919EB0250, cid=35, SUCCESS, logIndex=5, commits[s0:c12, s1:c2, s2:c2]
2023-01-06 13:31:13,556 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 31@client-867B5A8F539C
2023-01-06 13:31:13,556 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 4, message 0 -> (t:1, i:4), STATEMACHINELOGENTRY, 33@client-A639DE8D785E
2023-01-06 13:31:13,556 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 5, message 1 -> (t:1, i:5), STATEMACHINELOGENTRY, 35@client-51BD0F2D039F
2023-01-06 13:31:13,556 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 6, message 2 -> (t:1, i:6), STATEMACHINELOGENTRY, 37@client-C82E4713AB8F
2023-01-06 13:31:13,557 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 7, message 3 -> (t:1, i:7), STATEMACHINELOGENTRY, 39@client-A9B5DA8D7423
2023-01-06 13:31:13,557 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 8, message 4 -> (t:1, i:8), STATEMACHINELOGENTRY, 41@client-F1ED619683A3
2023-01-06 13:31:13,557 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 43@client-5B16ED30F656
2023-01-06 13:31:13,557 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 45@client-212F1D0929D6
2023-01-06 13:31:13,557 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,558 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 47@client-315DB7A3DD21
2023-01-06 13:31:13,558 [s1@group-0E8919EB0250-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 12, message 9 -> (t:1, i:12), STATEMACHINELOGENTRY, 51@client-BA7C16195E30
2023-01-06 13:31:13,558 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,565 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-32677CBF06A3->s0: receive RaftClientReply:client-32677CBF06A3->s0@group-0E8919EB0250, cid=52, SUCCESS, logIndex=14, commits[s0:c14, s1:c13, s2:c12]
2023-01-06 13:31:13,578 [grpc-default-executor-8] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=1025kb (=1049600)-message
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-0E8919EB0250: Failed to acquire a pending write request for RaftClientRequest:client-32677CBF06A3->s0@group-0E8919EB0250, cid=53, seq=2, RW, Message:44ed49f31f5929e7f545...(size=1049600)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s0@group-0E8919EB0250: Failed to acquire a pending write request for RaftClientRequest:client-32677CBF06A3->s0@group-0E8919EB0250, cid=53, seq=2, RW, Message:44ed49f31f5929e7f545...(size=1049600)
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:771)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:882)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:820)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:820)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:890)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:889)
		... 7 more
2023-01-06 13:31:13,893 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:13,894 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:13,894 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:13,894 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:13,894 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:13,894 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-0E8919EB0250:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-0E8919EB0250-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-0E8919EB0250:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-0E8919EB0250-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-0E8919EB0250:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-0E8919EB0250-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:35299|admin:localhost:42365|client:localhost:33447|dataStream:localhost:43263|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:36683|admin:localhost:40879|client:localhost:39631|dataStream:localhost:36931|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:36469|admin:localhost:36721|client:localhost:43483|dataStream:localhost:43087|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:13,895 [MiniRaftCluster-7] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2023-01-06 13:31:13,902 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:13,902 [MiniRaftCluster-9] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2023-01-06 13:31:13,902 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-0E8919EB0250: shutdown
2023-01-06 13:31:13,903 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-0E8919EB0250,id=s0
2023-01-06 13:31:13,903 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-0E8919EB0250-LeaderStateImpl
2023-01-06 13:31:13,903 [s0@group-0E8919EB0250->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-0E8919EB0250->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:13,903 [s0@group-0E8919EB0250->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-0E8919EB0250->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:13,903 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#27-t1,previous=(t:1, i:12),leaderCommit=13,initializing? true,entries: size=2, first=(t:1, i:13), METADATAENTRY(c:3)
2023-01-06 13:31:13,904 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#24-t1,previous=(t:1, i:13),leaderCommit=12,initializing? true,entries: size=1, first=(t:1, i:14), METADATAENTRY(c:12)
2023-01-06 13:31:13,904 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-0E8919EB0250->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:13,905 [grpc-default-executor-8] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-0E8919EB0250->s2: nextIndex: updateUnconditionally 15 -> 14
2023-01-06 13:31:13,905 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-0E8919EB0250->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:13,905 [MiniRaftCluster-7] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-01-06 13:31:13,906 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:13,906 [MiniRaftCluster-7] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-01-06 13:31:13,905 [grpc-default-executor-1] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-0E8919EB0250->s1: nextIndex: updateUnconditionally 15 -> 14
2023-01-06 13:31:13,903 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-0E8919EB0250-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:13,906 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-0E8919EB0250: shutdown
2023-01-06 13:31:13,906 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-0E8919EB0250,id=s2
2023-01-06 13:31:13,907 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-0E8919EB0250-FollowerState
2023-01-06 13:31:13,907 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-0E8919EB0250-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:13,907 [s2@group-0E8919EB0250-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-0E8919EB0250-FollowerState was interrupted
2023-01-06 13:31:13,908 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:13,908 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:13,908 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-0E8919EB0250-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:13,909 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:13,909 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:13,909 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:13,909 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:13,910 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-0E8919EB0250: applyIndex: 14
2023-01-06 13:31:13,909 [MiniRaftCluster-8] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2023-01-06 13:31:13,910 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:13,910 [MiniRaftCluster-7] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:13,909 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-0E8919EB0250: applyIndex: 14
2023-01-06 13:31:13,911 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:13,910 [s2@group-0E8919EB0250-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s2@group-0E8919EB0250-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:13,911 [s0@group-0E8919EB0250-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s0@group-0E8919EB0250-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:13,910 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-0E8919EB0250: shutdown
2023-01-06 13:31:13,910 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:13,912 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-0E8919EB0250,id=s1
2023-01-06 13:31:13,912 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-0E8919EB0250-FollowerState
2023-01-06 13:31:13,914 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-0E8919EB0250-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:13,914 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:13,914 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:13,914 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-0E8919EB0250: applyIndex: 14
2023-01-06 13:31:13,914 [s1@group-0E8919EB0250-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s1@group-0E8919EB0250-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:13,912 [MiniRaftCluster-9] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:13,915 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:13,915 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:13,915 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s2@group-0E8919EB0250-SegmentedRaftLogWorker close()
2023-01-06 13:31:13,914 [s1@group-0E8919EB0250-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-0E8919EB0250-FollowerState was interrupted
2023-01-06 13:31:13,914 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s0@group-0E8919EB0250-SegmentedRaftLogWorker close()
2023-01-06 13:31:13,918 [JvmPauseMonitor8] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2023-01-06 13:31:13,918 [JvmPauseMonitor6] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2023-01-06 13:31:13,916 [MiniRaftCluster-8] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:13,919 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s1@group-0E8919EB0250-SegmentedRaftLogWorker close()
2023-01-06 13:31:13,920 [JvmPauseMonitor7] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2023-01-06 13:31:13,920 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:13,921 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:13,921 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:13,921 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:13,924 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-01-06 13:31:13,924 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-924F9C49A19D:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:13,925 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:13,925 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:13,925 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:13,925 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:13,925 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:13,925 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:13,925 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-924F9C49A19D:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:13,925 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0
2023-01-06 13:31:13,925 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0 does not exist.
2023-01-06 13:31:13,925 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0
2023-01-06 13:31:13,925 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:13,926 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:13,926 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 43665 (custom)
2023-01-06 13:31:13,926 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:13,926 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34325 (custom)
2023-01-06 13:31:13,926 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:13,926 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 46543 (custom)
2023-01-06 13:31:13,926 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:13,926 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:13,926 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:13,926 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:13,926 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:13,926 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:13,926 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:13,927 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:13,928 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:13,928 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:13,928 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:13,928 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:13,928 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0] (custom)
2023-01-06 13:31:13,928 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-924F9C49A19D:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER] returns group-924F9C49A19D:java.util.concurrent.CompletableFuture@3f2d9a2[Not completed]
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-924F9C49A19D:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-924F9C49A19D: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:13,929 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:13,930 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:13,930 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:13,930 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:13,930 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:13,931 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:13,931 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:13,931 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:13,931 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:13,931 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:13,931 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:13,931 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:13,931 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0] (custom)
2023-01-06 13:31:13,932 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0/cce6de95-5e92-485b-bae2-924f9c49a19d does not exist. Creating ...
2023-01-06 13:31:13,932 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0/cce6de95-5e92-485b-bae2-924f9c49a19d
2023-01-06 13:31:13,934 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0/cce6de95-5e92-485b-bae2-924f9c49a19d/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:13,934 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0/cce6de95-5e92-485b-bae2-924f9c49a19d/current
2023-01-06 13:31:13,934 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0/cce6de95-5e92-485b-bae2-924f9c49a19d/sm
2023-01-06 13:31:13,937 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0/cce6de95-5e92-485b-bae2-924f9c49a19d has been successfully formatted.
2023-01-06 13:31:13,938 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:13,938 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:13,938 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:13,938 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:13,938 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:13,938 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:13,938 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-924F9C49A19D-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0/cce6de95-5e92-485b-bae2-924f9c49a19d
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:13,939 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:13,940 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:13,940 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:13,940 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:13,940 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:13,940 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:13,941 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-924F9C49A19D-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:13,941 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-924F9C49A19D-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:13,941 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-924F9C49A19D: start as a follower, conf=-1: peers:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:13,941 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-924F9C49A19D: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:13,941 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-924F9C49A19D-FollowerState
2023-01-06 13:31:13,942 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-924F9C49A19D,id=s0
2023-01-06 13:31:13,942 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:13,942 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:13,942 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:13,942 [s0@group-924F9C49A19D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:13,943 [s0@group-924F9C49A19D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:13,943 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2023-01-06 13:31:13,944 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 34325
2023-01-06 13:31:13,946 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 46543
2023-01-06 13:31:13,947 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 43665
2023-01-06 13:31:13,947 [JvmPauseMonitor9] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2023-01-06 13:31:13,947 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:13,947 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-924F9C49A19D:t0, leader=null, voted=, raftlog=Memoized:s0@group-924F9C49A19D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:13,948 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-924F9C49A19D:t0, leader=null, voted=, raftlog=Memoized:s0@group-924F9C49A19D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-924F9C49A19D:t0, leader=null, voted=, raftlog=Memoized:s0@group-924F9C49A19D-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:155)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:14,159 [s0@group-924F9C49A19D-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-924F9C49A19D-FollowerState: change to CANDIDATE, lastRpcElapsedTime:217774453ns, electionTimeout:216ms
2023-01-06 13:31:14,159 [s0@group-924F9C49A19D-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-924F9C49A19D-FollowerState
2023-01-06 13:31:14,159 [s0@group-924F9C49A19D-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-924F9C49A19D: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:14,160 [s0@group-924F9C49A19D-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:14,160 [s0@group-924F9C49A19D-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-924F9C49A19D-LeaderElection9
2023-01-06 13:31:14,162 [s0@group-924F9C49A19D-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-924F9C49A19D-LeaderElection9 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:14,162 [s0@group-924F9C49A19D-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-924F9C49A19D-LeaderElection9 PRE_VOTE round 0: result PASSED (term=0)
2023-01-06 13:31:14,164 [s0@group-924F9C49A19D-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-924F9C49A19D-LeaderElection9 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:14,164 [s0@group-924F9C49A19D-LeaderElection9] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-924F9C49A19D-LeaderElection9 ELECTION round 0: result PASSED (term=1)
2023-01-06 13:31:14,164 [s0@group-924F9C49A19D-LeaderElection9] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-924F9C49A19D-LeaderElection9
2023-01-06 13:31:14,164 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-924F9C49A19D: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:14,164 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-924F9C49A19D: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 234ms
2023-01-06 13:31:14,164 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:14,164 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:14,165 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-01-06 13:31:14,165 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:14,165 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:14,165 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:14,165 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:14,165 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:14,165 [s0@group-924F9C49A19D-LeaderElection9] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-924F9C49A19D-LeaderStateImpl
2023-01-06 13:31:14,166 [s0@group-924F9C49A19D-LeaderElection9] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-924F9C49A19D-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:14,167 [s0@group-924F9C49A19D-LeaderElection9] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-924F9C49A19D: set configuration 0: peers:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:14,179 [s0@group-924F9C49A19D-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-924F9C49A19D-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc85a575a/s0/cce6de95-5e92-485b-bae2-924f9c49a19d/current/log_inprogress_0
2023-01-06 13:31:14,398 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-924F9C49A19D:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-924F9C49A19D-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:14,399 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:14,399 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 43665 (custom)
2023-01-06 13:31:14,399 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:14,399 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34325 (custom)
2023-01-06 13:31:14,399 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:14,399 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 46543 (custom)
2023-01-06 13:31:14,399 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:14,400 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:14,400 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:14,400 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:14,400 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:14,400 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:14,400 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:14,402 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'appendEntries'
2023-01-06 13:31:14,403 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "appendEntries" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking appendEntries call is not supported
	at org.apache.ratis.grpc.server.GrpcService.appendEntries(GrpcService.java:355)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$1(TestRaftServerWithGrpc.java:159)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:158)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:14,403 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'installSnapshot'
2023-01-06 13:31:14,403 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "installSnapshot" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking installSnapshot call is not supported
	at org.apache.ratis.grpc.server.GrpcService.installSnapshot(GrpcService.java:361)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$2(TestRaftServerWithGrpc.java:163)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:162)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:14,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:14,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:14,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:14,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:14,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:14,404 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-924F9C49A19D:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-924F9C49A19D-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:46543|admin:localhost:43665|client:localhost:34325|dataStream:localhost:42093|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:14,406 [MiniRaftCluster-10] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2023-01-06 13:31:14,406 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-924F9C49A19D: shutdown
2023-01-06 13:31:14,407 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-924F9C49A19D,id=s0
2023-01-06 13:31:14,407 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-924F9C49A19D-LeaderStateImpl
2023-01-06 13:31:14,406 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:14,407 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-924F9C49A19D-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:14,407 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-924F9C49A19D-StateMachineUpdater: set stopIndex = 0
2023-01-06 13:31:14,407 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:14,407 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-924F9C49A19D: applyIndex: 0
2023-01-06 13:31:14,408 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:14,408 [s0@group-924F9C49A19D-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s0@group-924F9C49A19D-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:14,409 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s0@group-924F9C49A19D-SegmentedRaftLogWorker close()
2023-01-06 13:31:14,411 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:14,411 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:14,412 [MiniRaftCluster-10] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:14,412 [JvmPauseMonitor9] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2023-01-06 13:31:14,412 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:14,413 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:14,413 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:14,413 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:14,418 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-01-06 13:31:14,418 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-EEDE77D24BC0:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:14,418 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:14,418 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:14,418 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:14,419 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:14,419 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:14,419 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:14,419 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-EEDE77D24BC0:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:14,419 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0
2023-01-06 13:31:14,419 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0 does not exist.
2023-01-06 13:31:14,419 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0
2023-01-06 13:31:14,419 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:14,419 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:14,420 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 43289 (custom)
2023-01-06 13:31:14,420 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:14,420 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 33037 (custom)
2023-01-06 13:31:14,420 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:14,420 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 39655 (custom)
2023-01-06 13:31:14,420 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:14,420 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:14,420 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:14,420 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:14,420 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:14,420 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:14,420 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:14,422 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:14,422 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:14,422 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:14,422 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:14,422 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:14,422 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0] (custom)
2023-01-06 13:31:14,423 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-EEDE77D24BC0:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER] returns group-EEDE77D24BC0:java.util.concurrent.CompletableFuture@6d320535[Not completed]
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-EEDE77D24BC0:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-EEDE77D24BC0: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:14,423 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:14,424 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:14,424 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:14,424 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:14,424 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:14,425 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:14,425 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:14,425 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:14,425 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:14,425 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:14,425 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:14,425 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:14,426 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0] (custom)
2023-01-06 13:31:14,426 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0 does not exist. Creating ...
2023-01-06 13:31:14,426 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0
2023-01-06 13:31:14,427 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:14,428 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0/current
2023-01-06 13:31:14,428 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0/sm
2023-01-06 13:31:14,429 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0 has been successfully formatted.
2023-01-06 13:31:14,429 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:14,430 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:14,430 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:14,430 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:14,430 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:14,430 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:14,430 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:14,430 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-EEDE77D24BC0-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:14,431 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:14,432 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:14,432 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:14,432 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:14,432 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-EEDE77D24BC0-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:14,432 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-EEDE77D24BC0-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:14,433 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-EEDE77D24BC0: start as a follower, conf=-1: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:14,433 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-EEDE77D24BC0: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:14,434 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-EEDE77D24BC0-FollowerState
2023-01-06 13:31:14,437 [s0@group-EEDE77D24BC0-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:14,437 [s0@group-EEDE77D24BC0-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:14,439 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-EEDE77D24BC0,id=s0
2023-01-06 13:31:14,439 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:14,439 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:14,439 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:14,440 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2023-01-06 13:31:14,442 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 33037
2023-01-06 13:31:14,443 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 39655
2023-01-06 13:31:14,443 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 43289
2023-01-06 13:31:14,444 [JvmPauseMonitor10] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2023-01-06 13:31:14,444 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:14,445 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-EEDE77D24BC0:t0, leader=null, voted=, raftlog=Memoized:s0@group-EEDE77D24BC0-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:14,445 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-EEDE77D24BC0:t0, leader=null, voted=, raftlog=Memoized:s0@group-EEDE77D24BC0-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-EEDE77D24BC0:t0, leader=null, voted=, raftlog=Memoized:s0@group-EEDE77D24BC0-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestServerRestartOnException(TestRaftServerWithGrpc.java:121)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testServerRestartOnException(TestRaftServerWithGrpc.java:104)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:14,682 [s0@group-EEDE77D24BC0-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-EEDE77D24BC0-FollowerState: change to CANDIDATE, lastRpcElapsedTime:248715980ns, electionTimeout:245ms
2023-01-06 13:31:14,682 [s0@group-EEDE77D24BC0-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-EEDE77D24BC0-FollowerState
2023-01-06 13:31:14,683 [s0@group-EEDE77D24BC0-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-EEDE77D24BC0: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:14,683 [s0@group-EEDE77D24BC0-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:14,683 [s0@group-EEDE77D24BC0-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-EEDE77D24BC0-LeaderElection10
2023-01-06 13:31:14,687 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-EEDE77D24BC0-LeaderElection10 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:14,687 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-EEDE77D24BC0-LeaderElection10 PRE_VOTE round 0: result PASSED (term=0)
2023-01-06 13:31:14,689 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-EEDE77D24BC0-LeaderElection10 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:14,690 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-EEDE77D24BC0-LeaderElection10 ELECTION round 0: result PASSED (term=1)
2023-01-06 13:31:14,690 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-EEDE77D24BC0-LeaderElection10
2023-01-06 13:31:14,690 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-EEDE77D24BC0: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:14,690 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-EEDE77D24BC0: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 266ms
2023-01-06 13:31:14,690 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:14,690 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:14,690 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-01-06 13:31:14,691 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:14,691 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:14,691 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:14,691 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:14,691 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:14,691 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-EEDE77D24BC0-LeaderStateImpl
2023-01-06 13:31:14,692 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-EEDE77D24BC0-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:14,696 [s0@group-EEDE77D24BC0-LeaderElection10] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-EEDE77D24BC0: set configuration 0: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:14,706 [s0@group-EEDE77D24BC0-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-EEDE77D24BC0-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0/current/log_inprogress_0
2023-01-06 13:31:14,896 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-EEDE77D24BC0:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-EEDE77D24BC0-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:14,901 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:14,902 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:14,903 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 43289 (custom)
2023-01-06 13:31:14,903 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:14,903 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 33037 (custom)
2023-01-06 13:31:14,903 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:14,904 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 39655 (custom)
2023-01-06 13:31:14,904 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:14,904 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:14,904 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:14,904 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:14,904 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:14,905 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:14,905 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:14,906 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:14,906 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:14,906 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:14,906 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:14,907 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:14,907 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0] (custom)
2023-01-06 13:31:14,908 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(254)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0
2023-01-06 13:31:14,909 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-EEDE77D24BC0:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER] returns group-EEDE77D24BC0:java.util.concurrent.CompletableFuture@6b7f6ae9[Not completed]
2023-01-06 13:31:14,909 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:14,910 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:14,910 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:14,910 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:14,910 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:14,911 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:14,911 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'Starting a new server with the same address should fail'
2023-01-06 13:31:14,911 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:14,911 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:14,911 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 43289 (custom)
2023-01-06 13:31:14,911 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:14,912 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 33037 (custom)
2023-01-06 13:31:14,912 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:14,912 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 39655 (custom)
2023-01-06 13:31:14,912 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:14,912 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:14,912 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:14,912 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:14,912 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:14,912 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:14,912 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:14,913 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:14,913 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:14,913 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:14,913 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:14,913 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:14,915 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0] (custom)
2023-01-06 13:31:14,916 [pool-14-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-EEDE77D24BC0:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-EEDE77D24BC0
2023-01-06 13:31:14,916 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:14,916 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:14,916 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:14,916 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:14,917 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:14,917 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:14,917 [pool-14-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-EEDE77D24BC0: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:14,917 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:14,918 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:14,918 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:14,918 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:14,918 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:14,918 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:14,918 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:14,918 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:14,919 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:14,919 [pool-14-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:14,919 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(254)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0
2023-01-06 13:31:14,919 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-EEDE77D24BC0:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER] returns group-EEDE77D24BC0:java.util.concurrent.CompletableFuture@941adfe[Not completed]
2023-01-06 13:31:14,920 [pool-15-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-EEDE77D24BC0:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-EEDE77D24BC0
2023-01-06 13:31:14,920 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:14,920 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:14,920 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:14,920 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:14,920 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:14,920 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:14,921 [pool-15-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-EEDE77D24BC0: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:14,921 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:14,921 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:14,921 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:14,921 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:14,922 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:14,922 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:14,922 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:14,922 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:14,922 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:14,922 [pool-15-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:14,922 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:14,922 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:14,923 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0] (custom)
2023-01-06 13:31:14,923 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:14,924 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0/in_use.lock", attempt #1/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-01-06 13:31:15,924 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:15,925 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0/in_use.lock", attempt #2/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-01-06 13:31:16,926 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:16,926 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0/in_use.lock", attempt #3/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-01-06 13:31:17,927 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:17,927 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0/in_use.lock", attempt #4/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-01-06 13:31:18,928 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:18,929 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "Starting a new server with the same address should fail" throws CompletionException
java.util.concurrent.CompletionException: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0. The directory is already locked
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$BiRelay.tryFire(CompletableFuture.java:1423)
	at java.base/java.util.concurrent.CompletableFuture$CoCompletion.tryFire(CompletableFuture.java:1144)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:176)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcb4707ccc/s0/c7bf9a83-023e-4b3a-82ee-eede77d24bc0. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	... 4 more
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-01-06 13:31:18,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:18,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 43289 (custom)
2023-01-06 13:31:18,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:18,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 33037 (custom)
2023-01-06 13:31:18,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:18,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 39655 (custom)
2023-01-06 13:31:18,932 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:18,932 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:18,932 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:18,932 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:18,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:18,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:18,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:18,934 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:18,934 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:18,934 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:18,934 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:18,934 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:18,934 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-EEDE77D24BC0:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-EEDE77D24BC0-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:39655|admin:localhost:43289|client:localhost:33037|dataStream:localhost:45675|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:18,936 [MiniRaftCluster-11] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2023-01-06 13:31:18,937 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-EEDE77D24BC0: shutdown
2023-01-06 13:31:18,937 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-EEDE77D24BC0,id=s0
2023-01-06 13:31:18,937 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-EEDE77D24BC0-LeaderStateImpl
2023-01-06 13:31:18,937 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-EEDE77D24BC0-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:18,937 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-EEDE77D24BC0-StateMachineUpdater: set stopIndex = 0
2023-01-06 13:31:18,938 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-EEDE77D24BC0: applyIndex: 0
2023-01-06 13:31:18,938 [s0@group-EEDE77D24BC0-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s0@group-EEDE77D24BC0-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:18,939 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s0@group-EEDE77D24BC0-SegmentedRaftLogWorker close()
2023-01-06 13:31:18,939 [JvmPauseMonitor10] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2023-01-06 13:31:18,939 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:18,940 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:18,941 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:18,941 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:18,942 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-01-06 13:31:18,944 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-B0135FF607DF:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:18,944 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:18,944 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:18,944 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:18,945 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:18,945 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:18,945 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:18,945 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-B0135FF607DF:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:18,945 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0
2023-01-06 13:31:18,945 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0 does not exist.
2023-01-06 13:31:18,945 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0
2023-01-06 13:31:18,946 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:18,946 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:18,947 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 45555 (custom)
2023-01-06 13:31:18,947 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:18,947 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34645 (custom)
2023-01-06 13:31:18,947 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:18,947 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 40397 (custom)
2023-01-06 13:31:18,947 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:18,948 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:18,948 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:18,948 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:18,948 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:18,948 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:18,948 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:18,950 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:18,951 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:18,951 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:18,951 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:18,951 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:18,951 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0] (custom)
2023-01-06 13:31:18,952 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-B0135FF607DF:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER] returns group-B0135FF607DF:java.util.concurrent.CompletableFuture@2fb59ac[Not completed]
2023-01-06 13:31:18,952 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-B0135FF607DF:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:18,952 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1
2023-01-06 13:31:18,952 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1 does not exist.
2023-01-06 13:31:18,953 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1
2023-01-06 13:31:18,953 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:18,953 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:18,953 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 36655 (custom)
2023-01-06 13:31:18,953 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:18,953 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 40023 (custom)
2023-01-06 13:31:18,953 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:18,953 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 45759 (custom)
2023-01-06 13:31:18,953 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:18,953 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:18,953 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:18,954 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:18,954 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:18,954 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:18,954 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:18,955 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:18,955 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:18,955 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:18,955 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:18,955 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:18,955 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1] (custom)
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-B0135FF607DF:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:18,956 [pool-16-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-B0135FF607DF: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:18,957 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:18,957 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:18,957 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:18,957 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:18,957 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:18,959 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-B0135FF607DF:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER] returns group-B0135FF607DF:java.util.concurrent.CompletableFuture@3a3aae31[Not completed]
2023-01-06 13:31:18,959 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-B0135FF607DF:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:18,959 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2
2023-01-06 13:31:18,959 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2 does not exist.
2023-01-06 13:31:18,959 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2
2023-01-06 13:31:18,959 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:18,959 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:18,959 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:18,959 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:18,959 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:18,959 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:18,959 [pool-16-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:18,959 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 34749 (custom)
2023-01-06 13:31:18,959 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:18,960 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 43051 (custom)
2023-01-06 13:31:18,960 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:18,960 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 43597 (custom)
2023-01-06 13:31:18,960 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:18,960 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:18,960 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:18,960 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:18,960 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:18,960 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:18,960 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:18,961 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-B0135FF607DF:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-B0135FF607DF: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:18,962 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:18,963 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:18,963 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:18,964 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:18,964 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:18,964 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:18,964 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:18,964 [pool-17-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:18,966 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:18,967 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:18,967 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:18,967 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:18,967 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2] (custom)
2023-01-06 13:31:18,968 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-B0135FF607DF:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER] returns group-B0135FF607DF:java.util.concurrent.CompletableFuture@669a3886[Not completed]
2023-01-06 13:31:18,969 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:18,969 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:18,969 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0] (custom)
2023-01-06 13:31:18,969 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df does not exist. Creating ...
2023-01-06 13:31:18,969 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-B0135FF607DF:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-B0135FF607DF: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:18,970 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:18,971 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:18,972 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:18,972 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:18,972 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:18,972 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:18,972 [pool-18-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:18,974 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:18,974 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current
2023-01-06 13:31:18,974 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df/sm
2023-01-06 13:31:18,976 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df has been successfully formatted.
2023-01-06 13:31:18,976 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:18,976 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:18,976 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:18,976 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:18,976 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:18,977 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:18,977 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:18,977 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:18,977 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:18,977 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:18,977 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-B0135FF607DF-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df
2023-01-06 13:31:18,977 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:18,977 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:18,977 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:18,978 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:18,978 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:18,978 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:18,978 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:18,978 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:18,978 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:18,978 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:18,980 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:18,980 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:18,980 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:18,980 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-B0135FF607DF-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:18,980 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-B0135FF607DF-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:18,982 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-B0135FF607DF: start as a follower, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:18,983 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-B0135FF607DF: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:18,983 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-B0135FF607DF-FollowerState
2023-01-06 13:31:18,983 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B0135FF607DF,id=s0
2023-01-06 13:31:18,983 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:18,983 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:18,983 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:18,984 [s0@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:18,984 [s0@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:18,984 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2023-01-06 13:31:18,985 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 34645
2023-01-06 13:31:18,985 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 40397
2023-01-06 13:31:18,986 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 45555
2023-01-06 13:31:18,988 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:18,988 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:18,988 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1] (custom)
2023-01-06 13:31:18,988 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df does not exist. Creating ...
2023-01-06 13:31:18,988 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df
2023-01-06 13:31:18,989 [JvmPauseMonitor11] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2023-01-06 13:31:18,994 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:18,995 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current
2023-01-06 13:31:18,995 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df/sm
2023-01-06 13:31:18,996 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df has been successfully formatted.
2023-01-06 13:31:18,996 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:18,996 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:18,996 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:18,997 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:18,997 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:18,997 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:18,997 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:18,997 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:18,997 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:18,997 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-B0135FF607DF-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:18,998 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:18,999 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:18,999 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:18,999 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:19,000 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-B0135FF607DF-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:19,000 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-B0135FF607DF-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:19,002 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-B0135FF607DF: start as a follower, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,002 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-B0135FF607DF: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:19,002 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,006 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B0135FF607DF,id=s1
2023-01-06 13:31:19,006 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:19,006 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:19,006 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:19,006 [s1@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:19,006 [s1@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:19,007 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2023-01-06 13:31:19,008 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 40023
2023-01-06 13:31:19,008 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 45759
2023-01-06 13:31:19,009 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 36655
2023-01-06 13:31:19,014 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:19,014 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:19,014 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2] (custom)
2023-01-06 13:31:19,014 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df does not exist. Creating ...
2023-01-06 13:31:19,014 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df
2023-01-06 13:31:19,015 [JvmPauseMonitor12] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2023-01-06 13:31:19,017 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:19,017 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current
2023-01-06 13:31:19,017 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df/sm
2023-01-06 13:31:19,020 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df has been successfully formatted.
2023-01-06 13:31:19,020 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:19,020 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:19,020 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:19,020 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:19,020 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:19,020 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:19,020 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-B0135FF607DF-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:19,021 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:19,022 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:19,022 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:19,022 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:19,022 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:19,022 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:19,023 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-B0135FF607DF-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:19,023 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-B0135FF607DF-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:19,023 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-B0135FF607DF: start as a follower, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,023 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-B0135FF607DF: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:19,023 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,023 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B0135FF607DF,id=s2
2023-01-06 13:31:19,023 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:19,024 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:19,024 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:19,024 [s2@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:19,024 [s2@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:19,025 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2023-01-06 13:31:19,025 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 43051
2023-01-06 13:31:19,025 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 43597
2023-01-06 13:31:19,026 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 34749
2023-01-06 13:31:19,026 [JvmPauseMonitor13] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2023-01-06 13:31:19,027 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:19,027 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,027 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:173)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:19,175 [s2@group-B0135FF607DF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-B0135FF607DF-FollowerState: change to CANDIDATE, lastRpcElapsedTime:151519740ns, electionTimeout:150ms
2023-01-06 13:31:19,175 [s2@group-B0135FF607DF-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,175 [s2@group-B0135FF607DF-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-B0135FF607DF: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:19,175 [s2@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:19,176 [s2@group-B0135FF607DF-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-B0135FF607DF-LeaderElection11
2023-01-06 13:31:19,176 [s2@group-B0135FF607DF-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-B0135FF607DF-LeaderElection11 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,178 [s2@group-B0135FF607DF-LeaderElection11-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-01-06 13:31:19,180 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:19,180 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:19,183 [s2@group-B0135FF607DF-LeaderElection11-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-01-06 13:31:19,193 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-B0135FF607DF: receive requestVote(PRE_VOTE, s2, group-B0135FF607DF, 0, (t:0, i:0))
2023-01-06 13:31:19,193 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-B0135FF607DF-FOLLOWER: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:19,193 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-B0135FF607DF replies to PRE_VOTE vote request: s2<-s0#0:OK-t0. Peer's state: s0@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,194 [s0@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:19,194 [s0@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:19,195 [s2@group-B0135FF607DF-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-B0135FF607DF-LeaderElection11: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:19,195 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-B0135FF607DF: receive requestVote(PRE_VOTE, s2, group-B0135FF607DF, 0, (t:0, i:0))
2023-01-06 13:31:19,195 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B0135FF607DF-FOLLOWER: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:19,195 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-B0135FF607DF replies to PRE_VOTE vote request: s2<-s1#0:OK-t0. Peer's state: s1@group-B0135FF607DF:t0, leader=null, voted=, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,195 [s2@group-B0135FF607DF-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s0#0:OK-t0
2023-01-06 13:31:19,195 [s2@group-B0135FF607DF-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-B0135FF607DF-LeaderElection11 PRE_VOTE round 0: result PASSED
2023-01-06 13:31:19,198 [s2@group-B0135FF607DF-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-B0135FF607DF-LeaderElection11 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,205 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:19,205 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:19,206 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-B0135FF607DF: receive requestVote(ELECTION, s2, group-B0135FF607DF, 1, (t:0, i:0))
2023-01-06 13:31:19,206 [grpc-default-executor-1] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-B0135FF607DF-FOLLOWER: accept ELECTION from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:19,206 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-B0135FF607DF: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s2
2023-01-06 13:31:19,206 [grpc-default-executor-1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,206 [s0@group-B0135FF607DF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-B0135FF607DF-FollowerState was interrupted
2023-01-06 13:31:19,207 [grpc-default-executor-1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,207 [s0@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:19,208 [s0@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:19,208 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-B0135FF607DF: receive requestVote(ELECTION, s2, group-B0135FF607DF, 1, (t:0, i:0))
2023-01-06 13:31:19,210 [grpc-default-executor-1] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-B0135FF607DF replies to ELECTION vote request: s2<-s0#0:OK-t1. Peer's state: s0@group-B0135FF607DF:t1, leader=null, voted=s2, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,211 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B0135FF607DF-FOLLOWER: accept ELECTION from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:19,211 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-B0135FF607DF: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s2
2023-01-06 13:31:19,211 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,211 [s2@group-B0135FF607DF-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-B0135FF607DF-LeaderElection11: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:19,211 [s2@group-B0135FF607DF-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s0#0:OK-t1
2023-01-06 13:31:19,211 [s2@group-B0135FF607DF-LeaderElection11] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-B0135FF607DF-LeaderElection11 ELECTION round 0: result PASSED
2023-01-06 13:31:19,211 [s2@group-B0135FF607DF-LeaderElection11] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-B0135FF607DF-LeaderElection11
2023-01-06 13:31:19,211 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-B0135FF607DF: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:19,211 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-B0135FF607DF: change Leader from null to s2 at term 1 for becomeLeader, leader elected after 240ms
2023-01-06 13:31:19,211 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:19,211 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:19,211 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:19,212 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:19,213 [s2@group-B0135FF607DF-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:19,213 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:19,211 [s1@group-B0135FF607DF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-B0135FF607DF-FollowerState was interrupted
2023-01-06 13:31:19,214 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,214 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:19,214 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:19,214 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:19,214 [s2@group-B0135FF607DF-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:19,214 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:19,215 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:19,215 [s2@group-B0135FF607DF-LeaderElection11] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:19,215 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:19,215 [s2@group-B0135FF607DF-LeaderElection11] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-B0135FF607DF-LeaderStateImpl
2023-01-06 13:31:19,215 [s2@group-B0135FF607DF-LeaderElection11] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-B0135FF607DF-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:19,216 [s1@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:19,216 [s1@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:19,217 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-B0135FF607DF replies to ELECTION vote request: s2<-s1#0:OK-t1. Peer's state: s1@group-B0135FF607DF:t1, leader=null, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,226 [s2@group-B0135FF607DF-LeaderElection11] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-B0135FF607DF: set configuration 0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,229 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-B0135FF607DF: change Leader from null to s2 at term 1 for appendEntries, leader elected after 272ms
2023-01-06 13:31:19,231 [s2@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-B0135FF607DF-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_0
2023-01-06 13:31:19,233 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-B0135FF607DF: set configuration 0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,233 [s0-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-B0135FF607DF-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:19,238 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-B0135FF607DF: change Leader from null to s2 at term 1 for appendEntries, leader elected after 275ms
2023-01-06 13:31:19,240 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-B0135FF607DF: set configuration 0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,240 [s1-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-B0135FF607DF-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:19,252 [s0@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-B0135FF607DF-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_0
2023-01-06 13:31:19,254 [s1@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-B0135FF607DF-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_0
2023-01-06 13:31:19,478 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,478 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:19,479 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:19,486 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6F94EE21F350->s0: receive RaftClientReply:client-6F94EE21F350->s0@group-B0135FF607DF, cid=54, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-B0135FF607DF is not the leader s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2023-01-06 13:31:19,494 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:19,494 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:19,504 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6F94EE21F350->s2: receive RaftClientReply:client-6F94EE21F350->s2@group-B0135FF607DF, cid=54, SUCCESS, logIndex=0, commits[s2:c0, s0:c0, s1:c0]
2023-01-06 13:31:19,510 [s2@group-B0135FF607DF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 55@client-6F94EE21F350
2023-01-06 13:31:19,512 [s0@group-B0135FF607DF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 55@client-6F94EE21F350
2023-01-06 13:31:19,512 [s1@group-B0135FF607DF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 55@client-6F94EE21F350
2023-01-06 13:31:19,514 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-6F94EE21F350->s2: receive RaftClientReply:client-6F94EE21F350->s2@group-B0135FF607DF, cid=55, SUCCESS, logIndex=1, commits[s2:c1, s0:c0, s1:c0]
2023-01-06 13:31:19,522 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:19,523 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:19,532 [s2@group-B0135FF607DF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-54A8574A8D37
2023-01-06 13:31:19,535 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-54A8574A8D37->s2: receive RaftClientReply:client-54A8574A8D37->s2@group-B0135FF607DF, cid=1, SUCCESS, logIndex=3, commits[s2:c3, s0:c2, s1:c2]
2023-01-06 13:31:19,536 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block START_TRANSACTION
2023-01-06 13:31:19,536 [s1@group-B0135FF607DF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-54A8574A8D37
2023-01-06 13:31:19,538 [s0@group-B0135FF607DF-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-54A8574A8D37
2023-01-06 13:31:19,539 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:blockRequestor(49)) - Block requestor s2
2023-01-06 13:31:19,540 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:19,540 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,540 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,542 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #1/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:19,615 [s1-server-thread1] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s1: Block request from s2
2023-01-06 13:31:19,615 [s0-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s0: Block request from s2
2023-01-06 13:31:19,642 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:19,643 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,643 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,643 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #2/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:19,744 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:19,744 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,744 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,745 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #3/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:19,845 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:19,846 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,846 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING    LEADER s2@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,846 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #4/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s2
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:19,867 [s0@group-B0135FF607DF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-B0135FF607DF-FollowerState: change to CANDIDATE, lastRpcElapsedTime:329132019ns, electionTimeout:249ms
2023-01-06 13:31:19,867 [s0@group-B0135FF607DF-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,867 [s0@group-B0135FF607DF-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-B0135FF607DF: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-01-06 13:31:19,867 [s0@group-B0135FF607DF-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:19,867 [s0@group-B0135FF607DF-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-B0135FF607DF-LeaderElection12
2023-01-06 13:31:19,868 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-B0135FF607DF: change Leader from s2 to null at term 1 for PRE_VOTE
2023-01-06 13:31:19,868 [s0@group-B0135FF607DF-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-B0135FF607DF-LeaderElection12 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,868 [s0@group-B0135FF607DF-LeaderElection12-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-01-06 13:31:19,868 [s0@group-B0135FF607DF-LeaderElection12-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-01-06 13:31:19,874 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-B0135FF607DF: receive requestVote(PRE_VOTE, s0, group-B0135FF607DF, 1, (t:1, i:4))
2023-01-06 13:31:19,874 [grpc-default-executor-7] WARN  server.RaftServer$Division (LeaderStateImpl.java:checkLeadership(1108)) - s2@group-B0135FF607DF-LeaderStateImpl: Lost leadership on term: 1. Election timeout: 300ms. In charge for: 662ms. Conf: 0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,875 [grpc-default-executor-7] WARN  server.RaftServer$Division (LeaderStateImpl.java:lambda$checkLeadership$18(1112)) - Follower s2@group-B0135FF607DF->s0(c3,m4,n5, attendVote=true, lastRpcSendTime=32, lastRpcResponseTime=336)
2023-01-06 13:31:19,875 [grpc-default-executor-7] WARN  server.RaftServer$Division (LeaderStateImpl.java:lambda$checkLeadership$18(1112)) - Follower s2@group-B0135FF607DF->s1(c3,m4,n5, attendVote=true, lastRpcSendTime=32, lastRpcResponseTime=337)
2023-01-06 13:31:19,875 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-B0135FF607DF: changes role from    LEADER to FOLLOWER at term 1 for StepDownReason:LOST_MAJORITY_HEARTBEATS
2023-01-06 13:31:19,875 [grpc-default-executor-7] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s2: shutdown s2@group-B0135FF607DF-LeaderStateImpl
2023-01-06 13:31:19,875 [s2@group-B0135FF607DF->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s2@group-B0135FF607DF->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:19,875 [grpc-default-executor-7] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s2@group-B0135FF607DF-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:19,875 [s2@group-B0135FF607DF->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s2@group-B0135FF607DF->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:19,877 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-B0135FF607DF: receive requestVote(PRE_VOTE, s0, group-B0135FF607DF, 1, (t:1, i:4))
2023-01-06 13:31:19,877 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B0135FF607DF-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:19,878 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-B0135FF607DF replies to PRE_VOTE vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-B0135FF607DF:t1, leader=s2, voted=s2, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,879 [s0@group-B0135FF607DF-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-B0135FF607DF-LeaderElection12: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:19,879 [s0@group-B0135FF607DF-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t1
2023-01-06 13:31:19,879 [s0@group-B0135FF607DF-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-B0135FF607DF-LeaderElection12 PRE_VOTE round 0: result PASSED
2023-01-06 13:31:19,880 [grpc-default-executor-7] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-B0135FF607DF: change Leader from s2 to null at term 1 for StepDownReason:LOST_MAJORITY_HEARTBEATS
2023-01-06 13:31:19,880 [grpc-default-executor-7] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,881 [s0@group-B0135FF607DF-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-B0135FF607DF-LeaderElection12 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,886 [grpc-default-executor-7] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B0135FF607DF-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:19,886 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-B0135FF607DF replies to PRE_VOTE vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-B0135FF607DF:t1, leader=null, voted=s2, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,888 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-B0135FF607DF: receive requestVote(ELECTION, s0, group-B0135FF607DF, 2, (t:1, i:4))
2023-01-06 13:31:19,888 [grpc-default-executor-7] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-B0135FF607DF-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:19,888 [grpc-default-executor-7] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-B0135FF607DF: change Leader from s2 to null at term 2 for updateCurrentTerm
2023-01-06 13:31:19,888 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-B0135FF607DF: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s0
2023-01-06 13:31:19,888 [grpc-default-executor-7] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,888 [grpc-default-executor-7] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,889 [s1@group-B0135FF607DF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-B0135FF607DF-FollowerState was interrupted
2023-01-06 13:31:19,893 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-B0135FF607DF: receive requestVote(ELECTION, s0, group-B0135FF607DF, 2, (t:1, i:4))
2023-01-06 13:31:19,893 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-B0135FF607DF-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:19,893 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-B0135FF607DF: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s0
2023-01-06 13:31:19,893 [grpc-default-executor-10] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,893 [grpc-default-executor-10] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-B0135FF607DF-FollowerState
2023-01-06 13:31:19,893 [s2@group-B0135FF607DF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-B0135FF607DF-FollowerState was interrupted
2023-01-06 13:31:19,894 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-B0135FF607DF replies to ELECTION vote request: s0<-s1#0:OK-t2. Peer's state: s1@group-B0135FF607DF:t2, leader=null, voted=s0, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,897 [s0@group-B0135FF607DF-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-B0135FF607DF-LeaderElection12: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:19,897 [s0@group-B0135FF607DF-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t2
2023-01-06 13:31:19,897 [s0@group-B0135FF607DF-LeaderElection12] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-B0135FF607DF-LeaderElection12 ELECTION round 0: result PASSED
2023-01-06 13:31:19,897 [s0@group-B0135FF607DF-LeaderElection12] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-B0135FF607DF-LeaderElection12
2023-01-06 13:31:19,897 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-B0135FF607DF: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2023-01-06 13:31:19,897 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-B0135FF607DF: change Leader from null to s0 at term 2 for becomeLeader, leader elected after 29ms
2023-01-06 13:31:19,898 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:19,898 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:19,898 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-01-06 13:31:19,898 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:19,899 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:19,899 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:19,899 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:19,899 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:19,899 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-B0135FF607DF replies to ELECTION vote request: s0<-s2#0:OK-t2. Peer's state: s2@group-B0135FF607DF:t2, leader=null, voted=s0, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,899 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:19,900 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:19,900 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:19,901 [s0@group-B0135FF607DF-LeaderElection12] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:19,901 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:19,901 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:19,901 [s0@group-B0135FF607DF-LeaderElection12] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:19,901 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:19,902 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:19,902 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:19,902 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:19,902 [s0@group-B0135FF607DF-LeaderElection12] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:19,902 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:19,902 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:19,902 [s0@group-B0135FF607DF-LeaderElection12] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = false (custom)
2023-01-06 13:31:19,902 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:19,902 [s0@group-B0135FF607DF-LeaderElection12] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-B0135FF607DF-LeaderStateImpl
2023-01-06 13:31:19,903 [s0@group-B0135FF607DF-LeaderElection12] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s0@group-B0135FF607DF-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2023-01-06 13:31:19,906 [s0@group-B0135FF607DF-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_0-4
2023-01-06 13:31:19,906 [s0@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s0@group-B0135FF607DF-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_0-4
2023-01-06 13:31:19,914 [s0@group-B0135FF607DF-LeaderElection12] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-B0135FF607DF: set configuration 5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,917 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-B0135FF607DF: change Leader from null to s0 at term 2 for appendEntries, leader elected after 37ms
2023-01-06 13:31:19,919 [s0@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-B0135FF607DF-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s0/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_5
2023-01-06 13:31:19,921 [s2-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-B0135FF607DF: set configuration 5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,921 [s2-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s2@group-B0135FF607DF-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2023-01-06 13:31:19,922 [s2@group-B0135FF607DF-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_0-4
2023-01-06 13:31:19,922 [s2@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s2@group-B0135FF607DF-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_0-4
2023-01-06 13:31:19,926 [s1-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-B0135FF607DF: change Leader from null to s0 at term 2 for appendEntries, leader elected after 37ms
2023-01-06 13:31:19,938 [s2@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-B0135FF607DF-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s2/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_5
2023-01-06 13:31:19,943 [s1-server-thread3] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-B0135FF607DF: set configuration 5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:19,944 [s1-server-thread3] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s1@group-B0135FF607DF-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2023-01-06 13:31:19,945 [s1@group-B0135FF607DF-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_0-4
2023-01-06 13:31:19,945 [s1@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s1@group-B0135FF607DF-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_0-4
2023-01-06 13:31:19,947 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:19,947 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-B0135FF607DF:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c5, conf=5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t2, leader=s0, voted=s0, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B0135FF607DF:t2, leader=s0, voted=s0, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,947 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-B0135FF607DF:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c5, conf=5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t2, leader=s0, voted=s0, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c3, conf=5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B0135FF607DF:t2, leader=s0, voted=s0, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c4, conf=5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:19,947 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:lambda$changeLeader$6(435)) - Changed leader from s2 to s0
2023-01-06 13:31:19,947 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:unblockRequestor(54)) - UnBlock requestor s2
2023-01-06 13:31:19,948 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should fail'
2023-01-06 13:31:19,948 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should fail" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-54A8574A8D37->s2: Stream completed: no reply for async request cid=2
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:203)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-54A8574A8D37->s2: Stream completed: no reply for async request cid=2
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:396)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onCompleted(GrpcClientProtocolClient.java:336)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 more
2023-01-06 13:31:19,948 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock START_TRANSACTION
2023-01-06 13:31:19,951 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:19,951 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:19,956 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should timeout'
2023-01-06 13:31:19,960 [s1@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-B0135FF607DF-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcc6693e73/s1/2a1d5702-5052-4ee6-aa3e-b0135ff607df/current/log_inprogress_5
2023-01-06 13:31:20,218 [s1-server-thread1] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s1: unBlock request from s2
2023-01-06 13:31:20,218 [s0-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s0: unBlock request from s2
2023-01-06 13:31:20,225 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s2->s1#15-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2023-01-06 13:31:20,226 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s2@group-B0135FF607DF->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:20,227 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s2@group-B0135FF607DF->s1: nextIndex: updateUnconditionally 5 -> 4
2023-01-06 13:31:20,227 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: s2->s0#23-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2023-01-06 13:31:20,228 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s2@group-B0135FF607DF->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:20,228 [grpc-default-executor-1] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s2@group-B0135FF607DF->s0: nextIndex: updateUnconditionally 5 -> 4
2023-01-06 13:31:20,957 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should timeout" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-54A8574A8D37->s2 request #3 timeout 1s
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:211)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-54A8574A8D37->s2 request #3 timeout 1s
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$timeoutCheck$5(GrpcClientProtocolClient.java:374)
	at java.base/java.util.Optional.ifPresent(Optional.java:183)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.handleReplyFuture(GrpcClientProtocolClient.java:378)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.timeoutCheck(GrpcClientProtocolClient.java:373)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$onNext$3(GrpcClientProtocolClient.java:366)
	at org.apache.ratis.util.TimeoutTimer.lambda$onTimeout$2(TimeoutTimer.java:101)
	at org.apache.ratis.util.LogUtils.runAndLog(LogUtils.java:38)
	at org.apache.ratis.util.LogUtils$1.run(LogUtils.java:79)
	at org.apache.ratis.util.TimeoutTimer$Task.run(TimeoutTimer.java:55)
	at java.base/java.util.TimerThread.mainLoop(Timer.java:556)
	at java.base/java.util.TimerThread.run(Timer.java:506)
2023-01-06 13:31:20,969 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-54A8574A8D37->s2: receive RaftClientReply:client-54A8574A8D37->s2@group-B0135FF607DF, cid=3, FAILED org.apache.ratis.protocol.exceptions.AlreadyClosedException: SlidingWindow$Server:2-OrderedRequestStreamObserver2 is closing: seq = 3 > nextToProcess = -1 will NEVER be processed; request = 3:null, logIndex=0, commits[]
2023-01-06 13:31:23,959 [Time-limited test] WARN  grpc.GrpcUtil (GrpcUtil.java:shutdownManagedChannel(223)) - Timed out gracefully shutting down connection: ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=479, target=localhost:43051}}. 
2023-01-06 13:31:23,964 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:23,964 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:23,964 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:23,964 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:23,964 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:23,964 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-B0135FF607DF:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-B0135FF607DF-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B0135FF607DF:t2, leader=s0, voted=s0, raftlog=Memoized:s1@group-B0135FF607DF-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B0135FF607DF:t2, leader=s0, voted=s0, raftlog=Memoized:s2@group-B0135FF607DF-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:40397|admin:localhost:45555|client:localhost:34645|dataStream:localhost:38045|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:45759|admin:localhost:36655|client:localhost:40023|dataStream:localhost:35869|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:43597|admin:localhost:34749|client:localhost:43051|dataStream:localhost:34347|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:23,967 [MiniRaftCluster-12] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2023-01-06 13:31:23,969 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-B0135FF607DF: shutdown
2023-01-06 13:31:23,969 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B0135FF607DF,id=s0
2023-01-06 13:31:23,969 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-B0135FF607DF-LeaderStateImpl
2023-01-06 13:31:23,969 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-B0135FF607DF-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:23,969 [s0@group-B0135FF607DF->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-B0135FF607DF->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:23,969 [s0@group-B0135FF607DF->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-B0135FF607DF->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:23,974 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#2-t2,previous=(t:2, i:5),leaderCommit=5,initializing? true,entries: size=1, first=(t:2, i:6), METADATAENTRY(c:5)
2023-01-06 13:31:23,974 [MiniRaftCluster-13] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2023-01-06 13:31:23,979 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-B0135FF607DF-StateMachineUpdater: set stopIndex = 6
2023-01-06 13:31:23,981 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-B0135FF607DF: applyIndex: 6
2023-01-06 13:31:23,981 [s0@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s0@group-B0135FF607DF-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:23,981 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-B0135FF607DF->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:23,978 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:23,981 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-B0135FF607DF->s2: nextIndex: updateUnconditionally 7 -> 6
2023-01-06 13:31:23,982 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:23,982 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-B0135FF607DF: shutdown
2023-01-06 13:31:23,982 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B0135FF607DF,id=s1
2023-01-06 13:31:23,982 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-B0135FF607DF-FollowerState
2023-01-06 13:31:23,982 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-B0135FF607DF-StateMachineUpdater: set stopIndex = 6
2023-01-06 13:31:23,982 [s1@group-B0135FF607DF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-B0135FF607DF-FollowerState was interrupted
2023-01-06 13:31:23,982 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-B0135FF607DF: applyIndex: 6
2023-01-06 13:31:23,983 [s1@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s1@group-B0135FF607DF-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:23,983 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:23,983 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:23,983 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s0@group-B0135FF607DF-SegmentedRaftLogWorker close()
2023-01-06 13:31:23,984 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-01-06 13:31:23,985 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s1@group-B0135FF607DF-SegmentedRaftLogWorker close()
2023-01-06 13:31:23,986 [MiniRaftCluster-14] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2023-01-06 13:31:23,988 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:23,988 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:23,988 [MiniRaftCluster-13] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:23,988 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:23,988 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-B0135FF607DF: shutdown
2023-01-06 13:31:23,988 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B0135FF607DF,id=s2
2023-01-06 13:31:23,988 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-B0135FF607DF-FollowerState
2023-01-06 13:31:23,988 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-B0135FF607DF-StateMachineUpdater: set stopIndex = 6
2023-01-06 13:31:23,988 [s2@group-B0135FF607DF-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-B0135FF607DF-FollowerState was interrupted
2023-01-06 13:31:23,990 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(402)) - s0@group-B0135FF607DF->s1-GrpcLogAppender is already stopped
2023-01-06 13:31:23,991 [JvmPauseMonitor12] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2023-01-06 13:31:23,994 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-01-06 13:31:23,995 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-B0135FF607DF: applyIndex: 6
2023-01-06 13:31:23,995 [s2@group-B0135FF607DF-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s2@group-B0135FF607DF-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:23,995 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:23,995 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:23,997 [MiniRaftCluster-14] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-01-06 13:31:23,997 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:23,997 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:23,998 [MiniRaftCluster-12] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:23,998 [JvmPauseMonitor11] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2023-01-06 13:31:23,999 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s2@group-B0135FF607DF-SegmentedRaftLogWorker close()
2023-01-06 13:31:23,999 [MiniRaftCluster-14] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-01-06 13:31:23,999 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:23,999 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:24,000 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:24,000 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:24,000 [MiniRaftCluster-14] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:24,000 [JvmPauseMonitor13] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2023-01-06 13:31:24,002 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:24,002 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:24,002 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:24,003 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:24,010 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-01-06 13:31:24,011 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-A547F6A76AC8:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:24,011 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:24,011 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:24,011 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:24,011 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:24,011 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:24,011 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:24,011 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-A547F6A76AC8:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:24,011 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0
2023-01-06 13:31:24,012 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0 does not exist.
2023-01-06 13:31:24,012 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0
2023-01-06 13:31:24,012 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:24,012 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:24,012 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33579 (custom)
2023-01-06 13:31:24,013 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:24,013 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 34549 (custom)
2023-01-06 13:31:24,013 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:24,013 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 40237 (custom)
2023-01-06 13:31:24,013 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:24,013 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,013 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:24,013 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:24,013 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:24,013 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:24,013 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:24,015 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:24,015 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:24,015 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:24,015 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:24,015 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:24,015 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0] (custom)
2023-01-06 13:31:24,016 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-A547F6A76AC8:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER] returns group-A547F6A76AC8:java.util.concurrent.CompletableFuture@7fc5462b[Not completed]
2023-01-06 13:31:24,016 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-A547F6A76AC8:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:24,016 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1
2023-01-06 13:31:24,016 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1 does not exist.
2023-01-06 13:31:24,016 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1
2023-01-06 13:31:24,016 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:24,017 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:24,017 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 45007 (custom)
2023-01-06 13:31:24,017 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:24,017 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 42853 (custom)
2023-01-06 13:31:24,017 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:24,017 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 32933 (custom)
2023-01-06 13:31:24,017 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:24,017 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,017 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:24,017 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:24,017 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:24,017 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:24,017 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:24,018 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:24,019 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:24,019 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:24,019 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:24,019 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:24,019 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1] (custom)
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-A547F6A76AC8:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-A547F6A76AC8: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:24,020 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:24,021 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:24,021 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:24,021 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:24,021 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:24,022 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:24,022 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:24,022 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:24,022 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:24,022 [pool-19-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:24,030 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-A547F6A76AC8:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER] returns group-A547F6A76AC8:java.util.concurrent.CompletableFuture@bb75db1[Not completed]
2023-01-06 13:31:24,030 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-A547F6A76AC8:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:24,030 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2
2023-01-06 13:31:24,030 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2 does not exist.
2023-01-06 13:31:24,030 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2
2023-01-06 13:31:24,030 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:24,030 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:24,030 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 41379 (custom)
2023-01-06 13:31:24,030 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:24,030 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 45009 (custom)
2023-01-06 13:31:24,030 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:24,030 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 46527 (custom)
2023-01-06 13:31:24,031 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:24,031 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,031 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:24,031 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:24,031 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:24,031 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:24,031 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:24,032 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:24,032 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:24,032 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:24,032 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:24,032 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:24,032 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2] (custom)
2023-01-06 13:31:24,033 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:24,033 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:24,033 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:24,033 [pool-20-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-A547F6A76AC8:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:24,033 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-A547F6A76AC8: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:24,034 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:24,035 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:24,036 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:24,036 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:24,036 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:24,036 [pool-20-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:24,037 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-A547F6A76AC8:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER] returns group-A547F6A76AC8:java.util.concurrent.CompletableFuture@1f33d78e[Not completed]
2023-01-06 13:31:24,037 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:24,037 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:24,037 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0] (custom)
2023-01-06 13:31:24,037 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8 does not exist. Creating ...
2023-01-06 13:31:24,038 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8
2023-01-06 13:31:24,038 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:24,038 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-A547F6A76AC8:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-A547F6A76AC8: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:24,039 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:24,040 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:24,040 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:24,040 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:24,040 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:24,040 [pool-21-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:24,041 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:24,041 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/current
2023-01-06 13:31:24,041 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/sm
2023-01-06 13:31:24,043 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8 has been successfully formatted.
2023-01-06 13:31:24,043 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:24,043 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:24,043 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:24,043 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:24,043 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,043 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:24,043 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-A547F6A76AC8-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:24,044 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:24,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:24,059 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:24,060 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-A547F6A76AC8-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:24,060 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-A547F6A76AC8-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:24,070 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-A547F6A76AC8: start as a follower, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,070 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-A547F6A76AC8: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:24,070 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:24,070 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-A547F6A76AC8,id=s0
2023-01-06 13:31:24,071 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:24,071 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:24,071 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:24,071 [s0@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:24,071 [s0@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:24,072 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2023-01-06 13:31:24,077 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 34549
2023-01-06 13:31:24,079 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 40237
2023-01-06 13:31:24,079 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 33579
2023-01-06 13:31:24,080 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:24,081 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:24,081 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1] (custom)
2023-01-06 13:31:24,081 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8 does not exist. Creating ...
2023-01-06 13:31:24,081 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8
2023-01-06 13:31:24,084 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:24,084 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/current
2023-01-06 13:31:24,084 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/sm
2023-01-06 13:31:24,086 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8 has been successfully formatted.
2023-01-06 13:31:24,086 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:24,086 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:24,086 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:24,086 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:24,086 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,086 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:24,086 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:24,087 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-A547F6A76AC8-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:24,088 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,089 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:24,089 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:24,089 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:24,089 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-A547F6A76AC8-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:24,089 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-A547F6A76AC8-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:24,090 [JvmPauseMonitor14] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2023-01-06 13:31:24,094 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-A547F6A76AC8: start as a follower, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,094 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-A547F6A76AC8: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:24,094 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:24,102 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-A547F6A76AC8,id=s1
2023-01-06 13:31:24,102 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:24,102 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:24,102 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:24,103 [s1@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:24,103 [s1@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:24,125 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2023-01-06 13:31:24,134 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 42853
2023-01-06 13:31:24,134 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 32933
2023-01-06 13:31:24,137 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 45007
2023-01-06 13:31:24,137 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:24,137 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:24,138 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2] (custom)
2023-01-06 13:31:24,138 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8 does not exist. Creating ...
2023-01-06 13:31:24,138 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8
2023-01-06 13:31:24,139 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:24,140 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/current
2023-01-06 13:31:24,140 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/sm
2023-01-06 13:31:24,142 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8 has been successfully formatted.
2023-01-06 13:31:24,142 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:24,143 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:24,143 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:24,143 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:24,143 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,143 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:24,143 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:24,144 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:24,144 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:24,144 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:24,144 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-A547F6A76AC8-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8
2023-01-06 13:31:24,144 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:24,144 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:24,144 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:24,145 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:24,145 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:24,145 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:24,145 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:24,145 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:24,145 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:24,145 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,146 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:24,146 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:24,146 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:24,146 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-A547F6A76AC8-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:24,146 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-A547F6A76AC8-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:24,148 [JvmPauseMonitor15] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2023-01-06 13:31:24,151 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-A547F6A76AC8: start as a follower, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,151 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-A547F6A76AC8: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:24,151 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:24,155 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#1-t2,previous=(t:1, i:4),leaderCommit=5,initializing? true,entries: size=2, first=(t:2, i:5), CONFIGURATIONENTRY(current:id: "s0"
address: "localhost:40397"
dataStreamAddress: "localhost:38045"
clientAddress: "localhost:34645"
adminAddress: "localhost:45555"
startupRole: FOLLOWER
,id: "s1"
address: "localhost:45759"
dataStreamAddress: "localhost:35869"
clientAddress: "localhost:40023"
adminAddress: "localhost:36655"
startupRole: FOLLOWER
,id: "s2"
address: "localhost:43597"
dataStreamAddress: "localhost:34347"
clientAddress: "localhost:43051"
adminAddress: "localhost:34749"
startupRole: FOLLOWER
, old:)
2023-01-06 13:31:24,162 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-A547F6A76AC8,id=s2
2023-01-06 13:31:24,162 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:24,162 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:24,162 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:24,162 [s2@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:24,162 [s2@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:24,167 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2023-01-06 13:31:24,167 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 45009
2023-01-06 13:31:24,168 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 46527
2023-01-06 13:31:24,169 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 41379
2023-01-06 13:31:24,169 [JvmPauseMonitor16] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2023-01-06 13:31:24,169 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:24,170 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s0@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s1@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s2@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:24,170 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s0@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s1@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s2@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s0@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s1@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s2@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientRequestMetrics(TestRaftServerWithGrpc.java:308)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testRaftClientMetrics(TestRaftServerWithGrpc.java:219)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:24,332 [s0@group-A547F6A76AC8-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-A547F6A76AC8-FollowerState: change to CANDIDATE, lastRpcElapsedTime:261744075ns, electionTimeout:260ms
2023-01-06 13:31:24,332 [s0@group-A547F6A76AC8-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:24,332 [s0@group-A547F6A76AC8-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-A547F6A76AC8: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:24,332 [s0@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:24,333 [s0@group-A547F6A76AC8-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-A547F6A76AC8-LeaderElection13
2023-01-06 13:31:24,335 [s0@group-A547F6A76AC8-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-A547F6A76AC8-LeaderElection13 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,336 [s0@group-A547F6A76AC8-LeaderElection13-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-01-06 13:31:24,340 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:24,340 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:24,340 [s0@group-A547F6A76AC8-LeaderElection13-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-01-06 13:31:24,341 [s1@group-A547F6A76AC8-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-A547F6A76AC8-FollowerState: change to CANDIDATE, lastRpcElapsedTime:246240499ns, electionTimeout:237ms
2023-01-06 13:31:24,341 [s1@group-A547F6A76AC8-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:24,341 [s1@group-A547F6A76AC8-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-A547F6A76AC8: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:24,341 [s1@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:24,341 [s1@group-A547F6A76AC8-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-A547F6A76AC8-LeaderElection14
2023-01-06 13:31:24,348 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-A547F6A76AC8: receive requestVote(PRE_VOTE, s0, group-A547F6A76AC8, 0, (t:0, i:0))
2023-01-06 13:31:24,348 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-A547F6A76AC8-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:24,349 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-A547F6A76AC8 replies to PRE_VOTE vote request: s0<-s1#0:OK-t0. Peer's state: s1@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s1@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,349 [s1@group-A547F6A76AC8-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-A547F6A76AC8-LeaderElection14 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,354 [s1@group-A547F6A76AC8-LeaderElection14-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-01-06 13:31:24,354 [s0@group-A547F6A76AC8-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-A547F6A76AC8-LeaderElection13: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:24,354 [s0@group-A547F6A76AC8-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t0
2023-01-06 13:31:24,354 [s0@group-A547F6A76AC8-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-A547F6A76AC8-LeaderElection13 PRE_VOTE round 0: result PASSED
2023-01-06 13:31:24,356 [s0@group-A547F6A76AC8-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-A547F6A76AC8-LeaderElection13 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,357 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-A547F6A76AC8: receive requestVote(PRE_VOTE, s0, group-A547F6A76AC8, 0, (t:0, i:0))
2023-01-06 13:31:24,357 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-A547F6A76AC8-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:24,357 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-A547F6A76AC8 replies to PRE_VOTE vote request: s0<-s2#0:OK-t0. Peer's state: s2@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s2@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,357 [s1@group-A547F6A76AC8-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:24,357 [s1@group-A547F6A76AC8-LeaderElection14] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:24,357 [s1@group-A547F6A76AC8-LeaderElection14-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-01-06 13:31:24,363 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-A547F6A76AC8: receive requestVote(PRE_VOTE, s1, group-A547F6A76AC8, 0, (t:0, i:0))
2023-01-06 13:31:24,363 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-A547F6A76AC8-CANDIDATE: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:24,363 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-A547F6A76AC8 replies to PRE_VOTE vote request: s1<-s0#0:OK-t1. Peer's state: s0@group-A547F6A76AC8:t1, leader=null, voted=s0, raftlog=Memoized:s0@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,366 [s1@group-A547F6A76AC8-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-A547F6A76AC8-LeaderElection14: PRE_VOTE DISCOVERED_A_NEW_TERM (term=1) received 1 response(s) and 0 exception(s):
2023-01-06 13:31:24,366 [s1@group-A547F6A76AC8-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:OK-t1
2023-01-06 13:31:24,366 [s1@group-A547F6A76AC8-LeaderElection14] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-A547F6A76AC8-LeaderElection14 PRE_VOTE round 0: result DISCOVERED_A_NEW_TERM (term=1)
2023-01-06 13:31:24,366 [s1@group-A547F6A76AC8-LeaderElection14] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-A547F6A76AC8: changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM (term=1)
2023-01-06 13:31:24,366 [s1@group-A547F6A76AC8-LeaderElection14] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-A547F6A76AC8-LeaderElection14
2023-01-06 13:31:24,366 [s1@group-A547F6A76AC8-LeaderElection14] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:24,375 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:24,375 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:24,379 [s1@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:24,379 [s1@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:24,379 [s2@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:24,380 [s2@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:24,383 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-A547F6A76AC8: receive requestVote(ELECTION, s0, group-A547F6A76AC8, 1, (t:0, i:0))
2023-01-06 13:31:24,383 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-A547F6A76AC8-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:24,383 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-A547F6A76AC8: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-01-06 13:31:24,383 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:24,383 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:24,384 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-A547F6A76AC8: receive requestVote(PRE_VOTE, s1, group-A547F6A76AC8, 0, (t:0, i:0))
2023-01-06 13:31:24,384 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-A547F6A76AC8-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:24,384 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-A547F6A76AC8 replies to PRE_VOTE vote request: s1<-s2#0:OK-t0. Peer's state: s2@group-A547F6A76AC8:t0, leader=null, voted=, raftlog=Memoized:s2@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,385 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-A547F6A76AC8: receive requestVote(ELECTION, s0, group-A547F6A76AC8, 1, (t:0, i:0))
2023-01-06 13:31:24,385 [grpc-default-executor-2] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-A547F6A76AC8-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:24,385 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-A547F6A76AC8: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s0
2023-01-06 13:31:24,385 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:24,385 [s2@group-A547F6A76AC8-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-A547F6A76AC8-FollowerState was interrupted
2023-01-06 13:31:24,386 [s1@group-A547F6A76AC8-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-A547F6A76AC8-FollowerState was interrupted
2023-01-06 13:31:24,389 [grpc-default-executor-2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:24,389 [s1@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:24,389 [s1@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:24,390 [s2@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:24,390 [s2@group-A547F6A76AC8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:24,390 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-A547F6A76AC8 replies to ELECTION vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-A547F6A76AC8:t1, leader=null, voted=s0, raftlog=Memoized:s1@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,391 [s0@group-A547F6A76AC8-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-A547F6A76AC8-LeaderElection13: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:24,391 [s0@group-A547F6A76AC8-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t1
2023-01-06 13:31:24,391 [s0@group-A547F6A76AC8-LeaderElection13] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-A547F6A76AC8-LeaderElection13 ELECTION round 0: result PASSED
2023-01-06 13:31:24,391 [s0@group-A547F6A76AC8-LeaderElection13] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-A547F6A76AC8-LeaderElection13
2023-01-06 13:31:24,391 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-A547F6A76AC8: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:24,391 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-A547F6A76AC8: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 370ms
2023-01-06 13:31:24,391 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:24,392 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:24,392 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-01-06 13:31:24,392 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:24,392 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:24,392 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:24,392 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:24,392 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:24,392 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:24,392 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,392 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:24,393 [s0@group-A547F6A76AC8-LeaderElection13] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:24,393 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:24,393 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:24,393 [s0@group-A547F6A76AC8-LeaderElection13] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:24,393 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:24,394 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:24,394 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:24,394 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:24,395 [s0@group-A547F6A76AC8-LeaderElection13] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:24,395 [grpc-default-executor-2] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-A547F6A76AC8 replies to ELECTION vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-A547F6A76AC8:t1, leader=null, voted=s0, raftlog=Memoized:s2@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,396 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:24,396 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:24,396 [s0@group-A547F6A76AC8-LeaderElection13] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:24,396 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:24,396 [s0@group-A547F6A76AC8-LeaderElection13] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-A547F6A76AC8-LeaderStateImpl
2023-01-06 13:31:24,397 [s0@group-A547F6A76AC8-LeaderElection13] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-A547F6A76AC8-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:24,409 [s0@group-A547F6A76AC8-LeaderElection13] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-A547F6A76AC8: set configuration 0: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,410 [s0@group-A547F6A76AC8-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-A547F6A76AC8-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s0/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/current/log_inprogress_0
2023-01-06 13:31:24,422 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-A547F6A76AC8: change Leader from null to s0 at term 1 for appendEntries, leader elected after 383ms
2023-01-06 13:31:24,423 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-A547F6A76AC8: change Leader from null to s0 at term 1 for appendEntries, leader elected after 388ms
2023-01-06 13:31:24,429 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-A547F6A76AC8: set configuration 0: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,429 [s2-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-A547F6A76AC8-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:24,434 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-A547F6A76AC8: set configuration 0: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:24,434 [s1-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-A547F6A76AC8-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:24,450 [s2@group-A547F6A76AC8-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-A547F6A76AC8-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s2/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/current/log_inprogress_0
2023-01-06 13:31:24,451 [s1@group-A547F6A76AC8-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-A547F6A76AC8-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpca113ca1c/s1/8ddbb416-48e8-48ef-a1fe-a547f6a76ac8/current/log_inprogress_0
2023-01-06 13:31:24,620 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-A547F6A76AC8:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-A547F6A76AC8:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-A547F6A76AC8:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:24,621 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:24,621 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:24,628 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-EBB7BFEA4EB9->s0: receive RaftClientReply:client-EBB7BFEA4EB9->s0@group-A547F6A76AC8, cid=56, SUCCESS, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2023-01-06 13:31:24,635 [s0@group-A547F6A76AC8-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 57@client-EBB7BFEA4EB9
2023-01-06 13:31:24,636 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-EBB7BFEA4EB9->s0: receive RaftClientReply:client-EBB7BFEA4EB9->s0@group-A547F6A76AC8, cid=57, SUCCESS, logIndex=1, commits[s0:c1, s1:c0, s2:c0]
2023-01-06 13:31:24,638 [s2@group-A547F6A76AC8-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 57@client-EBB7BFEA4EB9
2023-01-06 13:31:24,640 [s1@group-A547F6A76AC8-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 57@client-EBB7BFEA4EB9
2023-01-06 13:31:24,642 [s0-client-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:query(328)) - query testing
2023-01-06 13:31:24,645 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-EBB7BFEA4EB9->s0: receive RaftClientReply:client-EBB7BFEA4EB9->s0@group-A547F6A76AC8, cid=58, SUCCESS, logIndex=0, commits[s0:c2, s1:c1, s2:c1]
2023-01-06 13:31:28,647 [timer6] WARN  grpc.GrpcUtil (GrpcUtil.java:shutdownManagedChannel(223)) - Timed out gracefully shutting down connection: ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=547, target=localhost:34549}}. 
2023-01-06 13:31:28,749 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:28,749 [timer3] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:28,758 [s0-client-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:query(328)) - query testing
2023-01-06 13:31:28,760 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-EBB7BFEA4EB9->s0: receive RaftClientReply:client-EBB7BFEA4EB9->s0@group-A547F6A76AC8, cid=59, SUCCESS, logIndex=0, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:28,762 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:28,762 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:28,772 [null-request--thread1] INFO  server.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(284)) - Failed RaftClientRequest:client-EBB7BFEA4EB9->s2@group-A547F6A76AC8, cid=60, seq=0, Watch-ALL(0), Message:<EMPTY>, reply=RaftClientReply:client-EBB7BFEA4EB9->s2@group-A547F6A76AC8, cid=60, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s2@group-A547F6A76AC8 is not the leader s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s2:c2, s0:c2, s1:c2]
2023-01-06 13:31:28,773 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-EBB7BFEA4EB9->s2: receive RaftClientReply:client-EBB7BFEA4EB9->s2@group-A547F6A76AC8, cid=60, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s2@group-A547F6A76AC8 is not the leader s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s2:c2, s0:c2, s1:c2]
2023-01-06 13:31:28,779 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-EBB7BFEA4EB9->s0: receive RaftClientReply:client-EBB7BFEA4EB9->s0@group-A547F6A76AC8, cid=60, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:28,782 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-EBB7BFEA4EB9->s0: receive RaftClientReply:client-EBB7BFEA4EB9->s0@group-A547F6A76AC8, cid=61, SUCCESS, logIndex=2, commits[s0:c2, s1:c2, s2:c2]
2023-01-06 13:31:28,793 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:28,793 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:28,793 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:28,793 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:28,793 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:28,793 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-A547F6A76AC8:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-A547F6A76AC8:t1, leader=s0, voted=s0, raftlog=Memoized:s1@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-A547F6A76AC8:t1, leader=s0, voted=s0, raftlog=Memoized:s2@group-A547F6A76AC8-SegmentedRaftLog:OPENED:c2, conf=0: peers:[s0|rpc:localhost:40237|admin:localhost:33579|client:localhost:34549|dataStream:localhost:43565|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:32933|admin:localhost:45007|client:localhost:42853|dataStream:localhost:44667|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:46527|admin:localhost:41379|client:localhost:45009|dataStream:localhost:35581|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:28,794 [MiniRaftCluster-15] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2023-01-06 13:31:28,794 [MiniRaftCluster-16] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2023-01-06 13:31:28,798 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:28,798 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-A547F6A76AC8: shutdown
2023-01-06 13:31:28,799 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-A547F6A76AC8,id=s0
2023-01-06 13:31:28,799 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-A547F6A76AC8-LeaderStateImpl
2023-01-06 13:31:28,799 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-A547F6A76AC8-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:28,799 [s0@group-A547F6A76AC8->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-A547F6A76AC8->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:28,800 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#7-t1,previous=(t:1, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:1, i:2), METADATAENTRY(c:1)
2023-01-06 13:31:28,801 [s0@group-A547F6A76AC8->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-A547F6A76AC8->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:28,801 [grpc-default-executor-2] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: null
2023-01-06 13:31:28,801 [grpc-default-executor-8] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-A547F6A76AC8->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:28,802 [grpc-default-executor-8] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-A547F6A76AC8->s1: nextIndex: updateUnconditionally 3 -> 2
2023-01-06 13:31:28,802 [grpc-default-executor-7] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: null
2023-01-06 13:31:28,801 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#7-t1,previous=(t:1, i:1),leaderCommit=1,initializing? true,entries: size=1, first=(t:1, i:2), METADATAENTRY(c:1)
2023-01-06 13:31:28,802 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-A547F6A76AC8->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:28,802 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-A547F6A76AC8->s1: nextIndex: updateUnconditionally 2 -> 1
2023-01-06 13:31:28,803 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-A547F6A76AC8->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:28,803 [grpc-default-executor-1] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-A547F6A76AC8->s2: nextIndex: updateUnconditionally 3 -> 2
2023-01-06 13:31:28,803 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-A547F6A76AC8->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:28,803 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-A547F6A76AC8->s2: nextIndex: updateUnconditionally 2 -> 1
2023-01-06 13:31:28,804 [MiniRaftCluster-15] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-01-06 13:31:28,805 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-A547F6A76AC8-StateMachineUpdater: set stopIndex = 2
2023-01-06 13:31:28,805 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-A547F6A76AC8: applyIndex: 2
2023-01-06 13:31:28,806 [s0@group-A547F6A76AC8-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s0@group-A547F6A76AC8-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:28,807 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:28,808 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-01-06 13:31:28,808 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s0@group-A547F6A76AC8-SegmentedRaftLogWorker close()
2023-01-06 13:31:28,809 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-A547F6A76AC8: shutdown
2023-01-06 13:31:28,809 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-A547F6A76AC8,id=s1
2023-01-06 13:31:28,809 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:28,809 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-A547F6A76AC8-StateMachineUpdater: set stopIndex = 2
2023-01-06 13:31:28,810 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-01-06 13:31:28,810 [MiniRaftCluster-17] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2023-01-06 13:31:28,811 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-A547F6A76AC8: shutdown
2023-01-06 13:31:28,811 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-A547F6A76AC8,id=s2
2023-01-06 13:31:28,811 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-A547F6A76AC8-FollowerState
2023-01-06 13:31:28,811 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-A547F6A76AC8-StateMachineUpdater: set stopIndex = 2
2023-01-06 13:31:28,811 [s2@group-A547F6A76AC8-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-A547F6A76AC8-FollowerState was interrupted
2023-01-06 13:31:28,811 [s1@group-A547F6A76AC8-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-A547F6A76AC8-FollowerState was interrupted
2023-01-06 13:31:28,815 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-A547F6A76AC8: applyIndex: 2
2023-01-06 13:31:28,815 [s1@group-A547F6A76AC8-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s1@group-A547F6A76AC8-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:28,814 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-A547F6A76AC8: applyIndex: 2
2023-01-06 13:31:28,814 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:28,814 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:28,815 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:28,815 [s2@group-A547F6A76AC8-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s2@group-A547F6A76AC8-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:28,817 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:28,817 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:28,819 [MiniRaftCluster-15] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-01-06 13:31:28,819 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:28,819 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:28,820 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s1@group-A547F6A76AC8-SegmentedRaftLogWorker close()
2023-01-06 13:31:28,820 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:28,820 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:28,821 [MiniRaftCluster-16] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:28,821 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:28,821 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:28,821 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s2@group-A547F6A76AC8-SegmentedRaftLogWorker close()
2023-01-06 13:31:28,821 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:28,821 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:28,821 [MiniRaftCluster-17] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:28,822 [MiniRaftCluster-15] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:28,822 [JvmPauseMonitor14] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2023-01-06 13:31:28,822 [JvmPauseMonitor16] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2023-01-06 13:31:28,823 [JvmPauseMonitor15] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2023-01-06 13:31:28,823 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:28,823 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:28,824 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:28,824 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:28,827 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/server.pem: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/server.pem
2023-01-06 13:31:28,828 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/server.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/server.crt
2023-01-06 13:31:28,874 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/ca.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/ca.crt
2023-01-06 13:31:28,877 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/client.pem: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/client.pem
2023-01-06 13:31:28,878 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/client.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/client.crt
2023-01-06 13:31:28,910 [Time-limited test] INFO  security.SecurityTestUtils (SecurityTestUtils.java:getResource(61)) - Getting resource ssl/ca.crt: /home/runner/work/ratis/ratis/ratis-test/target/test-classes/ssl/ca.crt
2023-01-06 13:31:28,914 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-1807AF06B246:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:28,914 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:28,914 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:28,914 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:28,914 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:28,914 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:28,914 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:28,914 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s3, group-1807AF06B246:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:28,915 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3
2023-01-06 13:31:28,915 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3 does not exist.
2023-01-06 13:31:28,915 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3
2023-01-06 13:31:28,915 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:28,915 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:28,915 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 39999 (custom)
2023-01-06 13:31:28,916 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:28,916 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 33515 (custom)
2023-01-06 13:31:28,916 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:28,916 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 45613 (custom)
2023-01-06 13:31:28,916 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:28,916 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:28,916 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:28,916 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:28,916 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:28,916 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:28,916 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:28,919 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:28,919 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:28,919 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:28,919 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:28,919 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:28,920 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3] (custom)
2023-01-06 13:31:28,920 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s3: addNew group-1807AF06B246:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER] returns group-1807AF06B246:java.util.concurrent.CompletableFuture@69b3f8f4[Not completed]
2023-01-06 13:31:28,920 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s4, group-1807AF06B246:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:28,920 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4
2023-01-06 13:31:28,920 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4 does not exist.
2023-01-06 13:31:28,921 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4
2023-01-06 13:31:28,921 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:28,921 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:28,921 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 35867 (custom)
2023-01-06 13:31:28,921 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:28,921 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 40093 (custom)
2023-01-06 13:31:28,921 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:28,921 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 33721 (custom)
2023-01-06 13:31:28,921 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:28,921 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:28,922 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:28,922 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:28,922 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:28,922 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:28,922 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:28,924 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:28,924 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:28,924 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:28,924 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:28,924 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:28,924 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4] (custom)
2023-01-06 13:31:28,925 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:28,926 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:28,926 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:28,926 [pool-22-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s3: new RaftServerImpl for group-1807AF06B246:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:28,926 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:28,926 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:28,926 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:28,927 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:28,927 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:28,927 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:28,927 [pool-22-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s3@group-1807AF06B246: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:28,927 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:28,927 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:28,928 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:28,928 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:28,928 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:28,929 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:28,929 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:28,929 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:28,929 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:28,929 [pool-22-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:28,929 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s4: addNew group-1807AF06B246:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER] returns group-1807AF06B246:java.util.concurrent.CompletableFuture@1d570178[Not completed]
2023-01-06 13:31:28,929 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:28,930 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s5, group-1807AF06B246:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:28,930 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5
2023-01-06 13:31:28,930 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:28,930 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:28,930 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5 does not exist.
2023-01-06 13:31:28,930 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5
2023-01-06 13:31:28,930 [pool-23-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s4: new RaftServerImpl for group-1807AF06B246:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:28,930 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:28,930 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:28,931 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:28,931 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:28,931 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:28,931 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:28,931 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44437 (custom)
2023-01-06 13:31:28,931 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:28,931 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 40501 (custom)
2023-01-06 13:31:28,931 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:28,931 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 45715 (custom)
2023-01-06 13:31:28,931 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:28,932 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:28,932 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:28,932 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:28,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:28,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:28,932 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:28,932 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:28,932 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:28,932 [pool-23-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s4@group-1807AF06B246: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:28,932 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:28,932 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:28,933 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:28,933 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:28,933 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:28,935 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:28,935 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:28,935 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:28,935 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:28,935 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:28,935 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:28,935 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:28,935 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:28,935 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:28,936 [pool-23-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:28,936 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5] (custom)
2023-01-06 13:31:28,941 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s5: addNew group-1807AF06B246:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER] returns group-1807AF06B246:java.util.concurrent.CompletableFuture@174c365f[Not completed]
2023-01-06 13:31:28,942 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:28,942 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:28,942 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3] (custom)
2023-01-06 13:31:28,943 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3/1365bf82-4709-4a2c-af22-1807af06b246 does not exist. Creating ...
2023-01-06 13:31:28,943 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3/1365bf82-4709-4a2c-af22-1807af06b246
2023-01-06 13:31:28,943 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s5: new RaftServerImpl for group-1807AF06B246:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s5@group-1807AF06B246: ConfigurationManager, init=-1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:28,944 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:28,945 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:28,945 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:28,945 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:28,947 [s3-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3/1365bf82-4709-4a2c-af22-1807af06b246/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:28,947 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3/1365bf82-4709-4a2c-af22-1807af06b246/current
2023-01-06 13:31:28,947 [s3-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3/1365bf82-4709-4a2c-af22-1807af06b246/sm
2023-01-06 13:31:28,948 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:28,948 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:28,948 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:28,948 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:28,948 [pool-24-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:28,949 [s3-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3/1365bf82-4709-4a2c-af22-1807af06b246 has been successfully formatted.
2023-01-06 13:31:28,950 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:28,950 [s3-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:28,950 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:28,950 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:28,950 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:28,950 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:28,950 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s3@group-1807AF06B246-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3/1365bf82-4709-4a2c-af22-1807af06b246
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:28,951 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:28,952 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:28,952 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:28,952 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:28,952 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:28,953 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-1807AF06B246-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:28,953 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s3@group-1807AF06B246-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:28,954 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s3@group-1807AF06B246: start as a follower, conf=-1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:28,954 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s3@group-1807AF06B246: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:28,954 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-1807AF06B246-FollowerState
2023-01-06 13:31:28,958 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-1807AF06B246,id=s3
2023-01-06 13:31:28,958 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:28,958 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:28,958 [s3-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:28,959 [s3@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:28,959 [s3@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:28,959 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s3: start RPC server
2023-01-06 13:31:28,959 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 33515
2023-01-06 13:31:28,960 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 45613
2023-01-06 13:31:28,960 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s3: GrpcService started, listening on 39999
2023-01-06 13:31:28,960 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:28,961 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:28,961 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4] (custom)
2023-01-06 13:31:28,961 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4/1365bf82-4709-4a2c-af22-1807af06b246 does not exist. Creating ...
2023-01-06 13:31:28,961 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4/1365bf82-4709-4a2c-af22-1807af06b246
2023-01-06 13:31:28,962 [JvmPauseMonitor17] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s3: Started
2023-01-06 13:31:28,963 [s4-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4/1365bf82-4709-4a2c-af22-1807af06b246/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:28,963 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4/1365bf82-4709-4a2c-af22-1807af06b246/current
2023-01-06 13:31:28,963 [s4-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4/1365bf82-4709-4a2c-af22-1807af06b246/sm
2023-01-06 13:31:28,964 [s4-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4/1365bf82-4709-4a2c-af22-1807af06b246 has been successfully formatted.
2023-01-06 13:31:28,965 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:28,965 [s4-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:28,965 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:28,965 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:28,965 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:28,965 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:28,965 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:28,965 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s4@group-1807AF06B246-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4/1365bf82-4709-4a2c-af22-1807af06b246
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:28,966 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:28,967 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:28,967 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:28,967 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:28,967 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-1807AF06B246-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:28,967 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s4@group-1807AF06B246-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:28,970 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s4@group-1807AF06B246: start as a follower, conf=-1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:28,970 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s4@group-1807AF06B246: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:28,970 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-1807AF06B246-FollowerState
2023-01-06 13:31:28,974 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-1807AF06B246,id=s4
2023-01-06 13:31:28,974 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:28,974 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:28,974 [s4-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:28,975 [s4@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:28,975 [s4@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:28,976 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s4: start RPC server
2023-01-06 13:31:28,976 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 40093
2023-01-06 13:31:28,977 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 33721
2023-01-06 13:31:28,977 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s4: GrpcService started, listening on 35867
2023-01-06 13:31:28,977 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:28,977 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:28,977 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5] (custom)
2023-01-06 13:31:28,978 [s5-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5/1365bf82-4709-4a2c-af22-1807af06b246 does not exist. Creating ...
2023-01-06 13:31:28,978 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5/1365bf82-4709-4a2c-af22-1807af06b246
2023-01-06 13:31:28,978 [JvmPauseMonitor18] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s4: Started
2023-01-06 13:31:28,979 [s5-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5/1365bf82-4709-4a2c-af22-1807af06b246/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:28,979 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5/1365bf82-4709-4a2c-af22-1807af06b246/current
2023-01-06 13:31:28,979 [s5-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5/1365bf82-4709-4a2c-af22-1807af06b246/sm
2023-01-06 13:31:28,980 [s5-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5/1365bf82-4709-4a2c-af22-1807af06b246 has been successfully formatted.
2023-01-06 13:31:28,981 [s5-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:28,981 [s5-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:28,981 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:28,981 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:28,981 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:28,981 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:28,981 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s5@group-1807AF06B246-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5/1365bf82-4709-4a2c-af22-1807af06b246
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:28,982 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:28,983 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:28,983 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:28,983 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:28,984 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:28,984 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:28,984 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:28,984 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s5@group-1807AF06B246-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:28,984 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s5@group-1807AF06B246-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:28,984 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s5@group-1807AF06B246: start as a follower, conf=-1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:28,984 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s5@group-1807AF06B246: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:28,984 [s5-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-1807AF06B246-FollowerState
2023-01-06 13:31:28,986 [s5@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:28,986 [s5-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-1807AF06B246,id=s5
2023-01-06 13:31:28,986 [s5@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:28,986 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:28,987 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:28,987 [s5-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:28,987 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s5: start RPC server
2023-01-06 13:31:28,987 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 40501
2023-01-06 13:31:28,988 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 45715
2023-01-06 13:31:28,988 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s5: GrpcService started, listening on 44437
2023-01-06 13:31:28,988 [JvmPauseMonitor19] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s5: Started
2023-01-06 13:31:28,989 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:28,989 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,022 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-CADB835459DB->s3: receive RaftClientReply:client-CADB835459DB->s3@group-1807AF06B246, cid=62, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s3@group-1807AF06B246 is not the leader, logIndex=0, commits[s3:c-1]
2023-01-06 13:31:29,126 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,126 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,151 [s5@group-1807AF06B246-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s5@group-1807AF06B246-FollowerState: change to CANDIDATE, lastRpcElapsedTime:166292610ns, electionTimeout:164ms
2023-01-06 13:31:29,151 [s5@group-1807AF06B246-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s5: shutdown s5@group-1807AF06B246-FollowerState
2023-01-06 13:31:29,151 [s5@group-1807AF06B246-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s5@group-1807AF06B246: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:29,151 [s5@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:29,151 [s5@group-1807AF06B246-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-1807AF06B246-LeaderElection15
2023-01-06 13:31:29,154 [s5@group-1807AF06B246-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s5@group-1807AF06B246-LeaderElection15 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,155 [s5@group-1807AF06B246-LeaderElection15-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s3
2023-01-06 13:31:29,157 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:29,157 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:29,157 [s5@group-1807AF06B246-LeaderElection15-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s4
2023-01-06 13:31:29,184 [s3@group-1807AF06B246-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s3@group-1807AF06B246-FollowerState: change to CANDIDATE, lastRpcElapsedTime:230097081ns, electionTimeout:225ms
2023-01-06 13:31:29,184 [s3@group-1807AF06B246-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-1807AF06B246-FollowerState
2023-01-06 13:31:29,184 [s3@group-1807AF06B246-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s3@group-1807AF06B246: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:29,184 [s3@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:29,184 [s3@group-1807AF06B246-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-1807AF06B246-LeaderElection16
2023-01-06 13:31:29,187 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s3@group-1807AF06B246: receive requestVote(PRE_VOTE, s5, group-1807AF06B246, 0, (t:0, i:0))
2023-01-06 13:31:29,190 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-CADB835459DB->s4: receive RaftClientReply:client-CADB835459DB->s4@group-1807AF06B246, cid=62, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s4@group-1807AF06B246 is not the leader, logIndex=0, commits[s4:c-1]
2023-01-06 13:31:29,191 [grpc-default-executor-7] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-1807AF06B246-CANDIDATE: accept PRE_VOTE from s5: our priority 0 <= candidate's priority 0
2023-01-06 13:31:29,191 [grpc-default-executor-7] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s3@group-1807AF06B246 replies to PRE_VOTE vote request: s5<-s3#0:OK-t0. Peer's state: s3@group-1807AF06B246:t0, leader=null, voted=, raftlog=Memoized:s3@group-1807AF06B246-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,192 [s3@group-1807AF06B246-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s3@group-1807AF06B246-LeaderElection16 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,195 [s4@group-1807AF06B246-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s4@group-1807AF06B246-FollowerState: change to CANDIDATE, lastRpcElapsedTime:225244509ns, electionTimeout:220ms
2023-01-06 13:31:29,195 [s4@group-1807AF06B246-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-1807AF06B246-FollowerState
2023-01-06 13:31:29,195 [s4@group-1807AF06B246-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s4@group-1807AF06B246: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:29,202 [s3@group-1807AF06B246-LeaderElection16-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s4
2023-01-06 13:31:29,205 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s4@group-1807AF06B246: receive requestVote(PRE_VOTE, s5, group-1807AF06B246, 0, (t:0, i:0))
2023-01-06 13:31:29,203 [s5@group-1807AF06B246-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s5@group-1807AF06B246-LeaderElection15: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:29,206 [s5@group-1807AF06B246-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s5<-s3#0:OK-t0
2023-01-06 13:31:29,206 [s5@group-1807AF06B246-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s5@group-1807AF06B246-LeaderElection15 PRE_VOTE round 0: result PASSED
2023-01-06 13:31:29,210 [s4@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:29,210 [s4@group-1807AF06B246-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-1807AF06B246-LeaderElection17
2023-01-06 13:31:29,214 [s3@group-1807AF06B246-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:29,214 [s3@group-1807AF06B246-LeaderElection16] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:29,214 [s5@group-1807AF06B246-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s5@group-1807AF06B246-LeaderElection15 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,216 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:29,216 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:29,216 [s3@group-1807AF06B246-LeaderElection16-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s5
2023-01-06 13:31:29,219 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s4@group-1807AF06B246-CANDIDATE: accept PRE_VOTE from s5: our priority 0 <= candidate's priority 0
2023-01-06 13:31:29,219 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s4@group-1807AF06B246 replies to PRE_VOTE vote request: s5<-s4#0:OK-t0. Peer's state: s4@group-1807AF06B246:t0, leader=null, voted=, raftlog=Memoized:s4@group-1807AF06B246-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,221 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s3@group-1807AF06B246: receive requestVote(ELECTION, s5, group-1807AF06B246, 1, (t:0, i:0))
2023-01-06 13:31:29,221 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-1807AF06B246-CANDIDATE: accept ELECTION from s5: our priority 0 <= candidate's priority 0
2023-01-06 13:31:29,221 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s3@group-1807AF06B246: changes role from CANDIDATE to FOLLOWER at term 1 for candidate:s5
2023-01-06 13:31:29,221 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s3: shutdown s3@group-1807AF06B246-LeaderElection16
2023-01-06 13:31:29,221 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s3: start s3@group-1807AF06B246-FollowerState
2023-01-06 13:31:29,224 [s4@group-1807AF06B246-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s4@group-1807AF06B246-LeaderElection17 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,229 [s3@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:29,230 [s3@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:29,232 [s4@group-1807AF06B246-LeaderElection17-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s3
2023-01-06 13:31:29,233 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s4@group-1807AF06B246: receive requestVote(ELECTION, s5, group-1807AF06B246, 1, (t:0, i:0))
2023-01-06 13:31:29,233 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s4@group-1807AF06B246-CANDIDATE: accept ELECTION from s5: our priority 0 <= candidate's priority 0
2023-01-06 13:31:29,233 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s4@group-1807AF06B246: changes role from CANDIDATE to FOLLOWER at term 1 for candidate:s5
2023-01-06 13:31:29,233 [grpc-default-executor-10] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s4: shutdown s4@group-1807AF06B246-LeaderElection17
2023-01-06 13:31:29,233 [grpc-default-executor-10] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s4: start s4@group-1807AF06B246-FollowerState
2023-01-06 13:31:29,235 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s3@group-1807AF06B246 replies to ELECTION vote request: s5<-s3#0:OK-t1. Peer's state: s3@group-1807AF06B246:t1, leader=null, voted=s5, raftlog=Memoized:s3@group-1807AF06B246-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,237 [s4@group-1807AF06B246-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:29,237 [s4@group-1807AF06B246-LeaderElection17] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:29,237 [s4@group-1807AF06B246-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s4@group-1807AF06B246-LeaderElection17: PRE_VOTE REJECTED received 0 response(s) and 0 exception(s):
2023-01-06 13:31:29,237 [s4@group-1807AF06B246-LeaderElection17] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s4@group-1807AF06B246-LeaderElection17 PRE_VOTE round 0: result REJECTED
2023-01-06 13:31:29,242 [s4@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:29,245 [s4@group-1807AF06B246-LeaderElection17-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s5
2023-01-06 13:31:29,245 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s4@group-1807AF06B246 replies to ELECTION vote request: s5<-s4#0:OK-t1. Peer's state: s4@group-1807AF06B246:t1, leader=null, voted=s5, raftlog=Memoized:s4@group-1807AF06B246-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,248 [s4@group-1807AF06B246-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:29,250 [s5@group-1807AF06B246-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s5@group-1807AF06B246-LeaderElection15: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:29,250 [s5@group-1807AF06B246-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s5<-s3#0:OK-t1
2023-01-06 13:31:29,250 [s5@group-1807AF06B246-LeaderElection15] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s5@group-1807AF06B246-LeaderElection15 ELECTION round 0: result PASSED
2023-01-06 13:31:29,250 [s5@group-1807AF06B246-LeaderElection15] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s5: shutdown s5@group-1807AF06B246-LeaderElection15
2023-01-06 13:31:29,250 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s5@group-1807AF06B246: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:29,251 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s5@group-1807AF06B246: change Leader from null to s5 at term 1 for becomeLeader, leader elected after 306ms
2023-01-06 13:31:29,251 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:29,251 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-01-06 13:31:29,251 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 1MB (=1048576) (custom)
2023-01-06 13:31:29,251 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:29,251 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:29,251 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:29,251 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-01-06 13:31:29,251 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:29,251 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:29,252 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:29,253 [s5@group-1807AF06B246-LeaderElection15] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s5: start s5@group-1807AF06B246-LeaderStateImpl
2023-01-06 13:31:29,253 [s5@group-1807AF06B246-LeaderElection15] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s5@group-1807AF06B246-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:29,266 [s5@group-1807AF06B246-LeaderElection15] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s5@group-1807AF06B246: set configuration 0: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,268 [s5@group-1807AF06B246-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s5@group-1807AF06B246-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s5/1365bf82-4709-4a2c-af22-1807af06b246/current/log_inprogress_0
2023-01-06 13:31:29,294 [s4-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s4@group-1807AF06B246: change Leader from null to s5 at term 1 for appendEntries, leader elected after 361ms
2023-01-06 13:31:29,294 [s4-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s4@group-1807AF06B246: set configuration 0: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,294 [s4-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s4@group-1807AF06B246-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:29,314 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s5@group-1807AF06B246: receive requestVote(PRE_VOTE, s3, group-1807AF06B246, 0, (t:0, i:0))
2023-01-06 13:31:29,314 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s5@group-1807AF06B246-LEADER: reject PRE_VOTE from s3: this server is the leader and still has leadership
2023-01-06 13:31:29,314 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s5@group-1807AF06B246 replies to PRE_VOTE vote request: s3<-s5#0:FAIL-t1. Peer's state: s5@group-1807AF06B246:t1, leader=s5, voted=s5, raftlog=Memoized:s5@group-1807AF06B246-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,315 [s4@group-1807AF06B246-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s4@group-1807AF06B246-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s4/1365bf82-4709-4a2c-af22-1807af06b246/current/log_inprogress_0
2023-01-06 13:31:29,328 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s3@group-1807AF06B246: change Leader from null to s5 at term 1 for appendEntries, leader elected after 400ms
2023-01-06 13:31:29,329 [s3-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s3@group-1807AF06B246: set configuration 0: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,329 [s3-server-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s3@group-1807AF06B246-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:29,342 [s3@group-1807AF06B246-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s3@group-1807AF06B246-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc8d796aac/s3/1365bf82-4709-4a2c-af22-1807af06b246/current/log_inprogress_0
2023-01-06 13:31:29,347 [s3@group-1807AF06B246-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s3@group-1807AF06B246-LeaderElection16: PRE_VOTE DISCOVERED_A_NEW_TERM (term=1) received 1 response(s) and 0 exception(s):
2023-01-06 13:31:29,347 [s3@group-1807AF06B246-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s3<-s5#0:FAIL-t1
2023-01-06 13:31:29,347 [s3@group-1807AF06B246-LeaderElection16] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s3@group-1807AF06B246-LeaderElection16 PRE_VOTE round 0: result DISCOVERED_A_NEW_TERM (term=1)
2023-01-06 13:31:29,357 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s5@group-1807AF06B246: receive requestVote(PRE_VOTE, s4, group-1807AF06B246, 0, (t:0, i:0))
2023-01-06 13:31:29,358 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s5@group-1807AF06B246-LEADER: reject PRE_VOTE from s4: this server is the leader and still has leadership
2023-01-06 13:31:29,358 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s5@group-1807AF06B246 replies to PRE_VOTE vote request: s4<-s5#0:FAIL-t1. Peer's state: s5@group-1807AF06B246:t1, leader=s5, voted=s5, raftlog=Memoized:s5@group-1807AF06B246-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,363 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,363 [timer5] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,380 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s4@group-1807AF06B246: receive requestVote(PRE_VOTE, s3, group-1807AF06B246, 0, (t:0, i:0))
2023-01-06 13:31:29,380 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s4@group-1807AF06B246-FOLLOWER: reject PRE_VOTE from s3: this server is a follower and still has a valid leader s5
2023-01-06 13:31:29,381 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s4@group-1807AF06B246 replies to PRE_VOTE vote request: s3<-s4#0:FAIL-t1. Peer's state: s4@group-1807AF06B246:t1, leader=s5, voted=s5, raftlog=Memoized:s4@group-1807AF06B246-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,404 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s3@group-1807AF06B246: receive requestVote(PRE_VOTE, s4, group-1807AF06B246, 0, (t:0, i:0))
2023-01-06 13:31:29,405 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s3@group-1807AF06B246-FOLLOWER: reject PRE_VOTE from s4: this server is a follower and still has a valid leader s5
2023-01-06 13:31:29,405 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s3@group-1807AF06B246 replies to PRE_VOTE vote request: s4<-s3#0:FAIL-t1. Peer's state: s3@group-1807AF06B246:t1, leader=s5, voted=s5, raftlog=Memoized:s3@group-1807AF06B246-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:29,425 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-CADB835459DB->s5: receive RaftClientReply:client-CADB835459DB->s5@group-1807AF06B246, cid=62, SUCCESS, logIndex=0, commits[s5:c0, s3:c0, s4:c0]
2023-01-06 13:31:29,434 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 63@client-CADB835459DB
2023-01-06 13:31:29,437 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 63@client-CADB835459DB
2023-01-06 13:31:29,442 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 63@client-CADB835459DB
2023-01-06 13:31:29,449 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-CADB835459DB->s5: receive RaftClientReply:client-CADB835459DB->s5@group-1807AF06B246, cid=63, SUCCESS, logIndex=1, commits[s5:c1, s3:c0, s4:c0]
2023-01-06 13:31:29,452 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block FLUSH_STATE_MACHINE_DATA
2023-01-06 13:31:29,452 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,452 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,455 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,455 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,468 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,468 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,484 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,484 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,495 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,496 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,498 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,498 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,507 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,507 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,515 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,515 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,531 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,531 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,551 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,552 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,563 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,563 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,676 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3DBB29E46DFD->s5: receive RaftClientReply:client-3DBB29E46DFD->s5@group-1807AF06B246, cid=72, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,680 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2F02A297ACD0->s5: receive RaftClientReply:client-2F02A297ACD0->s5@group-1807AF06B246, cid=64, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,690 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-0DED663FA5FA->s5: receive RaftClientReply:client-0DED663FA5FA->s5@group-1807AF06B246, cid=78, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,691 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-CA37F3015CCD->s5: receive RaftClientReply:client-CA37F3015CCD->s5@group-1807AF06B246, cid=68, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,714 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-1902C55FAF90->s5: receive RaftClientReply:client-1902C55FAF90->s5@group-1807AF06B246, cid=66, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,717 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-98EDD429909E->s5: receive RaftClientReply:client-98EDD429909E->s5@group-1807AF06B246, cid=74, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,719 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-D538756E3CC8->s5: receive RaftClientReply:client-D538756E3CC8->s5@group-1807AF06B246, cid=76, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,720 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-0B3B760D7A4A->s5: receive RaftClientReply:client-0B3B760D7A4A->s5@group-1807AF06B246, cid=80, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,723 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-1346DFE6A45B->s5: receive RaftClientReply:client-1346DFE6A45B->s5@group-1807AF06B246, cid=70, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,737 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-ABA30021360C->s5: receive RaftClientReply:client-ABA30021360C->s5@group-1807AF06B246, cid=82, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,745 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-5B6D592501F7->s5: receive RaftClientReply:client-5B6D592501F7->s5@group-1807AF06B246, cid=84, SUCCESS, logIndex=2, commits[s5:c2, s3:c2, s4:c2]
2023-01-06 13:31:29,766 [grpc-default-executor-10] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=message 8
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s5@group-1807AF06B246: Failed to acquire a pending write request for RaftClientRequest:client-ABA30021360C->s5@group-1807AF06B246, cid=83, seq=2, RW, Message:6d6573736167652038
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s5@group-1807AF06B246: Failed to acquire a pending write request for RaftClientRequest:client-ABA30021360C->s5@group-1807AF06B246, cid=83, seq=2, RW, Message:6d6573736167652038
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:771)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:882)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:820)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:820)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:890)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:889)
		... 7 more
2023-01-06 13:31:29,867 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock FLUSH_STATE_MACHINE_DATA
2023-01-06 13:31:29,870 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 3, message 3 -> (t:1, i:3), STATEMACHINELOGENTRY, 73@client-3DBB29E46DFD
2023-01-06 13:31:29,870 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 4, 2nd Messag... -> (t:1, i:4), STATEMACHINELOGENTRY, 65@client-2F02A297ACD0
2023-01-06 13:31:29,870 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 5, message 1 -> (t:1, i:5), STATEMACHINELOGENTRY, 69@client-CA37F3015CCD
2023-01-06 13:31:29,870 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 6, message 6 -> (t:1, i:6), STATEMACHINELOGENTRY, 79@client-0DED663FA5FA
2023-01-06 13:31:29,871 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 7, message 0 -> (t:1, i:7), STATEMACHINELOGENTRY, 67@client-1902C55FAF90
2023-01-06 13:31:29,871 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 8, message 4 -> (t:1, i:8), STATEMACHINELOGENTRY, 75@client-98EDD429909E
2023-01-06 13:31:29,871 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 77@client-D538756E3CC8
2023-01-06 13:31:29,871 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 10, message 7 -> (t:1, i:10), STATEMACHINELOGENTRY, 81@client-0B3B760D7A4A
2023-01-06 13:31:29,871 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 11, message 2 -> (t:1, i:11), STATEMACHINELOGENTRY, 71@client-1346DFE6A45B
2023-01-06 13:31:29,872 [s5@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s5: put 12, message 9 -> (t:1, i:12), STATEMACHINELOGENTRY, 85@client-5B6D592501F7
2023-01-06 13:31:29,872 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:29,873 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:29,874 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-0DED663FA5FA->s5: receive RaftClientReply:client-0DED663FA5FA->s5@group-1807AF06B246, cid=79, SUCCESS, logIndex=6, commits[s5:c12, s3:c2, s4:c2]
2023-01-06 13:31:29,875 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2F02A297ACD0->s5: receive RaftClientReply:client-2F02A297ACD0->s5@group-1807AF06B246, cid=65, SUCCESS, logIndex=4, commits[s5:c12, s3:c2, s4:c2]
2023-01-06 13:31:29,876 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-CA37F3015CCD->s5: receive RaftClientReply:client-CA37F3015CCD->s5@group-1807AF06B246, cid=69, SUCCESS, logIndex=5, commits[s5:c12, s3:c2, s4:c2]
2023-01-06 13:31:29,876 [grpc-default-executor-7] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-1902C55FAF90->s5: receive RaftClientReply:client-1902C55FAF90->s5@group-1807AF06B246, cid=67, SUCCESS, logIndex=7, commits[s5:c12, s3:c2, s4:c2]
2023-01-06 13:31:29,876 [grpc-default-executor-2] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-98EDD429909E->s5: receive RaftClientReply:client-98EDD429909E->s5@group-1807AF06B246, cid=75, SUCCESS, logIndex=8, commits[s5:c12, s3:c2, s4:c2]
2023-01-06 13:31:29,876 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-D538756E3CC8->s5: receive RaftClientReply:client-D538756E3CC8->s5@group-1807AF06B246, cid=77, SUCCESS, logIndex=9, commits[s5:c12, s3:c2, s4:c2]
2023-01-06 13:31:29,876 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-5B6D592501F7->s5: receive RaftClientReply:client-5B6D592501F7->s5@group-1807AF06B246, cid=85, SUCCESS, logIndex=12, commits[s5:c12, s3:c2, s4:c2]
2023-01-06 13:31:29,877 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-0B3B760D7A4A->s5: receive RaftClientReply:client-0B3B760D7A4A->s5@group-1807AF06B246, cid=81, SUCCESS, logIndex=10, commits[s5:c12, s3:c2, s4:c2]
2023-01-06 13:31:29,878 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3DBB29E46DFD->s5: receive RaftClientReply:client-3DBB29E46DFD->s5@group-1807AF06B246, cid=73, SUCCESS, logIndex=3, commits[s5:c12, s3:c2, s4:c2]
2023-01-06 13:31:29,880 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 3, message 3 -> (t:1, i:3), STATEMACHINELOGENTRY, 73@client-3DBB29E46DFD
2023-01-06 13:31:29,880 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 4, 2nd Messag... -> (t:1, i:4), STATEMACHINELOGENTRY, 65@client-2F02A297ACD0
2023-01-06 13:31:29,881 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 5, message 1 -> (t:1, i:5), STATEMACHINELOGENTRY, 69@client-CA37F3015CCD
2023-01-06 13:31:29,881 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 6, message 6 -> (t:1, i:6), STATEMACHINELOGENTRY, 79@client-0DED663FA5FA
2023-01-06 13:31:29,881 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 7, message 0 -> (t:1, i:7), STATEMACHINELOGENTRY, 67@client-1902C55FAF90
2023-01-06 13:31:29,881 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 8, message 4 -> (t:1, i:8), STATEMACHINELOGENTRY, 75@client-98EDD429909E
2023-01-06 13:31:29,881 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 77@client-D538756E3CC8
2023-01-06 13:31:29,882 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 3, message 3 -> (t:1, i:3), STATEMACHINELOGENTRY, 73@client-3DBB29E46DFD
2023-01-06 13:31:29,882 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 4, 2nd Messag... -> (t:1, i:4), STATEMACHINELOGENTRY, 65@client-2F02A297ACD0
2023-01-06 13:31:29,883 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 5, message 1 -> (t:1, i:5), STATEMACHINELOGENTRY, 69@client-CA37F3015CCD
2023-01-06 13:31:29,883 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 6, message 6 -> (t:1, i:6), STATEMACHINELOGENTRY, 79@client-0DED663FA5FA
2023-01-06 13:31:29,883 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 7, message 0 -> (t:1, i:7), STATEMACHINELOGENTRY, 67@client-1902C55FAF90
2023-01-06 13:31:29,883 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 8, message 4 -> (t:1, i:8), STATEMACHINELOGENTRY, 75@client-98EDD429909E
2023-01-06 13:31:29,884 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 9, message 5 -> (t:1, i:9), STATEMACHINELOGENTRY, 77@client-D538756E3CC8
2023-01-06 13:31:29,884 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 10, message 7 -> (t:1, i:10), STATEMACHINELOGENTRY, 81@client-0B3B760D7A4A
2023-01-06 13:31:29,884 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 11, message 2 -> (t:1, i:11), STATEMACHINELOGENTRY, 71@client-1346DFE6A45B
2023-01-06 13:31:29,884 [s4@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s4: put 12, message 9 -> (t:1, i:12), STATEMACHINELOGENTRY, 85@client-5B6D592501F7
2023-01-06 13:31:29,884 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-1346DFE6A45B->s5: receive RaftClientReply:client-1346DFE6A45B->s5@group-1807AF06B246, cid=71, SUCCESS, logIndex=11, commits[s5:c12, s3:c2, s4:c2]
2023-01-06 13:31:29,885 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 10, message 7 -> (t:1, i:10), STATEMACHINELOGENTRY, 81@client-0B3B760D7A4A
2023-01-06 13:31:29,885 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 11, message 2 -> (t:1, i:11), STATEMACHINELOGENTRY, 71@client-1346DFE6A45B
2023-01-06 13:31:29,885 [s3@group-1807AF06B246-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s3: put 12, message 9 -> (t:1, i:12), STATEMACHINELOGENTRY, 85@client-5B6D592501F7
2023-01-06 13:31:29,912 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-FE8EF3269C66->s5: receive RaftClientReply:client-FE8EF3269C66->s5@group-1807AF06B246, cid=86, SUCCESS, logIndex=14, commits[s5:c14, s3:c12, s4:c12]
2023-01-06 13:31:29,927 [grpc-default-executor-4] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=1025kb (=1049600)-message
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s5@group-1807AF06B246: Failed to acquire a pending write request for RaftClientRequest:client-FE8EF3269C66->s5@group-1807AF06B246, cid=87, seq=2, RW, Message:cb5717e691d81fcafee4...(size=1049600)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s5@group-1807AF06B246: Failed to acquire a pending write request for RaftClientRequest:client-FE8EF3269C66->s5@group-1807AF06B246, cid=87, seq=2, RW, Message:cb5717e691d81fcafee4...(size=1049600)
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:771)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:882)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:820)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:820)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:890)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:889)
		... 7 more
2023-01-06 13:31:30,204 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:30,204 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:30,204 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:30,204 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:30,204 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:30,204 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s3:  RUNNING  FOLLOWER s3@group-1807AF06B246:t1, leader=s5, voted=s5, raftlog=Memoized:s3@group-1807AF06B246-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s4:  RUNNING  FOLLOWER s4@group-1807AF06B246:t1, leader=s5, voted=s5, raftlog=Memoized:s4@group-1807AF06B246-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s5:  RUNNING    LEADER s5@group-1807AF06B246:t1, leader=s5, voted=s5, raftlog=Memoized:s5@group-1807AF06B246-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s3|rpc:localhost:45613|admin:localhost:39999|client:localhost:33515|dataStream:localhost:35323|priority:0|startupRole:FOLLOWER, s4|rpc:localhost:33721|admin:localhost:35867|client:localhost:40093|dataStream:localhost:45701|priority:0|startupRole:FOLLOWER, s5|rpc:localhost:45715|admin:localhost:44437|client:localhost:40501|dataStream:localhost:45385|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:30,210 [MiniRaftCluster-18] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s3: close
2023-01-06 13:31:30,211 [MiniRaftCluster-19] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s4: close
2023-01-06 13:31:30,216 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:30,217 [s3-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s3@group-1807AF06B246: shutdown
2023-01-06 13:31:30,217 [s3-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-1807AF06B246,id=s3
2023-01-06 13:31:30,217 [s3-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s3: shutdown s3@group-1807AF06B246-FollowerState
2023-01-06 13:31:30,217 [s3-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s3@group-1807AF06B246-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:30,217 [s3@group-1807AF06B246-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s3@group-1807AF06B246-FollowerState was interrupted
2023-01-06 13:31:30,217 [s3-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s3@group-1807AF06B246: applyIndex: 14
2023-01-06 13:31:30,217 [s3@group-1807AF06B246-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s3@group-1807AF06B246-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:30,218 [s4-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s4@group-1807AF06B246: shutdown
2023-01-06 13:31:30,218 [s4-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-1807AF06B246,id=s4
2023-01-06 13:31:30,218 [s4-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s4: shutdown s4@group-1807AF06B246-FollowerState
2023-01-06 13:31:30,218 [s4-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s4@group-1807AF06B246-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:30,218 [s4@group-1807AF06B246-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s4@group-1807AF06B246-FollowerState was interrupted
2023-01-06 13:31:30,218 [s4-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s4@group-1807AF06B246: applyIndex: 14
2023-01-06 13:31:30,218 [s4@group-1807AF06B246-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s4@group-1807AF06B246-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:30,218 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:30,220 [MiniRaftCluster-18] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s4 Close channels
2023-01-06 13:31:30,222 [MiniRaftCluster-19] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s3 Close channels
2023-01-06 13:31:30,223 [s4-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s4@group-1807AF06B246-SegmentedRaftLogWorker close()
2023-01-06 13:31:30,224 [MiniRaftCluster-18] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s5 Close channels
2023-01-06 13:31:30,224 [MiniRaftCluster-19] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s5 Close channels
2023-01-06 13:31:30,224 [MiniRaftCluster-20] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s5: close
2023-01-06 13:31:30,225 [s3-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s3@group-1807AF06B246-SegmentedRaftLogWorker close()
2023-01-06 13:31:30,225 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:30,225 [s5-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s5@group-1807AF06B246: shutdown
2023-01-06 13:31:30,225 [s5-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-1807AF06B246,id=s5
2023-01-06 13:31:30,225 [s5-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s5: shutdown s5@group-1807AF06B246-LeaderStateImpl
2023-01-06 13:31:30,226 [s5-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s5@group-1807AF06B246-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:30,226 [s5@group-1807AF06B246->s3-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s5@group-1807AF06B246->s3-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:30,226 [s5@group-1807AF06B246->s4-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s5@group-1807AF06B246->s4-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:30,227 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s3: Completed APPEND_ENTRIES, lastRequest: null
2023-01-06 13:31:30,227 [grpc-default-executor-10] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s4: Completed APPEND_ENTRIES, lastRequest: s5->s4#34-t1,previous=(t:1, i:12),leaderCommit=12,initializing? true,entries: size=2, first=(t:1, i:13), METADATAENTRY(c:3)
2023-01-06 13:31:30,227 [grpc-default-executor-4] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s3: Completed APPEND_ENTRIES, lastRequest: s5->s3#34-t1,previous=(t:1, i:12),leaderCommit=12,initializing? true,entries: size=2, first=(t:1, i:13), METADATAENTRY(c:3)
2023-01-06 13:31:30,227 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s4: Completed APPEND_ENTRIES, lastRequest: null
2023-01-06 13:31:30,227 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:30,228 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:30,228 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:30,228 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s5@group-1807AF06B246->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:30,231 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s5@group-1807AF06B246->s3: nextIndex: updateUnconditionally 15 -> 14
2023-01-06 13:31:30,231 [s5-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s5@group-1807AF06B246-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:30,228 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:30,231 [s5-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s5@group-1807AF06B246: applyIndex: 14
2023-01-06 13:31:30,231 [s5@group-1807AF06B246-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s5@group-1807AF06B246-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:30,232 [MiniRaftCluster-20] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s3 Close channels
2023-01-06 13:31:30,233 [s5-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s5@group-1807AF06B246-SegmentedRaftLogWorker close()
2023-01-06 13:31:30,233 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s5@group-1807AF06B246->s3-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:30,234 [grpc-default-executor-4] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(136)) - s5@group-1807AF06B246->s3-GrpcLogAppender: Failed to getClient for s3
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s5 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:120)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:57)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:414)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:30,234 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s5@group-1807AF06B246->s4-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:30,234 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s5@group-1807AF06B246->s4: nextIndex: updateUnconditionally 15 -> 14
2023-01-06 13:31:30,235 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:30,235 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:30,235 [MiniRaftCluster-18] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s3: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:30,235 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:30,235 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:30,235 [MiniRaftCluster-19] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s4: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:30,236 [JvmPauseMonitor17] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s3: Stopped
2023-01-06 13:31:30,236 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s5@group-1807AF06B246->s4-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:30,236 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s5@group-1807AF06B246->s4: nextIndex: updateUnconditionally 14 -> 13
2023-01-06 13:31:30,236 [JvmPauseMonitor18] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s4: Stopped
2023-01-06 13:31:30,238 [MiniRaftCluster-20] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s4 Close channels
2023-01-06 13:31:30,238 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:30,238 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:30,239 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:30,239 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:30,241 [MiniRaftCluster-20] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s5: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:30,241 [JvmPauseMonitor19] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s5: Stopped
2023-01-06 13:31:30,241 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:30,242 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:30,242 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:30,242 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:30,243 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-01-06 13:31:30,243 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-AEF85E4C33F4:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:30,243 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:30,243 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:30,243 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:30,243 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:30,244 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:30,244 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:30,244 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-AEF85E4C33F4:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:30,244 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0
2023-01-06 13:31:30,244 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0 does not exist.
2023-01-06 13:31:30,244 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0
2023-01-06 13:31:30,244 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:30,245 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:30,245 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 40861 (custom)
2023-01-06 13:31:30,245 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:30,245 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 43789 (custom)
2023-01-06 13:31:30,245 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:30,245 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35399 (custom)
2023-01-06 13:31:30,245 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,245 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,245 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,245 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:30,245 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:30,246 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:30,246 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:30,247 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:30,247 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:30,247 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:30,247 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:30,247 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:30,247 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0] (custom)
2023-01-06 13:31:30,248 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-AEF85E4C33F4:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER] returns group-AEF85E4C33F4:java.util.concurrent.CompletableFuture@5864c6b4[Not completed]
2023-01-06 13:31:30,248 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-AEF85E4C33F4:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:30,248 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1
2023-01-06 13:31:30,248 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1 does not exist.
2023-01-06 13:31:30,248 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1
2023-01-06 13:31:30,248 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:30,248 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:30,249 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 38847 (custom)
2023-01-06 13:31:30,249 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:30,249 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37167 (custom)
2023-01-06 13:31:30,249 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:30,249 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 46847 (custom)
2023-01-06 13:31:30,249 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,249 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,249 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,249 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:30,249 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:30,249 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:30,249 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:30,250 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:30,250 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:30,250 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:30,250 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:30,250 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:30,251 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1] (custom)
2023-01-06 13:31:30,251 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:30,251 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:30,251 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:30,251 [pool-25-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-AEF85E4C33F4:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:30,251 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:30,251 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:30,251 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:30,251 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:30,251 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:30,252 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:30,252 [pool-25-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-AEF85E4C33F4: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:30,252 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:30,252 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:30,252 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:30,252 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:30,252 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:30,253 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:30,253 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:30,253 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:30,253 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:30,253 [pool-25-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:30,257 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-AEF85E4C33F4:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER] returns group-AEF85E4C33F4:java.util.concurrent.CompletableFuture@2cb1cffb[Not completed]
2023-01-06 13:31:30,258 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-AEF85E4C33F4:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:30,258 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2
2023-01-06 13:31:30,258 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2 does not exist.
2023-01-06 13:31:30,258 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2
2023-01-06 13:31:30,258 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:30,258 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:30,258 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33297 (custom)
2023-01-06 13:31:30,258 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:30,258 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37473 (custom)
2023-01-06 13:31:30,258 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:30,258 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41809 (custom)
2023-01-06 13:31:30,258 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,258 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,259 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,259 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:30,259 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:30,259 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:30,259 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:30,260 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:30,260 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:30,260 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:30,260 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:30,260 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:30,260 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2] (custom)
2023-01-06 13:31:30,261 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:30,261 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:30,261 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:30,261 [pool-26-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-AEF85E4C33F4:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:30,261 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:30,261 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:30,261 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:30,261 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:30,261 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:30,261 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:30,262 [pool-26-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-AEF85E4C33F4: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:30,262 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:30,262 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:30,262 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:30,262 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:30,262 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:30,263 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:30,263 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:30,263 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:30,263 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:30,263 [pool-26-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:30,263 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-AEF85E4C33F4:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER] returns group-AEF85E4C33F4:java.util.concurrent.CompletableFuture@4ea08ef4[Not completed]
2023-01-06 13:31:30,264 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:30,264 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:30,264 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0] (custom)
2023-01-06 13:31:30,264 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0/9a40ed2a-a39a-4994-8919-aef85e4c33f4 does not exist. Creating ...
2023-01-06 13:31:30,264 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0/9a40ed2a-a39a-4994-8919-aef85e4c33f4
2023-01-06 13:31:30,265 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:30,265 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:30,265 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:30,265 [pool-27-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-AEF85E4C33F4:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:30,265 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:30,265 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:30,265 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:30,265 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:30,266 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:30,266 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:30,266 [pool-27-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-AEF85E4C33F4: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:30,266 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:30,266 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:30,266 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:30,266 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:30,266 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:30,267 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:30,267 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:30,267 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:30,267 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:30,267 [pool-27-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:30,268 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0/9a40ed2a-a39a-4994-8919-aef85e4c33f4/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:30,268 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0/9a40ed2a-a39a-4994-8919-aef85e4c33f4/current
2023-01-06 13:31:30,268 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0/9a40ed2a-a39a-4994-8919-aef85e4c33f4/sm
2023-01-06 13:31:30,269 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0/9a40ed2a-a39a-4994-8919-aef85e4c33f4 has been successfully formatted.
2023-01-06 13:31:30,270 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:30,270 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:30,270 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:30,270 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:30,270 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,270 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:30,270 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:30,270 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:30,270 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-AEF85E4C33F4-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0/9a40ed2a-a39a-4994-8919-aef85e4c33f4
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:30,271 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,272 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:30,272 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:30,272 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:30,272 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-AEF85E4C33F4-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:30,272 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-AEF85E4C33F4-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:30,274 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-AEF85E4C33F4: start as a follower, conf=-1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,274 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-AEF85E4C33F4: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:30,274 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-AEF85E4C33F4-FollowerState
2023-01-06 13:31:30,274 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-AEF85E4C33F4,id=s0
2023-01-06 13:31:30,274 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:30,274 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:30,274 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:30,275 [s0@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:30,275 [s0@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:30,275 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2023-01-06 13:31:30,275 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 43789
2023-01-06 13:31:30,276 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 35399
2023-01-06 13:31:30,276 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 40861
2023-01-06 13:31:30,276 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:30,276 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:30,277 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1] (custom)
2023-01-06 13:31:30,277 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1/9a40ed2a-a39a-4994-8919-aef85e4c33f4 does not exist. Creating ...
2023-01-06 13:31:30,277 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1/9a40ed2a-a39a-4994-8919-aef85e4c33f4
2023-01-06 13:31:30,277 [JvmPauseMonitor20] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2023-01-06 13:31:30,279 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1/9a40ed2a-a39a-4994-8919-aef85e4c33f4/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:30,279 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1/9a40ed2a-a39a-4994-8919-aef85e4c33f4/current
2023-01-06 13:31:30,279 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1/9a40ed2a-a39a-4994-8919-aef85e4c33f4/sm
2023-01-06 13:31:30,282 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1/9a40ed2a-a39a-4994-8919-aef85e4c33f4 has been successfully formatted.
2023-01-06 13:31:30,282 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:30,282 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-AEF85E4C33F4-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1/9a40ed2a-a39a-4994-8919-aef85e4c33f4
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:30,283 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:30,284 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:30,284 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:30,284 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:30,284 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:30,284 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:30,284 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:30,284 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:30,284 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,285 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:30,285 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:30,285 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:30,285 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-AEF85E4C33F4-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:30,285 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-AEF85E4C33F4-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:30,286 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-AEF85E4C33F4: start as a follower, conf=-1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,286 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-AEF85E4C33F4: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:30,286 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-AEF85E4C33F4-FollowerState
2023-01-06 13:31:30,286 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-AEF85E4C33F4,id=s1
2023-01-06 13:31:30,286 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:30,286 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:30,286 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:30,286 [s1@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:30,287 [s1@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:30,287 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2023-01-06 13:31:30,287 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 37167
2023-01-06 13:31:30,289 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 46847
2023-01-06 13:31:30,290 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 38847
2023-01-06 13:31:30,292 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:30,292 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:30,292 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2] (custom)
2023-01-06 13:31:30,292 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2/9a40ed2a-a39a-4994-8919-aef85e4c33f4 does not exist. Creating ...
2023-01-06 13:31:30,292 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2/9a40ed2a-a39a-4994-8919-aef85e4c33f4
2023-01-06 13:31:30,292 [JvmPauseMonitor21] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2023-01-06 13:31:30,294 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2/9a40ed2a-a39a-4994-8919-aef85e4c33f4/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:30,294 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2/9a40ed2a-a39a-4994-8919-aef85e4c33f4/current
2023-01-06 13:31:30,294 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2/9a40ed2a-a39a-4994-8919-aef85e4c33f4/sm
2023-01-06 13:31:30,296 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2/9a40ed2a-a39a-4994-8919-aef85e4c33f4 has been successfully formatted.
2023-01-06 13:31:30,296 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:30,296 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:30,296 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:30,296 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:30,296 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,296 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:30,296 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-AEF85E4C33F4-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2/9a40ed2a-a39a-4994-8919-aef85e4c33f4
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:30,297 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,298 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:30,298 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:30,298 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:30,298 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-AEF85E4C33F4-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:30,298 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-AEF85E4C33F4-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:30,299 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-AEF85E4C33F4: start as a follower, conf=-1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,299 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-AEF85E4C33F4: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:30,299 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-AEF85E4C33F4-FollowerState
2023-01-06 13:31:30,299 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-AEF85E4C33F4,id=s2
2023-01-06 13:31:30,299 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:30,299 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:30,299 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:30,300 [s2@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:30,300 [s2@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:30,300 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2023-01-06 13:31:30,300 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 37473
2023-01-06 13:31:30,301 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 41809
2023-01-06 13:31:30,301 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 33297
2023-01-06 13:31:30,302 [JvmPauseMonitor22] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2023-01-06 13:31:30,302 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,302 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,310 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A5DB950792B5->s0: receive RaftClientReply:client-A5DB950792B5->s0@group-AEF85E4C33F4, cid=88, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-AEF85E4C33F4 is not the leader, logIndex=0, commits[s0:c-1]
2023-01-06 13:31:30,412 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,412 [timer1] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,424 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A5DB950792B5->s2: receive RaftClientReply:client-A5DB950792B5->s2@group-AEF85E4C33F4, cid=88, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s2@group-AEF85E4C33F4 is not the leader, logIndex=0, commits[s2:c-1]
2023-01-06 13:31:30,453 [s1@group-AEF85E4C33F4-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-AEF85E4C33F4-FollowerState: change to CANDIDATE, lastRpcElapsedTime:167100855ns, electionTimeout:166ms
2023-01-06 13:31:30,453 [s1@group-AEF85E4C33F4-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-AEF85E4C33F4-FollowerState
2023-01-06 13:31:30,453 [s1@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-AEF85E4C33F4: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:30,453 [s1@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:30,453 [s1@group-AEF85E4C33F4-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-AEF85E4C33F4-LeaderElection18
2023-01-06 13:31:30,458 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-AEF85E4C33F4-LeaderElection18 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,459 [s1@group-AEF85E4C33F4-LeaderElection18-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-01-06 13:31:30,459 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:30,459 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:30,459 [s1@group-AEF85E4C33F4-LeaderElection18-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-01-06 13:31:30,466 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-AEF85E4C33F4: receive requestVote(PRE_VOTE, s1, group-AEF85E4C33F4, 0, (t:0, i:0))
2023-01-06 13:31:30,466 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-AEF85E4C33F4-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:30,466 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-AEF85E4C33F4 replies to PRE_VOTE vote request: s1<-s2#0:OK-t0. Peer's state: s2@group-AEF85E4C33F4:t0, leader=null, voted=, raftlog=Memoized:s2@group-AEF85E4C33F4-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,470 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-AEF85E4C33F4-LeaderElection18: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:30,470 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s2#0:OK-t0
2023-01-06 13:31:30,470 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-AEF85E4C33F4-LeaderElection18 PRE_VOTE round 0: result PASSED
2023-01-06 13:31:30,470 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-AEF85E4C33F4: receive requestVote(PRE_VOTE, s1, group-AEF85E4C33F4, 0, (t:0, i:0))
2023-01-06 13:31:30,471 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-AEF85E4C33F4-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:30,471 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-AEF85E4C33F4 replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-AEF85E4C33F4:t0, leader=null, voted=, raftlog=Memoized:s0@group-AEF85E4C33F4-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,472 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-AEF85E4C33F4-LeaderElection18 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,474 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-AEF85E4C33F4: receive requestVote(ELECTION, s1, group-AEF85E4C33F4, 1, (t:0, i:0))
2023-01-06 13:31:30,474 [grpc-default-executor-4] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-AEF85E4C33F4-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:30,474 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-AEF85E4C33F4: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s1
2023-01-06 13:31:30,474 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-AEF85E4C33F4-FollowerState
2023-01-06 13:31:30,474 [s0@group-AEF85E4C33F4-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-AEF85E4C33F4-FollowerState was interrupted
2023-01-06 13:31:30,476 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:30,476 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:30,476 [grpc-default-executor-4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-AEF85E4C33F4-FollowerState
2023-01-06 13:31:30,477 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-AEF85E4C33F4: receive requestVote(ELECTION, s1, group-AEF85E4C33F4, 1, (t:0, i:0))
2023-01-06 13:31:30,482 [s0@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:30,482 [s0@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:30,482 [grpc-default-executor-10] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-AEF85E4C33F4-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:30,482 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-AEF85E4C33F4: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s1
2023-01-06 13:31:30,482 [grpc-default-executor-10] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-AEF85E4C33F4-FollowerState
2023-01-06 13:31:30,482 [s2@group-AEF85E4C33F4-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-AEF85E4C33F4-FollowerState was interrupted
2023-01-06 13:31:30,483 [grpc-default-executor-10] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-AEF85E4C33F4-FollowerState
2023-01-06 13:31:30,483 [s2@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:30,483 [s2@group-AEF85E4C33F4-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:30,484 [grpc-default-executor-4] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-AEF85E4C33F4 replies to ELECTION vote request: s1<-s0#0:OK-t1. Peer's state: s0@group-AEF85E4C33F4:t1, leader=null, voted=s1, raftlog=Memoized:s0@group-AEF85E4C33F4-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,485 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-AEF85E4C33F4-LeaderElection18: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:30,485 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:OK-t1
2023-01-06 13:31:30,485 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-AEF85E4C33F4-LeaderElection18 ELECTION round 0: result PASSED
2023-01-06 13:31:30,485 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-AEF85E4C33F4-LeaderElection18
2023-01-06 13:31:30,485 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-AEF85E4C33F4: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:30,485 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-AEF85E4C33F4: change Leader from null to s1 at term 1 for becomeLeader, leader elected after 223ms
2023-01-06 13:31:30,485 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:30,485 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-01-06 13:31:30,485 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 1MB (=1048576) (custom)
2023-01-06 13:31:30,487 [grpc-default-executor-10] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-AEF85E4C33F4 replies to ELECTION vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-AEF85E4C33F4:t1, leader=null, voted=s1, raftlog=Memoized:s2@group-AEF85E4C33F4-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,487 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:30,487 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:30,487 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:30,487 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 10 (custom)
2023-01-06 13:31:30,487 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:30,487 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:30,488 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:30,489 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-AEF85E4C33F4-LeaderStateImpl
2023-01-06 13:31:30,489 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-AEF85E4C33F4-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:30,499 [s1@group-AEF85E4C33F4-LeaderElection18] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-AEF85E4C33F4: set configuration 0: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,504 [s1@group-AEF85E4C33F4-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-AEF85E4C33F4-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s1/9a40ed2a-a39a-4994-8919-aef85e4c33f4/current/log_inprogress_0
2023-01-06 13:31:30,507 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-AEF85E4C33F4: change Leader from null to s1 at term 1 for appendEntries, leader elected after 240ms
2023-01-06 13:31:30,507 [s0-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-AEF85E4C33F4: change Leader from null to s1 at term 1 for appendEntries, leader elected after 255ms
2023-01-06 13:31:30,511 [s0-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-AEF85E4C33F4: set configuration 0: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,511 [s0-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-AEF85E4C33F4-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:30,514 [s2-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-AEF85E4C33F4: set configuration 0: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:30,514 [s2-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-AEF85E4C33F4-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:30,526 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,526 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,535 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A5DB950792B5->s0: receive RaftClientReply:client-A5DB950792B5->s0@group-AEF85E4C33F4, cid=88, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-AEF85E4C33F4 is not the leader s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s0:c-1, s1:c0, s2:c-1]
2023-01-06 13:31:30,537 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,537 [timer0] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,543 [s2@group-AEF85E4C33F4-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-AEF85E4C33F4-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s2/9a40ed2a-a39a-4994-8919-aef85e4c33f4/current/log_inprogress_0
2023-01-06 13:31:30,546 [s0@group-AEF85E4C33F4-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-AEF85E4C33F4-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcd18aac6/s0/9a40ed2a-a39a-4994-8919-aef85e4c33f4/current/log_inprogress_0
2023-01-06 13:31:30,555 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A5DB950792B5->s1: receive RaftClientReply:client-A5DB950792B5->s1@group-AEF85E4C33F4, cid=88, SUCCESS, logIndex=0, commits[s1:c0, s0:c0, s2:c0]
2023-01-06 13:31:30,559 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 89@client-A5DB950792B5
2023-01-06 13:31:30,561 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 89@client-A5DB950792B5
2023-01-06 13:31:30,562 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 89@client-A5DB950792B5
2023-01-06 13:31:30,563 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-A5DB950792B5->s1: receive RaftClientReply:client-A5DB950792B5->s1@group-AEF85E4C33F4, cid=89, SUCCESS, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2023-01-06 13:31:30,565 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block FLUSH_STATE_MACHINE_DATA
2023-01-06 13:31:30,565 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,565 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,567 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,567 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,569 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,570 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,572 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-FFF43C5AC225->s1: receive RaftClientReply:client-FFF43C5AC225->s1@group-AEF85E4C33F4, cid=90, SUCCESS, logIndex=2, commits[s1:c2, s0:c1, s2:c1]
2023-01-06 13:31:30,578 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,582 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-49AE0139DED2->s1: receive RaftClientReply:client-49AE0139DED2->s1@group-AEF85E4C33F4, cid=94, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-01-06 13:31:30,579 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-406FA0802DC2->s1: receive RaftClientReply:client-406FA0802DC2->s1@group-AEF85E4C33F4, cid=92, SUCCESS, logIndex=2, commits[s1:c2, s0:c1, s2:c1]
2023-01-06 13:31:30,583 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,587 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,588 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,591 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,591 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,593 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-43D98142AA69->s1: receive RaftClientReply:client-43D98142AA69->s1@group-AEF85E4C33F4, cid=96, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-01-06 13:31:30,594 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-62CABE1CC565->s1: receive RaftClientReply:client-62CABE1CC565->s1@group-AEF85E4C33F4, cid=98, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-01-06 13:31:30,599 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,600 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,602 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2F8B03239BBD->s1: receive RaftClientReply:client-2F8B03239BBD->s1@group-AEF85E4C33F4, cid=100, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-01-06 13:31:30,610 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,610 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,612 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-429285D5F98C->s1: receive RaftClientReply:client-429285D5F98C->s1@group-AEF85E4C33F4, cid=102, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-01-06 13:31:30,618 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,619 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,621 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-89DF4A888C93->s1: receive RaftClientReply:client-89DF4A888C93->s1@group-AEF85E4C33F4, cid=104, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-01-06 13:31:30,627 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,627 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,627 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-343DCADF0B89->s1: receive RaftClientReply:client-343DCADF0B89->s1@group-AEF85E4C33F4, cid=106, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-01-06 13:31:30,631 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,632 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,633 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-BD7F59B6EFEB->s1: receive RaftClientReply:client-BD7F59B6EFEB->s1@group-AEF85E4C33F4, cid=108, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-01-06 13:31:30,642 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-C738FC55DA35->s1: receive RaftClientReply:client-C738FC55DA35->s1@group-AEF85E4C33F4, cid=110, SUCCESS, logIndex=2, commits[s1:c2, s0:c2, s2:c2]
2023-01-06 13:31:30,647 [grpc-default-executor-10] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=message 9
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s1@group-AEF85E4C33F4: Failed to acquire a pending write request for RaftClientRequest:client-C738FC55DA35->s1@group-AEF85E4C33F4, cid=111, seq=2, RW, Message:6d6573736167652039
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s1@group-AEF85E4C33F4: Failed to acquire a pending write request for RaftClientRequest:client-C738FC55DA35->s1@group-AEF85E4C33F4, cid=111, seq=2, RW, Message:6d6573736167652039
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:771)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:882)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:820)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:820)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:890)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:889)
		... 7 more
2023-01-06 13:31:30,937 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock FLUSH_STATE_MACHINE_DATA
2023-01-06 13:31:30,939 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 91@client-FFF43C5AC225
2023-01-06 13:31:30,940 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 4, message 1 -> (t:1, i:4), STATEMACHINELOGENTRY, 95@client-49AE0139DED2
2023-01-06 13:31:30,940 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 97@client-43D98142AA69
2023-01-06 13:31:30,940 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 6, message 3 -> (t:1, i:6), STATEMACHINELOGENTRY, 99@client-62CABE1CC565
2023-01-06 13:31:30,940 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:30,941 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:30,942 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-62CABE1CC565->s1: receive RaftClientReply:client-62CABE1CC565->s1@group-AEF85E4C33F4, cid=99, SUCCESS, logIndex=6, commits[s1:c12, s0:c2, s2:c2]
2023-01-06 13:31:30,942 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-43D98142AA69->s1: receive RaftClientReply:client-43D98142AA69->s1@group-AEF85E4C33F4, cid=97, SUCCESS, logIndex=5, commits[s1:c12, s0:c2, s2:c2]
2023-01-06 13:31:30,942 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-49AE0139DED2->s1: receive RaftClientReply:client-49AE0139DED2->s1@group-AEF85E4C33F4, cid=95, SUCCESS, logIndex=4, commits[s1:c12, s0:c2, s2:c2]
2023-01-06 13:31:30,941 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 7, message 4 -> (t:1, i:7), STATEMACHINELOGENTRY, 101@client-2F8B03239BBD
2023-01-06 13:31:30,943 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 8, message 5 -> (t:1, i:8), STATEMACHINELOGENTRY, 103@client-429285D5F98C
2023-01-06 13:31:30,943 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 9, message 0 -> (t:1, i:9), STATEMACHINELOGENTRY, 93@client-406FA0802DC2
2023-01-06 13:31:30,943 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 105@client-89DF4A888C93
2023-01-06 13:31:30,943 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 107@client-343DCADF0B89
2023-01-06 13:31:30,943 [s1@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 109@client-BD7F59B6EFEB
2023-01-06 13:31:30,942 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-FFF43C5AC225->s1: receive RaftClientReply:client-FFF43C5AC225->s1@group-AEF85E4C33F4, cid=91, SUCCESS, logIndex=3, commits[s1:c3, s0:c2, s2:c2]
2023-01-06 13:31:30,946 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-2F8B03239BBD->s1: receive RaftClientReply:client-2F8B03239BBD->s1@group-AEF85E4C33F4, cid=101, SUCCESS, logIndex=7, commits[s1:c12, s0:c2, s2:c2]
2023-01-06 13:31:30,946 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 91@client-FFF43C5AC225
2023-01-06 13:31:30,946 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 4, message 1 -> (t:1, i:4), STATEMACHINELOGENTRY, 95@client-49AE0139DED2
2023-01-06 13:31:30,947 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 97@client-43D98142AA69
2023-01-06 13:31:30,947 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 6, message 3 -> (t:1, i:6), STATEMACHINELOGENTRY, 99@client-62CABE1CC565
2023-01-06 13:31:30,947 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 7, message 4 -> (t:1, i:7), STATEMACHINELOGENTRY, 101@client-2F8B03239BBD
2023-01-06 13:31:30,947 [grpc-default-executor-10] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-429285D5F98C->s1: receive RaftClientReply:client-429285D5F98C->s1@group-AEF85E4C33F4, cid=103, SUCCESS, logIndex=8, commits[s1:c12, s0:c2, s2:c2]
2023-01-06 13:31:30,947 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 8, message 5 -> (t:1, i:8), STATEMACHINELOGENTRY, 103@client-429285D5F98C
2023-01-06 13:31:30,948 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 9, message 0 -> (t:1, i:9), STATEMACHINELOGENTRY, 93@client-406FA0802DC2
2023-01-06 13:31:30,948 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 105@client-89DF4A888C93
2023-01-06 13:31:30,948 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 107@client-343DCADF0B89
2023-01-06 13:31:30,948 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-89DF4A888C93->s1: receive RaftClientReply:client-89DF4A888C93->s1@group-AEF85E4C33F4, cid=105, SUCCESS, logIndex=10, commits[s1:c12, s0:c2, s2:c2]
2023-01-06 13:31:30,948 [s2@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 109@client-BD7F59B6EFEB
2023-01-06 13:31:30,949 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, 2nd Messag... -> (t:1, i:3), STATEMACHINELOGENTRY, 91@client-FFF43C5AC225
2023-01-06 13:31:30,949 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 4, message 1 -> (t:1, i:4), STATEMACHINELOGENTRY, 95@client-49AE0139DED2
2023-01-06 13:31:30,949 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 5, message 2 -> (t:1, i:5), STATEMACHINELOGENTRY, 97@client-43D98142AA69
2023-01-06 13:31:30,949 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 6, message 3 -> (t:1, i:6), STATEMACHINELOGENTRY, 99@client-62CABE1CC565
2023-01-06 13:31:30,950 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 7, message 4 -> (t:1, i:7), STATEMACHINELOGENTRY, 101@client-2F8B03239BBD
2023-01-06 13:31:30,950 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 8, message 5 -> (t:1, i:8), STATEMACHINELOGENTRY, 103@client-429285D5F98C
2023-01-06 13:31:30,950 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 9, message 0 -> (t:1, i:9), STATEMACHINELOGENTRY, 93@client-406FA0802DC2
2023-01-06 13:31:30,950 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 10, message 6 -> (t:1, i:10), STATEMACHINELOGENTRY, 105@client-89DF4A888C93
2023-01-06 13:31:30,950 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 11, message 7 -> (t:1, i:11), STATEMACHINELOGENTRY, 107@client-343DCADF0B89
2023-01-06 13:31:30,950 [s0@group-AEF85E4C33F4-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 12, message 8 -> (t:1, i:12), STATEMACHINELOGENTRY, 109@client-BD7F59B6EFEB
2023-01-06 13:31:30,952 [grpc-default-executor-8] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-BD7F59B6EFEB->s1: receive RaftClientReply:client-BD7F59B6EFEB->s1@group-AEF85E4C33F4, cid=109, SUCCESS, logIndex=12, commits[s1:c12, s0:c2, s2:c2]
2023-01-06 13:31:30,952 [grpc-default-executor-3] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-406FA0802DC2->s1: receive RaftClientReply:client-406FA0802DC2->s1@group-AEF85E4C33F4, cid=93, SUCCESS, logIndex=9, commits[s1:c12, s0:c2, s2:c2]
2023-01-06 13:31:30,952 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-343DCADF0B89->s1: receive RaftClientReply:client-343DCADF0B89->s1@group-AEF85E4C33F4, cid=107, SUCCESS, logIndex=11, commits[s1:c12, s0:c2, s2:c2]
2023-01-06 13:31:30,954 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-DD812E9DA18E->s1: receive RaftClientReply:client-DD812E9DA18E->s1@group-AEF85E4C33F4, cid=112, SUCCESS, logIndex=14, commits[s1:c14, s0:c12, s2:c12]
2023-01-06 13:31:30,965 [grpc-default-executor-4] ERROR impl.OrderedAsync (OrderedAsync.java:lambda$send$4(175)) - Failed to send request, message=1025kb (=1049600)-message
java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s1@group-AEF85E4C33F4: Failed to acquire a pending write request for RaftClientRequest:client-DD812E9DA18E->s1@group-AEF85E4C33F4, cid=113, seq=2, RW, Message:41e3c0329e94b01db536...(size=1049600)
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:632)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.client.impl.OrderedAsync$PendingOrderedRequest.fail(OrderedAsync.java:104)
	at org.apache.ratis.util.SlidingWindow$Client.fail(SlidingWindow.java:392)
	at org.apache.ratis.client.impl.OrderedAsync.failAllAsyncRequests(OrderedAsync.java:148)
	at org.apache.ratis.client.impl.OrderedAsync.handleAsyncRetryFailure(OrderedAsync.java:152)
	at org.apache.ratis.client.impl.OrderedAsync.lambda$sendRequest$10(OrderedAsync.java:262)
	at java.base/java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:986)
	at java.base/java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:970)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:394)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onError(GrpcClientProtocolClient.java:331)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:487)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.ResourceUnavailableException: s1@group-AEF85E4C33F4: Failed to acquire a pending write request for RaftClientRequest:client-DD812E9DA18E->s1@group-AEF85E4C33F4, cid=113, seq=2, RW, Message:41e3c0329e94b01db536...(size=1049600)
	at org.apache.ratis.server.impl.RaftServerImpl.appendTransaction(RaftServerImpl.java:771)
	at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:882)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$12(RaftServerImpl.java:820)
	at org.apache.ratis.util.JavaUtils.callAsUnchecked(JavaUtils.java:117)
	at org.apache.ratis.server.impl.RaftServerImpl.lambda$executeSubmitClientRequestAsync$13(RaftServerImpl.java:820)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
	... 3 more
	Suppressed: java.lang.NullPointerException
		at org.apache.ratis.server.impl.RaftServerImpl.lambda$submitClientRequestAsync$15(RaftServerImpl.java:890)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)
		at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883)
		at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251)
		at org.apache.ratis.server.impl.RaftServerImpl.submitClientRequestAsync(RaftServerImpl.java:889)
		... 7 more
2023-01-06 13:31:31,259 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:31,260 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:31,260 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:31,260 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:31,260 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:31,260 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-AEF85E4C33F4:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-AEF85E4C33F4-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-AEF85E4C33F4:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-AEF85E4C33F4-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-AEF85E4C33F4:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-AEF85E4C33F4-SegmentedRaftLog:OPENED:c14, conf=0: peers:[s0|rpc:localhost:35399|admin:localhost:40861|client:localhost:43789|dataStream:localhost:39323|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:46847|admin:localhost:38847|client:localhost:37167|dataStream:localhost:38523|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:41809|admin:localhost:33297|client:localhost:37473|dataStream:localhost:33157|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:31,261 [MiniRaftCluster-21] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2023-01-06 13:31:31,261 [MiniRaftCluster-22] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2023-01-06 13:31:31,262 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:31,262 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-AEF85E4C33F4: shutdown
2023-01-06 13:31:31,262 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:31,262 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:31,262 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-AEF85E4C33F4,id=s0
2023-01-06 13:31:31,262 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-AEF85E4C33F4-FollowerState
2023-01-06 13:31:31,262 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-AEF85E4C33F4-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:31,262 [s0@group-AEF85E4C33F4-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-AEF85E4C33F4-FollowerState was interrupted
2023-01-06 13:31:31,264 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-AEF85E4C33F4: applyIndex: 14
2023-01-06 13:31:31,264 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:31,264 [s0@group-AEF85E4C33F4-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s0@group-AEF85E4C33F4-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:31,264 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-AEF85E4C33F4: shutdown
2023-01-06 13:31:31,264 [MiniRaftCluster-22] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-01-06 13:31:31,264 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-AEF85E4C33F4,id=s1
2023-01-06 13:31:31,264 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s1: shutdown s1@group-AEF85E4C33F4-LeaderStateImpl
2023-01-06 13:31:31,264 [s1@group-AEF85E4C33F4->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s1@group-AEF85E4C33F4->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:31,265 [s1@group-AEF85E4C33F4->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s1@group-AEF85E4C33F4->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:31,264 [s1-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s1@group-AEF85E4C33F4-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:31,265 [MiniRaftCluster-23] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2023-01-06 13:31:31,266 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-AEF85E4C33F4-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:31,266 [grpc-default-executor-4] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: null
2023-01-06 13:31:31,266 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-AEF85E4C33F4: shutdown
2023-01-06 13:31:31,266 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-AEF85E4C33F4,id=s2
2023-01-06 13:31:31,266 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-AEF85E4C33F4-FollowerState
2023-01-06 13:31:31,266 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-AEF85E4C33F4-StateMachineUpdater: set stopIndex = 14
2023-01-06 13:31:31,266 [s2@group-AEF85E4C33F4-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-AEF85E4C33F4-FollowerState was interrupted
2023-01-06 13:31:31,266 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:31,266 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-AEF85E4C33F4: applyIndex: 14
2023-01-06 13:31:31,266 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s0@group-AEF85E4C33F4-SegmentedRaftLogWorker close()
2023-01-06 13:31:31,271 [s2@group-AEF85E4C33F4-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s2@group-AEF85E4C33F4-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:31,271 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:31,271 [grpc-default-executor-3] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - s0: installSnapshot onError, lastRequest: null: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-01-06 13:31:31,272 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:31,271 [grpc-default-executor-10] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - s0: installSnapshot onError, lastRequest: s1->s0#24-t1,previous=(t:1, i:12),leaderCommit=14,initializing? true,entries: size=2, first=(t:1, i:13), METADATAENTRY(c:3): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-01-06 13:31:31,267 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-AEF85E4C33F4->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:31,266 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-AEF85E4C33F4: applyIndex: 14
2023-01-06 13:31:31,275 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-AEF85E4C33F4->s2: nextIndex: updateUnconditionally 15 -> 14
2023-01-06 13:31:31,275 [grpc-default-executor-7] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - s2: installSnapshot onError, lastRequest: s1->s2#25-t1,previous=(t:1, i:12),leaderCommit=12,initializing? true,entries: size=2, first=(t:1, i:13), METADATAENTRY(c:3): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-01-06 13:31:31,275 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(402)) - s1@group-AEF85E4C33F4->s0-GrpcLogAppender is already stopped
2023-01-06 13:31:31,274 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:31,276 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:31,272 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(402)) - s1@group-AEF85E4C33F4->s0-GrpcLogAppender is already stopped
2023-01-06 13:31:31,272 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s2@group-AEF85E4C33F4-SegmentedRaftLogWorker close()
2023-01-06 13:31:31,275 [s1@group-AEF85E4C33F4-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s1@group-AEF85E4C33F4-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:31,276 [MiniRaftCluster-21] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:31,277 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s1@group-AEF85E4C33F4-SegmentedRaftLogWorker close()
2023-01-06 13:31:31,278 [JvmPauseMonitor20] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2023-01-06 13:31:31,278 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:31,278 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:31,279 [MiniRaftCluster-23] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:31,279 [MiniRaftCluster-22] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-01-06 13:31:31,279 [JvmPauseMonitor22] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2023-01-06 13:31:31,280 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(402)) - s1@group-AEF85E4C33F4->s2-GrpcLogAppender is already stopped
2023-01-06 13:31:31,280 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:31,280 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:31,280 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:31,280 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:31,281 [MiniRaftCluster-22] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:31,281 [JvmPauseMonitor21] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2023-01-06 13:31:31,281 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:31,282 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:31,282 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:31,282 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:31,286 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-01-06 13:31:31,286 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-2CF68B7A6A21:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:31,286 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:31,286 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:31,286 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:31,287 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:31,287 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:31,287 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:31,287 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-2CF68B7A6A21:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:31,287 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0
2023-01-06 13:31:31,287 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0 does not exist.
2023-01-06 13:31:31,287 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0
2023-01-06 13:31:31,287 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:31,288 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:31,288 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 45973 (custom)
2023-01-06 13:31:31,288 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:31,288 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 38773 (custom)
2023-01-06 13:31:31,288 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:31,288 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 44201 (custom)
2023-01-06 13:31:31,288 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:31,288 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:31,288 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:31,288 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:31,288 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:31,288 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:31,288 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:31,290 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:31,290 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:31,290 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:31,290 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:31,290 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:31,290 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0] (custom)
2023-01-06 13:31:31,291 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-2CF68B7A6A21:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER] returns group-2CF68B7A6A21:java.util.concurrent.CompletableFuture@5d33eaf4[Not completed]
2023-01-06 13:31:31,291 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:31,291 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:31,291 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:31,291 [pool-28-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-2CF68B7A6A21:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:31,291 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:31,291 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:31,292 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:31,292 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:31,292 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:31,292 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:31,292 [pool-28-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-2CF68B7A6A21: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:31,292 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:31,292 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:31,292 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:31,292 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:31,292 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:31,293 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:31,293 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:31,293 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:31,293 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:31,293 [pool-28-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:31,294 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:31,294 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:31,294 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0] (custom)
2023-01-06 13:31:31,294 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0/d9e0d25d-2623-4318-bbfc-2cf68b7a6a21 does not exist. Creating ...
2023-01-06 13:31:31,294 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0/d9e0d25d-2623-4318-bbfc-2cf68b7a6a21
2023-01-06 13:31:31,297 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0/d9e0d25d-2623-4318-bbfc-2cf68b7a6a21/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:31,298 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0/d9e0d25d-2623-4318-bbfc-2cf68b7a6a21/current
2023-01-06 13:31:31,298 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0/d9e0d25d-2623-4318-bbfc-2cf68b7a6a21/sm
2023-01-06 13:31:31,303 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0/d9e0d25d-2623-4318-bbfc-2cf68b7a6a21 has been successfully formatted.
2023-01-06 13:31:31,303 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:31,303 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:31,303 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:31,303 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:31,303 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:31,303 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:31,303 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-2CF68B7A6A21-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0/d9e0d25d-2623-4318-bbfc-2cf68b7a6a21
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:31,304 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:31,312 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:31,312 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:31,312 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:31,313 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-2CF68B7A6A21-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:31,313 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-2CF68B7A6A21-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:31,313 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-2CF68B7A6A21: start as a follower, conf=-1: peers:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:31,313 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-2CF68B7A6A21: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:31,313 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-2CF68B7A6A21-FollowerState
2023-01-06 13:31:31,314 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2CF68B7A6A21,id=s0
2023-01-06 13:31:31,314 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:31,314 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:31,314 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:31,314 [s0@group-2CF68B7A6A21-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:31,314 [s0@group-2CF68B7A6A21-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:31,318 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2023-01-06 13:31:31,318 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 38773
2023-01-06 13:31:31,318 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 44201
2023-01-06 13:31:31,319 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 45973
2023-01-06 13:31:31,320 [JvmPauseMonitor23] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2023-01-06 13:31:31,321 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:31,321 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-2CF68B7A6A21:t0, leader=null, voted=, raftlog=Memoized:s0@group-2CF68B7A6A21-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:31,321 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-2CF68B7A6A21:t0, leader=null, voted=, raftlog=Memoized:s0@group-2CF68B7A6A21-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-2CF68B7A6A21:t0, leader=null, voted=, raftlog=Memoized:s0@group-2CF68B7A6A21-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:155)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:31,491 [s0@group-2CF68B7A6A21-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-2CF68B7A6A21-FollowerState: change to CANDIDATE, lastRpcElapsedTime:177343728ns, electionTimeout:176ms
2023-01-06 13:31:31,491 [s0@group-2CF68B7A6A21-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-2CF68B7A6A21-FollowerState
2023-01-06 13:31:31,491 [s0@group-2CF68B7A6A21-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-2CF68B7A6A21: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:31,491 [s0@group-2CF68B7A6A21-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:31,492 [s0@group-2CF68B7A6A21-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-2CF68B7A6A21-LeaderElection19
2023-01-06 13:31:31,492 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-2CF68B7A6A21-LeaderElection19 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:31,492 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-2CF68B7A6A21-LeaderElection19 PRE_VOTE round 0: result PASSED (term=0)
2023-01-06 13:31:31,495 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-2CF68B7A6A21-LeaderElection19 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:31,495 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-2CF68B7A6A21-LeaderElection19 ELECTION round 0: result PASSED (term=1)
2023-01-06 13:31:31,495 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-2CF68B7A6A21-LeaderElection19
2023-01-06 13:31:31,495 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-2CF68B7A6A21: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:31,495 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-2CF68B7A6A21: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 203ms
2023-01-06 13:31:31,495 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:31,495 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:31,495 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-01-06 13:31:31,496 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:31,496 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:31,496 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:31,496 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:31,496 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:31,496 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-2CF68B7A6A21-LeaderStateImpl
2023-01-06 13:31:31,496 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-2CF68B7A6A21-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:31,497 [s0@group-2CF68B7A6A21-LeaderElection19] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-2CF68B7A6A21: set configuration 0: peers:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:31,509 [s0@group-2CF68B7A6A21-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-2CF68B7A6A21-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc854de165/s0/d9e0d25d-2623-4318-bbfc-2cf68b7a6a21/current/log_inprogress_0
2023-01-06 13:31:31,772 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-2CF68B7A6A21:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-2CF68B7A6A21-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:31,772 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:31,772 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 45973 (custom)
2023-01-06 13:31:31,772 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:31,772 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 38773 (custom)
2023-01-06 13:31:31,772 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:31,772 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 44201 (custom)
2023-01-06 13:31:31,772 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:31,772 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:31,772 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:31,773 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:31,773 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:31,773 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:31,773 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:31,774 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'appendEntries'
2023-01-06 13:31:31,774 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "appendEntries" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking appendEntries call is not supported
	at org.apache.ratis.grpc.server.GrpcService.appendEntries(GrpcService.java:355)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$1(TestRaftServerWithGrpc.java:159)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:158)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:31,774 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'installSnapshot'
2023-01-06 13:31:31,774 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "installSnapshot" throws UnsupportedOperationException
java.lang.UnsupportedOperationException: Blocking installSnapshot call is not supported
	at org.apache.ratis.grpc.server.GrpcService.installSnapshot(GrpcService.java:361)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.lambda$runTestUnsupportedMethods$2(TestRaftServerWithGrpc.java:163)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestUnsupportedMethods(TestRaftServerWithGrpc.java:162)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testUnsupportedMethods(TestRaftServerWithGrpc.java:151)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:31,775 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:31,775 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:31,775 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:31,775 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:31,775 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:31,775 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-2CF68B7A6A21:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-2CF68B7A6A21-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:44201|admin:localhost:45973|client:localhost:38773|dataStream:localhost:34505|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:31,775 [MiniRaftCluster-24] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2023-01-06 13:31:31,776 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:31,776 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-2CF68B7A6A21: shutdown
2023-01-06 13:31:31,776 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:31,776 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:31,776 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2CF68B7A6A21,id=s0
2023-01-06 13:31:31,776 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-2CF68B7A6A21-LeaderStateImpl
2023-01-06 13:31:31,777 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-2CF68B7A6A21-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:31,777 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-2CF68B7A6A21-StateMachineUpdater: set stopIndex = 0
2023-01-06 13:31:31,777 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-2CF68B7A6A21: applyIndex: 0
2023-01-06 13:31:31,777 [s0@group-2CF68B7A6A21-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s0@group-2CF68B7A6A21-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:31,778 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:31,778 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:31,778 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s0@group-2CF68B7A6A21-SegmentedRaftLogWorker close()
2023-01-06 13:31:31,779 [MiniRaftCluster-24] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:31,779 [JvmPauseMonitor23] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2023-01-06 13:31:31,779 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:31,780 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:31,780 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:31,780 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:31,781 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-01-06 13:31:31,781 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-7E23C40BBAD8:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:31,781 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:31,781 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:31,781 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:31,781 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:31,781 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:31,781 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:31,781 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-7E23C40BBAD8:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:31,781 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0
2023-01-06 13:31:31,782 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0 does not exist.
2023-01-06 13:31:31,782 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0
2023-01-06 13:31:31,782 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:31,782 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:31,782 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44727 (custom)
2023-01-06 13:31:31,782 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:31,782 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37063 (custom)
2023-01-06 13:31:31,783 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:31,783 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41001 (custom)
2023-01-06 13:31:31,783 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:31,783 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:31,783 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:31,783 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:31,783 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:31,783 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:31,783 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:31,784 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:31,784 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:31,785 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:31,785 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:31,785 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:31,785 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0] (custom)
2023-01-06 13:31:31,785 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-7E23C40BBAD8:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER] returns group-7E23C40BBAD8:java.util.concurrent.CompletableFuture@1fdfe2de[Not completed]
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-7E23C40BBAD8:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-7E23C40BBAD8: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:31,786 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:31,787 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:31,787 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:31,787 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:31,788 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:31,788 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:31,788 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:31,788 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:31,788 [pool-29-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:31,788 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:31,788 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:31,788 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0] (custom)
2023-01-06 13:31:31,788 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8 does not exist. Creating ...
2023-01-06 13:31:31,789 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8
2023-01-06 13:31:31,790 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:31,790 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8/current
2023-01-06 13:31:31,790 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8/sm
2023-01-06 13:31:31,792 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8 has been successfully formatted.
2023-01-06 13:31:31,792 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:31,792 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:31,792 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:31,792 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:31,792 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:31,792 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:31,792 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-7E23C40BBAD8-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:31,793 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:31,794 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:31,794 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:31,794 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:31,794 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-7E23C40BBAD8-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:31,794 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-7E23C40BBAD8-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:31,795 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-7E23C40BBAD8: start as a follower, conf=-1: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:31,795 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-7E23C40BBAD8: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:31,795 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-7E23C40BBAD8-FollowerState
2023-01-06 13:31:31,795 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-7E23C40BBAD8,id=s0
2023-01-06 13:31:31,795 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:31,795 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:31,795 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:31,795 [s0@group-7E23C40BBAD8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:31,795 [s0@group-7E23C40BBAD8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:31,795 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2023-01-06 13:31:31,796 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 37063
2023-01-06 13:31:31,796 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 41001
2023-01-06 13:31:31,797 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 44727
2023-01-06 13:31:31,798 [JvmPauseMonitor24] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2023-01-06 13:31:31,798 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:31,798 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-7E23C40BBAD8:t0, leader=null, voted=, raftlog=Memoized:s0@group-7E23C40BBAD8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:31,802 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-7E23C40BBAD8:t0, leader=null, voted=, raftlog=Memoized:s0@group-7E23C40BBAD8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-7E23C40BBAD8:t0, leader=null, voted=, raftlog=Memoized:s0@group-7E23C40BBAD8-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestServerRestartOnException(TestRaftServerWithGrpc.java:121)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testServerRestartOnException(TestRaftServerWithGrpc.java:104)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:32,048 [s0@group-7E23C40BBAD8-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-7E23C40BBAD8-FollowerState: change to CANDIDATE, lastRpcElapsedTime:252832053ns, electionTimeout:252ms
2023-01-06 13:31:32,048 [s0@group-7E23C40BBAD8-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-7E23C40BBAD8-FollowerState
2023-01-06 13:31:32,048 [s0@group-7E23C40BBAD8-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-7E23C40BBAD8: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:32,048 [s0@group-7E23C40BBAD8-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:32,048 [s0@group-7E23C40BBAD8-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-7E23C40BBAD8-LeaderElection20
2023-01-06 13:31:32,049 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-7E23C40BBAD8-LeaderElection20 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:32,049 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-7E23C40BBAD8-LeaderElection20 PRE_VOTE round 0: result PASSED (term=0)
2023-01-06 13:31:32,053 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-7E23C40BBAD8-LeaderElection20 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:32,053 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-7E23C40BBAD8-LeaderElection20 ELECTION round 0: result PASSED (term=1)
2023-01-06 13:31:32,053 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-7E23C40BBAD8-LeaderElection20
2023-01-06 13:31:32,053 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-7E23C40BBAD8: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:32,053 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-7E23C40BBAD8: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 266ms
2023-01-06 13:31:32,053 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:32,054 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:32,054 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-01-06 13:31:32,055 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:32,055 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:32,055 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:32,055 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:32,055 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:32,055 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-7E23C40BBAD8-LeaderStateImpl
2023-01-06 13:31:32,055 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-7E23C40BBAD8-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:32,061 [s0@group-7E23C40BBAD8-LeaderElection20] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-7E23C40BBAD8: set configuration 0: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:32,067 [s0@group-7E23C40BBAD8-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-7E23C40BBAD8-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8/current/log_inprogress_0
2023-01-06 13:31:32,253 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-7E23C40BBAD8:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-7E23C40BBAD8-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:32,254 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:32,254 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:32,254 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44727 (custom)
2023-01-06 13:31:32,254 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:32,254 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37063 (custom)
2023-01-06 13:31:32,254 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:32,254 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41001 (custom)
2023-01-06 13:31:32,254 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:32,255 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:32,255 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:32,255 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:32,255 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:32,255 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:32,255 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:32,257 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:32,257 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:32,257 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:32,257 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:32,257 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:32,257 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0] (custom)
2023-01-06 13:31:32,258 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(254)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8
2023-01-06 13:31:32,258 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-7E23C40BBAD8:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER] returns group-7E23C40BBAD8:java.util.concurrent.CompletableFuture@be45154[Not completed]
2023-01-06 13:31:32,259 [pool-30-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-7E23C40BBAD8:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-7E23C40BBAD8
2023-01-06 13:31:32,259 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:32,259 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:32,259 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:32,259 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:32,259 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:32,259 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:32,259 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:32,259 [pool-30-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-7E23C40BBAD8: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:32,260 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:32,260 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:32,260 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:32,260 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:32,260 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:32,260 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:32,260 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:32,260 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:32,262 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:32,262 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:32,262 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:32,262 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:32,262 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:32,262 [pool-30-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:32,264 [Time-limited test] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:32,264 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'Starting a new server with the same address should fail'
2023-01-06 13:31:32,264 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:32,265 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:32,265 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44727 (custom)
2023-01-06 13:31:32,265 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:32,265 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37063 (custom)
2023-01-06 13:31:32,265 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:32,265 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41001 (custom)
2023-01-06 13:31:32,265 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:32,265 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:32,265 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:32,265 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:32,265 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:32,265 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:32,265 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:32,266 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:32,266 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:32,266 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:32,266 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:32,267 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:32,267 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0] (custom)
2023-01-06 13:31:32,267 [s0-impl-thread1] INFO  server.RaftServer (RaftServerProxy.java:initGroupDir(254)) - s0: found a subdirectory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8
2023-01-06 13:31:32,267 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-7E23C40BBAD8:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER] returns group-7E23C40BBAD8:java.util.concurrent.CompletableFuture@39a74636[Not completed]
2023-01-06 13:31:32,267 [pool-31-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-7E23C40BBAD8:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:s0:group-7E23C40BBAD8
2023-01-06 13:31:32,267 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:32,268 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:32,268 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:32,268 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:32,268 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:32,268 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:32,268 [pool-31-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-7E23C40BBAD8: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:32,268 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:32,268 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:32,271 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:32,271 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:32,272 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:32,272 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:32,272 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:32,272 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:32,272 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:32,272 [pool-31-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:32,274 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:32,274 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:32,274 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0] (custom)
2023-01-06 13:31:32,275 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:32,275 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8/in_use.lock", attempt #1/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-01-06 13:31:33,276 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:33,276 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8/in_use.lock", attempt #2/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-01-06 13:31:34,263 [timer5] WARN  server.GrpcLogAppender (GrpcLogAppender.java:timeoutAppendRequest(311)) - s1@group-AEF85E4C33F4->s0-GrpcLogAppender: HEARTBEAT appendEntries Timeout, request=AppendEntriesRequest:cid=29,entriesCount=0,lastEntry=null
2023-01-06 13:31:34,277 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:34,277 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8/in_use.lock", attempt #3/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-01-06 13:31:35,278 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:35,279 [s0-impl-thread1] WARN  util.FileUtils (JavaUtils.java:attempt(217)) - FAILED "tryLock /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8/in_use.lock", attempt #4/5: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8. The directory is already locked, sleep 1s and then retry.
java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-01-06 13:31:36,279 [s0-impl-thread1] ERROR storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(235)) - It appears that another process has already locked the storage directory: /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8
java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:36,280 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "Starting a new server with the same address should fail" throws CompletionException
java.util.concurrent.CompletionException: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8. The directory is already locked
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346)
	at java.base/java.util.concurrent.CompletableFuture$BiRelay.tryFire(CompletableFuture.java:1423)
	at java.base/java.util.concurrent.CompletableFuture$CoCompletion.tryFire(CompletableFuture.java:1144)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:176)
	at org.apache.ratis.util.ConcurrentUtils.lambda$parallelForEachAsync$3(ConcurrentUtils.java:165)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.io.IOException: Failed to lock storage /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpcdfb05e1c/s0/2ab14e81-fef5-463a-ab35-7e23c40bbad8. The directory is already locked
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:238)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lambda$lock$0(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.FileUtils.attempt(FileUtils.java:40)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.lock(RaftStorageDirectoryImpl.java:197)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.analyzeStorage(RaftStorageDirectoryImpl.java:156)
	at org.apache.ratis.server.storage.RaftStorageImpl.analyzeAndRecoverStorage(RaftStorageImpl.java:104)
	at org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:63)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.recover(StorageImplUtils.java:167)
	at org.apache.ratis.server.storage.StorageImplUtils$Op.run(StorageImplUtils.java:127)
	at org.apache.ratis.server.storage.StorageImplUtils.initRaftStorage(StorageImplUtils.java:98)
	at org.apache.ratis.server.impl.ServerState.lambda$new$2(ServerState.java:117)
	at org.apache.ratis.util.MemoizedCheckedSupplier.get(MemoizedCheckedSupplier.java:66)
	at org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:139)
	at org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:334)
	at org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:173)
	... 4 more
Caused by: java.nio.channels.OverlappingFileLockException
	at java.base/sun.nio.ch.FileLockTable.checkList(FileLockTable.java:229)
	at java.base/sun.nio.ch.FileLockTable.add(FileLockTable.java:123)
	at java.base/sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:1154)
	at java.base/java.nio.channels.FileChannel.tryLock(FileChannel.java:1165)
	at org.apache.ratis.server.storage.RaftStorageDirectoryImpl.tryLock(RaftStorageDirectoryImpl.java:226)
	... 19 more
2023-01-06 13:31:36,281 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:36,281 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 44727 (custom)
2023-01-06 13:31:36,281 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:36,281 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 37063 (custom)
2023-01-06 13:31:36,281 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:36,281 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 41001 (custom)
2023-01-06 13:31:36,281 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:36,281 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,281 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:36,281 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:36,281 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:36,281 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:36,281 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:36,285 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:36,285 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:36,285 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:36,285 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:36,285 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:36,285 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-7E23C40BBAD8:t1, leader=s0, voted=s0, raftlog=Memoized:s0@group-7E23C40BBAD8-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:41001|admin:localhost:44727|client:localhost:37063|dataStream:localhost:34551|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:36,286 [MiniRaftCluster-25] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2023-01-06 13:31:36,289 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-7E23C40BBAD8: shutdown
2023-01-06 13:31:36,290 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-7E23C40BBAD8,id=s0
2023-01-06 13:31:36,290 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-7E23C40BBAD8-LeaderStateImpl
2023-01-06 13:31:36,290 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-7E23C40BBAD8-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:36,290 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-7E23C40BBAD8-StateMachineUpdater: set stopIndex = 0
2023-01-06 13:31:36,290 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-7E23C40BBAD8: applyIndex: 0
2023-01-06 13:31:36,290 [s0@group-7E23C40BBAD8-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s0@group-7E23C40BBAD8-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:36,291 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s0@group-7E23C40BBAD8-SegmentedRaftLogWorker close()
2023-01-06 13:31:36,293 [JvmPauseMonitor24] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2023-01-06 13:31:36,293 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
2023-01-06 13:31:36,294 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.conf.ConfUtils log level to WARN
2023-01-06 13:31:36,294 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.util.FileUtils log level to TRACE
2023-01-06 13:31:36,294 [main] INFO  util.LogUtils (Slf4jUtils.java:setLogLevel(38)) - Successfully set org.apache.ratis.grpc.client.GrpcClientProtocolClient log level to TRACE
2023-01-06 13:31:36,294 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(135)) - Running runWithNewCluster
2023-01-06 13:31:36,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:<init>(306)) - new MiniRaftClusterWithGrpc with group-97B1E7A74AC2:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]
2023-01-06 13:31:36,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(339)) - .............................................................. 
2023-01-06 13:31:36,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(340)) - ... 
2023-01-06 13:31:36,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(341)) - ...     Starting MiniRaftClusterWithGrpc
2023-01-06 13:31:36,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(342)) - ... 
2023-01-06 13:31:36,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:start(343)) - .............................................................. 
2023-01-06 13:31:36,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:initServers(318)) - servers = {}
2023-01-06 13:31:36,295 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s0, group-97B1E7A74AC2:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:36,295 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0
2023-01-06 13:31:36,296 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0 does not exist.
2023-01-06 13:31:36,296 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0
2023-01-06 13:31:36,296 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:36,296 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:36,296 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 39027 (custom)
2023-01-06 13:31:36,296 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:36,296 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 35569 (custom)
2023-01-06 13:31:36,296 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:36,296 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 34379 (custom)
2023-01-06 13:31:36,296 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:36,297 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,297 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:36,297 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:36,297 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:36,297 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:36,297 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:36,298 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:36,298 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:36,298 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:36,298 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:36,298 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:36,298 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0] (custom)
2023-01-06 13:31:36,299 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s0: addNew group-97B1E7A74AC2:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER] returns group-97B1E7A74AC2:java.util.concurrent.CompletableFuture@3acdd1dc[Not completed]
2023-01-06 13:31:36,299 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:36,299 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:36,299 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:36,299 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s1, group-97B1E7A74AC2:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:36,300 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1
2023-01-06 13:31:36,300 [pool-32-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s0: new RaftServerImpl for group-97B1E7A74AC2:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:36,300 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1 does not exist.
2023-01-06 13:31:36,300 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1
2023-01-06 13:31:36,300 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:36,300 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s0@group-97B1E7A74AC2: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:36,301 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:36,302 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:36,302 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:36,302 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:36,302 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:36,302 [pool-32-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:36,302 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:36,302 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 43933 (custom)
2023-01-06 13:31:36,302 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:36,302 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 45899 (custom)
2023-01-06 13:31:36,302 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:36,302 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 38961 (custom)
2023-01-06 13:31:36,302 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:36,302 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,302 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:36,302 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:36,302 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:36,303 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:36,303 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:36,303 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:36,304 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:36,304 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:36,304 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:36,304 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:36,304 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1] (custom)
2023-01-06 13:31:36,310 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s1: addNew group-97B1E7A74AC2:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER] returns group-97B1E7A74AC2:java.util.concurrent.CompletableFuture@4e7a1770[Not completed]
2023-01-06 13:31:36,310 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(382)) - newRaftServer: s2, group-97B1E7A74AC2:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER], format? true
2023-01-06 13:31:36,310 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(201)) - deleteFully target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2
2023-01-06 13:31:36,310 [Time-limited test] TRACE util.FileUtils (FileUtils.java:deleteFully(217)) - deleteFully: target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2 does not exist.
2023-01-06 13:31:36,310 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(387)) - Formatted directory target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2
2023-01-06 13:31:36,310 [Time-limited test] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-01-06 13:31:36,310 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:36,310 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.admin.port = 33493 (custom)
2023-01-06 13:31:36,310 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-01-06 13:31:36,310 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.client.port = 40265 (custom)
2023-01-06 13:31:36,310 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-01-06 13:31:36,310 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 35897 (custom)
2023-01-06 13:31:36,310 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:36,310 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,311 [Time-limited test] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:36,311 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:36,311 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:36,311 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-01-06 13:31:36,311 [Time-limited test] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-01-06 13:31:36,312 [Time-limited test] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-01-06 13:31:36,312 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-01-06 13:31:36,312 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-01-06 13:31:36,312 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:36,312 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:36,312 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2] (custom)
2023-01-06 13:31:36,312 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s1: new RaftServerImpl for group-97B1E7A74AC2:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s1@group-97B1E7A74AC2: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:36,313 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:36,314 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:36,314 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:36,315 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:36,315 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:36,315 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:36,315 [pool-33-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:36,315 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:addNew(99)) - s2: addNew group-97B1E7A74AC2:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER] returns group-97B1E7A74AC2:java.util.concurrent.CompletableFuture@6ec87021[Not completed]
2023-01-06 13:31:36,315 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:36,315 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:36,315 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:36,315 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:36,315 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:36,315 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0] (custom)
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(198)) - s2: new RaftServerImpl for group-97B1E7A74AC2:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER] with SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 150ms (default)
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:36,316 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2 does not exist. Creating ...
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 60s (default)
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(113)) - s2@group-97B1E7A74AC2: ConfigurationManager, init=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-01-06 13:31:36,316 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.timeout = 10s (default)
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60s (default)
2023-01-06 13:31:36,316 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-01-06 13:31:36,317 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.read.option = DEFAULT (default)
2023-01-06 13:31:36,318 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:36,318 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-01-06 13:31:36,318 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-01-06 13:31:36,318 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-01-06 13:31:36,318 [pool-34-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-01-06 13:31:36,319 [s0-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:36,319 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current
2023-01-06 13:31:36,319 [s0-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/sm
2023-01-06 13:31:36,320 [s0-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2 has been successfully formatted.
2023-01-06 13:31:36,321 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:36,321 [s0-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:36,321 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:36,321 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:36,321 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,321 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:36,321 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s0@group-97B1E7A74AC2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:36,322 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,323 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:36,323 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:36,323 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:36,323 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-97B1E7A74AC2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:36,323 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s0@group-97B1E7A74AC2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:36,324 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s0@group-97B1E7A74AC2: start as a follower, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,324 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-97B1E7A74AC2: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:36,324 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:36,325 [s0@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:36,325 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-97B1E7A74AC2,id=s0
2023-01-06 13:31:36,325 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:36,325 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:36,325 [s0-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:36,325 [s0@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:36,325 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s0: start RPC server
2023-01-06 13:31:36,326 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 35569
2023-01-06 13:31:36,326 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 34379
2023-01-06 13:31:36,326 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s0: GrpcService started, listening on 39027
2023-01-06 13:31:36,328 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:36,328 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:36,328 [JvmPauseMonitor25] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s0: Started
2023-01-06 13:31:36,328 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1] (custom)
2023-01-06 13:31:36,328 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2 does not exist. Creating ...
2023-01-06 13:31:36,328 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2
2023-01-06 13:31:36,331 [s1-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:36,331 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current
2023-01-06 13:31:36,331 [s1-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/sm
2023-01-06 13:31:36,333 [s1-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2 has been successfully formatted.
2023-01-06 13:31:36,334 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:36,334 [s1-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:36,334 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:36,334 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:36,334 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,334 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:36,334 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:36,334 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s1@group-97B1E7A74AC2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:36,335 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,336 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:36,336 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:36,336 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:36,336 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-97B1E7A74AC2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:36,336 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s1@group-97B1E7A74AC2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:36,336 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s1@group-97B1E7A74AC2: start as a follower, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,336 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-97B1E7A74AC2: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:36,336 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:36,337 [s1@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:36,337 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-97B1E7A74AC2,id=s1
2023-01-06 13:31:36,337 [s1@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:36,337 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:36,337 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:36,337 [s1-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:36,338 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s1: start RPC server
2023-01-06 13:31:36,338 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 45899
2023-01-06 13:31:36,338 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 38961
2023-01-06 13:31:36,339 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s1: GrpcService started, listening on 43933
2023-01-06 13:31:36,339 [JvmPauseMonitor26] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s1: Started
2023-01-06 13:31:36,339 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-01-06 13:31:36,339 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-01-06 13:31:36,339 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2] (custom)
2023-01-06 13:31:36,339 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(138)) - The storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2 does not exist. Creating ...
2023-01-06 13:31:36,340 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2
2023-01-06 13:31:36,341 [s2-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(232)) - Lock on /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/in_use.lock acquired by nodename 2194@fv-az200-218
2023-01-06 13:31:36,341 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current
2023-01-06 13:31:36,341 [s2-impl-thread1] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Files.createDirectories /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/sm
2023-01-06 13:31:36,343 [s2-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2 has been successfully formatted.
2023-01-06 13:31:36,343 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(213)) - Initializing SimpleStateMachine4Testing:uninitialized
2023-01-06 13:31:36,343 [s2-impl-thread1] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(293)) - Loading snapshot null
2023-01-06 13:31:36,343 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-01-06 13:31:36,343 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1024 (default)
2023-01-06 13:31:36,343 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,343 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-01-06 13:31:36,343 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 6 (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(184)) - new s2@group-97B1E7A74AC2-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-01-06 13:31:36,344 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,345 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-01-06 13:31:36,345 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-01-06 13:31:36,345 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-01-06 13:31:36,345 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-97B1E7A74AC2-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:36,345 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(134)) - s2@group-97B1E7A74AC2-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-01-06 13:31:36,346 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(338)) - s2@group-97B1E7A74AC2: start as a follower, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,346 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-97B1E7A74AC2: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-01-06 13:31:36,346 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:36,346 [s2@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:36,346 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-97B1E7A74AC2,id=s2
2023-01-06 13:31:36,346 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2023-01-06 13:31:36,346 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-01-06 13:31:36,346 [s2-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-01-06 13:31:36,346 [s2@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:36,346 [Time-limited test] INFO  server.RaftServer (RaftServerProxy.java:startImpl(396)) - s2: start RPC server
2023-01-06 13:31:36,347 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 40265
2023-01-06 13:31:36,347 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 35897
2023-01-06 13:31:36,347 [Time-limited test] INFO  server.GrpcService (GrpcService.java:startImpl(302)) - s2: GrpcService started, listening on 33493
2023-01-06 13:31:36,348 [JvmPauseMonitor27] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-s2: Started
2023-01-06 13:31:36,352 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:36,352 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:36,352 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
	at org.apache.ratis.server.impl.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:581)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:104)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:615)
	at org.apache.ratis.server.impl.MiniRaftCluster.getLeader(MiniRaftCluster.java:608)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:112)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:173)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:36,514 [s1@group-97B1E7A74AC2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s1@group-97B1E7A74AC2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:177795086ns, electionTimeout:177ms
2023-01-06 13:31:36,514 [s1@group-97B1E7A74AC2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:36,515 [s1@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-97B1E7A74AC2: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-01-06 13:31:36,515 [s1@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:36,515 [s1@group-97B1E7A74AC2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-97B1E7A74AC2-LeaderElection21
2023-01-06 13:31:36,516 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-97B1E7A74AC2-LeaderElection21 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,517 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:36,517 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:36,517 [s1@group-97B1E7A74AC2-LeaderElection21-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-01-06 13:31:36,518 [s1@group-97B1E7A74AC2-LeaderElection21-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-01-06 13:31:36,535 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-97B1E7A74AC2: receive requestVote(PRE_VOTE, s1, group-97B1E7A74AC2, 0, (t:0, i:0))
2023-01-06 13:31:36,535 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-97B1E7A74AC2-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:36,535 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-97B1E7A74AC2 replies to PRE_VOTE vote request: s1<-s0#0:OK-t0. Peer's state: s0@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,536 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-97B1E7A74AC2: receive requestVote(PRE_VOTE, s1, group-97B1E7A74AC2, 0, (t:0, i:0))
2023-01-06 13:31:36,536 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-97B1E7A74AC2-FOLLOWER: accept PRE_VOTE from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:36,536 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-97B1E7A74AC2 replies to PRE_VOTE vote request: s1<-s2#0:OK-t0. Peer's state: s2@group-97B1E7A74AC2:t0, leader=null, voted=, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,537 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-97B1E7A74AC2-LeaderElection21: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:36,537 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s2#0:OK-t0
2023-01-06 13:31:36,537 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-97B1E7A74AC2-LeaderElection21 PRE_VOTE round 0: result PASSED
2023-01-06 13:31:36,541 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s1@group-97B1E7A74AC2-LeaderElection21 ELECTION round 0: submit vote requests at term 1 for -1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,543 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-97B1E7A74AC2: receive requestVote(ELECTION, s1, group-97B1E7A74AC2, 1, (t:0, i:0))
2023-01-06 13:31:36,543 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-97B1E7A74AC2-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:36,543 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-97B1E7A74AC2: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s1
2023-01-06 13:31:36,543 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:36,543 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:36,543 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:36,543 [s0@group-97B1E7A74AC2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s0@group-97B1E7A74AC2-FollowerState was interrupted
2023-01-06 13:31:36,544 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:36,545 [s0@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:36,545 [s0@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:36,546 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-97B1E7A74AC2 replies to ELECTION vote request: s1<-s0#0:OK-t1. Peer's state: s0@group-97B1E7A74AC2:t1, leader=null, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,546 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-97B1E7A74AC2: receive requestVote(ELECTION, s1, group-97B1E7A74AC2, 1, (t:0, i:0))
2023-01-06 13:31:36,546 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-97B1E7A74AC2-FOLLOWER: accept ELECTION from s1: our priority 0 <= candidate's priority 0
2023-01-06 13:31:36,546 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-97B1E7A74AC2: changes role from  FOLLOWER to FOLLOWER at term 1 for candidate:s1
2023-01-06 13:31:36,547 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:36,547 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:36,547 [s2@group-97B1E7A74AC2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-97B1E7A74AC2-FollowerState was interrupted
2023-01-06 13:31:36,549 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s1@group-97B1E7A74AC2-LeaderElection21: ELECTION PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:36,549 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s1<-s0#0:OK-t1
2023-01-06 13:31:36,549 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s1@group-97B1E7A74AC2-LeaderElection21 ELECTION round 0: result PASSED
2023-01-06 13:31:36,549 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s1: shutdown s1@group-97B1E7A74AC2-LeaderElection21
2023-01-06 13:31:36,549 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-97B1E7A74AC2: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-01-06 13:31:36,549 [s2@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 150ms (fallback to raft.server.rpc.timeout.min)
2023-01-06 13:31:36,549 [s2@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 300ms (fallback to raft.server.rpc.timeout.max)
2023-01-06 13:31:36,549 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-97B1E7A74AC2: change Leader from null to s1 at term 1 for becomeLeader, leader elected after 235ms
2023-01-06 13:31:36,549 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:36,549 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:36,549 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-01-06 13:31:36,550 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:36,550 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:36,550 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-97B1E7A74AC2 replies to ELECTION vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-97B1E7A74AC2:t1, leader=null, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c-1, conf=-1: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,550 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:36,550 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:36,550 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:36,551 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:36,552 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-97B1E7A74AC2-LeaderStateImpl
2023-01-06 13:31:36,552 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s1@group-97B1E7A74AC2-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:36,561 [s1@group-97B1E7A74AC2-LeaderElection21] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-97B1E7A74AC2: set configuration 0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,565 [s1@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-97B1E7A74AC2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_0
2023-01-06 13:31:36,568 [s0-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-97B1E7A74AC2: change Leader from null to s1 at term 1 for appendEntries, leader elected after 266ms
2023-01-06 13:31:36,570 [s2-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-97B1E7A74AC2: change Leader from null to s1 at term 1 for appendEntries, leader elected after 253ms
2023-01-06 13:31:36,581 [s0-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-97B1E7A74AC2: set configuration 0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,581 [s0-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s0@group-97B1E7A74AC2-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:36,585 [s2-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-97B1E7A74AC2: set configuration 0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:36,586 [s2-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(431)) - s2@group-97B1E7A74AC2-SegmentedRaftLogWorker: Starting segment from index:0
2023-01-06 13:31:36,598 [s0@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-97B1E7A74AC2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_0
2023-01-06 13:31:36,601 [s2@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-97B1E7A74AC2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_0
2023-01-06 13:31:36,803 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c0, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:36,803 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:36,803 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:36,810 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3A78DAD2143D->s0: receive RaftClientReply:client-3A78DAD2143D->s0@group-97B1E7A74AC2, cid=114, FAILED org.apache.ratis.protocol.exceptions.NotLeaderException: Server s0@group-97B1E7A74AC2 is not the leader s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, logIndex=0, commits[s0:c0, s1:c0, s2:c0]
2023-01-06 13:31:36,812 [timer4] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:36,812 [timer4] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:36,817 [grpc-default-executor-1] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3A78DAD2143D->s1: receive RaftClientReply:client-3A78DAD2143D->s1@group-97B1E7A74AC2, cid=114, SUCCESS, logIndex=0, commits[s1:c0, s0:c0, s2:c0]
2023-01-06 13:31:36,823 [s1@group-97B1E7A74AC2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 115@client-3A78DAD2143D
2023-01-06 13:31:36,825 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-3A78DAD2143D->s1: receive RaftClientReply:client-3A78DAD2143D->s1@group-97B1E7A74AC2, cid=115, SUCCESS, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2023-01-06 13:31:36,826 [s0@group-97B1E7A74AC2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 115@client-3A78DAD2143D
2023-01-06 13:31:36,826 [s2@group-97B1E7A74AC2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 1, testing -> (t:1, i:1), STATEMACHINELOGENTRY, 115@client-3A78DAD2143D
2023-01-06 13:31:36,827 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:36,827 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:36,835 [s1@group-97B1E7A74AC2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s1: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-798189FBA1AC
2023-01-06 13:31:36,836 [grpc-default-executor-4] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-798189FBA1AC->s1: receive RaftClientReply:client-798189FBA1AC->s1@group-97B1E7A74AC2, cid=1, SUCCESS, logIndex=3, commits[s1:c3, s0:c1, s2:c2]
2023-01-06 13:31:36,836 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:block(135)) - block START_TRANSACTION
2023-01-06 13:31:36,837 [s2@group-97B1E7A74AC2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s2: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-798189FBA1AC
2023-01-06 13:31:36,837 [s0@group-97B1E7A74AC2-StateMachineUpdater] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:put(205)) - s0: put 3, m1 -> (t:1, i:3), STATEMACHINELOGENTRY, 1@client-798189FBA1AC
2023-01-06 13:31:36,837 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:blockRequestor(49)) - Block requestor s1
2023-01-06 13:31:36,838 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:36,838 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:36,838 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:36,838 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #1/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:36,913 [s2-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s2: Block request from s1
2023-01-06 13:31:36,914 [s0-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(77)) - s0: Block request from s1
2023-01-06 13:31:36,938 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:36,939 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:36,939 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:36,939 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #2/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:37,039 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:37,040 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:37,040 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:37,040 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #3/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:37,141 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:37,141 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:37,141 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:37,141 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #4/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:37,242 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:37,243 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:37,243 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t1, leader=s1, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:37,243 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "changeLeader-changeLeader", attempt #5/20: org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1, sleep 100ms and then retry.
org.junit.AssumptionViolatedException: Failed to change leader: newLeader == oldLeader == s1
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:433)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:37,247 [s0@group-97B1E7A74AC2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s0@group-97B1E7A74AC2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:410539958ns, electionTimeout:250ms
2023-01-06 13:31:37,247 [s0@group-97B1E7A74AC2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s0: shutdown s0@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:37,247 [s0@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-97B1E7A74AC2: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-01-06 13:31:37,248 [s0@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:37,248 [s0@group-97B1E7A74AC2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-97B1E7A74AC2-LeaderElection22
2023-01-06 13:31:37,248 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-97B1E7A74AC2: change Leader from s1 to null at term 1 for PRE_VOTE
2023-01-06 13:31:37,248 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-97B1E7A74AC2-LeaderElection22 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,249 [s0@group-97B1E7A74AC2-LeaderElection22-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-01-06 13:31:37,249 [s0@group-97B1E7A74AC2-LeaderElection22-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s2
2023-01-06 13:31:37,257 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-97B1E7A74AC2: receive requestVote(PRE_VOTE, s0, group-97B1E7A74AC2, 1, (t:1, i:4))
2023-01-06 13:31:37,257 [grpc-default-executor-3] WARN  server.RaftServer$Division (LeaderStateImpl.java:checkLeadership(1108)) - s1@group-97B1E7A74AC2-LeaderStateImpl: Lost leadership on term: 1. Election timeout: 300ms. In charge for: 708ms. Conf: 0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,257 [grpc-default-executor-3] WARN  server.RaftServer$Division (LeaderStateImpl.java:lambda$checkLeadership$18(1112)) - Follower s1@group-97B1E7A74AC2->s0(c3,m4,n5, attendVote=true, lastRpcSendTime=1, lastRpcResponseTime=420)
2023-01-06 13:31:37,257 [grpc-default-executor-3] WARN  server.RaftServer$Division (LeaderStateImpl.java:lambda$checkLeadership$18(1112)) - Follower s1@group-97B1E7A74AC2->s2(c3,m4,n5, attendVote=true, lastRpcSendTime=3, lastRpcResponseTime=420)
2023-01-06 13:31:37,257 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-97B1E7A74AC2: changes role from    LEADER to FOLLOWER at term 1 for StepDownReason:LOST_MAJORITY_HEARTBEATS
2023-01-06 13:31:37,258 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s1: shutdown s1@group-97B1E7A74AC2-LeaderStateImpl
2023-01-06 13:31:37,258 [s1@group-97B1E7A74AC2->s0-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s1@group-97B1E7A74AC2->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:37,258 [s1@group-97B1E7A74AC2->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s1@group-97B1E7A74AC2->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:37,258 [grpc-default-executor-3] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s1@group-97B1E7A74AC2-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:37,262 [grpc-default-executor-10] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: s1->s0#14-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2023-01-06 13:31:37,262 [grpc-default-executor-8] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s1->s2#11-t1,previous=(t:1, i:3),leaderCommit=3,initializing? true,entries: size=1, first=(t:1, i:4), METADATAENTRY(c:3)
2023-01-06 13:31:37,263 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-97B1E7A74AC2->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:37,263 [grpc-default-executor-9] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-97B1E7A74AC2->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:37,263 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-97B1E7A74AC2->s0: nextIndex: updateUnconditionally 5 -> 4
2023-01-06 13:31:37,263 [grpc-default-executor-9] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-97B1E7A74AC2->s2: nextIndex: updateUnconditionally 5 -> 4
2023-01-06 13:31:37,263 [grpc-default-executor-3] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-97B1E7A74AC2: change Leader from s1 to null at term 1 for StepDownReason:LOST_MAJORITY_HEARTBEATS
2023-01-06 13:31:37,264 [grpc-default-executor-3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:37,264 [s2@group-97B1E7A74AC2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - s2@group-97B1E7A74AC2-FollowerState: change to CANDIDATE, lastRpcElapsedTime:427750724ns, electionTimeout:182ms
2023-01-06 13:31:37,264 [s2@group-97B1E7A74AC2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:37,264 [s2@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-97B1E7A74AC2: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-01-06 13:31:37,265 [s2@group-97B1E7A74AC2-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-01-06 13:31:37,265 [s2@group-97B1E7A74AC2-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-97B1E7A74AC2-LeaderElection23
2023-01-06 13:31:37,267 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-97B1E7A74AC2-FOLLOWER: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:37,267 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-97B1E7A74AC2 replies to PRE_VOTE vote request: s0<-s1#0:OK-t1. Peer's state: s1@group-97B1E7A74AC2:t1, leader=null, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,270 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-97B1E7A74AC2: change Leader from s1 to null at term 1 for PRE_VOTE
2023-01-06 13:31:37,271 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-97B1E7A74AC2-LeaderElection22: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:37,272 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t1
2023-01-06 13:31:37,271 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-97B1E7A74AC2: receive requestVote(PRE_VOTE, s0, group-97B1E7A74AC2, 1, (t:1, i:4))
2023-01-06 13:31:37,272 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-97B1E7A74AC2-CANDIDATE: accept PRE_VOTE from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:37,272 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-97B1E7A74AC2-LeaderElection22 PRE_VOTE round 0: result PASSED
2023-01-06 13:31:37,272 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-97B1E7A74AC2 replies to PRE_VOTE vote request: s0<-s2#0:OK-t1. Peer's state: s2@group-97B1E7A74AC2:t1, leader=null, voted=s1, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,272 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-97B1E7A74AC2-LeaderElection23 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,273 [s2@group-97B1E7A74AC2-LeaderElection23-1] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s0
2023-01-06 13:31:37,275 [s2@group-97B1E7A74AC2-LeaderElection23-2] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for s1
2023-01-06 13:31:37,275 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s0@group-97B1E7A74AC2-LeaderElection22 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,278 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-97B1E7A74AC2: receive requestVote(PRE_VOTE, s2, group-97B1E7A74AC2, 1, (t:1, i:4))
2023-01-06 13:31:37,279 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-97B1E7A74AC2-FOLLOWER: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:37,279 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-97B1E7A74AC2 replies to PRE_VOTE vote request: s2<-s1#0:OK-t1. Peer's state: s1@group-97B1E7A74AC2:t1, leader=null, voted=s1, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,279 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-97B1E7A74AC2-LeaderElection23: PRE_VOTE PASSED received 1 response(s) and 0 exception(s):
2023-01-06 13:31:37,279 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s1#0:OK-t1
2023-01-06 13:31:37,280 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-97B1E7A74AC2-LeaderElection23 PRE_VOTE round 0: result PASSED
2023-01-06 13:31:37,281 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(309)) - s2@group-97B1E7A74AC2-LeaderElection23 ELECTION round 0: submit vote requests at term 2 for 0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,283 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-97B1E7A74AC2: receive requestVote(PRE_VOTE, s2, group-97B1E7A74AC2, 1, (t:1, i:4))
2023-01-06 13:31:37,283 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-97B1E7A74AC2-CANDIDATE: accept PRE_VOTE from s2: our priority 0 <= candidate's priority 0
2023-01-06 13:31:37,283 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-97B1E7A74AC2 replies to PRE_VOTE vote request: s2<-s0#0:OK-t2. Peer's state: s0@group-97B1E7A74AC2:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,283 [grpc-default-executor-9] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s2@group-97B1E7A74AC2: receive requestVote(ELECTION, s0, group-97B1E7A74AC2, 2, (t:1, i:4))
2023-01-06 13:31:37,283 [grpc-default-executor-9] INFO  impl.VoteContext (VoteContext.java:log(49)) - s2@group-97B1E7A74AC2-CANDIDATE: reject ELECTION from s0: already has voted for s2 at current term 2
2023-01-06 13:31:37,283 [grpc-default-executor-9] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s2@group-97B1E7A74AC2 replies to ELECTION vote request: s0<-s2#0:FAIL-t2. Peer's state: s2@group-97B1E7A74AC2:t2, leader=null, voted=s2, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,283 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-97B1E7A74AC2: receive requestVote(ELECTION, s0, group-97B1E7A74AC2, 2, (t:1, i:4))
2023-01-06 13:31:37,284 [grpc-default-executor-8] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-97B1E7A74AC2-FOLLOWER: accept ELECTION from s0: our priority 0 <= candidate's priority 0
2023-01-06 13:31:37,284 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s1@group-97B1E7A74AC2: changes role from  FOLLOWER to FOLLOWER at term 2 for candidate:s0
2023-01-06 13:31:37,284 [grpc-default-executor-8] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:37,284 [grpc-default-executor-8] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s1: start s1@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:37,284 [s1@group-97B1E7A74AC2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-97B1E7A74AC2-FollowerState was interrupted
2023-01-06 13:31:37,288 [grpc-default-executor-9] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s1@group-97B1E7A74AC2: receive requestVote(ELECTION, s2, group-97B1E7A74AC2, 2, (t:1, i:4))
2023-01-06 13:31:37,290 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1297)) - s0@group-97B1E7A74AC2: receive requestVote(ELECTION, s2, group-97B1E7A74AC2, 2, (t:1, i:4))
2023-01-06 13:31:37,290 [grpc-default-executor-3] INFO  impl.VoteContext (VoteContext.java:log(49)) - s0@group-97B1E7A74AC2-CANDIDATE: reject ELECTION from s2: already has voted for s0 at current term 2
2023-01-06 13:31:37,290 [grpc-default-executor-3] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s0@group-97B1E7A74AC2 replies to ELECTION vote request: s2<-s0#0:FAIL-t2. Peer's state: s0@group-97B1E7A74AC2:t2, leader=null, voted=s0, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,299 [grpc-default-executor-8] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-97B1E7A74AC2 replies to ELECTION vote request: s0<-s1#0:OK-t2. Peer's state: s1@group-97B1E7A74AC2:t2, leader=null, voted=s0, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,299 [grpc-default-executor-9] INFO  impl.VoteContext (VoteContext.java:log(49)) - s1@group-97B1E7A74AC2-FOLLOWER: reject ELECTION from s2: already has voted for s0 at current term 2
2023-01-06 13:31:37,299 [grpc-default-executor-9] INFO  server.RaftServer$Division (RaftServerImpl.java:requestVote(1330)) - s1@group-97B1E7A74AC2 replies to ELECTION vote request: s2<-s1#0:FAIL-t2. Peer's state: s1@group-97B1E7A74AC2:t2, leader=null, voted=s0, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,300 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s0@group-97B1E7A74AC2-LeaderElection22: ELECTION PASSED received 2 response(s) and 0 exception(s):
2023-01-06 13:31:37,300 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s0<-s1#0:OK-t2
2023-01-06 13:31:37,300 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s0<-s2#0:FAIL-t2
2023-01-06 13:31:37,301 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s0@group-97B1E7A74AC2-LeaderElection22 ELECTION round 0: result PASSED
2023-01-06 13:31:37,301 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(89)) - s2@group-97B1E7A74AC2-LeaderElection23: ELECTION REJECTED received 2 response(s) and 0 exception(s):
2023-01-06 13:31:37,301 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 0: s2<-s0#0:FAIL-t2
2023-01-06 13:31:37,301 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(93)) -   Response 1: s2<-s1#0:FAIL-t2
2023-01-06 13:31:37,301 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(311)) - s2@group-97B1E7A74AC2-LeaderElection23 ELECTION round 0: result REJECTED
2023-01-06 13:31:37,301 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s2@group-97B1E7A74AC2: changes role from CANDIDATE to FOLLOWER at term 2 for REJECTED
2023-01-06 13:31:37,301 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s2: shutdown s2@group-97B1E7A74AC2-LeaderElection23
2023-01-06 13:31:37,301 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - s0: shutdown s0@group-97B1E7A74AC2-LeaderElection22
2023-01-06 13:31:37,301 [s2@group-97B1E7A74AC2-LeaderElection23] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s2: start s2@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:37,301 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(325)) - s0@group-97B1E7A74AC2: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2023-01-06 13:31:37,301 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s0@group-97B1E7A74AC2: change Leader from null to s0 at term 2 for becomeLeader, leader elected after 52ms
2023-01-06 13:31:37,301 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-01-06 13:31:37,301 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:37,301 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (custom)
2023-01-06 13:31:37,301 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-01-06 13:31:37,301 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-01-06 13:31:37,301 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:37,302 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-01-06 13:31:37,303 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2023-01-06 13:31:37,303 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2023-01-06 13:31:37,303 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-01-06 13:31:37,303 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 3000ms (default)
2023-01-06 13:31:37,303 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2023-01-06 13:31:37,303 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-01-06 13:31:37,303 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-01-06 13:31:37,303 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - s0: start s0@group-97B1E7A74AC2-LeaderStateImpl
2023-01-06 13:31:37,303 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s0@group-97B1E7A74AC2-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2023-01-06 13:31:37,304 [s0@group-97B1E7A74AC2-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_0-4
2023-01-06 13:31:37,304 [s0@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s0@group-97B1E7A74AC2-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_0-4
2023-01-06 13:31:37,318 [s0@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s0@group-97B1E7A74AC2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s0/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_5
2023-01-06 13:31:37,326 [s0@group-97B1E7A74AC2-LeaderElection22] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s0@group-97B1E7A74AC2: set configuration 5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,338 [s1-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s1@group-97B1E7A74AC2: change Leader from null to s0 at term 2 for appendEntries, leader elected after 74ms
2023-01-06 13:31:37,352 [s2-server-thread3] INFO  server.RaftServer$Division (ServerState.java:setLeader(260)) - s2@group-97B1E7A74AC2: change Leader from null to s0 at term 2 for appendEntries, leader elected after 82ms
2023-01-06 13:31:37,352 [s2-server-thread3] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s2@group-97B1E7A74AC2: set configuration 5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,352 [s2-server-thread3] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s2@group-97B1E7A74AC2-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2023-01-06 13:31:37,354 [s2@group-97B1E7A74AC2-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_0-4
2023-01-06 13:31:37,354 [s2@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s2@group-97B1E7A74AC2-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_0-4
2023-01-06 13:31:37,362 [Time-limited test] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 300ms (default)
2023-01-06 13:31:37,362 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(100)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-97B1E7A74AC2:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-97B1E7A74AC2:t2, leader=s0, voted=s0, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c4, conf=0: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t2, leader=s0, voted=s2, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c3, conf=5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:37,362 [Time-limited test] WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(217)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: Leader: s0@group-97B1E7A74AC2 not ready, sleep 450ms and then retry.
java.lang.IllegalStateException: Leader: s0@group-97B1E7A74AC2 not ready
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:114)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:111)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:92)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:87)
	at org.apache.ratis.RaftTestUtil.lambda$changeLeader$6(RaftTestUtil.java:431)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:211)
	at org.apache.ratis.util.JavaUtils.attemptRepeatedly(JavaUtils.java:197)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:430)
	at org.apache.ratis.RaftTestUtil.changeLeader(RaftTestUtil.java:422)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:199)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:37,366 [s1-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(378)) - s1@group-97B1E7A74AC2: set configuration 5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-01-06 13:31:37,366 [s1-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(436)) - s1@group-97B1E7A74AC2-SegmentedRaftLogWorker: Rolling segment log-0_4 to index:4
2023-01-06 13:31:37,367 [s1@group-97B1E7A74AC2-SegmentedRaftLogWorker] TRACE util.FileUtils (LogUtils.java:runAndLog(49)) - Successfully ran Atomic Files.move /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_0-4
2023-01-06 13:31:37,367 [s1@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(592)) - s1@group-97B1E7A74AC2-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_0 to /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_0-4
2023-01-06 13:31:37,379 [s2@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s2@group-97B1E7A74AC2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s2/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_5
2023-01-06 13:31:37,381 [s1@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(635)) - s1@group-97B1E7A74AC2-SegmentedRaftLogWorker: created new log segment /home/runner/work/ratis/ratis/ratis-test/target/test/data/55e59b61/MiniRaftClusterWithGrpc49b0e90/s1/0ee5898f-9ca7-47c6-a845-97b1e7a74ac2/current/log_inprogress_5
2023-01-06 13:31:37,813 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(119)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-97B1E7A74AC2:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-97B1E7A74AC2:t2, leader=s0, voted=s0, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t2, leader=s0, voted=s2, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:37,813 [Time-limited test] INFO  ratis.RaftTestUtil (RaftTestUtil.java:lambda$changeLeader$6(435)) - Changed leader from s1 to s0
2023-01-06 13:31:37,813 [Time-limited test] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:unblockRequestor(54)) - UnBlock requestor s1
2023-01-06 13:31:37,813 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should fail'
2023-01-06 13:31:37,813 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should fail" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-798189FBA1AC->s1: Stream completed: no reply for async request cid=2
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:203)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.AlreadyClosedException: client-798189FBA1AC->s1: Stream completed: no reply for async request cid=2
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.completeReplyExceptionally(GrpcClientProtocolClient.java:396)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.access$000(GrpcClientProtocolClient.java:300)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers$1.onCompleted(GrpcClientProtocolClient.java:336)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)
	at org.apache.ratis.grpc.metrics.intercept.client.MetricClientCallListener.onClose(MetricClientCallListener.java:47)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 more
2023-01-06 13:31:37,814 [Time-limited test] INFO  impl.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:unblock(142)) - unblock START_TRANSACTION
2023-01-06 13:31:37,815 [s0-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s0: unBlock request from s1
2023-01-06 13:31:37,814 [s2-server-thread2] INFO  util.CodeInjectionForTesting (BlockRequestHandlingInjection.java:execute(84)) - s2: unBlock request from s1
2023-01-06 13:31:37,816 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-01-06 13:31:37,817 [Time-limited test] DEBUG client.GrpcClientProtocolClient (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2023-01-06 13:31:37,819 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:testFailureCase(151)) - run 'request should timeout'
2023-01-06 13:31:37,825 [grpc-default-executor-7] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s0: Completed APPEND_ENTRIES, lastRequest: null
2023-01-06 13:31:37,828 [grpc-default-executor-7] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-97B1E7A74AC2->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:37,828 [grpc-default-executor-7] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-97B1E7A74AC2->s0: nextIndex: updateUnconditionally 4 -> 3
2023-01-06 13:31:37,828 [grpc-default-executor-7] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: null
2023-01-06 13:31:37,829 [grpc-default-executor-9] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s1@group-97B1E7A74AC2->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:37,829 [grpc-default-executor-9] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s1@group-97B1E7A74AC2->s2: nextIndex: updateUnconditionally 4 -> 3
2023-01-06 13:31:38,820 [Time-limited test] INFO  grpc.TestRaftServerWithGrpc (BaseTest.java:assertThrowable(133)) - The test "request should timeout" throws ExecutionException
java.util.concurrent.ExecutionException: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-798189FBA1AC->s1 request #3 timeout 1s
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:154)
	at org.apache.ratis.BaseTest.testFailureCase(BaseTest.java:167)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.runTestLeaderRestart(TestRaftServerWithGrpc.java:211)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:141)
	at org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:121)
	at org.apache.ratis.grpc.TestRaftServerWithGrpc.testLeaderRestart(TestRaftServerWithGrpc.java:169)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: org.apache.ratis.protocol.exceptions.TimeoutIOException: client-798189FBA1AC->s1 request #3 timeout 1s
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$timeoutCheck$5(GrpcClientProtocolClient.java:374)
	at java.base/java.util.Optional.ifPresent(Optional.java:183)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.handleReplyFuture(GrpcClientProtocolClient.java:378)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.timeoutCheck(GrpcClientProtocolClient.java:373)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient$AsyncStreamObservers.lambda$onNext$3(GrpcClientProtocolClient.java:366)
	at org.apache.ratis.util.TimeoutTimer.lambda$onTimeout$2(TimeoutTimer.java:101)
	at org.apache.ratis.util.LogUtils.runAndLog(LogUtils.java:38)
	at org.apache.ratis.util.LogUtils$1.run(LogUtils.java:79)
	at org.apache.ratis.util.TimeoutTimer$Task.run(TimeoutTimer.java:55)
	at java.base/java.util.TimerThread.mainLoop(Timer.java:556)
	at java.base/java.util.TimerThread.run(Timer.java:506)
2023-01-06 13:31:38,828 [grpc-default-executor-9] TRACE client.GrpcClientProtocolClient (GrpcClientProtocolClient.java:onNext(311)) - client-798189FBA1AC->s1: receive RaftClientReply:client-798189FBA1AC->s1@group-97B1E7A74AC2, cid=3, FAILED org.apache.ratis.protocol.exceptions.AlreadyClosedException: SlidingWindow$Server:2-OrderedRequestStreamObserver2 is closing: seq = 3 > nextToProcess = -1 will NEVER be processed; request = 3:null, logIndex=0, commits[]
2023-01-06 13:31:41,821 [Time-limited test] WARN  grpc.GrpcUtil (GrpcUtil.java:shutdownManagedChannel(223)) - Timed out gracefully shutting down connection: ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=1051, target=localhost:45899}}. 
2023-01-06 13:31:41,823 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(831)) - ************************************************************** 
2023-01-06 13:31:41,823 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(832)) - *** 
2023-01-06 13:31:41,823 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(833)) - ***     Stopping MiniRaftClusterWithGrpc
2023-01-06 13:31:41,823 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(834)) - *** 
2023-01-06 13:31:41,823 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(835)) - ************************************************************** 
2023-01-06 13:31:41,824 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(836)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-97B1E7A74AC2:t2, leader=s0, voted=s0, raftlog=Memoized:s0@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-97B1E7A74AC2:t2, leader=s0, voted=s0, raftlog=Memoized:s1@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-97B1E7A74AC2:t2, leader=s0, voted=s2, raftlog=Memoized:s2@group-97B1E7A74AC2-SegmentedRaftLog:OPENED:c6, conf=5: peers:[s0|rpc:localhost:34379|admin:localhost:39027|client:localhost:35569|dataStream:localhost:42895|priority:0|startupRole:FOLLOWER, s1|rpc:localhost:38961|admin:localhost:43933|client:localhost:45899|dataStream:localhost:42951|priority:0|startupRole:FOLLOWER, s2|rpc:localhost:35897|admin:localhost:33493|client:localhost:40265|dataStream:localhost:45529|priority:0|startupRole:FOLLOWER]|listeners:[], old=null RUNNING
2023-01-06 13:31:41,824 [MiniRaftCluster-26] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s0: close
2023-01-06 13:31:41,825 [MiniRaftCluster-27] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s1: close
2023-01-06 13:31:41,826 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:41,826 [s0-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s0@group-97B1E7A74AC2: shutdown
2023-01-06 13:31:41,826 [s0-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-97B1E7A74AC2,id=s0
2023-01-06 13:31:41,826 [s0-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - s0: shutdown s0@group-97B1E7A74AC2-LeaderStateImpl
2023-01-06 13:31:41,826 [s0-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - s0@group-97B1E7A74AC2-PendingRequests: sendNotLeaderResponses
2023-01-06 13:31:41,826 [MiniRaftCluster-26] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-01-06 13:31:41,827 [s0-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s0@group-97B1E7A74AC2-StateMachineUpdater: set stopIndex = 6
2023-01-06 13:31:41,827 [s0@group-97B1E7A74AC2->s1-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-97B1E7A74AC2->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:41,829 [s0-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s0@group-97B1E7A74AC2: applyIndex: 6
2023-01-06 13:31:41,829 [s0@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s0@group-97B1E7A74AC2-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:41,830 [s0@group-97B1E7A74AC2->s2-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(199)) - s0@group-97B1E7A74AC2->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-01-06 13:31:41,830 [grpc-default-executor-7] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#3-t2,previous=(t:2, i:5),leaderCommit=5,initializing? true,entries: size=1, first=(t:2, i:6), METADATAENTRY(c:5)
2023-01-06 13:31:41,831 [grpc-default-executor-9] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-97B1E7A74AC2->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:41,831 [grpc-default-executor-9] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - s0@group-97B1E7A74AC2->s2: nextIndex: updateUnconditionally 7 -> 6
2023-01-06 13:31:41,840 [s1-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s1@group-97B1E7A74AC2: shutdown
2023-01-06 13:31:41,840 [s1-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-97B1E7A74AC2,id=s1
2023-01-06 13:31:41,840 [s1-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s1: shutdown s1@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:41,840 [s1-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s1@group-97B1E7A74AC2-StateMachineUpdater: set stopIndex = 6
2023-01-06 13:31:41,840 [s1@group-97B1E7A74AC2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s1@group-97B1E7A74AC2-FollowerState was interrupted
2023-01-06 13:31:41,840 [s1-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s1@group-97B1E7A74AC2: applyIndex: 6
2023-01-06 13:31:41,841 [s1@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s1@group-97B1E7A74AC2-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:41,841 [s0-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s0@group-97B1E7A74AC2-SegmentedRaftLogWorker close()
2023-01-06 13:31:41,840 [MiniRaftCluster-28] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$7(412)) - s2: close
2023-01-06 13:31:41,843 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:41,843 [grpc-default-executor-1] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: null
2023-01-06 13:31:41,843 [grpc-default-executor-9] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s2: Completed APPEND_ENTRIES, lastRequest: null
2023-01-06 13:31:41,843 [s1-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s1@group-97B1E7A74AC2-SegmentedRaftLogWorker close()
2023-01-06 13:31:41,842 [grpc-default-executor-7] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#2-t2,previous=(t:2, i:5),leaderCommit=5,initializing? true,entries: size=1, first=(t:2, i:6), METADATAENTRY(c:5)
2023-01-06 13:31:41,846 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-01-06 13:31:41,846 [MiniRaftCluster-26] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-01-06 13:31:41,846 [grpc-default-executor-7] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-97B1E7A74AC2->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:41,846 [grpc-default-executor-7] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(136)) - s0@group-97B1E7A74AC2->s1-GrpcLogAppender: Failed to getClient for s1
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:120)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:57)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:414)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:41,847 [grpc-default-executor-9] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-97B1E7A74AC2->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:41,847 [grpc-default-executor-9] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(136)) - s0@group-97B1E7A74AC2->s1-GrpcLogAppender: Failed to getClient for s1
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:120)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:57)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:414)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:41,847 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(413)) - s0@group-97B1E7A74AC2->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-01-06 13:31:41,847 [grpc-default-executor-3] WARN  server.GrpcLogAppender (GrpcLogAppender.java:resetClient(136)) - s0@group-97B1E7A74AC2->s2-GrpcLogAppender: Failed to getClient for s2
org.apache.ratis.protocol.exceptions.AlreadyClosedException: s0 is already CLOSED
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:61)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.getClient(GrpcLogAppender.java:115)
	at org.apache.ratis.grpc.server.GrpcLogAppender.resetClient(GrpcLogAppender.java:120)
	at org.apache.ratis.grpc.server.GrpcLogAppender.access$500(GrpcLogAppender.java:57)
	at org.apache.ratis.grpc.server.GrpcLogAppender$AppendLogResponseHandler.onCompleted(GrpcLogAppender.java:414)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:485)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener$3.run(DelayedClientCall.java:468)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.delayOrExecute(DelayedClientCall.java:432)
	at org.apache.ratis.thirdparty.io.grpc.internal.DelayedClientCall$DelayedListener.onClose(DelayedClientCall.java:465)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:562)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:743)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:722)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
2023-01-06 13:31:41,848 [ForkJoinPool.commonPool-worker-3] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s2 Close channels
2023-01-06 13:31:41,849 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:41,849 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:41,849 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:41,850 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:41,850 [MiniRaftCluster-26] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s0: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:41,851 [JvmPauseMonitor25] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s0: Stopped
2023-01-06 13:31:41,852 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:41,852 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:41,852 [s2-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(462)) - s2@group-97B1E7A74AC2: shutdown
2023-01-06 13:31:41,852 [s2-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-97B1E7A74AC2,id=s2
2023-01-06 13:31:41,852 [s2-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - s2: shutdown s2@group-97B1E7A74AC2-FollowerState
2023-01-06 13:31:41,852 [s2-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(154)) - s2@group-97B1E7A74AC2-StateMachineUpdater: set stopIndex = 6
2023-01-06 13:31:41,852 [s2@group-97B1E7A74AC2-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - s2@group-97B1E7A74AC2-FollowerState was interrupted
2023-01-06 13:31:41,852 [s2-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(414)) - s2@group-97B1E7A74AC2: applyIndex: 6
2023-01-06 13:31:41,852 [s2@group-97B1E7A74AC2-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(334)) - s2@group-97B1E7A74AC2-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-01-06 13:31:41,853 [s2-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(247)) - s2@group-97B1E7A74AC2-SegmentedRaftLogWorker close()
2023-01-06 13:31:41,854 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:41,854 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:41,854 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService now
2023-01-06 13:31:41,854 [MiniRaftCluster-27] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s1: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:41,854 [JvmPauseMonitor26] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s1: Stopped
2023-01-06 13:31:41,854 [MiniRaftCluster-28] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s0 Close channels
2023-01-06 13:31:41,860 [MiniRaftCluster-28] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - s1 Close channels
2023-01-06 13:31:41,861 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcClientProtocolService successfully
2023-01-06 13:31:41,861 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server GrpcServerProtocolService now
2023-01-06 13:31:41,861 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server GrpcServerProtocolService successfully
2023-01-06 13:31:41,861 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(311)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService now
2023-01-06 13:31:41,862 [MiniRaftCluster-28] INFO  server.GrpcService (GrpcService.java:closeImpl(320)) - s2: shutdown server org.apache.ratis.grpc.server.GrpcAdminProtocolService successfully
2023-01-06 13:31:41,862 [JvmPauseMonitor27] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-s2: Stopped
2023-01-06 13:31:41,862 [Time-limited test] INFO  impl.MiniRaftCluster (MiniRaftCluster.java:shutdown(855)) - MiniRaftClusterWithGrpc shutdown completed
